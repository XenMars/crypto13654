"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[72],{8719:(t,e,i)=>{i.d(e,{H:()=>r});var s=i(1051);class r extends s.c{constructor(t=[]){super(),this.cameras=t}}r.prototype.isArrayCamera=!0},1929:(t,e,i)=>{i.d(e,{V:()=>o});var s=i(9203),r=i(6469);class o extends r.T{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new s.y,this.projectionMatrix=new s.y,this.projectionMatrixInverse=new s.y}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}o.prototype.isCamera=!0},2496:(t,e,i)=>{i.d(e,{_:()=>a});var s=i(6469),r=i(6881),o=i(1051);const h=90;class a extends s.T{constructor(t,e,i){if(super(),this.type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=i;const s=new o.c(h,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new r.P(1,0,0)),this.add(s);const a=new o.c(h,1,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new r.P(-1,0,0)),this.add(a);const n=new o.c(h,1,t,e);n.layers=this.layers,n.up.set(0,0,1),n.lookAt(new r.P(0,1,0)),this.add(n);const c=new o.c(h,1,t,e);c.layers=this.layers,c.up.set(0,0,-1),c.lookAt(new r.P(0,-1,0)),this.add(c);const l=new o.c(h,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new r.P(0,0,1)),this.add(l);const p=new o.c(h,1,t,e);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new r.P(0,0,-1)),this.add(p)}update(t,e){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[s,r,o,h,a,n]=this.children,c=t.xr.enabled,l=t.getRenderTarget();t.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,s),t.setRenderTarget(i,1),t.render(e,r),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,h),t.setRenderTarget(i,4),t.render(e,a),i.texture.generateMipmaps=p,t.setRenderTarget(i,5),t.render(e,n),t.setRenderTarget(l),t.xr.enabled=c}}},3131:(t,e,i)=>{i.d(e,{i:()=>r});var s=i(1929);class r extends s.V{constructor(t=-1,e=1,i=1,s=-1,r=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,i,s,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-t,o=i+t,h=s+e,a=s-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,o=r+t*this.view.width,h-=e*this.view.offsetY,a=h-e*this.view.height}this.projectionMatrix.makeOrthographic(r,o,h,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}r.prototype.isOrthographicCamera=!0},1051:(t,e,i)=>{i.d(e,{c:()=>o});var s=i(1929),r=i(2043);class o extends s.V{constructor(t=50,e=1,i=.1,s=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*r.I3*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*r.qW*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*r.I3*Math.atan(Math.tan(.5*r.qW*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,s,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*r.qW*this.fov)/this.zoom,i=2*e,s=this.aspect*i,o=-.5*s;const h=this.view;if(null!==this.view&&this.view.enabled){const t=h.fullWidth,r=h.fullHeight;o+=h.offsetX*s/t,e-=h.offsetY*i/r,s*=h.width/t,i*=h.height/r}const a=this.filmOffset;0!==a&&(o+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}o.prototype.isPerspectiveCamera=!0},1661:(t,e,i)=>{i.d(e,{UZH:()=>s,RsA:()=>r,QmN:()=>o,PeU:()=>h,tm_:()=>a,S2y:()=>n,_iA:()=>c,ntZ:()=>l,dwk:()=>p,Wl3:()=>f,_Li:()=>u,ehD:()=>d,esl:()=>v,jFi:()=>w,bdR:()=>m,WMw:()=>g,N4l:()=>b,M5h:()=>x,Xaj:()=>j,bGH:()=>y,Wbm:()=>M,rOj:()=>W,r_:()=>O,Sm8:()=>P,c8b:()=>T,ghN:()=>z,KhW:()=>A,iWC:()=>C,k74:()=>k,LgZ:()=>R,fSK:()=>L,Hy8:()=>I,Vdb:()=>G,Wpd:()=>H,RlZ:()=>Y,BVF:()=>V,Se2:()=>D,Zr5:()=>F,vCF:()=>N,eD:()=>S,ksN:()=>E,w$m:()=>_,M6v:()=>J,Ns1:()=>X,qhX:()=>B,NDo:()=>Z,uL9:()=>q,EoG:()=>K,CdI:()=>Q,YGz:()=>$,LY2:()=>U,dZ3:()=>tt,xfE:()=>et,fY$:()=>it,vxC:()=>st,dSO:()=>rt,Bf4:()=>ot,g8_:()=>ht,SVc:()=>at,rpg:()=>nt,uWy:()=>ct,OoA:()=>lt,TyD:()=>pt,YLQ:()=>ft,aH4:()=>ut,wem:()=>dt,qyh:()=>vt,D1R:()=>wt,ywz:()=>mt,T95:()=>gt,iAb:()=>bt,LsT:()=>xt,Kz5:()=>jt,JQ4:()=>yt,VzW:()=>Mt,cLu:()=>Wt,k0A:()=>Ot,irR:()=>Pt,XNv:()=>Tt,wJv:()=>zt,OTo:()=>At,UCm:()=>Ct,wk1:()=>kt,Y8D:()=>Rt,cRx:()=>Lt,aoB:()=>It,qkB:()=>Gt,brP:()=>Ht,hEm:()=>Yt,D9w:()=>Vt,av9:()=>Dt,CtA:()=>Ft,F5G:()=>Nt,E2K:()=>St,wuA:()=>Et,BFQ:()=>_t,v3W:()=>Jt,ILR:()=>Xt,_AM:()=>Bt,vCx:()=>Zt,eaV:()=>qt,CaW:()=>Kt,fto:()=>Qt,l0P:()=>$t,ekQ:()=>Ut,ptH:()=>te,jZA:()=>ee,y2t:()=>ie,gi4:()=>se,Djp:()=>re,BG$:()=>oe,NYV:()=>he,xJs:()=>ae,pKu:()=>ne,GG6:()=>ce,Gih:()=>le,FUD:()=>pe,iiP:()=>fe,SvJ:()=>ue,bsb:()=>de,APR:()=>ve,Abz:()=>we,v6B:()=>me,pnl:()=>ge,OS$:()=>be,_wO:()=>xe,bcs:()=>je,Y5S:()=>ye,Wso:()=>Me,p1$:()=>We,I0h:()=>Oe,Yjz:()=>Pe,ePn:()=>Te,HBG:()=>ze,rnI:()=>Ae,knz:()=>Ce,pMV:()=>ke,KC9:()=>Re,LgE:()=>Le,Inb:()=>Ie,gMp:()=>Ge,z81:()=>He,mSO:()=>Ye,IOt:()=>Ve,PA7:()=>De,x5V:()=>Fe,cum:()=>Ne,W2J:()=>Se,LSk:()=>Ee});const s="135",r={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},h=0,a=1,n=2,c=1,l=2,p=3,f=0,u=1,d=2,v=1,w=0,m=1,g=2,b=3,x=4,j=5,y=100,M=101,W=102,O=103,P=104,T=200,z=201,A=202,C=203,k=204,R=205,L=206,I=207,G=208,H=209,Y=210,V=0,D=1,F=2,N=3,S=4,E=5,_=6,J=7,X=0,B=1,Z=2,q=0,K=1,Q=2,$=3,U=4,tt=5,et=300,it=301,st=302,rt=303,ot=304,ht=306,at=307,nt=1e3,ct=1001,lt=1002,pt=1003,ft=1004,ut=1005,dt=1006,vt=1007,wt=1008,mt=1009,gt=1010,bt=1011,xt=1012,jt=1013,yt=1014,Mt=1015,Wt=1016,Ot=1017,Pt=1018,Tt=1019,zt=1020,At=1021,Ct=1022,kt=1023,Rt=1024,Lt=1025,It=kt,Gt=1026,Ht=1027,Yt=1028,Vt=1029,Dt=1030,Ft=1031,Nt=1032,St=1033,Et=33776,_t=33777,Jt=33778,Xt=33779,Bt=35840,Zt=35841,qt=35842,Kt=35843,Qt=36196,$t=37492,Ut=37496,te=37808,ee=37809,ie=37810,se=37811,re=37812,oe=37813,he=37814,ae=37815,ne=37816,ce=37817,le=37818,pe=37819,fe=37820,ue=37821,de=36492,ve=37840,we=37841,me=37842,ge=37843,be=37844,xe=37845,je=37846,ye=37847,Me=37848,We=37849,Oe=37850,Pe=37851,Te=37852,ze=37853,Ae=3e3,Ce=3001,ke=3007,Re=3002,Le=3004,Ie=3005,Ge=3006,He=3200,Ye=3201,Ve=0,De=1,Fe=7680,Ne=519,Se=35044,Ee="300 es"}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[557],{3645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(n)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(a[c]=!0)}for(var p=0;p<t.length;p++){var f=[].concat(t[p]);n&&a[f[0]]||(void 0!==s&&(void 0===f[5]||(f[1]="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {").concat(f[1],"}")),f[5]=s),r&&(f[2]?(f[1]="@media ".concat(f[2]," {").concat(f[1],"}"),f[2]=r):f[2]=r),i&&(f[4]?(f[1]="@supports (".concat(f[4],") {").concat(f[1],"}"),f[4]=i):f[4]="".concat(i)),e.push(f))}},e}},8081:t=>{t.exports=function(t){return t[1]}},9975:(t,e,r)=>{r.d(e,{_Z:()=>yt});var n,i,s,a,o,c,p,f=r(5317),l={},u=180/Math.PI,h=Math.PI/180,g=Math.atan2,d=/([A-Z])/g,x=/(?:left|right|width|margin|padding|x)/i,m=/[\s,\(]\S/,y={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},v=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},b=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},w=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},O=function(t,e){var r=e.s+e.c*t;e.set(e.t,e.p,~~(r+(r<0?-.5:.5))+e.u,e)},_=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},P=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},M=function(t,e,r){return t.style[e]=r},F=function(t,e,r){return t.style.setProperty(e,r)},C=function(t,e,r){return t._gsap[e]=r},A=function(t,e,r){return t._gsap.scaleX=t._gsap.scaleY=r},S=function(t,e,r,n,i){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(i,s)},Y=function(t,e,r,n,i){var s=t._gsap;s[e]=r,s.renderTransform(i,s)},B="transform",k=B+"Origin",X=function(t,e){var r=i.createElementNS?i.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):i.createElement(t);return r.style?r:i.createElement(t)},T=function t(e,r,n){var i=getComputedStyle(e);return i[r]||i.getPropertyValue(r.replace(d,"-$1").toLowerCase())||i.getPropertyValue(r)||!n&&t(e,W(r)||r,1)||""},z="O,Moz,ms,Ms,Webkit".split(","),W=function(t,e,r){var n=(e||o).style,i=5;if(t in n&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(z[i]+t in n););return i<0?null:(3===i?"ms":i>=0?z[i]:"")+t},I=function(){"undefined"!=typeof window&&window.document&&(n=window,i=n.document,s=i.documentElement,o=X("div")||{style:{}},X("div"),B=W(B),k=B+"Origin",o.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",p=!!W("perspective"),a=1)},E=function t(e){var r,n=X("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,a=this.nextSibling,o=this.style.cssText;if(s.appendChild(n),n.appendChild(this),this.style.display="block",e)try{r=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(r=this._gsapBBox());return i&&(a?i.insertBefore(this,a):i.appendChild(this)),s.removeChild(n),this.style.cssText=o,r},N=function(t,e){for(var r=e.length;r--;)if(t.hasAttribute(e[r]))return t.getAttribute(e[r])},D=function(t){var e;try{e=t.getBBox()}catch(r){e=E.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===E||(e=E.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+N(t,["x","cx","x1"])||0,y:+N(t,["y","cy","y1"])||0,width:0,height:0}},V=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!D(t))},q=function(t,e){if(e){var r=t.style;e in l&&e!==k&&(e=B),r.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),r.removeProperty(e.replace(d,"-$1").toLowerCase())):r.removeAttribute(e)}},G=function(t,e,r,n,i,s){var a=new f.Fo(t._pt,e,r,0,1,s?P:_);return t._pt=a,a.b=n,a.e=i,t._props.push(r),a},Z={deg:1,rad:1,turn:1},j=function t(e,r,n,s){var a,c,p,u,h=parseFloat(n)||0,g=(n+"").trim().substr((h+"").length)||"px",d=o.style,m=x.test(r),y="svg"===e.tagName.toLowerCase(),v=(y?"client":"offset")+(m?"Width":"Height"),b=100,w="px"===s,O="%"===s;return s===g||!h||Z[s]||Z[g]?h:("px"!==g&&!w&&(h=t(e,r,n,"px")),u=e.getCTM&&V(e),!O&&"%"!==g||!l[r]&&!~r.indexOf("adius")?(d[m?"width":"height"]=b+(w?g:s),c=~r.indexOf("adius")||"em"===s&&e.appendChild&&!y?e:e.parentNode,u&&(c=(e.ownerSVGElement||{}).parentNode),c&&c!==i&&c.appendChild||(c=i.body),(p=c._gsap)&&O&&p.width&&m&&p.time===f.xr.time?(0,f.Pr)(h/p.width*b):((O||"%"===g)&&(d.position=T(e,"position")),c===e&&(d.position="static"),c.appendChild(o),a=o[v],c.removeChild(o),d.position="absolute",m&&O&&((p=(0,f.DY)(c)).time=f.xr.time,p.width=c[v]),(0,f.Pr)(w?a*h/b:a&&h?b/a*h:0))):(a=u?e.getBBox()[m?"width":"height"]:e[v],(0,f.Pr)(O?h/a*b:h/100*a)))},L=function(t,e,r,n){var i;return a||I(),e in y&&"transform"!==e&&~(e=y[e]).indexOf(",")&&(e=e.split(",")[0]),l[e]&&"transform"!==e?(i=nt(t,n),i="transformOrigin"!==e?i[e]:i.svg?i.origin:it(T(t,k))+" "+i.zOrigin+"px"):(!(i=t.style[e])||"auto"===i||n||~(i+"").indexOf("calc("))&&(i=$[e]&&$[e](t,e,r)||T(t,e)||(0,f.Ok)(t,e)||("opacity"===e?1:0)),r&&!~(i+"").trim().indexOf(" ")?j(t,e,i,r)+r:i},R=function(t,e,r,n){if(!r||"none"===r){var i=W(e,t,1),s=i&&T(t,i,1);s&&s!==r?(e=i,r=s):"borderColor"===e&&(r=T(t,"borderTopColor"))}var a,o,c,p,l,u,h,g,d,x,m,y,v=new f.Fo(this._pt,t.style,e,0,1,f.Ks),b=0,w=0;if(v.b=r,v.e=n,r+="","auto"===(n+="")&&(t.style[e]=n,n=T(t,e)||n,t.style[e]=r),a=[r,n],(0,f.kr)(a),n=a[1],c=(r=a[0]).match(f.d4)||[],(n.match(f.d4)||[]).length){for(;o=f.d4.exec(n);)h=o[0],d=n.substring(b,o.index),l?l=(l+1)%5:"rgba("!==d.substr(-5)&&"hsla("!==d.substr(-5)||(l=1),h!==(u=c[w++]||"")&&(p=parseFloat(u)||0,m=u.substr((p+"").length),(y="="===h.charAt(1)?+(h.charAt(0)+"1"):0)&&(h=h.substr(2)),g=parseFloat(h),x=h.substr((g+"").length),b=f.d4.lastIndex-x.length,x||(x=x||f.Fc.units[e]||m,b===n.length&&(n+=x,v.e+=x)),m!==x&&(p=j(t,e,u,x)||0),v._pt={_next:v._pt,p:d||1===w?d:",",s:p,c:y?y*g:g-p,m:l&&l<4||"zIndex"===e?Math.round:0});v.c=b<n.length?n.substring(b,n.length):""}else v.r="display"===e&&"none"===n?P:_;return f.bQ.test(n)&&(v.e=0),this._pt=v,v},H={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},U=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var r,n,i,s=e.t,a=s.style,o=e.u,c=s._gsap;if("all"===o||!0===o)a.cssText="",n=1;else for(i=(o=o.split(",")).length;--i>-1;)r=o[i],l[r]&&(n=1,r="transformOrigin"===r?k:B),q(s,r);n&&(q(s,B),c&&(c.svg&&s.removeAttribute("transform"),nt(s,1),c.uncache=1))}},$={clearProps:function(t,e,r,n,i){if("isFromStart"!==i.data){var s=t._pt=new f.Fo(t._pt,e,r,0,0,U);return s.u=n,s.pr=-10,s.tween=i,t._props.push(r),1}}},J=[1,0,0,1,0,0],K={},Q=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},tt=function(t){var e=T(t,B);return Q(e)?J:e.substr(7).match(f.SI).map(f.Pr)},et=function(t,e){var r,n,i,a,o=t._gsap||(0,f.DY)(t),c=t.style,p=tt(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(p=[(i=t.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?J:p:(p!==J||t.offsetParent||t===s||o.svg||(i=c.display,c.display="block",(r=t.parentNode)&&t.offsetParent||(a=1,n=t.nextSibling,s.appendChild(t)),p=tt(t),i?c.display=i:q(t,"display"),a&&(n?r.insertBefore(t,n):r?r.appendChild(t):s.removeChild(t))),e&&p.length>6?[p[0],p[1],p[4],p[5],p[12],p[13]]:p)},rt=function(t,e,r,n,i,s){var a,o,c,p=t._gsap,f=i||et(t,!0),l=p.xOrigin||0,u=p.yOrigin||0,h=p.xOffset||0,g=p.yOffset||0,d=f[0],x=f[1],m=f[2],y=f[3],v=f[4],b=f[5],w=e.split(" "),O=parseFloat(w[0])||0,_=parseFloat(w[1])||0;r?f!==J&&(o=d*y-x*m)&&(c=O*(-x/o)+_*(d/o)-(d*b-x*v)/o,O=O*(y/o)+_*(-m/o)+(m*b-y*v)/o,_=c):(O=(a=D(t)).x+(~w[0].indexOf("%")?O/100*a.width:O),_=a.y+(~(w[1]||w[0]).indexOf("%")?_/100*a.height:_)),n||!1!==n&&p.smooth?(v=O-l,b=_-u,p.xOffset=h+(v*d+b*m)-v,p.yOffset=g+(v*x+b*y)-b):p.xOffset=p.yOffset=0,p.xOrigin=O,p.yOrigin=_,p.smooth=!!n,p.origin=e,p.originIsAbsolute=!!r,t.style[k]="0px 0px",s&&(G(s,p,"xOrigin",l,O),G(s,p,"yOrigin",u,_),G(s,p,"xOffset",h,p.xOffset),G(s,p,"yOffset",g,p.yOffset)),t.setAttribute("data-svg-origin",O+" "+_)},nt=function(t,e){var r=t._gsap||new f.l1(t);if("x"in r&&!e&&!r.uncache)return r;var n,i,s,a,o,c,l,d,x,m,y,v,b,w,O,_,P,M,F,C,A,S,Y,X,z,W,I,E,N,D,q,G,Z=t.style,j=r.scaleX<0,L="px",R="deg",H=T(t,k)||"0";return n=i=s=c=l=d=x=m=y=0,a=o=1,r.svg=!(!t.getCTM||!V(t)),w=et(t,r.svg),r.svg&&(X=(!r.uncache||"0px 0px"===H)&&!e&&t.getAttribute("data-svg-origin"),rt(t,X||H,!!X||r.originIsAbsolute,!1!==r.smooth,w)),v=r.xOrigin||0,b=r.yOrigin||0,w!==J&&(M=w[0],F=w[1],C=w[2],A=w[3],n=S=w[4],i=Y=w[5],6===w.length?(a=Math.sqrt(M*M+F*F),o=Math.sqrt(A*A+C*C),c=M||F?g(F,M)*u:0,(x=C||A?g(C,A)*u+c:0)&&(o*=Math.abs(Math.cos(x*h))),r.svg&&(n-=v-(v*M+b*C),i-=b-(v*F+b*A))):(G=w[6],D=w[7],I=w[8],E=w[9],N=w[10],q=w[11],n=w[12],i=w[13],s=w[14],l=(O=g(G,N))*u,O&&(X=S*(_=Math.cos(-O))+I*(P=Math.sin(-O)),z=Y*_+E*P,W=G*_+N*P,I=S*-P+I*_,E=Y*-P+E*_,N=G*-P+N*_,q=D*-P+q*_,S=X,Y=z,G=W),d=(O=g(-C,N))*u,O&&(_=Math.cos(-O),q=A*(P=Math.sin(-O))+q*_,M=X=M*_-I*P,F=z=F*_-E*P,C=W=C*_-N*P),c=(O=g(F,M))*u,O&&(X=M*(_=Math.cos(O))+F*(P=Math.sin(O)),z=S*_+Y*P,F=F*_-M*P,Y=Y*_-S*P,M=X,S=z),l&&Math.abs(l)+Math.abs(c)>359.9&&(l=c=0,d=180-d),a=(0,f.Pr)(Math.sqrt(M*M+F*F+C*C)),o=(0,f.Pr)(Math.sqrt(Y*Y+G*G)),O=g(S,Y),x=Math.abs(O)>2e-4?O*u:0,y=q?1/(q<0?-q:q):0),r.svg&&(X=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!Q(T(t,B)),X&&t.setAttribute("transform",X))),Math.abs(x)>90&&Math.abs(x)<270&&(j?(a*=-1,x+=c<=0?180:-180,c+=c<=0?180:-180):(o*=-1,x+=x<=0?180:-180)),r.x=n-((r.xPercent=n&&(r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-n)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+L,r.y=i-((r.yPercent=i&&(r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+L,r.z=s+L,r.scaleX=(0,f.Pr)(a),r.scaleY=(0,f.Pr)(o),r.rotation=(0,f.Pr)(c)+R,r.rotationX=(0,f.Pr)(l)+R,r.rotationY=(0,f.Pr)(d)+R,r.skewX=x+R,r.skewY=m+R,r.transformPerspective=y+L,(r.zOrigin=parseFloat(H.split(" ")[2])||0)&&(Z[k]=it(H)),r.xOffset=r.yOffset=0,r.force3D=f.Fc.force3D,r.renderTransform=r.svg?lt:p?ft:at,r.uncache=0,r},it=function(t){return(t=t.split(" "))[0]+" "+t[1]},st=function(t,e,r){var n=(0,f.Wy)(e);return(0,f.Pr)(parseFloat(e)+parseFloat(j(t,"x",r+"px",n)))+n},at=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,ft(t,e)},ot="0deg",ct="0px",pt=") ",ft=function(t,e){var r=e||this,n=r.xPercent,i=r.yPercent,s=r.x,a=r.y,o=r.z,c=r.rotation,p=r.rotationY,f=r.rotationX,l=r.skewX,u=r.skewY,g=r.scaleX,d=r.scaleY,x=r.transformPerspective,m=r.force3D,y=r.target,v=r.zOrigin,b="",w="auto"===m&&t&&1!==t||!0===m;if(v&&(f!==ot||p!==ot)){var O,_=parseFloat(p)*h,P=Math.sin(_),M=Math.cos(_);_=parseFloat(f)*h,O=Math.cos(_),s=st(y,s,P*O*-v),a=st(y,a,-Math.sin(_)*-v),o=st(y,o,M*O*-v+v)}x!==ct&&(b+="perspective("+x+pt),(n||i)&&(b+="translate("+n+"%, "+i+"%) "),(w||s!==ct||a!==ct||o!==ct)&&(b+=o!==ct||w?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+pt),c!==ot&&(b+="rotate("+c+pt),p!==ot&&(b+="rotateY("+p+pt),f!==ot&&(b+="rotateX("+f+pt),l===ot&&u===ot||(b+="skew("+l+", "+u+pt),1===g&&1===d||(b+="scale("+g+", "+d+pt),y.style[B]=b||"translate(0, 0)"},lt=function(t,e){var r,n,i,s,a,o=e||this,c=o.xPercent,p=o.yPercent,l=o.x,u=o.y,g=o.rotation,d=o.skewX,x=o.skewY,m=o.scaleX,y=o.scaleY,v=o.target,b=o.xOrigin,w=o.yOrigin,O=o.xOffset,_=o.yOffset,P=o.forceCSS,M=parseFloat(l),F=parseFloat(u);g=parseFloat(g),d=parseFloat(d),(x=parseFloat(x))&&(d+=x=parseFloat(x),g+=x),g||d?(g*=h,d*=h,r=Math.cos(g)*m,n=Math.sin(g)*m,i=Math.sin(g-d)*-y,s=Math.cos(g-d)*y,d&&(x*=h,a=Math.tan(d-x),i*=a=Math.sqrt(1+a*a),s*=a,x&&(a=Math.tan(x),r*=a=Math.sqrt(1+a*a),n*=a)),r=(0,f.Pr)(r),n=(0,f.Pr)(n),i=(0,f.Pr)(i),s=(0,f.Pr)(s)):(r=m,s=y,n=i=0),(M&&!~(l+"").indexOf("px")||F&&!~(u+"").indexOf("px"))&&(M=j(v,"x",l,"px"),F=j(v,"y",u,"px")),(b||w||O||_)&&(M=(0,f.Pr)(M+b-(b*r+w*i)+O),F=(0,f.Pr)(F+w-(b*n+w*s)+_)),(c||p)&&(a=v.getBBox(),M=(0,f.Pr)(M+c/100*a.width),F=(0,f.Pr)(F+p/100*a.height)),a="matrix("+r+","+n+","+i+","+s+","+M+","+F+")",v.setAttribute("transform",a),P&&(v.style[B]=a)},ut=function(t,e,r,n,i,s){var a,o,c=360,p=(0,f.r9)(i),l=parseFloat(i)*(p&&~i.indexOf("rad")?u:1),h=s?l*s:l-n,g=n+h+"deg";return p&&("short"===(a=i.split("_")[1])&&(h%=c)!==h%180&&(h+=h<0?c:-360),"cw"===a&&h<0?h=(h+36e9)%c-~~(h/c)*c:"ccw"===a&&h>0&&(h=(h-36e9)%c-~~(h/c)*c)),t._pt=o=new f.Fo(t._pt,e,r,n,h,b),o.e=g,o.u="deg",t._props.push(r),o},ht=function(t,e){for(var r in e)t[r]=e[r];return t},gt=function(t,e,r){var n,i,s,a,o,c,p,u=ht({},r._gsap),h=r.style;for(i in u.svg?(s=r.getAttribute("transform"),r.setAttribute("transform",""),h[B]=e,n=nt(r,1),q(r,B),r.setAttribute("transform",s)):(s=getComputedStyle(r)[B],h[B]=e,n=nt(r,1),h[B]=s),l)(s=u[i])!==(a=n[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(o=(0,f.Wy)(s)!==(p=(0,f.Wy)(a))?j(r,i,s,p):parseFloat(s),c=parseFloat(a),t._pt=new f.Fo(t._pt,n,i,o,c-o,v),t._pt.u=p||0,t._props.push(i));ht(n,u)};(0,f.fS)("padding,margin,Width,Radius",(function(t,e){var r="Top",n="Right",i="Bottom",s="Left",a=(e<3?[r,n,i,s]:[r+s,r+n,i+n,i+s]).map((function(r){return e<2?t+r:"border"+r+t}));$[e>1?"border"+t:t]=function(t,e,r,n,i){var s,o;if(arguments.length<4)return s=a.map((function(e){return L(t,e,r)})),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(n+"").split(" "),o={},a.forEach((function(t,e){return o[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,o,i)}}));var dt,xt,mt,yt={name:"css",register:I,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,r,n,i){var s,o,c,p,u,h,g,d,x,b,_,P,M,F,C,A,S,Y,k,X=this._props,T=t.style,z=r.vars.startAt;for(g in a||I(),e)if("autoRound"!==g&&(o=e[g],!f.$i[g]||!(0,f.if)(g,e,r,n,t,i)))if(u=typeof o,h=$[g],"function"===u&&(u=typeof(o=o.call(r,n,t,i))),"string"===u&&~o.indexOf("random(")&&(o=(0,f.UI)(o)),h)h(this,t,g,o,r)&&(C=1);else if("--"===g.substr(0,2))s=(getComputedStyle(t).getPropertyValue(g)+"").trim(),o+="",f.GN.lastIndex=0,f.GN.test(s)||(d=(0,f.Wy)(s),x=(0,f.Wy)(o)),x?d!==x&&(s=j(t,g,s,x)+x):d&&(o+=d),this.add(T,"setProperty",s,o,n,i,0,0,g),X.push(g);else if("undefined"!==u){if(z&&g in z?(s="function"==typeof z[g]?z[g].call(r,n,t,i):z[g],g in f.Fc.units&&!(0,f.Wy)(s)&&(s+=f.Fc.units[g]),(0,f.r9)(s)&&~s.indexOf("random(")&&(s=(0,f.UI)(s)),"="===(s+"").charAt(1)&&(s=L(t,g))):s=L(t,g),p=parseFloat(s),(b="string"===u&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0)&&(o=o.substr(2)),c=parseFloat(o),g in y&&("autoAlpha"===g&&(1===p&&"hidden"===L(t,"visibility")&&c&&(p=0),G(this,T,"visibility",p?"inherit":"hidden",c?"inherit":"hidden",!c)),"scale"!==g&&"transform"!==g&&~(g=y[g]).indexOf(",")&&(g=g.split(",")[0])),_=g in l)if(P||((M=t._gsap).renderTransform&&!e.parseTransform||nt(t,e.parseTransform),F=!1!==e.smoothOrigin&&M.smooth,(P=this._pt=new f.Fo(this._pt,T,B,0,1,M.renderTransform,M,0,-1)).dep=1),"scale"===g)this._pt=new f.Fo(this._pt,M,"scaleY",M.scaleY,(b?b*c:c-M.scaleY)||0),X.push("scaleY",g),g+="X";else{if("transformOrigin"===g){S=void 0,Y=void 0,k=void 0,S=(A=o).split(" "),Y=S[0],k=S[1]||"50%","top"!==Y&&"bottom"!==Y&&"left"!==k&&"right"!==k||(A=Y,Y=k,k=A),S[0]=H[Y]||Y,S[1]=H[k]||k,o=S.join(" "),M.svg?rt(t,o,0,F,0,this):((x=parseFloat(o.split(" ")[2])||0)!==M.zOrigin&&G(this,M,"zOrigin",M.zOrigin,x),G(this,T,g,it(s),it(o)));continue}if("svgOrigin"===g){rt(t,o,1,F,0,this);continue}if(g in K){ut(this,M,g,p,o,b);continue}if("smoothOrigin"===g){G(this,M,"smooth",M.smooth,o);continue}if("force3D"===g){M[g]=o;continue}if("transform"===g){gt(this,o,t);continue}}else g in T||(g=W(g)||g);if(_||(c||0===c)&&(p||0===p)&&!m.test(o)&&g in T)c||(c=0),(d=(s+"").substr((p+"").length))!==(x=(0,f.Wy)(o)||(g in f.Fc.units?f.Fc.units[g]:d))&&(p=j(t,g,s,x)),this._pt=new f.Fo(this._pt,_?M:T,g,p,b?b*c:c-p,_||"px"!==x&&"zIndex"!==g||!1===e.autoRound?v:O),this._pt.u=x||0,d!==x&&"%"!==x&&(this._pt.b=s,this._pt.r=w);else if(g in T)R.call(this,t,g,s,o);else{if(!(g in t)){(0,f.lC)(g,o);continue}this.add(t,g,s||t[g],o,n,i)}X.push(g)}C&&(0,f.JV)(this)},get:L,aliases:y,getSetter:function(t,e,r){var n=y[e];return n&&n.indexOf(",")<0&&(e=n),e in l&&e!==k&&(t._gsap.x||L(t,"x"))?r&&c===r?"scale"===e?A:C:(c=r||{})&&("scale"===e?S:Y):t.style&&!(0,f.m2)(t.style[e])?M:~e.indexOf("-")?F:(0,f.S5)(t,e)},core:{_removeProperty:q,_getMatrix:et}};f.p8.utils.checkPrefix=W,dt="x,y,z,scale,scaleX,scaleY,xPercent,yPercent",xt="rotation,rotationX,rotationY,skewX,skewY",mt=(0,f.fS)(dt+","+xt+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){l[t]=1})),(0,f.fS)(xt,(function(t){f.Fc.units[t]="deg",K[t]=1})),y[mt[13]]=dt+","+xt,(0,f.fS)("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");y[e[1]]=mt[e[0]]})),(0,f.fS)("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){f.Fc.units[t]="px"})),f.p8.registerPlugin(yt)}}]);
(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[25],{4679:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(8081),a=i.n(n),s=i(3645),r=i.n(s)()(a());r.push([t.id,"body{background:#040d21;margin:0;color:#627597}article{background:#fff;width:100%;height:100vh;display:flex;flex-direction:column}article h1{padding:0;margin:auto;color:#000;font-size:4rem;font-family:sans-serif}article #scene1,article #scene2,article #scene3,article #scene4{margin:auto;height:80vh;width:100%;background:#fff}article #scene1 canvas,article #scene2 canvas,article #scene3 canvas,article #scene4 canvas{max-width:100%}",""]);const o=r},5384:t=>{t.exports="uniform float time;\nuniform sampler2D tex;\nuniform vec3 ucol;\nvarying vec3 vPos;\nvarying vec2 vUv;\nfloat fresnel(float bias, float scale, float power, vec3 I, vec3 N) {\n\treturn bias + (scale * pow(1.0 + dot(I, N), power));\n}\nvoid main() {\n\tvec3 normal = normalize(vPos);\n\tvec3 lig = normalize(normal);\n\tfloat diffuse = max(0.0, dot(lig, normal)) / 1.0;\n\tvec3 I = normalize(vPos - cameraPosition);\n\tfloat R = fresnel(0.05, 0.2, 3.0, I, normal);\n\tvec2 uv = vUv;\n\tuv.x -= (time * 0.01);\n\tuv.y += (-time * 0.0025);\n\tvec3 r = texture2D(tex, uv).xyz;\n\tr += (r + r);\n\tvec3 col = vec3((((diffuse * ucol) * 1.5) + (r * 0.1)) + (R * 0.5));\n\tgl_FragColor.xyz = col;\n\tgl_FragColor.w = 1.0;\n}\n"},7125:t=>{t.exports="uniform float time;\nuniform sampler2D tex;\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvec3 displacement(vec3 p) {\n\tvec2 u = p.xy * 0.1;\n\tvec2 um = u * 0.1;\n\tum.x += (time * 0.01);\n\tum.y += (-time * 0.0025);\n\tum.x += (um.y * 2.0);\n\tvec3 hlg = texture2D(tex, um).xyz;\n\tvec3 hfn = texture2D(tex, u).xyz * 2.0;\n\tvec3 disp = (hlg * 0.5) + ((hfn * 0.1) * (1.0 - hlg));\n\treturn p + (disp / 1.3);\n}\nvoid main() {\n\tvec3 transformed = displacement(position);\n\ttransformed.y -= 0.3;\n\ttransformed.z -= 0.25;\n\tvNormal = normal;\n\tvUv = uv;\n\tvPos = transformed;\n\tvec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},4781:t=>{t.exports="uniform float time;\nuniform sampler2D tex2;\nuniform vec3 ucol;\nvarying vec3 vPos;\nvarying vec2 vUv;\nfloat fresnel(float bias, float scale, float power, vec3 I, vec3 N) {\n\treturn bias + (scale * pow(1.0 + dot(I, N), power));\n}\nvoid main() {\n\tvec3 normal = normalize(vPos);\n\tvec3 lig = normalize(normal);\n\tfloat diffuse = max(0.0, dot(lig, normal)) / 1.0;\n\tvec3 I = normalize(vPos - cameraPosition);\n\tfloat R = fresnel(0.05, 0.2, 3.0, I, normal);\n\tvec2 uv = vUv;\n\tuv.x -= (time * 0.01);\n\tuv.y += (-time * 0.0025);\n\tvec3 r = texture2D(tex2, uv).xyz;\n\tr += (r + r);\n\tvec3 col = vec3((((diffuse * ucol) * 1.5) + (r * 0.1)) + (R * 0.25));\n\tgl_FragColor.xyz = col;\n\tgl_FragColor.w = 1.0;\n}\n"},5141:t=>{t.exports="uniform float time;\nuniform sampler2D tex;\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vTex;\nmat4 rotation3d(vec3 axis, float angle) {\n\taxis = normalize(axis);\n\tfloat s = sin(angle);\n\tfloat c = cos(angle);\n\tfloat oc = 1.0 - c;\n\treturn mat4(((oc * axis.x) * axis.x) + c, ((oc * axis.x) * axis.y) - (axis.z * s), ((oc * axis.z) * axis.x) + (axis.y * s), 0.0, ((oc * axis.x) * axis.y) + (axis.z * s), ((oc * axis.y) * axis.y) + c, ((oc * axis.y) * axis.z) - (axis.x * s), 0.0, ((oc * axis.z) * axis.x) - (axis.y * s), ((oc * axis.y) * axis.z) + (axis.x * s), ((oc * axis.z) * axis.z) + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvec3 rotate(vec3 v, vec3 axis, float angle) {\n\treturn (rotation3d(axis, angle) * vec4(v, 1.0)).xyz;\n}\nvoid main() {\n\tvec3 transformed = position;\n\tvNormal = normal;\n\tvUv = uv;\n\tvec4 t = texture2D(tex, uv + (time / 1000.0));\n\tvec4 t2 = texture2D(tex, uv - (time / 1000.0));\n\tvec4 t3 = mix(t, t2 * 1.0, 0.5);\n\ttransformed += t3.xyz;\n\tfloat rot = 2.14 * (((time / 5.0) + (transformed.z * 2.0)) + transformed.y);\n\ttransformed = rotate(transformed, vec3(0.0, 1.0, 0.0), rot) / 3.0;\n\tfloat scale = 0.8;\n\ttransformed.y -= 0.35;\n\tvPos = transformed;\n\tvec4 mvPosition = modelViewMatrix * vec4(transformed * scale, 1.0);\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},3882:(t,e,i)=>{"use strict";i.d(e,{B:()=>s});var n=i(4467),a=i(1661);class s extends n.x{constructor(t,e,i,n,s,r,o,l,c,h){super(t=void 0!==t?t:[],e=void 0!==e?e:a.fY$,i,n,s,r,o,l,c,h),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}s.prototype.isCubeTexture=!0},3993:(t,e,i)=>{"use strict";i.d(e,{I:()=>s});var n=i(4467),a=i(1661);class s extends n.x{constructor(t=null,e=1,i=1,n,s,r,o,l,c=a.TyD,h=a.TyD,m,p){super(null,r,o,l,c,h,n,s,m,p),this.image={data:t,width:e,height:i},this.magFilter=c,this.minFilter=h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}s.prototype.isDataTexture=!0},5491:(t,e,i)=>{"use strict";i.d(e,{C:()=>s});var n=i(4467),a=i(1661);class s extends n.x{constructor(t=null,e=1,i=1,n=1){super(null),this.image={data:t,width:e,height:i,depth:n},this.magFilter=a.TyD,this.minFilter=a.TyD,this.wrapR=a.uWy,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}s.prototype.isDataTexture2DArray=!0},7962:(t,e,i)=>{"use strict";i.d(e,{z:()=>s});var n=i(4467),a=i(1661);class s extends n.x{constructor(t=null,e=1,i=1,n=1){super(null),this.image={data:t,width:e,height:i,depth:n},this.magFilter=a.TyD,this.minFilter=a.TyD,this.wrapR=a.uWy,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}s.prototype.isDataTexture3D=!0},2638:(t,e,i)=>{"use strict";i.d(e,{$:()=>s});var n=i(4467),a=i(1661);class s extends n.x{constructor(t,e,i,n,s,r,o,l,c,h){if((h=void 0!==h?h:a.qkB)!==a.qkB&&h!==a.brP)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&h===a.qkB&&(i=a.LsT),void 0===i&&h===a.brP&&(i=a.wJv),super(null,n,s,r,o,l,h,i,c),this.image={width:t,height:e},this.magFilter=void 0!==o?o:a.TyD,this.minFilter=void 0!==l?l:a.TyD,this.flipY=!1,this.generateMipmaps=!1}}s.prototype.isDepthTexture=!0},4467:(t,e,i)=>{"use strict";i.d(e,{x:()=>h});var n=i(7406),a=i(1661),s=i(2043),r=i(1138),o=i(1273),l=i(5006);let c=0;class h extends n.p{constructor(t=h.DEFAULT_IMAGE,e=h.DEFAULT_MAPPING,i=a.uWy,n=a.uWy,l=a.wem,m=a.D1R,p=a.wk1,u=a.ywz,d=1,v=a.rnI){super(),Object.defineProperty(this,"id",{value:c++}),this.uuid=s.DO(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=i,this.wrapT=n,this.magFilter=l,this.minFilter=m,this.anisotropy=d,this.format=p,this.internalFormat=null,this.type=u,this.offset=new r.F(0,0),this.repeat=new r.F(1,1),this.center=new r.F(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new o.V,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=v,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const n=this.image;if(void 0===n.uuid&&(n.uuid=s.DO()),!e&&void 0===t.images[n.uuid]){let e;if(Array.isArray(n)){e=[];for(let t=0,i=n.length;t<i;t++)n[t].isDataTexture?e.push(m(n[t].image)):e.push(m(n[t]))}else e=m(n);t.images[n.uuid]={uuid:n.uuid,url:e}}i.image=n.uuid}return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==a.xfE)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case a.rpg:t.x=t.x-Math.floor(t.x);break;case a.uWy:t.x=t.x<0?0:1;break;case a.OoA:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case a.rpg:t.y=t.y-Math.floor(t.y);break;case a.uWy:t.y=t.y<0?0:1;break;case a.OoA:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&this.version++}}function m(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?l.P.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}h.DEFAULT_IMAGE=void 0,h.DEFAULT_MAPPING=a.xfE,h.prototype.isTexture=!0},392:(t,e,i)=>{"use strict";function n(t){if(0===t.length)return-1/0;let e=t[0];for(let i=1,n=t.length;i<n;++i)t[i]>e&&(e=t[i]);return e}i.d(e,{uH:()=>n,c:()=>a,Wu:()=>s});Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function a(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function s(t,e=0){let i=3735928559^e,n=1103547991^e;for(let e,a=0;a<t.length;a++)e=t.charCodeAt(a),i=Math.imul(i^e,2654435761),n=Math.imul(n^e,1597334677);return i=Math.imul(i^i>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),4294967296*(2097151&n)+(i>>>0)}},8475:(t,e,i)=>{"use strict";var n=i(3379),a=i.n(n),s=i(7795),r=i.n(s),o=i(569),l=i.n(o),c=i(3565),h=i.n(c),m=i(9216),p=i.n(m),u=i(4589),d=i.n(u),v=i(4679),f={};f.styleTagTransform=d(),f.setAttributes=h(),f.insert=l().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=p();a()(v.Z,f);v.Z&&v.Z.locals&&v.Z.locals;var x=i(9274),g=i(1051),y=i(7365),w=i(6034),A=i(8490),T=i(3662),D=i(1507),M=i(9365),E=i(2642),P=i(7082);E.ZP.registerPlugin(P.i);var F=i(2010),z=i(2980),U=i(1661),b=i(1043),k=i(1621),S=i(6881),I=i(6454),N=i(5141),_=i.n(N),R=i(4781),C=i.n(R);const L=new F.Z,W=(new z.d).load("/assets/wat1.jpg");W.wrapT=W.wrapS=U.rpg;const Y=(new z.d).load("/assets/wat2.png");Y.wrapT=Y.wrapS=U.rpg;const Z=new b.F(3,.2,1e3,16,2,2),H=(()=>{const t=new k.j({vertexShader:(e=_(),`${e}`.replace(/#include < (.+) >/g,"#include <$1>")),fragmentShader:C(),side:U.ehD,uniforms:{time:{value:0},tex:{value:Y},tex2:{value:W},ucol:{value:new S.P(.2353,.3529,.5216)}},transparent:!0});var e;t.needsUpdate=!0;return new I.K(Z,t)})();L.add(H);const O={group:L,update:()=>{H.material.uniforms.time.value+=.05}};var V=i(2785),j=i(7125),q=i.n(j),B=i(5384),G=i.n(B);const J=new F.Z,$=(new z.d).load("/assets/wat1.jpg");$.wrapT=$.wrapS=U.rpg;const K=(()=>{const t=new k.j({vertexShader:(e=q(),`${e}`.replace(/#include < (.+) >/g,"#include <$1>")),fragmentShader:G(),side:U.ehD,uniforms:{time:{value:0},tex:{value:$},ucol:{value:new S.P(.32,.46,.56)}},transparent:!0});var e;t.needsUpdate=!0;const i=new V.x(1,132,132);return new I.K(i,t)})();J.add(K);const Q={group:J,update:()=>{K.material.uniforms.time.value+=.025}};const X=new(i(7096).E),tt=new F.Z;X.loadAsync("/assets/low_poly_bitcoin.gltf").then((t=>{const e=t.scenes[0];e.scale.multiplyScalar(.002),tt.add(e),E.ZP.ticker.add((()=>{e.rotation.y+=.04})),e.position.set(-1.1,-1.1,1)})),X.loadAsync("/assets/low_poly_bitcoin.gltf").then((t=>{const e=t.scenes[0];e.scale.multiplyScalar(.002),tt.add(e),E.ZP.ticker.add((()=>{e.rotation.y+=.04})),e.position.set(1.35,.2,1.35)})),X.loadAsync("/assets/usdt.gltf").then((t=>{const e=t.scenes[0];e.scale.multiplyScalar(.25),e.rotation.x=Math.PI/2,tt.add(e),E.ZP.ticker.add((()=>{e.rotation.z+=.1})),e.position.set(-1,-.2,-1.35)})),tt.children.forEach((t=>t.position.multiplyScalar(.85)));const et=new class{constructor(t){this.inviewport=!1,this.onUpdate=()=>{},this.setViewportListener=()=>{P.i.create({start:0,end:"max",onUpdate:this.isInViewPort.bind(this)})},this.setEnviroment=()=>{},this.domElem=t,this.renderer=new x.C({antialias:!0,alpha:!0}),this.renderer.setSize(this.domElem.clientWidth,this.domElem.clientHeight),this.domElem.appendChild(this.renderer.domElement),this.camera=new g.c(75,1,.1,1e5),this.scene=new y.x,this.pmremGenerator=new w.a(this.renderer),this.pmremGenerator.compileEquirectangularShader(),this.controls=new M.z(this.camera,this.renderer.domElement),this.isInViewPort(),this.setViewportListener(),this.sceneSetup(),this.onWindowResize(),window.addEventListener("resize",this.onWindowResize.bind(this),!1)}isInViewPort(){const t=P.i.isInViewport(this.domElem);this.inviewport!==t&&(this.inviewport=t,this.inviewport&&this.render())}onWindowResize(){this.camera.aspect=this.domElem.clientWidth/this.domElem.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.domElem.clientWidth,this.domElem.clientHeight)}sceneSetup(){const t=new A.c(new T.I("white"),15,100),e=new D.M("white");t.position.set(50,50,50),this.camera.lookAt(0,0,0),this.scene.add(t,e,this.camera),this.setEnviroment()}render(){this.onUpdate(),this.renderer.render(this.scene,this.camera),this.inviewport&&requestAnimationFrame((()=>this.render()))}animate(t){this.onUpdate=t,this.render()}}(document.querySelector("#scene1"));et.camera.position.set(0,0,-3),et.camera.lookAt(0,0,0),et.scene.add(Q.group),et.scene.add(O.group),et.scene.add(tt),et.animate((()=>{O.update(),Q.update(),tt.rotation.y+=.01}))}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[78],{140:(t,e,r)=>{r.d(e,{a$:()=>p,lC:()=>c,ql:()=>d,Tl:()=>l});var i=r(223),s=r(6881),n=r(1138),a=r(3662),o=r(1661);const u=new s.P,h=new n.F;class l{constructor(t,e,r){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===r,this.usage=o.W2J,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,r){t*=this.itemSize,r*=e.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[t+i]=e.array[r+i];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let r=0;for(let i=0,s=t.length;i<s;i++){let s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new a.I),e[r++]=s.r,e[r++]=s.g,e[r++]=s.b}return this}copyVector2sArray(t){const e=this.array;let r=0;for(let i=0,s=t.length;i<s;i++){let s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new n.F),e[r++]=s.x,e[r++]=s.y}return this}copyVector3sArray(t){const e=this.array;let r=0;for(let i=0,n=t.length;i<n;i++){let n=t[i];void 0===n&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),n=new s.P),e[r++]=n.x,e[r++]=n.y,e[r++]=n.z}return this}copyVector4sArray(t){const e=this.array;let r=0;for(let s=0,n=t.length;s<n;s++){let n=t[s];void 0===n&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),n=new i.L),e[r++]=n.x,e[r++]=n.y,e[r++]=n.z,e[r++]=n.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,r=this.count;e<r;e++)h.fromBufferAttribute(this,e),h.applyMatrix3(t),this.setXY(e,h.x,h.y);else if(3===this.itemSize)for(let e=0,r=this.count;e<r;e++)u.fromBufferAttribute(this,e),u.applyMatrix3(t),this.setXYZ(e,u.x,u.y,u.z);return this}applyMatrix4(t){for(let e=0,r=this.count;e<r;e++)u.x=this.getX(e),u.y=this.getY(e),u.z=this.getZ(e),u.applyMatrix4(t),this.setXYZ(e,u.x,u.y,u.z);return this}applyNormalMatrix(t){for(let e=0,r=this.count;e<r;e++)u.x=this.getX(e),u.y=this.getY(e),u.z=this.getZ(e),u.applyNormalMatrix(t),this.setXYZ(e,u.x,u.y,u.z);return this}transformDirection(t){for(let e=0,r=this.count;e<r;e++)u.x=this.getX(e),u.y=this.getY(e),u.z=this.getZ(e),u.transformDirection(t),this.setXYZ(e,u.x,u.y,u.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this}setXYZ(t,e,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this}setXYZW(t,e,r,i,s){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==o.W2J&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}l.prototype.isBufferAttribute=!0;class d extends l{constructor(t,e,r){super(new Uint16Array(t),e,r)}}class c extends l{constructor(t,e,r){super(new Uint32Array(t),e,r)}}(class extends l{constructor(t,e,r){super(new Uint16Array(t),e,r)}}).prototype.isFloat16BufferAttribute=!0;class p extends l{constructor(t,e,r){super(new Float32Array(t),e,r)}}},9046:(t,e,r)=>{r.d(e,{u:()=>w});var i=r(6881),s=r(1138),n=r(1898),a=r(7406),o=r(140),u=r(4699),h=r(6469),l=r(9203),d=r(1273),c=r(2043),p=r(392);let m=0;const f=new l.y,g=new h.T,y=new i.P,x=new n.Z,v=new n.Z,b=new i.P;class w extends a.p{constructor(){super(),Object.defineProperty(this,"id",{value:m++}),this.uuid=c.DO(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new((0,p.uH)(t)>65535?o.lC:o.ql)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,r=0){this.groups.push({start:t,count:e,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const e=(new d.V).getNormalMatrix(t);r.applyNormalMatrix(e),r.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return f.makeRotationFromQuaternion(t),this.applyMatrix4(f),this}rotateX(t){return f.makeRotationX(t),this.applyMatrix4(f),this}rotateY(t){return f.makeRotationY(t),this.applyMatrix4(f),this}rotateZ(t){return f.makeRotationZ(t),this.applyMatrix4(f),this}translate(t,e,r){return f.makeTranslation(t,e,r),this.applyMatrix4(f),this}scale(t,e,r){return f.makeScale(t,e,r),this.applyMatrix4(f),this}lookAt(t){return g.lookAt(t),g.updateMatrix(),this.applyMatrix4(g.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(y).negate(),this.translate(y.x,y.y,y.z),this}setFromPoints(t){const e=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new o.a$(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new n.Z);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new i.P(-1/0,-1/0,-1/0),new i.P(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const r=e[t];x.setFromBufferAttribute(r),this.morphTargetsRelative?(b.addVectors(this.boundingBox.min,x.min),this.boundingBox.expandByPoint(b),b.addVectors(this.boundingBox.max,x.max),this.boundingBox.expandByPoint(b)):(this.boundingBox.expandByPoint(x.min),this.boundingBox.expandByPoint(x.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new u.a);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new i.P,1/0);if(t){const r=this.boundingSphere.center;if(x.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const r=e[t];v.setFromBufferAttribute(r),this.morphTargetsRelative?(b.addVectors(x.min,v.min),x.expandByPoint(b),b.addVectors(x.max,v.max),x.expandByPoint(b)):(x.expandByPoint(v.min),x.expandByPoint(v.max))}x.getCenter(r);let i=0;for(let e=0,s=t.count;e<s;e++)b.fromBufferAttribute(t,e),i=Math.max(i,r.distanceToSquared(b));if(e)for(let s=0,n=e.length;s<n;s++){const n=e[s],a=this.morphTargetsRelative;for(let e=0,s=n.count;e<s;e++)b.fromBufferAttribute(n,e),a&&(y.fromBufferAttribute(t,e),b.add(y)),i=Math.max(i,r.distanceToSquared(b))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=t.array,n=e.position.array,a=e.normal.array,u=e.uv.array,h=n.length/3;void 0===e.tangent&&this.setAttribute("tangent",new o.Tl(new Float32Array(4*h),4));const l=e.tangent.array,d=[],c=[];for(let t=0;t<h;t++)d[t]=new i.P,c[t]=new i.P;const p=new i.P,m=new i.P,f=new i.P,g=new s.F,y=new s.F,x=new s.F,v=new i.P,b=new i.P;function w(t,e,r){p.fromArray(n,3*t),m.fromArray(n,3*e),f.fromArray(n,3*r),g.fromArray(u,2*t),y.fromArray(u,2*e),x.fromArray(u,2*r),m.sub(p),f.sub(p),y.sub(g),x.sub(g);const i=1/(y.x*x.y-x.x*y.y);isFinite(i)&&(v.copy(m).multiplyScalar(x.y).addScaledVector(f,-y.y).multiplyScalar(i),b.copy(f).multiplyScalar(y.x).addScaledVector(m,-x.x).multiplyScalar(i),d[t].add(v),d[e].add(v),d[r].add(v),c[t].add(b),c[e].add(b),c[r].add(b))}let S=this.groups;0===S.length&&(S=[{start:0,count:r.length}]);for(let t=0,e=S.length;t<e;++t){const e=S[t],i=e.start;for(let t=i,s=i+e.count;t<s;t+=3)w(r[t+0],r[t+1],r[t+2])}const A=new i.P,M=new i.P,B=new i.P,T=new i.P;function z(t){B.fromArray(a,3*t),T.copy(B);const e=d[t];A.copy(e),A.sub(B.multiplyScalar(B.dot(e))).normalize(),M.crossVectors(T,e);const r=M.dot(c[t])<0?-1:1;l[4*t]=A.x,l[4*t+1]=A.y,l[4*t+2]=A.z,l[4*t+3]=r}for(let t=0,e=S.length;t<e;++t){const e=S[t],i=e.start;for(let t=i,s=i+e.count;t<s;t+=3)z(r[t+0]),z(r[t+1]),z(r[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let r=this.getAttribute("normal");if(void 0===r)r=new o.Tl(new Float32Array(3*e.count),3),this.setAttribute("normal",r);else for(let t=0,e=r.count;t<e;t++)r.setXYZ(t,0,0,0);const s=new i.P,n=new i.P,a=new i.P,u=new i.P,h=new i.P,l=new i.P,d=new i.P,c=new i.P;if(t)for(let i=0,o=t.count;i<o;i+=3){const o=t.getX(i+0),p=t.getX(i+1),m=t.getX(i+2);s.fromBufferAttribute(e,o),n.fromBufferAttribute(e,p),a.fromBufferAttribute(e,m),d.subVectors(a,n),c.subVectors(s,n),d.cross(c),u.fromBufferAttribute(r,o),h.fromBufferAttribute(r,p),l.fromBufferAttribute(r,m),u.add(d),h.add(d),l.add(d),r.setXYZ(o,u.x,u.y,u.z),r.setXYZ(p,h.x,h.y,h.z),r.setXYZ(m,l.x,l.y,l.z)}else for(let t=0,i=e.count;t<i;t+=3)s.fromBufferAttribute(e,t+0),n.fromBufferAttribute(e,t+1),a.fromBufferAttribute(e,t+2),d.subVectors(a,n),c.subVectors(s,n),d.cross(c),r.setXYZ(t+0,d.x,d.y,d.z),r.setXYZ(t+1,d.x,d.y,d.z),r.setXYZ(t+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(void 0===t.attributes[i])continue;const s=r[i].array,n=t.attributes[i],a=n.array,o=n.itemSize*e,u=Math.min(a.length,s.length-o);for(let t=0,e=o;t<u;t++,e++)s[e]=a[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,r=t.count;e<r;e++)b.fromBufferAttribute(t,e),b.normalize(),t.setXYZ(e,b.x,b.y,b.z)}toNonIndexed(){function t(t,e){const r=t.array,i=t.itemSize,s=t.normalized,n=new r.constructor(e.length*i);let a=0,u=0;for(let s=0,o=e.length;s<o;s++){a=t.isInterleavedBufferAttribute?e[s]*t.data.stride+t.offset:e[s]*i;for(let t=0;t<i;t++)n[u++]=r[a++]}return new o.Tl(n,i,s)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new w,r=this.index.array,i=this.attributes;for(const s in i){const n=t(i[s],r);e.setAttribute(s,n)}const s=this.morphAttributes;for(const i in s){const n=[],a=s[i];for(let e=0,i=a.length;e<i;e++){const i=t(a[e],r);n.push(i)}e.morphAttributes[i]=n}e.morphTargetsRelative=this.morphTargetsRelative;const n=this.groups;for(let t=0,r=n.length;t<r;t++){const r=n[t];e.addGroup(r.start,r.count,r.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const r in e)void 0!==e[r]&&(t[r]=e[r]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const r=this.attributes;for(const e in r){const i=r[e];t.data.attributes[e]=i.toJSON(t.data)}const i={};let s=!1;for(const e in this.morphAttributes){const r=this.morphAttributes[e],n=[];for(let e=0,i=r.length;e<i;e++){const i=r[e];n.push(i.toJSON(t.data))}n.length>0&&(i[e]=n,s=!0)}s&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const n=this.groups;n.length>0&&(t.data.groups=JSON.parse(JSON.stringify(n)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const r=t.index;null!==r&&this.setIndex(r.clone(e));const i=t.attributes;for(const t in i){const r=i[t];this.setAttribute(t,r.clone(e))}const s=t.morphAttributes;for(const t in s){const r=[],i=s[t];for(let t=0,s=i.length;t<s;t++)r.push(i[t].clone(e));this.morphAttributes[t]=r}this.morphTargetsRelative=t.morphTargetsRelative;const n=t.groups;for(let t=0,e=n.length;t<e;t++){const e=n[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}w.prototype.isBufferGeometry=!0},7406:(t,e,r)=>{r.d(e,{p:()=>i});class i{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[t]&&-1!==r[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const r=e.slice(0);for(let e=0,i=r.length;e<i;e++)r[e].call(this,t);t.target=null}}}},2133:(t,e,r)=>{r.d(e,{v:()=>n});var i=r(2043),s=r(1661);class n{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=s.W2J,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=i.DO()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,r){t*=this.stride,r*=e.stride;for(let i=0,s=this.stride;i<s;i++)this.array[t+i]=e.array[r+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=i.DO()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(e,this.stride);return r.setUsage(this.usage),r}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=i.DO()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}n.prototype.isInterleavedBuffer=!0},1145:(t,e,r)=>{r.d(e,{k:()=>a});var i=r(6881),s=r(140);const n=new i.P;class a{constructor(t,e,r,i=!1){this.name="",this.data=t,this.itemSize=e,this.offset=r,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,r=this.data.count;e<r;e++)n.x=this.getX(e),n.y=this.getY(e),n.z=this.getZ(e),n.applyMatrix4(t),this.setXYZ(e,n.x,n.y,n.z);return this}applyNormalMatrix(t){for(let e=0,r=this.count;e<r;e++)n.x=this.getX(e),n.y=this.getY(e),n.z=this.getZ(e),n.applyNormalMatrix(t),this.setXYZ(e,n.x,n.y,n.z);return this}transformDirection(t){for(let e=0,r=this.count;e<r;e++)n.x=this.getX(e),n.y=this.getY(e),n.z=this.getZ(e),n.transformDirection(t),this.setXYZ(e,n.x,n.y,n.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this}setXYZ(t,e,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=i,this}setXYZW(t,e,r,i,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=r,this.data.array[t+2]=i,this.data.array[t+3]=s,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const r=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[r+e])}return new s.Tl(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new a(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const r=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[r+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}a.prototype.isInterleavedBufferAttribute=!0},6469:(t,e,r)=>{r.d(e,{T:()=>M});var i=r(7092),s=r(6881),n=r(9203),a=r(7406),o=r(2903);class u{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}var h=r(1273),l=r(2043);let d=0;const c=new s.P,p=new i._,m=new n.y,f=new s.P,g=new s.P,y=new s.P,x=new i._,v=new s.P(1,0,0),b=new s.P(0,1,0),w=new s.P(0,0,1),S={type:"added"},A={type:"removed"};class M extends a.p{constructor(){super(),Object.defineProperty(this,"id",{value:d++}),this.uuid=l.DO(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=M.DefaultUp.clone();const t=new s.P,e=new o.U,r=new i._,a=new s.P(1,1,1);e._onChange((function(){r.setFromEuler(e,!1)})),r._onChange((function(){e.setFromQuaternion(r,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new n.y},normalMatrix:{value:new h.V}}),this.matrix=new n.y,this.matrixWorld=new n.y,this.matrixAutoUpdate=M.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new u,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return p.setFromAxisAngle(t,e),this.quaternion.multiply(p),this}rotateOnWorldAxis(t,e){return p.setFromAxisAngle(t,e),this.quaternion.premultiply(p),this}rotateX(t){return this.rotateOnAxis(v,t)}rotateY(t){return this.rotateOnAxis(b,t)}rotateZ(t){return this.rotateOnAxis(w,t)}translateOnAxis(t,e){return c.copy(t).applyQuaternion(this.quaternion),this.position.add(c.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(v,t)}translateY(t){return this.translateOnAxis(b,t)}translateZ(t){return this.translateOnAxis(w,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(m.copy(this.matrixWorld).invert())}lookAt(t,e,r){t.isVector3?f.copy(t):f.set(t,e,r);const i=this.parent;this.updateWorldMatrix(!0,!1),g.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?m.lookAt(g,f,this.up):m.lookAt(f,g,this.up),this.quaternion.setFromRotationMatrix(m),i&&(m.extractRotation(i.matrixWorld),p.setFromRotationMatrix(m),this.quaternion.premultiply(p.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(S)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(A)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(A)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),m.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),m.multiply(t.parent.matrixWorld)),t.applyMatrix4(m),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectByProperty(t,e);if(void 0!==i)return i}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(g,t,y),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(g,x,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let r=0,i=e.length;r<i;r++)e[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let r=0,i=e.length;r<i;r++)e[r].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let r=0,i=e.length;r<i;r++)e[r].updateMatrixWorld(t)}updateWorldMatrix(t,e){const r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,r=t.length;e<r;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,r={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function s(e,r){return void 0===e[r.uuid]&&(e[r.uuid]=r.toJSON(t)),r.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const r=e.shapes;if(Array.isArray(r))for(let e=0,i=r.length;e<i;e++){const i=r[e];s(t.shapes,i)}else s(t.shapes,r)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let r=0,i=this.material.length;r<i;r++)e.push(s(t.materials,this.material[r]));i.material=e}else i.material=s(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const r=this.animations[e];i.animations.push(s(t.animations,r))}}if(e){const e=n(t.geometries),i=n(t.materials),s=n(t.textures),a=n(t.images),o=n(t.shapes),u=n(t.skeletons),h=n(t.animations);e.length>0&&(r.geometries=e),i.length>0&&(r.materials=i),s.length>0&&(r.textures=s),a.length>0&&(r.images=a),o.length>0&&(r.shapes=o),u.length>0&&(r.skeletons=u),h.length>0&&(r.animations=h)}return r.object=i,r;function n(t){const e=[];for(const r in t){const i=t[r];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const r=t.children[e];this.add(r.clone())}return this}}M.DefaultUp=new s.P(0,1,0),M.DefaultMatrixAutoUpdate=!0,M.prototype.isObject3D=!0},5006:(t,e,r)=>{r.d(e,{P:()=>n});var i=r(392);let s;class n{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===s&&(s=(0,i.c)("canvas")),s.width=t.width,s.height=t.height;const r=s.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),e=s}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}},6034:(t,e,r)=>{r.d(e,{a:()=>E});var i=r(1661),s=r(140),n=r(9046),a=r(6454),o=r(3131),u=r(1051),h=r(8549),l=r(1138),d=r(6881),c=r(3662),p=r(4302),m=r(6173),f=r(6724);const g=Math.pow(2,8),y=[.125,.215,.35,.446,.526,.582],x=5+y.length,v=20,b={[i.rnI]:0,[i.knz]:1,[i.KC9]:2,[i.LgE]:3,[i.Inb]:4,[i.gMp]:5,[i.pMV]:6},w=new o.i,{_lodPlanes:S,_sizeLods:A,_sigmas:M}=R(),B=new c.I;let T=null;const z=(1+Math.sqrt(5))/2,_=1/z,P=[new d.P(1,1,1),new d.P(-1,1,1),new d.P(1,1,-1),new d.P(-1,1,-1),new d.P(0,z,_),new d.P(0,z,-_),new d.P(_,0,z),new d.P(-_,0,z),new d.P(z,_,0),new d.P(-z,_,0)];class E{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const e=new Float32Array(t),r=new d.P(0,1,0);return new h.F({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r},inputEncoding:{value:b[i.rnI]},outputEncoding:{value:b[i.rnI]}},vertexShader:N(),fragmentShader:`precision mediump float;precision mediump int;varying vec3 vOutputDirection;uniform sampler2D envMap;uniform int samples;uniform float weights[n];uniform bool latitudinal;uniform float dTheta;uniform float mipInt;uniform vec3 poleAxis;\n${U()}\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\nvec3 getSample(float theta,vec3 axis){float cosTheta=cos(theta);vec3 sampleDirection=vOutputDirection*cosTheta+cross(axis,vOutputDirection)*sin(theta)+axis*dot(axis,vOutputDirection)*(1.0-cosTheta);return bilinearCubeUV(envMap,sampleDirection,mipInt);}void main(){vec3 axis=latitudinal?poleAxis:cross(poleAxis,vOutputDirection);if(all(equal(axis,vec3(0.0)))){axis=vec3(vOutputDirection.z,0.0,-vOutputDirection.x);}axis=normalize(axis);gl_FragColor=vec4(0.0,0.0,0.0,1.0);gl_FragColor.rgb+=weights[0]*getSample(0.0,axis);for(int i=1;i<n;i++){if(i>=samples){break;}float theta=dTheta*float(i);gl_FragColor.rgb+=weights[i]*getSample(-1.0*theta,axis);gl_FragColor.rgb+=weights[i]*getSample(theta,axis);}gl_FragColor=linearToOutputTexel(gl_FragColor);}`,blending:i.jFi,depthTest:!1,depthWrite:!1})}(v),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,r=.1,i=100){T=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(t,r,i,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=F(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=k(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<S.length;t++)S[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(T),t.scissorTest=!1,C(t,0,0,t.width,t.height)}_fromTexture(t){T=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:i.TyD,minFilter:i.TyD,generateMipmaps:!1,type:i.ywz,format:i.aoB,encoding:O(t)?t.encoding:i.KC9,depthBuffer:!1},r=D(e);return r.depthBuffer=!t,this._pingPongRenderTarget=D(e),r}_compileMaterial(t){const e=new a.K(S[0],t);this._renderer.compile(e,w)}_sceneToCubeUV(t,e,r,s){const n=new u.c(90,1,e,r),o=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],l=this._renderer,d=l.autoClear,c=l.outputEncoding,p=l.toneMapping;l.getClearColor(B),l.toneMapping=i.uL9,l.outputEncoding=i.rnI,l.autoClear=!1;const y=new m.v({name:"PMREM.Background",side:i._Li,depthWrite:!1,depthTest:!1}),x=new a.K(new f.D,y);let v=!1;const b=t.background;b?b.isColor&&(y.color.copy(b),t.background=null,v=!0):(y.color.copy(B),v=!0);for(let e=0;e<6;e++){const r=e%3;0==r?(n.up.set(0,o[e],0),n.lookAt(h[e],0,0)):1==r?(n.up.set(0,0,o[e]),n.lookAt(0,h[e],0)):(n.up.set(0,o[e],0),n.lookAt(0,0,h[e])),C(s,r*g,e>2?g:0,g,g),l.setRenderTarget(s),v&&l.render(x,n),l.render(t,n)}x.geometry.dispose(),x.material.dispose(),l.toneMapping=p,l.outputEncoding=c,l.autoClear=d,t.background=b}_setEncoding(t,e){t.value=b[e.encoding]}_textureToCubeUV(t,e){const r=this._renderer,s=t.mapping===i.fY$||t.mapping===i.vxC;s?null==this._cubemapShader&&(this._cubemapShader=F()):null==this._equirectShader&&(this._equirectShader=k());const n=s?this._cubemapShader:this._equirectShader,o=new a.K(S[0],n),u=n.uniforms;u.envMap.value=t,s||u.texelSize.value.set(1/t.image.width,1/t.image.height),this._setEncoding(u.inputEncoding,t),this._setEncoding(u.outputEncoding,e.texture),C(e,0,0,3*g,2*g),r.setRenderTarget(e),r.render(o,w)}_applyPMREM(t){const e=this._renderer,r=e.autoClear;e.autoClear=!1;for(let e=1;e<x;e++){const r=Math.sqrt(M[e]*M[e]-M[e-1]*M[e-1]),i=P[(e-1)%P.length];this._blur(t,e-1,e,r,i)}e.autoClear=r}_blur(t,e,r,i,s){const n=this._pingPongRenderTarget;this._halfBlur(t,n,e,r,i,"latitudinal",s),this._halfBlur(n,t,r,r,i,"longitudinal",s)}_halfBlur(t,e,r,i,s,n,o){const u=this._renderer,h=this._blurMaterial;"latitudinal"!==n&&"longitudinal"!==n&&console.error("blur direction must be either latitudinal or longitudinal!");const l=new a.K(S[i],h),d=h.uniforms,c=A[r]-1,p=isFinite(s)?Math.PI/(2*c):2*Math.PI/39,m=s/p,f=isFinite(s)?1+Math.floor(3*m):v;f>v&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const y=[];let x=0;for(let t=0;t<v;++t){const e=t/m,r=Math.exp(-e*e/2);y.push(r),0==t?x+=r:t<f&&(x+=2*r)}for(let t=0;t<y.length;t++)y[t]=y[t]/x;d.envMap.value=t.texture,d.samples.value=f,d.weights.value=y,d.latitudinal.value="latitudinal"===n,o&&(d.poleAxis.value=o),d.dTheta.value=p,d.mipInt.value=8-r,this._setEncoding(d.inputEncoding,t.texture),this._setEncoding(d.outputEncoding,t.texture);const b=A[i];C(e,3*Math.max(0,g-2*b),(0===i?0:2*g)+2*b*(i>4?i-8+4:0),3*b,2*b),u.setRenderTarget(e),u.render(l,w)}}function O(t){return void 0!==t&&t.type===i.ywz&&(t.encoding===i.rnI||t.encoding===i.knz||t.encoding===i.pMV)}function R(){const t=[],e=[],r=[];let i=8;for(let a=0;a<x;a++){const o=Math.pow(2,i);e.push(o);let u=1/o;a>4?u=y[a-8+4-1]:0==a&&(u=0),r.push(u);const h=1/(o-1),l=-h/2,d=1+h/2,c=[l,l,d,l,d,d,l,l,d,d,l,d],p=6,m=6,f=3,g=2,x=1,v=new Float32Array(f*m*p),b=new Float32Array(g*m*p),w=new Float32Array(x*m*p);for(let t=0;t<p;t++){const e=t%3*2/3-1,r=t>2?0:-1,i=[e,r,0,e+2/3,r,0,e+2/3,r+1,0,e,r,0,e+2/3,r+1,0,e,r+1,0];v.set(i,f*m*t),b.set(c,g*m*t);const s=[t,t,t,t,t,t];w.set(s,x*m*t)}const S=new n.u;S.setAttribute("position",new s.Tl(v,f)),S.setAttribute("uv",new s.Tl(b,g)),S.setAttribute("faceIndex",new s.Tl(w,x)),t.push(S),i>4&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:r}}function D(t){const e=new p.d(3*g,3*g,t);return e.texture.mapping=i.g8_,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function C(t,e,r,i,s){t.viewport.set(e,r,i,s),t.scissor.set(e,r,i,s)}function k(){const t=new l.F(1,1);return new h.F({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:b[i.rnI]},outputEncoding:{value:b[i.rnI]}},vertexShader:N(),fragmentShader:`precision mediump float;precision mediump int;varying vec3 vOutputDirection;uniform sampler2D envMap;uniform vec2 texelSize;\n${U()}\n#include <common>\nvoid main(){gl_FragColor=vec4(0.0,0.0,0.0,1.0);vec3 outputDirection=normalize(vOutputDirection);vec2 uv=equirectUv(outputDirection);vec2 f=fract(uv/texelSize-0.5);uv-=f*texelSize;vec3 tl=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.x+=texelSize.x;vec3 tr=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.y+=texelSize.y;vec3 br=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.x-=texelSize.x;vec3 bl=envMapTexelToLinear(texture2D(envMap,uv)).rgb;vec3 tm=mix(tl,tr,f.x);vec3 bm=mix(bl,br,f.x);gl_FragColor.rgb=mix(tm,bm,f.y);gl_FragColor=linearToOutputTexel(gl_FragColor);}`,blending:i.jFi,depthTest:!1,depthWrite:!1})}function F(){return new h.F({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:b[i.rnI]},outputEncoding:{value:b[i.rnI]}},vertexShader:N(),fragmentShader:`precision mediump float;precision mediump int;varying vec3 vOutputDirection;uniform samplerCube envMap;\n${U()}\nvoid main(){gl_FragColor=vec4(0.0,0.0,0.0,1.0);gl_FragColor.rgb=envMapTexelToLinear(textureCube(envMap,vec3(-vOutputDirection.x,vOutputDirection.yz))).rgb;gl_FragColor=linearToOutputTexel(gl_FragColor);}`,blending:i.jFi,depthTest:!1,depthWrite:!1})}function N(){return"precision mediump float;precision mediump int;attribute vec3 position;attribute vec2 uv;attribute float faceIndex;varying vec3 vOutputDirection;vec3 getDirection(vec2 uv,float face){uv=2.0*uv-1.0;vec3 direction=vec3(uv,1.0);if(face==0.0){direction=direction.zyx;}else if(face==1.0){direction=direction.xzy;direction.xz*=-1.0;}else if(face==2.0){direction.x*=-1.0;}else if(face==3.0){direction=direction.zyx;direction.xz*=-1.0;}else if(face==4.0){direction=direction.xzy;direction.xy*=-1.0;}else if(face==5.0){direction.z*=-1.0;}return direction;}void main(){vOutputDirection=getDirection(uv,faceIndex);gl_Position=vec4(position,1.0);}"}function U(){return"uniform int inputEncoding;uniform int outputEncoding;\n#include <encodings_pars_fragment>\nvec4 inputTexelToLinear(vec4 value){if(inputEncoding==0){return value;}else if(inputEncoding==1){return sRGBToLinear(value);}else if(inputEncoding==2){return RGBEToLinear(value);}else if(inputEncoding==3){return RGBMToLinear(value,7.0);}else if(inputEncoding==4){return RGBMToLinear(value,16.0);}else if(inputEncoding==5){return RGBDToLinear(value,256.0);}else{return GammaToLinear(value,2.2);}}vec4 linearToOutputTexel(vec4 value){if(outputEncoding==0){return value;}else if(outputEncoding==1){return LinearTosRGB(value);}else if(outputEncoding==2){return LinearToRGBE(value);}else if(outputEncoding==3){return LinearToRGBM(value,7.0);}else if(outputEncoding==4){return LinearToRGBM(value,16.0);}else if(outputEncoding==5){return LinearToRGBD(value,256.0);}else{return LinearToGamma(value,2.2);}}vec4 envMapTexelToLinear(vec4 color){return inputTexelToLinear(color);}"}},6724:(t,e,r)=>{r.d(e,{D:()=>a});var i=r(9046),s=r(140),n=r(6881);class a extends i.u{constructor(t=1,e=1,r=1,i=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:r,widthSegments:i,heightSegments:a,depthSegments:o};const u=this;i=Math.floor(i),a=Math.floor(a),o=Math.floor(o);const h=[],l=[],d=[],c=[];let p=0,m=0;function f(t,e,r,i,s,a,o,f,g,y,x){const v=a/g,b=o/y,w=a/2,S=o/2,A=f/2,M=g+1,B=y+1;let T=0,z=0;const _=new n.P;for(let n=0;n<B;n++){const a=n*b-S;for(let o=0;o<M;o++){const u=o*v-w;_[t]=u*i,_[e]=a*s,_[r]=A,l.push(_.x,_.y,_.z),_[t]=0,_[e]=0,_[r]=f>0?1:-1,d.push(_.x,_.y,_.z),c.push(o/g),c.push(1-n/y),T+=1}}for(let t=0;t<y;t++)for(let e=0;e<g;e++){const r=p+e+M*t,i=p+e+M*(t+1),s=p+(e+1)+M*(t+1),n=p+(e+1)+M*t;h.push(r,i,n),h.push(i,s,n),z+=6}u.addGroup(m,z,x),m+=z,p+=T}f("z","y","x",-1,-1,r,e,t,o,a,0),f("z","y","x",1,-1,r,e,-t,o,a,1),f("x","z","y",1,1,t,r,e,i,o,2),f("x","z","y",1,-1,t,r,-e,i,o,3),f("x","y","z",1,-1,t,e,r,i,a,4),f("x","y","z",-1,-1,t,e,-r,i,a,5),this.setIndex(h),this.setAttribute("position",new s.a$(l,3)),this.setAttribute("normal",new s.a$(d,3)),this.setAttribute("uv",new s.a$(c,2))}static fromJSON(t){return new a(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}},4078:(t,e,r)=>{r.d(e,{_:()=>n});var i=r(9046),s=r(140);class n extends i.u{constructor(t=1,e=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:r,heightSegments:i};const n=t/2,a=e/2,o=Math.floor(r),u=Math.floor(i),h=o+1,l=u+1,d=t/o,c=e/u,p=[],m=[],f=[],g=[];for(let t=0;t<l;t++){const e=t*c-a;for(let r=0;r<h;r++){const i=r*d-n;m.push(i,-e,0),f.push(0,0,1),g.push(r/o),g.push(1-t/u)}}for(let t=0;t<u;t++)for(let e=0;e<o;e++){const r=e+h*t,i=e+h*(t+1),s=e+1+h*(t+1),n=e+1+h*t;p.push(r,i,n),p.push(i,s,n)}this.setIndex(p),this.setAttribute("position",new s.a$(m,3)),this.setAttribute("normal",new s.a$(f,3)),this.setAttribute("uv",new s.a$(g,2))}static fromJSON(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}}},2785:(t,e,r)=>{r.d(e,{x:()=>a});var i=r(9046),s=r(140),n=r(6881);class a extends i.u{constructor(t=1,e=32,r=16,i=0,a=2*Math.PI,o=0,u=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:r,phiStart:i,phiLength:a,thetaStart:o,thetaLength:u},e=Math.max(3,Math.floor(e)),r=Math.max(2,Math.floor(r));const h=Math.min(o+u,Math.PI);let l=0;const d=[],c=new n.P,p=new n.P,m=[],f=[],g=[],y=[];for(let s=0;s<=r;s++){const n=[],m=s/r;let x=0;0==s&&0==o?x=.5/e:s==r&&h==Math.PI&&(x=-.5/e);for(let r=0;r<=e;r++){const s=r/e;c.x=-t*Math.cos(i+s*a)*Math.sin(o+m*u),c.y=t*Math.cos(o+m*u),c.z=t*Math.sin(i+s*a)*Math.sin(o+m*u),f.push(c.x,c.y,c.z),p.copy(c).normalize(),g.push(p.x,p.y,p.z),y.push(s+x,1-m),n.push(l++)}d.push(n)}for(let t=0;t<r;t++)for(let i=0;i<e;i++){const e=d[t][i+1],s=d[t][i],n=d[t+1][i],a=d[t+1][i+1];(0!==t||o>0)&&m.push(e,s,a),(t!==r-1||h<Math.PI)&&m.push(s,n,a)}this.setIndex(m),this.setAttribute("position",new s.a$(f,3)),this.setAttribute("normal",new s.a$(g,3)),this.setAttribute("uv",new s.a$(y,2))}static fromJSON(t){return new a(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}},1043:(t,e,r)=>{r.d(e,{F:()=>a});var i=r(9046),s=r(140),n=r(6881);class a extends i.u{constructor(t=1,e=.4,r=64,i=8,a=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:r,radialSegments:i,p:a,q:o},r=Math.floor(r),i=Math.floor(i);const u=[],h=[],l=[],d=[],c=new n.P,p=new n.P,m=new n.P,f=new n.P,g=new n.P,y=new n.P,x=new n.P;for(let s=0;s<=r;++s){const n=s/r*a*Math.PI*2;v(n,a,o,t,m),v(n+.01,a,o,t,f),y.subVectors(f,m),x.addVectors(f,m),g.crossVectors(y,x),x.crossVectors(g,y),g.normalize(),x.normalize();for(let t=0;t<=i;++t){const n=t/i*Math.PI*2,a=-e*Math.cos(n),o=e*Math.sin(n);c.x=m.x+(a*x.x+o*g.x),c.y=m.y+(a*x.y+o*g.y),c.z=m.z+(a*x.z+o*g.z),h.push(c.x,c.y,c.z),p.subVectors(c,m).normalize(),l.push(p.x,p.y,p.z),d.push(s/r),d.push(t/i)}}for(let t=1;t<=r;t++)for(let e=1;e<=i;e++){const r=(i+1)*(t-1)+(e-1),s=(i+1)*t+(e-1),n=(i+1)*t+e,a=(i+1)*(t-1)+e;u.push(r,s,a),u.push(s,n,a)}function v(t,e,r,i,s){const n=Math.cos(t),a=Math.sin(t),o=r/e*t,u=Math.cos(o);s.x=i*(2+u)*.5*n,s.y=i*(2+u)*a*.5,s.z=i*Math.sin(o)*.5}this.setIndex(u),this.setAttribute("position",new s.a$(h,3)),this.setAttribute("normal",new s.a$(l,3)),this.setAttribute("uv",new s.a$(d,2))}static fromJSON(t){return new a(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[2],{8277:(e,t,r)=>{r.d(t,{o:()=>h});var i=r(1661),n=r(6454),s=r(6724),a=r(1621),o=r(6682),l=r(4302),u=r(2496),d=r(3882);class h extends l.d{constructor(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r),super(e,e,t),t=t||{},this.texture=new d.B(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:i.wem,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=i.wk1,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:"varying vec3 vWorldDirection;vec3 transformDirection(in vec3 dir,in mat4 matrix){return normalize((matrix*vec4(dir,0.0)).xyz);}void main(){vWorldDirection=transformDirection(position,modelMatrix);\n#include <begin_vertex>\n#include <project_vertex>\n}",fragmentShader:"uniform sampler2D tEquirect;varying vec3 vWorldDirection;\n#include <common>\nvoid main(){vec3 direction=normalize(vWorldDirection);vec2 sampleUV=equirectUv(direction);gl_FragColor=texture2D(tEquirect,sampleUV);}"},l=new s.D(5,5,5),d=new a.j({name:"CubemapFromEquirect",uniforms:(0,o.dw)(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:i._Li,blending:i.jFi});d.uniforms.tEquirect.value=t;const h=new n.K(l,d),p=t.minFilter;t.minFilter===i.D1R&&(t.minFilter=i.wem);return new u._(1,10,this).update(e,h),t.minFilter=p,h.geometry.dispose(),h.material.dispose(),this}clear(e,t,r,i){const n=e.getRenderTarget();for(let n=0;n<6;n++)e.setRenderTarget(this,n),e.clear(t,r,i);e.setRenderTarget(n)}}h.prototype.isWebGLCubeRenderTarget=!0},8449:(e,t,r)=>{r.d(t,{p:()=>n});var i=r(4302);class n extends i.d{constructor(e,t,r={}){super(e,t,r),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===r.ignoreDepth||r.ignoreDepth,this.useRenderToTexture=void 0!==r.useRenderToTexture&&r.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(e){return super.copy.call(this,e),this.samples=e.samples,this.useRenderToTexture=e.useRenderToTexture,this.useRenderbuffer=e.useRenderbuffer,this}}n.prototype.isWebGLMultisampleRenderTarget=!0},4302:(e,t,r)=>{r.d(t,{d:()=>o});var i=r(7406),n=r(4467),s=r(1661),a=r(223);class o extends i.p{constructor(e,t,r={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new a.L(0,0,e,t),this.scissorTest=!1,this.viewport=new a.L(0,0,e,t),this.texture=new n.x(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:s.wem,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,r=1){this.width===e&&this.height===t&&this.depth===r||(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}o.prototype.isWebGLRenderTarget=!0},9274:(e,t,r)=>{r.d(t,{C:()=>V});var i=r(1661),n=r(4698),s=r(9203),a=r(6881),o=r(223),l=r(924),u=r(343),d=r(7263),h=r(8498),p=r(6355),c=r(4542),g=r(886),f=r(3886),m=r(8198),x=r(4959),w=r(5007),v=r(907),T=r(2304),M=r(6738),b=r(8449),S=r(4469),L=r(5502),y=r(7905),R=r(6423),E=r(9801),_=r(4302),C=r(5116),D=r(181),W=r(1643),P=r(1895),F=r(9627),A=r(3245),B=r(2504),G=r(392);function V(e={}){const t=void 0!==e.canvas?e.canvas:function(){const e=(0,G.c)("canvas");return e.style.display="block",e}(),r=void 0!==e.context?e.context:null,V=void 0!==e.alpha&&e.alpha,U=void 0===e.depth||e.depth,I=void 0===e.stencil||e.stencil,k=void 0!==e.antialias&&e.antialias,z=void 0===e.premultipliedAlpha||e.premultipliedAlpha,H=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,O=void 0!==e.powerPreference?e.powerPreference:"default",j=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let q=null,N=null;const Y=[],Z=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=i.rnI,this.physicallyCorrectLights=!1,this.toneMapping=i.uL9,this.toneMappingExposure=1;const K=this;let X=!1,J=0,Q=0,$=null,ee=-1,te=null;const re=new o.L,ie=new o.L;let ne=null,se=t.width,ae=t.height,oe=1,le=null,ue=null;const de=new o.L(0,0,se,ae),he=new o.L(0,0,se,ae);let pe=!1;const ce=[],ge=new n.i;let fe=!1,me=!1,xe=null;const we=new s.y,ve=new a.P,Te={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Me(){return null===$?oe:1}let be,Se,Le,ye,Re,Ee,_e,Ce,De,We,Pe,Fe,Ae,Be,Ge,Ve,Ue,Ie,ke,ze,He,Oe,je,qe=r;function Ne(e,r){for(let i=0;i<e.length;i++){const n=e[i],s=t.getContext(n,r);if(null!==s)return s}return null}try{const e={alpha:V,depth:U,stencil:I,antialias:k,premultipliedAlpha:z,preserveDrawingBuffer:H,powerPreference:O,failIfMajorPerformanceCaveat:j};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${i.UZH}`),t.addEventListener("webglcontextlost",Ke,!1),t.addEventListener("webglcontextrestored",Xe,!1),null===qe){const t=["webgl2","webgl","experimental-webgl"];if(!0===K.isWebGL1Renderer&&t.shift(),qe=Ne(t,e),null===qe)throw Ne(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===qe.getShaderPrecisionFormat&&(qe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function Ye(){be=new x.P(qe),Se=new c.G(qe,be,e),be.init(Se),Oe=new F.f(qe,be,Se),Le=new D.m(qe,be,Se),ce[0]=1029,ye=new T.I(qe),Re=new y.Z,Ee=new W.w(qe,be,Le,Re,Se,Oe,ye),_e=new f.S(K),Ce=new m.W(K),De=new u.b(qe,Se),je=new h.s(qe,be,De,Se),We=new w.Y(qe,De,ye,je),Pe=new S.E(qe,We,De,ye),ke=new M.i(qe,Se,Ee),Ve=new g.h(Re),Fe=new L.Z(K,_e,Ce,be,Se,je,Ve),Ae=new B.J(Re),Be=new R.M(Re),Ge=new E.Q(be,Se),Ie=new d.a(K,_e,Le,Pe,z),Ue=new C.c(K,Pe,Se),ze=new p.w(qe,be,ye,Se),He=new v.x(qe,be,ye,Se),ye.programs=Fe.programs,K.capabilities=Se,K.extensions=be,K.properties=Re,K.renderLists=Be,K.shadowMap=Ue,K.state=Le,K.info=ye}Ye();const Ze=new A.M(K,qe);function Ke(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),X=!0}function Xe(){console.log("THREE.WebGLRenderer: Context Restored."),X=!1;const e=ye.autoReset,t=Ue.enabled,r=Ue.autoUpdate,i=Ue.needsUpdate,n=Ue.type;Ye(),ye.autoReset=e,Ue.enabled=t,Ue.autoUpdate=r,Ue.needsUpdate=i,Ue.type=n}function Je(e){const t=e.target;t.removeEventListener("dispose",Je),function(e){(function(e){const t=Re.get(e).programs;void 0!==t&&t.forEach((function(e){Fe.releaseProgram(e)}))})(e),Re.remove(e)}(t)}this.xr=Ze,this.getContext=function(){return qe},this.getContextAttributes=function(){return qe.getContextAttributes()},this.forceContextLoss=function(){const e=be.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=be.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return oe},this.setPixelRatio=function(e){void 0!==e&&(oe=e,this.setSize(se,ae,!1))},this.getSize=function(e){return e.set(se,ae)},this.setSize=function(e,r,i){Ze.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(se=e,ae=r,t.width=Math.floor(e*oe),t.height=Math.floor(r*oe),!1!==i&&(t.style.width=e+"px",t.style.height=r+"px"),this.setViewport(0,0,e,r))},this.getDrawingBufferSize=function(e){return e.set(se*oe,ae*oe).floor()},this.setDrawingBufferSize=function(e,r,i){se=e,ae=r,oe=i,t.width=Math.floor(e*i),t.height=Math.floor(r*i),this.setViewport(0,0,e,r)},this.getCurrentViewport=function(e){return e.copy(re)},this.getViewport=function(e){return e.copy(de)},this.setViewport=function(e,t,r,i){e.isVector4?de.set(e.x,e.y,e.z,e.w):de.set(e,t,r,i),Le.viewport(re.copy(de).multiplyScalar(oe).floor())},this.getScissor=function(e){return e.copy(he)},this.setScissor=function(e,t,r,i){e.isVector4?he.set(e.x,e.y,e.z,e.w):he.set(e,t,r,i),Le.scissor(ie.copy(he).multiplyScalar(oe).floor())},this.getScissorTest=function(){return pe},this.setScissorTest=function(e){Le.setScissorTest(pe=e)},this.setOpaqueSort=function(e){le=e},this.setTransparentSort=function(e){ue=e},this.getClearColor=function(e){return e.copy(Ie.getClearColor())},this.setClearColor=function(){Ie.setClearColor.apply(Ie,arguments)},this.getClearAlpha=function(){return Ie.getClearAlpha()},this.setClearAlpha=function(){Ie.setClearAlpha.apply(Ie,arguments)},this.clear=function(e,t,r){let i=0;(void 0===e||e)&&(i|=16384),(void 0===t||t)&&(i|=256),(void 0===r||r)&&(i|=1024),qe.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ke,!1),t.removeEventListener("webglcontextrestored",Xe,!1),Be.dispose(),Ge.dispose(),Re.dispose(),_e.dispose(),Ce.dispose(),Pe.dispose(),je.dispose(),Ze.dispose(),Ze.removeEventListener("sessionstart",$e),Ze.removeEventListener("sessionend",et),xe&&(xe.dispose(),xe=null),tt.stop()},this.renderBufferDirect=function(e,t,r,i,n,s){null===t&&(t=Te);const a=n.isMesh&&n.matrixWorld.determinant()<0,o=function(e,t,r,i,n){!0!==t.isScene&&(t=Te);Ee.resetTextureUnits();const s=t.fog,a=i.isMeshStandardMaterial?t.environment:null,o=null===$?K.outputEncoding:$.texture.encoding,l=(i.isMeshStandardMaterial?Ce:_e).get(i.envMap||a),u=!0===i.vertexColors&&!!r.attributes.color&&4===r.attributes.color.itemSize,d=!!i.normalMap&&!!r.attributes.tangent,h=!!r.morphAttributes.position,p=!!r.morphAttributes.normal,c=r.morphAttributes.position?r.morphAttributes.position.length:0,g=Re.get(i),f=N.state.lights;if(!0===fe&&(!0===me||e!==te)){const t=e===te&&i.id===ee;Ve.setState(i,e,t)}let m=!1;i.version===g.__version?g.needsLights&&g.lightsStateVersion!==f.state.version||g.outputEncoding!==o||n.isInstancedMesh&&!1===g.instancing?m=!0:n.isInstancedMesh||!0!==g.instancing?n.isSkinnedMesh&&!1===g.skinning?m=!0:n.isSkinnedMesh||!0!==g.skinning?g.envMap!==l||i.fog&&g.fog!==s?m=!0:void 0===g.numClippingPlanes||g.numClippingPlanes===Ve.numPlanes&&g.numIntersection===Ve.numIntersection?(g.vertexAlphas!==u||g.vertexTangents!==d||g.morphTargets!==h||g.morphNormals!==p||!0===Se.isWebGL2&&g.morphTargetsCount!==c)&&(m=!0):m=!0:m=!0:m=!0:(m=!0,g.__version=i.version);let x=g.currentProgram;!0===m&&(x=at(i,t,n));let w=!1,v=!1,T=!1;const M=x.getUniforms(),b=g.uniforms;Le.useProgram(x.program)&&(w=!0,v=!0,T=!0);i.id!==ee&&(ee=i.id,v=!0);if(w||te!==e){if(M.setValue(qe,"projectionMatrix",e.projectionMatrix),Se.logarithmicDepthBuffer&&M.setValue(qe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),te!==e&&(te=e,v=!0,T=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const t=M.map.cameraPosition;void 0!==t&&t.setValue(qe,ve.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&M.setValue(qe,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||n.isSkinnedMesh)&&M.setValue(qe,"viewMatrix",e.matrixWorldInverse)}if(n.isSkinnedMesh){M.setOptional(qe,n,"bindMatrix"),M.setOptional(qe,n,"bindMatrixInverse");const e=n.skeleton;e&&(Se.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),M.setValue(qe,"boneTexture",e.boneTexture,Ee),M.setValue(qe,"boneTextureSize",e.boneTextureSize)):M.setOptional(qe,e,"boneMatrices"))}!r||void 0===r.morphAttributes.position&&void 0===r.morphAttributes.normal||ke.update(n,r,i,x);(v||g.receiveShadow!==n.receiveShadow)&&(g.receiveShadow=n.receiveShadow,M.setValue(qe,"receiveShadow",n.receiveShadow));v&&(M.setValue(qe,"toneMappingExposure",K.toneMappingExposure),g.needsLights&&(L=T,(S=b).ambientLightColor.needsUpdate=L,S.lightProbe.needsUpdate=L,S.directionalLights.needsUpdate=L,S.directionalLightShadows.needsUpdate=L,S.pointLights.needsUpdate=L,S.pointLightShadows.needsUpdate=L,S.spotLights.needsUpdate=L,S.spotLightShadows.needsUpdate=L,S.rectAreaLights.needsUpdate=L,S.hemisphereLights.needsUpdate=L),s&&i.fog&&Ae.refreshFogUniforms(b,s),Ae.refreshMaterialUniforms(b,i,oe,ae,xe),P.y.upload(qe,g.uniformsList,b,Ee));var S,L;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(P.y.upload(qe,g.uniformsList,b,Ee),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&M.setValue(qe,"center",n.center);return M.setValue(qe,"modelViewMatrix",n.modelViewMatrix),M.setValue(qe,"normalMatrix",n.normalMatrix),M.setValue(qe,"modelMatrix",n.matrixWorld),x}(e,t,r,i,n);Le.setMaterial(i,a);let l=r.index;const u=r.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;let d,h=1;!0===i.wireframe&&(l=We.getWireframeAttribute(r),h=2),je.setup(n,i,o,r,l);let p=ze;null!==l&&(d=De.get(l),p=He,p.setIndex(d));const c=null!==l?l.count:u.count,g=r.drawRange.start*h,f=r.drawRange.count*h,m=null!==s?s.start*h:0,x=null!==s?s.count*h:1/0,w=Math.max(g,m),v=Math.min(c,g+f,m+x)-1,T=Math.max(0,v-w+1);if(0!==T){if(n.isMesh)!0===i.wireframe?(Le.setLineWidth(i.wireframeLinewidth*Me()),p.setMode(1)):p.setMode(4);else if(n.isLine){let e=i.linewidth;void 0===e&&(e=1),Le.setLineWidth(e*Me()),n.isLineSegments?p.setMode(1):n.isLineLoop?p.setMode(2):p.setMode(3)}else n.isPoints?p.setMode(0):n.isSprite&&p.setMode(4);if(n.isInstancedMesh)p.renderInstances(w,T,n.count);else if(r.isInstancedBufferGeometry){const e=Math.min(r.instanceCount,r._maxInstanceCount);p.renderInstances(w,T,e)}else p.render(w,T)}},this.compile=function(e,t){N=Ge.get(e),N.init(),Z.push(N),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(N.pushLight(e),e.castShadow&&N.pushShadow(e))})),N.setupLights(K.physicallyCorrectLights),e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++){at(r[i],e,t)}else at(r,e,t)})),Z.pop(),N=null};let Qe=null;function $e(){tt.stop()}function et(){tt.start()}const tt=new l.C;function rt(e,t,r,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)r=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)N.pushLight(e),e.castShadow&&N.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||ge.intersectsSprite(e)){i&&ve.setFromMatrixPosition(e.matrixWorld).applyMatrix4(we);const t=Pe.update(e),n=e.material;n.visible&&q.push(e,t,n,r,ve.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==ye.render.frame&&(e.skeleton.update(),e.skeleton.frame=ye.render.frame),!e.frustumCulled||ge.intersectsObject(e))){i&&ve.setFromMatrixPosition(e.matrixWorld).applyMatrix4(we);const t=Pe.update(e),n=e.material;if(Array.isArray(n)){const i=t.groups;for(let s=0,a=i.length;s<a;s++){const a=i[s],o=n[a.materialIndex];o&&o.visible&&q.push(e,t,o,r,ve.z,a)}}else n.visible&&q.push(e,t,n,r,ve.z,null)}const n=e.children;for(let e=0,s=n.length;e<s;e++)rt(n[e],t,r,i)}function it(e,t,r,n){const s=e.opaque,a=e.transmissive,o=e.transparent;N.setupLightsView(r),a.length>0&&function(e,t,r){if(null===xe){const e=!0===k&&!0===Se.isWebGL2?b.p:_.d;xe=new e(1024,1024,{generateMipmaps:!0,type:null!==Oe.convert(i.cLu)?i.cLu:i.ywz,minFilter:i.D1R,magFilter:i.TyD,wrapS:i.uWy,wrapT:i.uWy,useRenderToTexture:be.has("WEBGL_multisampled_render_to_texture")})}const n=K.getRenderTarget();K.setRenderTarget(xe),K.clear();const s=K.toneMapping;K.toneMapping=i.uL9,nt(e,t,r),K.toneMapping=s,Ee.updateMultisampleRenderTarget(xe),Ee.updateRenderTargetMipmap(xe),K.setRenderTarget(n)}(s,t,r),n&&Le.viewport(re.copy(n)),s.length>0&&nt(s,t,r),a.length>0&&nt(a,t,r),o.length>0&&nt(o,t,r)}function nt(e,t,r){const i=!0===t.isScene?t.overrideMaterial:null;for(let n=0,s=e.length;n<s;n++){const s=e[n],a=s.object,o=s.geometry,l=null===i?s.material:i,u=s.group;a.layers.test(r.layers)&&st(a,t,r,o,l,u)}}function st(e,t,r,n,s,a){e.onBeforeRender(K,t,r,n,s,a),e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),s.onBeforeRender(K,t,r,n,e,a),!0===s.transparent&&s.side===i.ehD?(s.side=i._Li,s.needsUpdate=!0,K.renderBufferDirect(r,t,n,s,e,a),s.side=i.Wl3,s.needsUpdate=!0,K.renderBufferDirect(r,t,n,s,e,a),s.side=i.ehD):K.renderBufferDirect(r,t,n,s,e,a),e.onAfterRender(K,t,r,n,s,a)}function at(e,t,r){!0!==t.isScene&&(t=Te);const i=Re.get(e),n=N.state.lights,s=N.state.shadowsArray,a=n.state.version,o=Fe.getParameters(e,n.state,s,t,r),l=Fe.getProgramCacheKey(o);let u=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?Ce:_e).get(e.envMap||i.environment),void 0===u&&(e.addEventListener("dispose",Je),u=new Map,i.programs=u);let d=u.get(l);if(void 0!==d){if(i.currentProgram===d&&i.lightsStateVersion===a)return ot(e,o),d}else o.uniforms=Fe.getUniforms(e),e.onBuild(r,o,K),e.onBeforeCompile(o,K),d=Fe.acquireProgram(o,l),u.set(l,d),i.uniforms=o.uniforms;const h=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=Ve.uniform),ot(e,o),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=a,i.needsLights&&(h.ambientLightColor.value=n.state.ambient,h.lightProbe.value=n.state.probe,h.directionalLights.value=n.state.directional,h.directionalLightShadows.value=n.state.directionalShadow,h.spotLights.value=n.state.spot,h.spotLightShadows.value=n.state.spotShadow,h.rectAreaLights.value=n.state.rectArea,h.ltc_1.value=n.state.rectAreaLTC1,h.ltc_2.value=n.state.rectAreaLTC2,h.pointLights.value=n.state.point,h.pointLightShadows.value=n.state.pointShadow,h.hemisphereLights.value=n.state.hemi,h.directionalShadowMap.value=n.state.directionalShadowMap,h.directionalShadowMatrix.value=n.state.directionalShadowMatrix,h.spotShadowMap.value=n.state.spotShadowMap,h.spotShadowMatrix.value=n.state.spotShadowMatrix,h.pointShadowMap.value=n.state.pointShadowMap,h.pointShadowMatrix.value=n.state.pointShadowMatrix);const p=d.getUniforms(),c=P.y.seqWithValue(p.seq,h);return i.currentProgram=d,i.uniformsList=c,d}function ot(e,t){const r=Re.get(e);r.outputEncoding=t.outputEncoding,r.instancing=t.instancing,r.skinning=t.skinning,r.morphTargets=t.morphTargets,r.morphNormals=t.morphNormals,r.morphTargetsCount=t.morphTargetsCount,r.numClippingPlanes=t.numClippingPlanes,r.numIntersection=t.numClipIntersection,r.vertexAlphas=t.vertexAlphas,r.vertexTangents=t.vertexTangents}tt.setAnimationLoop((function(e){Qe&&Qe(e)})),"undefined"!=typeof window&&tt.setContext(window),this.setAnimationLoop=function(e){Qe=e,Ze.setAnimationLoop(e),null===e?tt.stop():tt.start()},Ze.addEventListener("sessionstart",$e),Ze.addEventListener("sessionend",et),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===X)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===Ze.enabled&&!0===Ze.isPresenting&&(!0===Ze.cameraAutoUpdate&&Ze.updateCamera(t),t=Ze.getCamera()),!0===e.isScene&&e.onBeforeRender(K,e,t,$),N=Ge.get(e,Z.length),N.init(),Z.push(N),we.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ge.setFromProjectionMatrix(we),me=this.localClippingEnabled,fe=Ve.init(this.clippingPlanes,me,t),q=Be.get(e,Y.length),q.init(),Y.push(q),rt(e,t,0,K.sortObjects),q.finish(),!0===K.sortObjects&&q.sort(le,ue),!0===fe&&Ve.beginShadows();const r=N.state.shadowsArray;if(Ue.render(r,e,t),!0===fe&&Ve.endShadows(),!0===this.info.autoReset&&this.info.reset(),Ie.render(q,e),N.setupLights(K.physicallyCorrectLights),t.isArrayCamera){const r=t.cameras;for(let t=0,i=r.length;t<i;t++){const i=r[t];it(q,e,i,i.viewport)}}else it(q,e,t);null!==$&&(Ee.updateMultisampleRenderTarget($),Ee.updateRenderTargetMipmap($)),!0===e.isScene&&e.onAfterRender(K,e,t),Le.buffers.depth.setTest(!0),Le.buffers.depth.setMask(!0),Le.buffers.color.setMask(!0),Le.setPolygonOffset(!1),je.resetDefaultState(),ee=-1,te=null,Z.pop(),N=Z.length>0?Z[Z.length-1]:null,Y.pop(),q=Y.length>0?Y[Y.length-1]:null},this.getActiveCubeFace=function(){return J},this.getActiveMipmapLevel=function(){return Q},this.getRenderTarget=function(){return $},this.setRenderTargetTextures=function(e,t,r){Re.get(e.texture).__webglTexture=t,Re.get(e.depthTexture).__webglTexture=r;const i=Re.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===r,i.__autoAllocateDepthBuffer||e.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),e.useRenderToTexture=!1,e.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(e,t){const r=Re.get(e);r.__webglFramebuffer=t,r.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,r=0){$=e,J=t,Q=r;let i=!0;if(e){const t=Re.get(e);void 0!==t.__useDefaultFramebuffer?(Le.bindFramebuffer(36160,null),i=!1):void 0===t.__webglFramebuffer?Ee.setupRenderTarget(e):t.__hasExternalTextures&&Ee.rebindTextures(e,Re.get(e.texture).__webglTexture,Re.get(e.depthTexture).__webglTexture)}let n=null,s=!1,a=!1;if(e){const r=e.texture;(r.isDataTexture3D||r.isDataTexture2DArray)&&(a=!0);const i=Re.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(n=i[t],s=!0):n=e.useRenderbuffer?Re.get(e).__webglMultisampledFramebuffer:i,re.copy(e.viewport),ie.copy(e.scissor),ne=e.scissorTest}else re.copy(de).multiplyScalar(oe).floor(),ie.copy(he).multiplyScalar(oe).floor(),ne=pe;if(Le.bindFramebuffer(36160,n)&&Se.drawBuffers&&i){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const r=e.texture;if(ce.length!==r.length||36064!==ce[0]){for(let e=0,t=r.length;e<t;e++)ce[e]=36064+e;ce.length=r.length,t=!0}}else 1===ce.length&&36064===ce[0]||(ce[0]=36064,ce.length=1,t=!0);else 1===ce.length&&1029===ce[0]||(ce[0]=1029,ce.length=1,t=!0);t&&(Se.isWebGL2?qe.drawBuffers(ce):be.get("WEBGL_draw_buffers").drawBuffersWEBGL(ce))}if(Le.viewport(re),Le.scissor(ie),Le.setScissorTest(ne),s){const i=Re.get(e.texture);qe.framebufferTexture2D(36160,36064,34069+t,i.__webglTexture,r)}else if(a){const i=Re.get(e.texture),n=t||0;qe.framebufferTextureLayer(36160,36064,i.__webglTexture,r||0,n)}ee=-1},this.readRenderTargetPixels=function(e,t,r,n,s,a,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=Re.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(l=l[o]),l){Le.bindFramebuffer(36160,l);try{const o=e.texture,l=o.format,u=o.type;if(l!==i.wk1&&Oe.convert(l)!==qe.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const d=u===i.cLu&&(be.has("EXT_color_buffer_half_float")||Se.isWebGL2&&be.has("EXT_color_buffer_float"));if(!(u===i.ywz||Oe.convert(u)===qe.getParameter(35738)||u===i.VzW&&(Se.isWebGL2||be.has("OES_texture_float")||be.has("WEBGL_color_buffer_float"))||d))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===qe.checkFramebufferStatus(36160)?t>=0&&t<=e.width-n&&r>=0&&r<=e.height-s&&qe.readPixels(t,r,n,s,Oe.convert(l),Oe.convert(u),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==$?Re.get($).__webglFramebuffer:null;Le.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,r=0){const i=Math.pow(2,-r),n=Math.floor(t.image.width*i),s=Math.floor(t.image.height*i);let a=Oe.convert(t.format);Se.isWebGL2&&(6407===a&&(a=32849),6408===a&&(a=32856)),Ee.setTexture2D(t,0),qe.copyTexImage2D(3553,r,a,e.x,e.y,n,s,0),Le.unbindTexture()},this.copyTextureToTexture=function(e,t,r,i=0){const n=t.image.width,s=t.image.height,a=Oe.convert(r.format),o=Oe.convert(r.type);Ee.setTexture2D(r,0),qe.pixelStorei(37440,r.flipY),qe.pixelStorei(37441,r.premultiplyAlpha),qe.pixelStorei(3317,r.unpackAlignment),t.isDataTexture?qe.texSubImage2D(3553,i,e.x,e.y,n,s,a,o,t.image.data):t.isCompressedTexture?qe.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):qe.texSubImage2D(3553,i,e.x,e.y,a,o,t.image),0===i&&r.generateMipmaps&&qe.generateMipmap(3553),Le.unbindTexture()},this.copyTextureToTexture3D=function(e,t,r,i,n=0){if(K.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=Oe.convert(i.format),u=Oe.convert(i.type);let d;if(i.isDataTexture3D)Ee.setTexture3D(i,0),d=32879;else{if(!i.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ee.setTexture2DArray(i,0),d=35866}qe.pixelStorei(37440,i.flipY),qe.pixelStorei(37441,i.premultiplyAlpha),qe.pixelStorei(3317,i.unpackAlignment);const h=qe.getParameter(3314),p=qe.getParameter(32878),c=qe.getParameter(3316),g=qe.getParameter(3315),f=qe.getParameter(32877),m=r.isCompressedTexture?r.mipmaps[0]:r.image;qe.pixelStorei(3314,m.width),qe.pixelStorei(32878,m.height),qe.pixelStorei(3316,e.min.x),qe.pixelStorei(3315,e.min.y),qe.pixelStorei(32877,e.min.z),r.isDataTexture||r.isDataTexture3D?qe.texSubImage3D(d,n,t.x,t.y,t.z,s,a,o,l,u,m.data):r.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),qe.compressedTexSubImage3D(d,n,t.x,t.y,t.z,s,a,o,l,m.data)):qe.texSubImage3D(d,n,t.x,t.y,t.z,s,a,o,l,u,m),qe.pixelStorei(3314,h),qe.pixelStorei(32878,p),qe.pixelStorei(3316,c),qe.pixelStorei(3315,g),qe.pixelStorei(32877,f),0===n&&i.generateMipmaps&&qe.generateMipmap(d),Le.unbindTexture()},this.initTexture=function(e){Ee.setTexture2D(e,0),Le.unbindTexture()},this.resetState=function(){J=0,Q=0,$=null,Le.reset(),je.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}V.prototype.isWebGLRenderer=!0}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[444],{3245:(e,t,n)=>{n.d(t,{M:()=>y});var i=n(8719),a=n(7406),r=n(1051),o=n(6881),s=n(223),l=n(924),c=n(4302),u=n(2010);const d={type:"move"};class h{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new u.Z,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new u.Z,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new o.P,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new o.P),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new u.Z,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new o.P,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new o.P),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,a=null,r=null;const o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==o&&(i=t.getPose(e.targetRaySpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(d))),l&&e.hand){r=!0;for(const i of e.hand.values()){const e=t.getJointPose(i,n);if(void 0===l.joints[i.jointName]){const e=new u.Z;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[i.jointName]=e,l.add(e)}const a=l.joints[i.jointName];null!==e&&(a.matrix.fromArray(e.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.jointRadius=e.radius),a.visible=null!==e}const i=l.joints["index-finger-tip"],a=l.joints["thumb-tip"],o=i.position.distanceTo(a.position),s=.02,c=.005;l.inputState.pinching&&o>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),null!==a&&(s.matrix.fromArray(a.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),a.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(a.linearVelocity)):s.hasLinearVelocity=!1,a.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(a.angularVelocity)):s.hasAngularVelocity=!1));return null!==o&&(o.visible=null!==i),null!==s&&(s.visible=null!==a),null!==l&&(l.visible=null!==r),this}}var p=n(2638),g=n(8449),f=n(1661);class y extends a.p{constructor(e,t){super();const n=this;let a=null,u=1,d=null,y="local-floor";const m=e.extensions.has("WEBGL_multisampled_render_to_texture");let v=null,x=null,_=null,w=null,b=!1,R=null;const S=t.getContextAttributes();let V=null,E=null;const L=[],T=new Map,W=new r.c;W.layers.enable(1),W.viewport=new s.L;const A=new r.c;A.layers.enable(2),A.viewport=new s.L;const P=[W,A],j=new i.H;j.layers.enable(1),j.layers.enable(2);let F=null,M=null;function k(e){const t=T.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function C(){T.forEach((function(e,t){e.disconnect(t)})),T.clear(),F=null,M=null,e.setRenderTarget(V),w=null,_=null,x=null,a=null,E=null,G.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function H(e){const t=a.inputSources;for(let e=0;e<L.length;e++)T.set(t[e],L[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=T.get(n);i&&(i.dispatchEvent({type:"disconnected",data:n}),T.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],i=T.get(n);i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=L[e];return void 0===t&&(t=new h,L[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=L[e];return void 0===t&&(t=new h,L[e]=t),t.getGripSpace()},this.getHand=function(e){let t=L[e];return void 0===t&&(t=new h,L[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){u=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){y=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d},this.getBaseLayer=function(){return null!==_?_:w},this.getBinding=function(){return x},this.getFrame=function(){return R},this.getSession=function(){return a},this.setSession=async function(i){if(a=i,null!==a){if(V=e.getRenderTarget(),a.addEventListener("select",k),a.addEventListener("selectstart",k),a.addEventListener("selectend",k),a.addEventListener("squeeze",k),a.addEventListener("squeezestart",k),a.addEventListener("squeezeend",k),a.addEventListener("end",C),a.addEventListener("inputsourceschange",H),!0!==S.xrCompatible&&await t.makeXRCompatible(),void 0===a.renderState.layers||!1===e.capabilities.isWebGL2){const e={antialias:void 0!==a.renderState.layers||S.antialias,alpha:S.alpha,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:u};w=new XRWebGLLayer(a,t,e),a.updateRenderState({baseLayer:w}),E=new c.d(w.framebufferWidth,w.framebufferHeight)}else{b=S.antialias;let e=null,n=null,i=null;S.depth&&(i=S.stencil?35056:33189,e=S.stencil?f.brP:f.qkB,n=S.stencil?f.wJv:f.LsT);const r={colorFormat:S.alpha||b?32856:32849,depthFormat:i,scaleFactor:u};x=new XRWebGLBinding(a,t),_=x.createProjectionLayer(r),a.updateRenderState({layers:[_]}),E=b?new g.p(_.textureWidth,_.textureHeight,{format:f.wk1,type:f.ywz,depthTexture:new p.$(_.textureWidth,_.textureHeight,n,void 0,void 0,void 0,void 0,void 0,void 0,e),stencilBuffer:S.stencil,ignoreDepth:_.ignoreDepthValues,useRenderToTexture:m}):new c.d(_.textureWidth,_.textureHeight,{format:S.alpha?f.wk1:f.UCm,type:f.ywz,depthTexture:new p.$(_.textureWidth,_.textureHeight,n,void 0,void 0,void 0,void 0,void 0,void 0,e),stencilBuffer:S.stencil,ignoreDepth:_.ignoreDepthValues})}this.setFoveation(0),d=await a.requestReferenceSpace(y),G.setContext(a),G.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const U=new o.P,q=new o.P;function B(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===a)return;j.near=A.near=W.near=e.near,j.far=A.far=W.far=e.far,F===j.near&&M===j.far||(a.updateRenderState({depthNear:j.near,depthFar:j.far}),F=j.near,M=j.far);const t=e.parent,n=j.cameras;B(j,t);for(let e=0;e<n.length;e++)B(n[e],t);j.matrixWorld.decompose(j.position,j.quaternion,j.scale),e.position.copy(j.position),e.quaternion.copy(j.quaternion),e.scale.copy(j.scale),e.matrix.copy(j.matrix),e.matrixWorld.copy(j.matrixWorld);const i=e.children;for(let e=0,t=i.length;e<t;e++)i[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){U.setFromMatrixPosition(t.matrixWorld),q.setFromMatrixPosition(n.matrixWorld);const i=U.distanceTo(q),a=t.projectionMatrix.elements,r=n.projectionMatrix.elements,o=a[14]/(a[10]-1),s=a[14]/(a[10]+1),l=(a[9]+1)/a[5],c=(a[9]-1)/a[5],u=(a[8]-1)/a[0],d=(r[8]+1)/r[0],h=o*u,p=o*d,g=i/(-u+d),f=g*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(f),e.translateZ(g),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const y=o+g,m=s+g,v=h-f,x=p+(i-f),_=l*s/m*y,w=c*s/m*y;e.projectionMatrix.makePerspective(v,x,_,w,y,m)}(j,W,A):j.projectionMatrix.copy(W.projectionMatrix)},this.getCamera=function(){return j},this.getFoveation=function(){return null!==_?_.fixedFoveation:null!==w?w.fixedFoveation:void 0},this.setFoveation=function(e){null!==_&&(_.fixedFoveation=e),null!==w&&void 0!==w.fixedFoveation&&(w.fixedFoveation=e)};let D=null;const G=new l.C;G.setAnimationLoop((function(t,n){if(v=n.getViewerPose(d),R=n,null!==v){const t=v.views;null!==w&&(e.setRenderTargetFramebuffer(E,w.framebuffer),e.setRenderTarget(E));let n=!1;t.length!==j.cameras.length&&(j.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const a=t[i];let r=null;if(null!==w)r=w.getViewport(a);else{const t=x.getViewSubImage(_,a);r=t.viewport,0===i&&(e.setRenderTargetTextures(E,t.colorTexture,_.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(E))}const o=P[i];o.matrix.fromArray(a.transform.matrix),o.projectionMatrix.fromArray(a.projectionMatrix),o.viewport.set(r.x,r.y,r.width,r.height),0===i&&j.matrix.copy(o.matrix),!0===n&&j.cameras.push(o)}}const i=a.inputSources;for(let e=0;e<L.length;e++){const t=L[e],a=i[e];t.update(a,n,d)}D&&D(t,n),R=null})),this.setAnimationLoop=function(e){D=e},this.dispose=function(){}}}},7365:(e,t,n)=>{n.d(t,{x:()=>a});var i=n(6469);class a extends i.T{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}a.prototype.isScene=!0}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[923],{3379:e=>{var t=[];function s(e){for(var s=-1,n=0;n<t.length;n++)if(t[n].identifier===e){s=n;break}return s}function n(e,n){for(var o={},i=[],a=0;a<e.length;a++){var l=e[a],c=n.base?l[0]+n.base:l[0],u=o[c]||0,h="".concat(c," ").concat(u);o[c]=u+1;var p=s(h),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(d);else{var m=r(d,n);n.byIndex=a,t.splice(a,0,{identifier:h,updater:m,references:1})}i.push(h)}return i}function r(e,t){var s=t.domAPI(t);s.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,r){var o=n(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var a=s(o[i]);t[a].references--}for(var l=n(e,r),c=0;c<o.length;c++){var u=s(o[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=l}}},569:e=>{var t={};e.exports=function(e,s){var n=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(s)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var n="";s.supports&&(n+="@supports (".concat(s.supports,") {")),s.media&&(n+="@media ".concat(s.media," {"));var r=void 0!==s.layer;r&&(n+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),n+=s.css,r&&(n+="}"),s.media&&(n+="}"),s.supports&&(n+="}");var o=s.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},8719:(e,t,s)=>{s.d(t,{H:()=>r});var n=s(1051);class r extends n.c{constructor(e=[]){super(),this.cameras=e}}r.prototype.isArrayCamera=!0},1929:(e,t,s)=>{s.d(t,{V:()=>o});var n=s(9203),r=s(6469);class o extends r.T{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new n.y,this.projectionMatrix=new n.y,this.projectionMatrixInverse=new n.y}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}o.prototype.isCamera=!0},2496:(e,t,s)=>{s.d(t,{_:()=>a});var n=s(6469),r=s(6881),o=s(1051);const i=90;class a extends n.T{constructor(e,t,s){if(super(),this.type="CubeCamera",!0!==s.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=s;const n=new o.c(i,1,e,t);n.layers=this.layers,n.up.set(0,-1,0),n.lookAt(new r.P(1,0,0)),this.add(n);const a=new o.c(i,1,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new r.P(-1,0,0)),this.add(a);const l=new o.c(i,1,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(new r.P(0,1,0)),this.add(l);const c=new o.c(i,1,e,t);c.layers=this.layers,c.up.set(0,0,-1),c.lookAt(new r.P(0,-1,0)),this.add(c);const u=new o.c(i,1,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new r.P(0,0,1)),this.add(u);const h=new o.c(i,1,e,t);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new r.P(0,0,-1)),this.add(h)}update(e,t){null===this.parent&&this.updateMatrixWorld();const s=this.renderTarget,[n,r,o,i,a,l]=this.children,c=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=s.texture.generateMipmaps;s.texture.generateMipmaps=!1,e.setRenderTarget(s,0),e.render(t,n),e.setRenderTarget(s,1),e.render(t,r),e.setRenderTarget(s,2),e.render(t,o),e.setRenderTarget(s,3),e.render(t,i),e.setRenderTarget(s,4),e.render(t,a),s.texture.generateMipmaps=h,e.setRenderTarget(s,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c}}},3131:(e,t,s)=>{s.d(t,{i:()=>r});var n=s(1929);class r extends n.V{constructor(e=-1,t=1,s=1,n=-1,r=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=s,this.bottom=n,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,s,n,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=s,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let r=s-e,o=s+e,i=n+t,a=n-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,o=r+e*this.view.width,i-=t*this.view.offsetY,a=i-t*this.view.height}this.projectionMatrix.makeOrthographic(r,o,i,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}r.prototype.isOrthographicCamera=!0},1051:(e,t,s)=>{s.d(t,{c:()=>o});var n=s(1929),r=s(2043);class o extends n.V{constructor(e=50,t=1,s=.1,n=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=s,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*r.I3*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*r.qW*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*r.I3*Math.atan(Math.tan(.5*r.qW*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,s,n,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=s,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*r.qW*this.fov)/this.zoom,s=2*t,n=this.aspect*s,o=-.5*n;const i=this.view;if(null!==this.view&&this.view.enabled){const e=i.fullWidth,r=i.fullHeight;o+=i.offsetX*n/e,t-=i.offsetY*s/r,n*=i.width/e,s*=i.height/r}const a=this.filmOffset;0!==a&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+n,t,t-s,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}o.prototype.isPerspectiveCamera=!0},1661:(e,t,s)=>{s.d(t,{UZH:()=>n,RsA:()=>r,QmN:()=>o,PeU:()=>i,tm_:()=>a,S2y:()=>l,_iA:()=>c,ntZ:()=>u,dwk:()=>h,Wl3:()=>p,_Li:()=>d,ehD:()=>m,esl:()=>f,jFi:()=>g,bdR:()=>y,WMw:()=>v,N4l:()=>T,M5h:()=>b,Xaj:()=>x,bGH:()=>E,Wbm:()=>w,rOj:()=>_,r_:()=>M,Sm8:()=>A,c8b:()=>R,ghN:()=>S,KhW:()=>N,iWC:()=>P,k74:()=>I,LgZ:()=>L,fSK:()=>O,Hy8:()=>C,Vdb:()=>k,Wpd:()=>F,RlZ:()=>H,BVF:()=>j,Se2:()=>U,Zr5:()=>V,vCF:()=>D,eD:()=>B,ksN:()=>G,w$m:()=>z,M6v:()=>K,Ns1:()=>W,qhX:()=>Y,NDo:()=>X,uL9:()=>q,EoG:()=>Z,CdI:()=>J,YGz:()=>Q,LY2:()=>$,dZ3:()=>ee,xfE:()=>te,fY$:()=>se,vxC:()=>ne,dSO:()=>re,Bf4:()=>oe,g8_:()=>ie,SVc:()=>ae,rpg:()=>le,uWy:()=>ce,OoA:()=>ue,TyD:()=>he,YLQ:()=>pe,aH4:()=>de,wem:()=>me,qyh:()=>fe,D1R:()=>ge,ywz:()=>ye,T95:()=>ve,iAb:()=>Te,LsT:()=>be,Kz5:()=>xe,JQ4:()=>Ee,VzW:()=>we,cLu:()=>_e,k0A:()=>Me,irR:()=>Ae,XNv:()=>Re,wJv:()=>Se,OTo:()=>Ne,UCm:()=>Pe,wk1:()=>Ie,Y8D:()=>Le,cRx:()=>Oe,aoB:()=>Ce,qkB:()=>ke,brP:()=>Fe,hEm:()=>He,D9w:()=>je,av9:()=>Ue,CtA:()=>Ve,F5G:()=>De,E2K:()=>Be,wuA:()=>Ge,BFQ:()=>ze,v3W:()=>Ke,ILR:()=>We,_AM:()=>Ye,vCx:()=>Xe,eaV:()=>qe,CaW:()=>Ze,fto:()=>Je,l0P:()=>Qe,ekQ:()=>$e,ptH:()=>et,jZA:()=>tt,y2t:()=>st,gi4:()=>nt,Djp:()=>rt,BG$:()=>ot,NYV:()=>it,xJs:()=>at,pKu:()=>lt,GG6:()=>ct,Gih:()=>ut,FUD:()=>ht,iiP:()=>pt,SvJ:()=>dt,bsb:()=>mt,APR:()=>ft,Abz:()=>gt,v6B:()=>yt,pnl:()=>vt,OS$:()=>Tt,_wO:()=>bt,bcs:()=>xt,Y5S:()=>Et,Wso:()=>wt,p1$:()=>_t,I0h:()=>Mt,Yjz:()=>At,ePn:()=>Rt,HBG:()=>St,Syv:()=>Nt,NMF:()=>Pt,pIN:()=>It,Pnf:()=>Lt,_lf:()=>Ot,_sL:()=>Ct,IFH:()=>kt,gSk:()=>Ft,UlW:()=>Ht,z$h:()=>jt,rnI:()=>Ut,knz:()=>Vt,pMV:()=>Dt,KC9:()=>Bt,LgE:()=>Gt,Inb:()=>zt,gMp:()=>Kt,z81:()=>Wt,mSO:()=>Yt,IOt:()=>Xt,PA7:()=>qt,x5V:()=>Zt,cum:()=>Jt,W2J:()=>Qt,LSk:()=>$t});const n="135",r={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},i=0,a=1,l=2,c=1,u=2,h=3,p=0,d=1,m=2,f=1,g=0,y=1,v=2,T=3,b=4,x=5,E=100,w=101,_=102,M=103,A=104,R=200,S=201,N=202,P=203,I=204,L=205,O=206,C=207,k=208,F=209,H=210,j=0,U=1,V=2,D=3,B=4,G=5,z=6,K=7,W=0,Y=1,X=2,q=0,Z=1,J=2,Q=3,$=4,ee=5,te=300,se=301,ne=302,re=303,oe=304,ie=306,ae=307,le=1e3,ce=1001,ue=1002,he=1003,pe=1004,de=1005,me=1006,fe=1007,ge=1008,ye=1009,ve=1010,Te=1011,be=1012,xe=1013,Ee=1014,we=1015,_e=1016,Me=1017,Ae=1018,Re=1019,Se=1020,Ne=1021,Pe=1022,Ie=1023,Le=1024,Oe=1025,Ce=Ie,ke=1026,Fe=1027,He=1028,je=1029,Ue=1030,Ve=1031,De=1032,Be=1033,Ge=33776,ze=33777,Ke=33778,We=33779,Ye=35840,Xe=35841,qe=35842,Ze=35843,Je=36196,Qe=37492,$e=37496,et=37808,tt=37809,st=37810,nt=37811,rt=37812,ot=37813,it=37814,at=37815,lt=37816,ct=37817,ut=37818,ht=37819,pt=37820,dt=37821,mt=36492,ft=37840,gt=37841,yt=37842,vt=37843,Tt=37844,bt=37845,xt=37846,Et=37847,wt=37848,_t=37849,Mt=37850,At=37851,Rt=37852,St=37853,Nt=2300,Pt=2301,It=2302,Lt=2400,Ot=2401,Ct=2402,kt=2500,Ft=2501,Ht=1,jt=2,Ut=3e3,Vt=3001,Dt=3007,Bt=3002,Gt=3004,zt=3005,Kt=3006,Wt=3200,Yt=3201,Xt=0,qt=1,Zt=7680,Jt=519,Qt=35044,$t="300 es"},9365:(e,t,s)=>{s.d(t,{z:()=>p});var n=s(7406),r=s(6881),o=s(1661),i=s(7092),a=s(6214),l=s(1138);const c={type:"change"},u={type:"start"},h={type:"end"};class p extends n.p{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new r.P,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:o.RsA.ROTATE,MIDDLE:o.RsA.DOLLY,RIGHT:o.RsA.PAN},this.touches={ONE:o.QmN.ROTATE,TWO:o.QmN.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",J),this._domElementKeyEvents=e},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(c),s.update(),p=n.NONE},this.update=function(){const t=new r.P,o=(new i._).setFromUnitVectors(e.up,new r.P(0,1,0)),a=o.clone().invert(),l=new r.P,u=new i._,h=2*Math.PI;return function(){const e=s.object.position;t.copy(e).sub(s.target),t.applyQuaternion(o),m.setFromVector3(t),s.autoRotate&&p===n.NONE&&I(2*Math.PI/60/60*s.autoRotateSpeed),s.enableDamping?(m.theta+=f.theta*s.dampingFactor,m.phi+=f.phi*s.dampingFactor):(m.theta+=f.theta,m.phi+=f.phi);let r=s.minAzimuthAngle,i=s.maxAzimuthAngle;return isFinite(r)&&isFinite(i)&&(r<-Math.PI?r+=h:r>Math.PI&&(r-=h),i<-Math.PI?i+=h:i>Math.PI&&(i-=h),m.theta=r<=i?Math.max(r,Math.min(i,m.theta)):m.theta>(r+i)/2?Math.max(r,m.theta):Math.min(i,m.theta)),m.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=g,m.radius=Math.max(s.minDistance,Math.min(s.maxDistance,m.radius)),!0===s.enableDamping?s.target.addScaledVector(y,s.dampingFactor):s.target.add(y),t.setFromSpherical(m),t.applyQuaternion(a),e.copy(s.target).add(t),s.object.lookAt(s.target),!0===s.enableDamping?(f.theta*=1-s.dampingFactor,f.phi*=1-s.dampingFactor,y.multiplyScalar(1-s.dampingFactor)):(f.set(0,0,0),y.set(0,0,0)),g=1,!!(v||l.distanceToSquared(s.object.position)>d||8*(1-u.dot(s.object.quaternion))>d)&&(s.dispatchEvent(c),l.copy(s.object.position),u.copy(s.object.quaternion),v=!1,!0)}}(),this.dispose=function(){s.domElement.removeEventListener("contextmenu",Q),s.domElement.removeEventListener("pointerdown",W),s.domElement.removeEventListener("pointercancel",q),s.domElement.removeEventListener("wheel",Z),s.domElement.removeEventListener("pointermove",Y),s.domElement.removeEventListener("pointerup",X),null!==s._domElementKeyEvents&&s._domElementKeyEvents.removeEventListener("keydown",J)};const s=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let p=n.NONE;const d=1e-6,m=new a.$,f=new a.$;let g=1;const y=new r.P;let v=!1;const T=new l.F,b=new l.F,x=new l.F,E=new l.F,w=new l.F,_=new l.F,M=new l.F,A=new l.F,R=new l.F,S=[],N={};function P(){return Math.pow(.95,s.zoomSpeed)}function I(e){f.theta-=e}function L(e){f.phi-=e}const O=function(){const e=new r.P;return function(t,s){e.setFromMatrixColumn(s,0),e.multiplyScalar(-t),y.add(e)}}(),C=function(){const e=new r.P;return function(t,n){!0===s.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(s.object.up,e)),e.multiplyScalar(t),y.add(e)}}(),k=function(){const e=new r.P;return function(t,n){const r=s.domElement;if(s.object.isPerspectiveCamera){const o=s.object.position;e.copy(o).sub(s.target);let i=e.length();i*=Math.tan(s.object.fov/2*Math.PI/180),O(2*t*i/r.clientHeight,s.object.matrix),C(2*n*i/r.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(O(t*(s.object.right-s.object.left)/s.object.zoom/r.clientWidth,s.object.matrix),C(n*(s.object.top-s.object.bottom)/s.object.zoom/r.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function F(e){s.object.isPerspectiveCamera?g/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function H(e){s.object.isPerspectiveCamera?g*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function j(e){T.set(e.clientX,e.clientY)}function U(e){E.set(e.clientX,e.clientY)}function V(){if(1===S.length)T.set(S[0].pageX,S[0].pageY);else{const e=.5*(S[0].pageX+S[1].pageX),t=.5*(S[0].pageY+S[1].pageY);T.set(e,t)}}function D(){if(1===S.length)E.set(S[0].pageX,S[0].pageY);else{const e=.5*(S[0].pageX+S[1].pageX),t=.5*(S[0].pageY+S[1].pageY);E.set(e,t)}}function B(){const e=S[0].pageX-S[1].pageX,t=S[0].pageY-S[1].pageY,s=Math.sqrt(e*e+t*t);M.set(0,s)}function G(e){if(1==S.length)b.set(e.pageX,e.pageY);else{const t=te(e),s=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);b.set(s,n)}x.subVectors(b,T).multiplyScalar(s.rotateSpeed);const t=s.domElement;I(2*Math.PI*x.x/t.clientHeight),L(2*Math.PI*x.y/t.clientHeight),T.copy(b)}function z(e){if(1===S.length)w.set(e.pageX,e.pageY);else{const t=te(e),s=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);w.set(s,n)}_.subVectors(w,E).multiplyScalar(s.panSpeed),k(_.x,_.y),E.copy(w)}function K(e){const t=te(e),n=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(n*n+r*r);A.set(0,o),R.set(0,Math.pow(A.y/M.y,s.zoomSpeed)),F(R.y),M.copy(A)}function W(e){!1!==s.enabled&&(0===S.length&&(s.domElement.setPointerCapture(e.pointerId),s.domElement.addEventListener("pointermove",Y),s.domElement.addEventListener("pointerup",X)),function(e){S.push(e)}(e),"touch"===e.pointerType?function(e){switch(ee(e),S.length){case 1:switch(s.touches.ONE){case o.QmN.ROTATE:if(!1===s.enableRotate)return;V(),p=n.TOUCH_ROTATE;break;case o.QmN.PAN:if(!1===s.enablePan)return;D(),p=n.TOUCH_PAN;break;default:p=n.NONE}break;case 2:switch(s.touches.TWO){case o.QmN.DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;s.enableZoom&&B(),s.enablePan&&D(),p=n.TOUCH_DOLLY_PAN;break;case o.QmN.DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;s.enableZoom&&B(),s.enableRotate&&V(),p=n.TOUCH_DOLLY_ROTATE;break;default:p=n.NONE}break;default:p=n.NONE}p!==n.NONE&&s.dispatchEvent(u)}(e):function(e){let t;switch(e.button){case 0:t=s.mouseButtons.LEFT;break;case 1:t=s.mouseButtons.MIDDLE;break;case 2:t=s.mouseButtons.RIGHT;break;default:t=-1}switch(t){case o.RsA.DOLLY:if(!1===s.enableZoom)return;!function(e){M.set(e.clientX,e.clientY)}(e),p=n.DOLLY;break;case o.RsA.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enablePan)return;U(e),p=n.PAN}else{if(!1===s.enableRotate)return;j(e),p=n.ROTATE}break;case o.RsA.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enableRotate)return;j(e),p=n.ROTATE}else{if(!1===s.enablePan)return;U(e),p=n.PAN}break;default:p=n.NONE}p!==n.NONE&&s.dispatchEvent(u)}(e))}function Y(e){!1!==s.enabled&&("touch"===e.pointerType?function(e){switch(ee(e),p){case n.TOUCH_ROTATE:if(!1===s.enableRotate)return;G(e),s.update();break;case n.TOUCH_PAN:if(!1===s.enablePan)return;z(e),s.update();break;case n.TOUCH_DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){s.enableZoom&&K(e),s.enablePan&&z(e)}(e),s.update();break;case n.TOUCH_DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(e){s.enableZoom&&K(e),s.enableRotate&&G(e)}(e),s.update();break;default:p=n.NONE}}(e):function(e){if(!1===s.enabled)return;switch(p){case n.ROTATE:if(!1===s.enableRotate)return;!function(e){b.set(e.clientX,e.clientY),x.subVectors(b,T).multiplyScalar(s.rotateSpeed);const t=s.domElement;I(2*Math.PI*x.x/t.clientHeight),L(2*Math.PI*x.y/t.clientHeight),T.copy(b),s.update()}(e);break;case n.DOLLY:if(!1===s.enableZoom)return;!function(e){A.set(e.clientX,e.clientY),R.subVectors(A,M),R.y>0?F(P()):R.y<0&&H(P()),M.copy(A),s.update()}(e);break;case n.PAN:if(!1===s.enablePan)return;!function(e){w.set(e.clientX,e.clientY),_.subVectors(w,E).multiplyScalar(s.panSpeed),k(_.x,_.y),E.copy(w),s.update()}(e)}}(e))}function X(e){$(e),0===S.length&&(s.domElement.releasePointerCapture(e.pointerId),s.domElement.removeEventListener("pointermove",Y),s.domElement.removeEventListener("pointerup",X)),s.dispatchEvent(h),p=n.NONE}function q(e){$(e)}function Z(e){!1!==s.enabled&&!1!==s.enableZoom&&p===n.NONE&&(e.preventDefault(),s.dispatchEvent(u),function(e){e.deltaY<0?H(P()):e.deltaY>0&&F(P()),s.update()}(e),s.dispatchEvent(h))}function J(e){!1!==s.enabled&&!1!==s.enablePan&&function(e){let t=!1;switch(e.code){case s.keys.UP:k(0,s.keyPanSpeed),t=!0;break;case s.keys.BOTTOM:k(0,-s.keyPanSpeed),t=!0;break;case s.keys.LEFT:k(s.keyPanSpeed,0),t=!0;break;case s.keys.RIGHT:k(-s.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),s.update())}(e)}function Q(e){!1!==s.enabled&&e.preventDefault()}function $(e){delete N[e.pointerId];for(let t=0;t<S.length;t++)if(S[t].pointerId==e.pointerId)return void S.splice(t,1)}function ee(e){let t=N[e.pointerId];void 0===t&&(t=new l.F,N[e.pointerId]=t),t.set(e.pageX,e.pageY)}function te(e){const t=e.pointerId===S[0].pointerId?S[1]:S[0];return N[t.pointerId]}s.domElement.addEventListener("contextmenu",Q),s.domElement.addEventListener("pointerdown",W),s.domElement.addEventListener("pointercancel",q),s.domElement.addEventListener("wheel",Z,{passive:!1}),this.update()}}},7096:(e,t,s)=>{s.d(t,{E:()=>fe});const n="\\[\\]\\.:\\/",r=new RegExp("[\\[\\]\\.:\\/]","g"),o="[^\\[\\]\\.:\\/]",i="[^"+n.replace("\\.","")+"]",a=/((?:WC+[\/:])*)/.source.replace("WC",o),l=/(WCOD+)?/.source.replace("WCOD",i),c=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",o),u=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",o),h=new RegExp("^"+a+l+c+u+"$"),p=["material","materials","bones"];class d{constructor(e,t,s){this.path=t,this.parsedPath=s||d.parseTrackName(t),this.node=d.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,s){return e&&e.isAnimationObjectGroup?new d.Composite(e,t,s):new d(e,t,s)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(r,"")}static parseTrackName(e){const t=h.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const s={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const e=s.nodeName.substring(n+1);-1!==p.indexOf(e)&&(s.nodeName=s.nodeName.substring(0,n),s.objectName=e)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return s}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const s=e.skeleton.getBoneByName(t);if(void 0!==s)return s}if(e.children){const s=function(e){for(let n=0;n<e.length;n++){const r=e[n];if(r.name===t||r.uuid===t)return r;const o=s(r.children);if(o)return o}return null},n=s(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const s=this.resolvedProperty;for(let n=0,r=s.length;n!==r;++n)e[t++]=s[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const s=this.resolvedProperty;for(let n=0,r=s.length;n!==r;++n)s[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const s=this.resolvedProperty;for(let n=0,r=s.length;n!==r;++n)s[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const s=this.resolvedProperty;for(let n=0,r=s.length;n!==r;++n)s[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,s=t.objectName,n=t.propertyName;let r=t.propertyIndex;if(e||(e=d.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(s){let n=t.objectIndex;switch(s){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===n){n=t;break}break;default:if(void 0===e[s])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[s]}if(void 0!==n){if(void 0===e[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[n]}}const o=e[n];if(void 0===o){const s=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s+"."+n+" but it wasn't found.",e)}let i=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?i=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(i=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][i]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}d.Composite=class{constructor(e,t,s){const n=s||d.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();const s=this._targetGroup.nCachedObjects_,n=this._bindings[s];void 0!==n&&n.getValue(e,t)}setValue(e,t){const s=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=s.length;n!==r;++n)s[n].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,s=e.length;t!==s;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,s=e.length;t!==s;++t)e[t].unbind()}},d.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},d.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},d.prototype.GetterByBindingType=[d.prototype._getValue_direct,d.prototype._getValue_array,d.prototype._getValue_arrayElement,d.prototype._getValue_toArray],d.prototype.SetterByBindingTypeAndVersioning=[[d.prototype._setValue_direct,d.prototype._setValue_direct_setNeedsUpdate,d.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[d.prototype._setValue_array,d.prototype._setValue_array_setNeedsUpdate,d.prototype._setValue_array_setMatrixWorldNeedsUpdate],[d.prototype._setValue_arrayElement,d.prototype._setValue_arrayElement_setNeedsUpdate,d.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[d.prototype._setValue_fromArray,d.prototype._setValue_fromArray_setNeedsUpdate,d.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var m=s(1661),f=s(8853),g=s(2547),y=s(1042),v=s(7092);const T={arraySlice:function(e,t,s){return T.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==s?s:e.length)):e.slice(t,s)},convertArray:function(e,t,s){return!e||!s&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,s=new Array(t);for(let e=0;e!==t;++e)s[e]=e;return s.sort((function(t,s){return e[t]-e[s]})),s},sortedArray:function(e,t,s){const n=e.length,r=new e.constructor(n);for(let o=0,i=0;i!==n;++o){const n=s[o]*t;for(let s=0;s!==t;++s)r[i++]=e[n+s]}return r},flattenJSON:function(e,t,s,n){let r=1,o=e[0];for(;void 0!==o&&void 0===o[n];)o=e[r++];if(void 0===o)return;let i=o[n];if(void 0!==i)if(Array.isArray(i))do{i=o[n],void 0!==i&&(t.push(o.time),s.push.apply(s,i)),o=e[r++]}while(void 0!==o);else if(void 0!==i.toArray)do{i=o[n],void 0!==i&&(t.push(o.time),i.toArray(s,s.length)),o=e[r++]}while(void 0!==o);else do{i=o[n],void 0!==i&&(t.push(o.time),s.push(i)),o=e[r++]}while(void 0!==o)},subclip:function(e,t,s,n,r=30){const o=e.clone();o.name=t;const i=[];for(let e=0;e<o.tracks.length;++e){const t=o.tracks[e],a=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const o=t.times[e]*r;if(!(o<s||o>=n)){l.push(t.times[e]);for(let s=0;s<a;++s)c.push(t.values[e*a+s])}}0!==l.length&&(t.times=T.convertArray(l,t.times.constructor),t.values=T.convertArray(c,t.values.constructor),i.push(t))}o.tracks=i;let a=1/0;for(let e=0;e<o.tracks.length;++e)a>o.tracks[e].times[0]&&(a=o.tracks[e].times[0]);for(let e=0;e<o.tracks.length;++e)o.tracks[e].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(e,t=0,s=e,n=30){n<=0&&(n=30);const r=s.tracks.length,o=t/n;for(let t=0;t<r;++t){const n=s.tracks[t],r=n.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find((function(e){return e.name===n.name&&e.ValueTypeName===r}));if(void 0===i)continue;let a=0;const l=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=l/3);let c=0;const u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=n.times.length-1;let p;if(o<=n.times[0]){const e=a,t=l-a;p=T.arraySlice(n.values,e,t)}else if(o>=n.times[h]){const e=h*l+a,t=e+l-a;p=T.arraySlice(n.values,e,t)}else{const e=n.createInterpolant(),t=a,s=l-a;e.evaluate(o),p=T.arraySlice(e.resultBuffer,t,s)}if("quaternion"===r){(new v._).fromArray(p).normalize().conjugate().toArray(p)}const d=i.times.length;for(let e=0;e<d;++e){const t=e*u+c;if("quaternion"===r)v._.multiplyQuaternionsFlat(i.values,t,p,0,i.values,t);else{const e=u-2*c;for(let s=0;s<e;++s)i.values[t+s]-=p[s]}}}return e.blendMode=m.gSk,e}};class b{constructor(e,t,s,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=T.convertArray(t,this.TimeBufferType),this.values=T.convertArray(s,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let s;if(t.toJSON!==this.toJSON)s=t.toJSON(e);else{s={name:e.name,times:T.convertArray(e.times,Array),values:T.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(s.interpolation=t)}return s.type=e.ValueTypeName,s}InterpolantFactoryMethodDiscrete(e){return new y.c(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new g.l(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new f.d(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case m.Syv:t=this.InterpolantFactoryMethodDiscrete;break;case m.NMF:t=this.InterpolantFactoryMethodLinear;break;case m.pIN:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return m.Syv;case this.InterpolantFactoryMethodLinear:return m.NMF;case this.InterpolantFactoryMethodSmooth:return m.pIN}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let s=0,n=t.length;s!==n;++s)t[s]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let s=0,n=t.length;s!==n;++s)t[s]*=e}return this}trim(e,t){const s=this.times,n=s.length;let r=0,o=n-1;for(;r!==n&&s[r]<e;)++r;for(;-1!==o&&s[o]>t;)--o;if(++o,0!==r||o!==n){r>=o&&(o=Math.max(o,1),r=o-1);const e=this.getValueSize();this.times=T.arraySlice(s,r,o),this.values=T.arraySlice(this.values,r*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const s=this.times,n=this.values,r=s.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==r;t++){const n=s[t];if("number"==typeof n&&isNaN(n)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,n),e=!1;break}if(null!==o&&o>n){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,n,o),e=!1;break}o=n}if(void 0!==n&&T.isTypedArray(n))for(let t=0,s=n.length;t!==s;++t){const s=n[t];if(isNaN(s)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,s),e=!1;break}}return e}optimize(){const e=T.arraySlice(this.times),t=T.arraySlice(this.values),s=this.getValueSize(),n=this.getInterpolation()===m.pIN,r=e.length-1;let o=1;for(let i=1;i<r;++i){let r=!1;const a=e[i];if(a!==e[i+1]&&(1!==i||a!==e[0]))if(n)r=!0;else{const e=i*s,n=e-s,o=e+s;for(let i=0;i!==s;++i){const s=t[e+i];if(s!==t[n+i]||s!==t[o+i]){r=!0;break}}}if(r){if(i!==o){e[o]=e[i];const n=i*s,r=o*s;for(let e=0;e!==s;++e)t[r+e]=t[n+e]}++o}}if(r>0){e[o]=e[r];for(let e=r*s,n=o*s,i=0;i!==s;++i)t[n+i]=t[e+i];++o}return o!==e.length?(this.times=T.arraySlice(e,0,o),this.values=T.arraySlice(t,0,o*s)):(this.times=e,this.values=t),this}clone(){const e=T.arraySlice(this.times,0),t=T.arraySlice(this.values,0),s=new(0,this.constructor)(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}b.prototype.TimeBufferType=Float32Array,b.prototype.ValueBufferType=Float32Array,b.prototype.DefaultInterpolation=m.NMF;class x extends b{}x.prototype.ValueTypeName="number";var E=s(1950);class w extends b{InterpolantFactoryMethodLinear(e){return new E.z(this.times,this.values,this.getValueSize(),e)}}w.prototype.ValueTypeName="quaternion",w.prototype.DefaultInterpolation=m.NMF,w.prototype.InterpolantFactoryMethodSmooth=void 0;class _ extends b{}_.prototype.ValueTypeName="vector";class M extends b{}M.prototype.ValueTypeName="bool",M.prototype.ValueBufferType=Array,M.prototype.DefaultInterpolation=m.Syv,M.prototype.InterpolantFactoryMethodLinear=void 0,M.prototype.InterpolantFactoryMethodSmooth=void 0;class A extends b{}A.prototype.ValueTypeName="color";class R extends b{}R.prototype.ValueTypeName="string",R.prototype.ValueBufferType=Array,R.prototype.DefaultInterpolation=m.Syv,R.prototype.InterpolantFactoryMethodLinear=void 0,R.prototype.InterpolantFactoryMethodSmooth=void 0;var S=s(2043);class N{constructor(e,t=-1,s,n=m.IFH){this.name=e,this.tracks=s,this.duration=t,this.blendMode=n,this.uuid=S.DO(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],s=e.tracks,n=1/(e.fps||1);for(let e=0,r=s.length;e!==r;++e)t.push(P(s[e]).scale(n));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],s=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,n=s.length;e!==n;++e)t.push(b.toJSON(s[e]));return n}static CreateFromMorphTargetSequence(e,t,s,n){const r=t.length,o=[];for(let e=0;e<r;e++){let i=[],a=[];i.push((e+r-1)%r,e,(e+1)%r),a.push(0,1,0);const l=T.getKeyframeOrder(i);i=T.sortedArray(i,1,l),a=T.sortedArray(a,1,l),n||0!==i[0]||(i.push(r),a.push(a[0])),o.push(new x(".morphTargetInfluences["+t[e].name+"]",i,a).scale(1/s))}return new this(e,-1,o)}static findByName(e,t){let s=e;if(!Array.isArray(e)){const t=e;s=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<s.length;e++)if(s[e].name===t)return s[e];return null}static CreateClipsFromMorphTargetSequences(e,t,s){const n={},r=/^([\w-]*?)([\d]+)$/;for(let t=0,s=e.length;t<s;t++){const s=e[t],o=s.name.match(r);if(o&&o.length>1){const e=o[1];let t=n[e];t||(n[e]=t=[]),t.push(s)}}const o=[];for(const e in n)o.push(this.CreateFromMorphTargetSequence(e,n[e],t,s));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const s=function(e,t,s,n,r){if(0!==s.length){const o=[],i=[];T.flattenJSON(s,o,i,n),0!==o.length&&r.push(new e(t,o,i))}},n=[],r=e.name||"default",o=e.fps||30,i=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const r=l[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let s=0;s<r[t].morphTargets.length;s++)e[r[t].morphTargets[s]]=-1;for(const s in e){const e=[],o=[];for(let n=0;n!==r[t].morphTargets.length;++n){const n=r[t];e.push(n.time),o.push(n.morphTarget===s?1:0)}n.push(new x(".morphTargetInfluence["+s+"]",e,o))}a=e.length*(o||1)}else{const o=".bones["+t[e].name+"]";s(_,o+".position",r,"pos",n),s(w,o+".quaternion",r,"rot",n),s(_,o+".scale",r,"scl",n)}}if(0===n.length)return null;return new this(r,a,n,i)}resetDuration(){let e=0;for(let t=0,s=this.tracks.length;t!==s;++t){const s=this.tracks[t];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function P(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return x;case"vector":case"vector2":case"vector3":case"vector4":return _;case"color":return A;case"quaternion":return w;case"bool":case"boolean":return M;case"string":return R}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],s=[];T.flattenJSON(e.keys,t,s,"value"),e.times=t,e.values=s}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var I=s(6023),L=s(4948),O=s(5092),C=s(3662),k=s(1514),F=s(8490),H=s(3120),j=s(6173),U=s(8045),V=s(1138),D=s(3914),B=s(8515),G=s(7066),z=s(2980),K=s(2133),W=s(1145),Y=s(140),X=s(4467),q=s(6679),Z=s(4164),J=s(5785),Q=s(9046),$=s(2127),ee=s(6454),te=s(5920),se=s(1301),ne=s(2232),re=s(2306),oe=s(2010),ie=s(1051),ae=s(3131),le=s(7858),ce=s(6469),ue=s(9203),he=s(2170),pe=s(1898),de=s(6881),me=s(4699);class fe extends I.a{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new be(e)})),this.register((function(e){return new Ae(e)})),this.register((function(e){return new Re(e)})),this.register((function(e){return new xe(e)})),this.register((function(e){return new Ee(e)})),this.register((function(e){return new we(e)})),this.register((function(e){return new _e(e)})),this.register((function(e){return new Me(e)})),this.register((function(e){return new ve(e)})),this.register((function(e){return new Se(e)}))}load(e,t,s,n){const r=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:L.Z.extractUrlBase(e),this.manager.itemStart(e);const i=function(t){n?n(t):console.error(t),r.manager.itemError(e),r.manager.itemEnd(e)},a=new O.h(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(s){try{r.parse(s,o,(function(s){t(s),r.manager.itemEnd(e)}),i)}catch(e){i(e)}}),s,i)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,s,n){let r;const o={},i={};if("string"==typeof e)r=e;else{if(L.Z.decodeText(new Uint8Array(e,0,4))===Ne){try{o[ye.KHR_BINARY_GLTF]=new Le(e)}catch(e){return void(n&&n(e))}r=o[ye.KHR_BINARY_GLTF].content}else r=L.Z.decodeText(new Uint8Array(e))}const a=JSON.parse(r);if(void 0===a.asset||a.asset.version[0]<2)return void(n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new ut(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](l);i[t.name]=t,o[t.name]=!0}if(a.extensionsUsed)for(let e=0;e<a.extensionsUsed.length;++e){const t=a.extensionsUsed[e],s=a.extensionsRequired||[];switch(t){case ye.KHR_MATERIALS_UNLIT:o[t]=new Te;break;case ye.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[t]=new Fe;break;case ye.KHR_DRACO_MESH_COMPRESSION:o[t]=new Oe(a,this.dracoLoader);break;case ye.KHR_TEXTURE_TRANSFORM:o[t]=new Ce;break;case ye.KHR_MESH_QUANTIZATION:o[t]=new He;break;default:s.indexOf(t)>=0&&void 0===i[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}l.setExtensions(o),l.setPlugins(i),l.parse(s,n)}parseAsync(e,t){const s=this;return new Promise((function(n,r){s.parse(e,t,n,r)}))}}function ge(){let e={};return{get:function(t){return e[t]},add:function(t,s){e[t]=s},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const ye={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class ve{constructor(e){this.parser=e,this.name=ye.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let s=0,n=t.length;s<n;s++){const n=t[s];n.extensions&&n.extensions[this.name]&&void 0!==n.extensions[this.name].light&&e._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(e){const t=this.parser,s="light:"+e;let n=t.cache.get(s);if(n)return n;const r=t.json,o=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let i;const a=new C.I(16777215);void 0!==o.color&&a.fromArray(o.color);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":i=new k.O(a),i.target.position.set(0,0,-1),i.add(i.target);break;case"point":i=new F.c(a),i.distance=l;break;case"spot":i=new H.P(a),i.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return i.position.set(0,0,0),i.decay=2,void 0!==o.intensity&&(i.intensity=o.intensity),i.name=t.createUniqueName(o.name||"light_"+e),n=Promise.resolve(i),t.cache.add(s,n),n}createNodeAttachment(e){const t=this,s=this.parser,n=s.json.nodes[e],r=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(e){return s._getNodeRef(t.cache,r,e)}))}}class Te{constructor(){this.name=ye.KHR_MATERIALS_UNLIT}getMaterialType(){return j.v}extendParams(e,t,s){const n=[];e.color=new C.I(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const t=r.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==r.baseColorTexture&&n.push(s.assignTexture(e,"map",r.baseColorTexture))}return Promise.all(n)}}class be{constructor(e){this.parser=e,this.name=ye.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?U.E:null}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(s.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(s.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(s.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new V.F(e,e)}return Promise.all(r)}}class xe{constructor(e){this.parser=e,this.name=ye.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?U.E:null}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new C.I(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=n.extensions[this.name];return void 0!==o.sheenColorFactor&&t.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(s.assignTexture(t,"sheenColorMap",o.sheenColorTexture)),void 0!==o.sheenRoughnessTexture&&r.push(s.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class Ee{constructor(e){this.parser=e,this.name=ye.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?U.E:null}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(s.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class we{constructor(e){this.parser=e,this.name=ye.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?U.E:null}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(s.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||0;const i=o.attenuationColor||[1,1,1];return t.attenuationColor=new C.I(i[0],i[1],i[2]),Promise.all(r)}}class _e{constructor(e){this.parser=e,this.name=ye.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?U.E:null}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const n=s.extensions[this.name];return t.ior=void 0!==n.ior?n.ior:1.5,Promise.resolve()}}class Me{constructor(e){this.parser=e,this.name=ye.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?U.E:null}extendMaterialParams(e,t){const s=this.parser,n=s.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=[],o=n.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(s.assignTexture(t,"specularIntensityMap",o.specularTexture));const i=o.specularColorFactor||[1,1,1];return t.specularColor=new C.I(i[0],i[1],i[2]),void 0!==o.specularColorTexture&&r.push(s.assignTexture(t,"specularColorMap",o.specularColorTexture).then((function(e){e.encoding=m.knz}))),Promise.all(r)}}class Ae{constructor(e){this.parser=e,this.name=ye.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,s=t.json,n=s.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const r=n.extensions[this.name],o=s.images[r.source],i=t.options.ktx2Loader;if(!i){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,i)}}class Re{constructor(e){this.parser=e,this.name=ye.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,s=this.parser,n=s.json,r=n.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],i=n.images[o.source];let a=s.textureLoader;if(i.uri){const e=s.options.manager.getHandler(i.uri);null!==e&&(a=e)}return this.detectSupport().then((function(r){if(r)return s.loadTextureImage(e,i,a);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return s.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class Se{constructor(e){this.name=ye.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,s=t.bufferViews[e];if(s.extensions&&s.extensions[this.name]){const e=s.extensions[this.name],n=this.parser.getDependency("buffer",e.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([n,r.ready]).then((function(t){const s=e.byteOffset||0,n=e.byteLength||0,o=e.count,i=e.byteStride,a=new ArrayBuffer(o*i),l=new Uint8Array(t[0],s,n);return r.decodeGltfBuffer(new Uint8Array(a),o,i,l,e.mode,e.filter),a}))}return null}}const Ne="glTF",Pe=1313821514,Ie=5130562;class Le{constructor(e){this.name=ye.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:L.Z.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Ne)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-12,n=new DataView(e,12);let r=0;for(;r<s;){const t=n.getUint32(r,!0);r+=4;const s=n.getUint32(r,!0);if(r+=4,s===Pe){const s=new Uint8Array(e,12+r,t);this.content=L.Z.decodeText(s)}else if(s===Ie){const s=12+r;this.body=e.slice(s,s+t)}r+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Oe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ye.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const s=this.json,n=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,i={},a={},l={};for(const e in o){const t=Qe[e]||e.toLowerCase();i[t]=o[e]}for(const t in e.attributes){const n=Qe[t]||t.toLowerCase();if(void 0!==o[t]){const r=s.accessors[e.attributes[t]],o=Xe[r.componentType];l[n]=o,a[n]=!0===r.normalized}}return t.getDependency("bufferView",r).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(const t in e.attributes){const s=e.attributes[t],n=a[t];void 0!==n&&(s.normalized=n)}t(e)}),i,l)}))}))}}class Ce{constructor(){this.name=ye.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class ke extends D.W{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),s=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),n=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),i={specular:{value:(new C.I).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=i,this.onBeforeCompile=function(e){for(const t in i)e.uniforms[t]=i[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",s).replace("#include <roughnessmap_fragment>",n).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return i.specular.value},set:function(e){i.specular.value=e}},specularMap:{get:function(){return i.specularMap.value},set:function(e){i.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return i.glossiness.value},set:function(e){i.glossiness.value=e}},glossinessMap:{get:function(){return i.glossinessMap.value},set:function(e){i.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class Fe{constructor(){this.name=ye.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return ke}extendParams(e,t,s){const n=t.extensions[this.name];e.color=new C.I(1,1,1),e.opacity=1;const r=[];if(Array.isArray(n.diffuseFactor)){const t=n.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==n.diffuseTexture&&r.push(s.assignTexture(e,"map",n.diffuseTexture)),e.emissive=new C.I(0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new C.I(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){const t=n.specularGlossinessTexture;r.push(s.assignTexture(e,"glossinessMap",t)),r.push(s.assignTexture(e,"specularMap",t))}return Promise.all(r)}createMaterial(e){const t=new ke(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=m.IOt,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class He{constructor(){this.name=ye.KHR_MESH_QUANTIZATION}}class je extends B._{constructor(e,t,s,n){super(e,t,s,n)}copySampleValue_(e){const t=this.resultBuffer,s=this.sampleValues,n=this.valueSize,r=e*n*3+n;for(let e=0;e!==n;e++)t[e]=s[r+e];return t}}je.prototype.beforeStart_=je.prototype.copySampleValue_,je.prototype.afterEnd_=je.prototype.copySampleValue_,je.prototype.interpolate_=function(e,t,s,n){const r=this.resultBuffer,o=this.sampleValues,i=this.valueSize,a=2*i,l=3*i,c=n-t,u=(s-t)/c,h=u*u,p=h*u,d=e*l,m=d-l,f=-2*p+3*h,g=p-h,y=1-f,v=g-h+u;for(let e=0;e!==i;e++){const t=o[m+e+i],s=o[m+e+a]*c,n=o[d+e+i],l=o[d+e]*c;r[e]=y*t+v*s+f*n+g*l}return r};const Ue=new v._;class Ve extends je{interpolate_(e,t,s,n){const r=super.interpolate_(e,t,s,n);return Ue.fromArray(r).normalize().toArray(r),r}}const De=0,Be=1,Ge=2,ze=3,Ke=4,We=5,Ye=6,Xe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},qe={9728:m.TyD,9729:m.wem,9984:m.YLQ,9985:m.qyh,9986:m.aH4,9987:m.D1R},Ze={33071:m.uWy,33648:m.OoA,10497:m.rpg},Je={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Qe={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},$e={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},et={CUBICSPLINE:void 0,LINEAR:m.NMF,STEP:m.Syv},tt="OPAQUE",st="MASK",nt="BLEND";function rt(e,t,s){for(const n in s.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=s.extensions[n])}function ot(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function it(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let s=0,n=t.weights.length;s<n;s++)e.morphTargetInfluences[s]=t.weights[s];if(t.extras&&Array.isArray(t.extras.targetNames)){const s=t.extras.targetNames;if(e.morphTargetInfluences.length===s.length){e.morphTargetDictionary={};for(let t=0,n=s.length;t<n;t++)e.morphTargetDictionary[s[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function at(e){const t=e.extensions&&e.extensions[ye.KHR_DRACO_MESH_COMPRESSION];let s;return s=t?"draco:"+t.bufferView+":"+t.indices+":"+lt(t.attributes):e.indices+":"+lt(e.attributes)+":"+e.mode,s}function lt(e){let t="";const s=Object.keys(e).sort();for(let n=0,r=s.length;n<r;n++)t+=s[n]+":"+e[s[n]]+";";return t}function ct(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class ut{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new ge,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new G.Q(this.options.manager):this.textureLoader=new z.d(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new O.h(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const s=this,n=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])})).then((function(t){const o={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:s,userData:{}};rt(r,o,n),ot(o,n),Promise.all(s._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],s=this.json.meshes||[];for(let s=0,n=t.length;s<n;s++){const n=t[s].joints;for(let t=0,s=n.length;t<s;t++)e[n[t]].isBone=!0}for(let t=0,n=e.length;t<n;t++){const n=e[t];void 0!==n.mesh&&(this._addNodeRef(this.meshCache,n.mesh),void 0!==n.skin&&(s[n.mesh].isSkinnedMesh=!0)),void 0!==n.camera&&this._addNodeRef(this.cameraCache,n.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,s){if(e.refs[t]<=1)return s;const n=s.clone(),r=(e,t)=>{const s=this.associations.get(e);null!=s&&this.associations.set(t,s);for(const[s,n]of e.children.entries())r(n,t.children[s])};return r(s,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let s=0;s<t.length;s++){const n=e(t[s]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const s=[];for(let n=0;n<t.length;n++){const r=e(t[n]);r&&s.push(r)}return s}getDependency(e,t){const s=e+":"+t;let n=this.cache.get(s);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(s,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const s=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return s.getDependency(e,n)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],s=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[ye.KHR_BINARY_GLTF].body);const n=this.options;return new Promise((function(e,r){s.load(L.Z.resolveURL(t.uri,n.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const s=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+s)}))}loadAccessor(e){const t=this,s=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse)return Promise.resolve(null);const r=[];return void 0!==n.bufferView?r.push(this.getDependency("bufferView",n.bufferView)):r.push(null),void 0!==n.sparse&&(r.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(r).then((function(e){const r=e[0],o=Je[n.type],i=Xe[n.componentType],a=i.BYTES_PER_ELEMENT,l=a*o,c=n.byteOffset||0,u=void 0!==n.bufferView?s.bufferViews[n.bufferView].byteStride:void 0,h=!0===n.normalized;let p,d;if(u&&u!==l){const e=Math.floor(c/u),s="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+e+":"+n.count;let l=t.cache.get(s);l||(p=new i(r,e*u,n.count*u/a),l=new K.v(p,u/a),t.cache.add(s,l)),d=new W.k(l,o,c%u/a,h)}else p=null===r?new i(n.count*o):new i(r,c,n.count*o),d=new Y.Tl(p,o,h);if(void 0!==n.sparse){const t=Je.SCALAR,s=Xe[n.sparse.indices.componentType],a=n.sparse.indices.byteOffset||0,l=n.sparse.values.byteOffset||0,c=new s(e[1],a,n.sparse.count*t),u=new i(e[2],l,n.sparse.count*o);null!==r&&(d=new Y.Tl(d.array.slice(),d.itemSize,d.normalized));for(let e=0,t=c.length;e<t;e++){const t=c[e];if(d.setX(t,u[e*o]),o>=2&&d.setY(t,u[e*o+1]),o>=3&&d.setZ(t,u[e*o+2]),o>=4&&d.setW(t,u[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return d}))}loadTexture(e){const t=this.json,s=this.options,n=t.textures[e],r=t.images[n.source];let o=this.textureLoader;if(r.uri){const e=s.manager.getHandler(r.uri);null!==e&&(o=e)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,s){const n=this,r=this.json,o=this.options,i=r.textures[e],a=(t.uri||t.bufferView)+":"+i.sampler;if(this.textureCache[a])return this.textureCache[a];const l=self.URL||self.webkitURL;let c=t.uri||"",u=!1;if(void 0!==t.bufferView)c=n.getDependency("bufferView",t.bufferView).then((function(e){u=!0;const s=new Blob([e],{type:t.mimeType});return c=l.createObjectURL(s),c}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(c).then((function(e){return new Promise((function(t,n){let r=t;!0===s.isImageBitmapLoader&&(r=function(e){const s=new X.x(e);s.needsUpdate=!0,t(s)}),s.load(L.Z.resolveURL(e,o.path),r,void 0,n)}))})).then((function(t){!0===u&&l.revokeObjectURL(c),t.flipY=!1,i.name&&(t.name=i.name);const s=(r.samplers||{})[i.sampler]||{};return t.magFilter=qe[s.magFilter]||m.wem,t.minFilter=qe[s.minFilter]||m.D1R,t.wrapS=Ze[s.wrapS]||m.rpg,t.wrapT=Ze[s.wrapT]||m.rpg,n.associations.set(t,{textures:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",c),null}));return this.textureCache[a]=h,h}assignTexture(e,t,s){const n=this;return this.getDependency("texture",s.index).then((function(r){if(void 0===s.texCoord||0==s.texCoord||"aoMap"===t&&1==s.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+s.texCoord+" for texture "+t+" not yet supported."),n.extensions[ye.KHR_TEXTURE_TRANSFORM]){const e=void 0!==s.extensions?s.extensions[ye.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=n.associations.get(r);r=n.extensions[ye.KHR_TEXTURE_TRANSFORM].extendTexture(r,e),n.associations.set(r,t)}}return e[t]=r,r}))}assignFinalMaterial(e){const t=e.geometry;let s=e.material;const n=void 0===t.attributes.tangent,r=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+s.uuid;let t=this.cache.get(e);t||(t=new q.U,Z.F.prototype.copy.call(t,s),t.color.copy(s.color),t.map=s.map,t.sizeAttenuation=!1,this.cache.add(e,t)),s=t}else if(e.isLine){const e="LineBasicMaterial:"+s.uuid;let t=this.cache.get(e);t||(t=new J.n,Z.F.prototype.copy.call(t,s),t.color.copy(s.color),this.cache.add(e,t)),s=t}if(n||r||o){let e="ClonedMaterial:"+s.uuid+":";s.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),n&&(e+="derivative-tangents:"),r&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=s.clone(),r&&(t.vertexColors=!0),o&&(t.flatShading=!0),n&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(s))),s=t}s.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=s}getMaterialType(){return D.W}loadMaterial(e){const t=this,s=this.json,n=this.extensions,r=s.materials[e];let o;const i={},a=r.extensions||{},l=[];if(a[ye.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=n[ye.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=e.getMaterialType(),l.push(e.extendParams(i,r,t))}else if(a[ye.KHR_MATERIALS_UNLIT]){const e=n[ye.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),l.push(e.extendParams(i,r,t))}else{const s=r.pbrMetallicRoughness||{};if(i.color=new C.I(1,1,1),i.opacity=1,Array.isArray(s.baseColorFactor)){const e=s.baseColorFactor;i.color.fromArray(e),i.opacity=e[3]}void 0!==s.baseColorTexture&&l.push(t.assignTexture(i,"map",s.baseColorTexture)),i.metalness=void 0!==s.metallicFactor?s.metallicFactor:1,i.roughness=void 0!==s.roughnessFactor?s.roughnessFactor:1,void 0!==s.metallicRoughnessTexture&&(l.push(t.assignTexture(i,"metalnessMap",s.metallicRoughnessTexture)),l.push(t.assignTexture(i,"roughnessMap",s.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,i)}))))}!0===r.doubleSided&&(i.side=m.ehD);const c=r.alphaMode||tt;if(c===nt?(i.transparent=!0,i.depthWrite=!1):(i.format=m.UCm,i.transparent=!1,c===st&&(i.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==j.v&&(l.push(t.assignTexture(i,"normalMap",r.normalTexture)),i.normalScale=new V.F(1,1),void 0!==r.normalTexture.scale)){const e=r.normalTexture.scale;i.normalScale.set(e,e)}return void 0!==r.occlusionTexture&&o!==j.v&&(l.push(t.assignTexture(i,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(i.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==j.v&&(i.emissive=(new C.I).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&o!==j.v&&l.push(t.assignTexture(i,"emissiveMap",r.emissiveTexture)),Promise.all(l).then((function(){let s;return s=o===ke?n[ye.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(i):new o(i),r.name&&(s.name=r.name),s.map&&(s.map.encoding=m.knz),s.emissiveMap&&(s.emissiveMap.encoding=m.knz),ot(s,r),t.associations.set(s,{materials:e}),r.extensions&&rt(n,s,r),s}))}createUniqueName(e){const t=d.sanitizeNodeName(e||"");let s=t;for(let e=1;this.nodeNamesUsed[s];++e)s=t+"_"+e;return this.nodeNamesUsed[s]=!0,s}loadGeometries(e){const t=this,s=this.extensions,n=this.primitiveCache;function r(e){return s[ye.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(s){return pt(s,e,t)}))}const o=[];for(let s=0,i=e.length;s<i;s++){const i=e[s],a=at(i),l=n[a];if(l)o.push(l.promise);else{let e;e=i.extensions&&i.extensions[ye.KHR_DRACO_MESH_COMPRESSION]?r(i):pt(new Q.u,i,t),n[a]={primitive:i,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,s=this.json,n=this.extensions,r=s.meshes[e],o=r.primitives,i=[];for(let e=0,t=o.length;e<t;e++){const t=void 0===o[e].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new D.W({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:m.Wl3})),a.DefaultMaterial):this.getDependency("material",o[e].material);i.push(t)}var a;return i.push(t.loadGeometries(o)),Promise.all(i).then((function(s){const i=s.slice(0,s.length-1),a=s[s.length-1],l=[];for(let s=0,c=a.length;s<c;s++){const c=a[s],u=o[s];let h;const p=i[s];if(u.mode===Ke||u.mode===We||u.mode===Ye||void 0===u.mode)h=!0===r.isSkinnedMesh?new $.T(c,p):new ee.K(c,p),!0!==h.isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),u.mode===We?h.geometry=dt(h.geometry,m.UlW):u.mode===Ye&&(h.geometry=dt(h.geometry,m.z$h));else if(u.mode===Be)h=new te.e(c,p);else if(u.mode===ze)h=new se.x(c,p);else if(u.mode===Ge)h=new ne.b(c,p);else{if(u.mode!==De)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);h=new re.w(c,p)}Object.keys(h.geometry.morphAttributes).length>0&&it(h,r),h.name=t.createUniqueName(r.name||"mesh_"+e),ot(h,r),u.extensions&&rt(n,h,u),t.assignFinalMaterial(h),l.push(h)}for(let s=0,n=l.length;s<n;s++)t.associations.set(l[s],{meshes:e,primitives:s});if(1===l.length)return l[0];const c=new oe.Z;t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const s=this.json.cameras[e],n=s[s.type];if(n)return"perspective"===s.type?t=new ie.c(S.ZY(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===s.type&&(t=new ae.i(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),s.name&&(t.name=this.createUniqueName(s.name)),ot(t,s),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],s={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(s):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return s.inverseBindMatrices=e,s}))}loadAnimation(e){const t=this.json.animations[e],s=[],n=[],r=[],o=[],i=[];for(let e=0,a=t.channels.length;e<a;e++){const a=t.channels[e],l=t.samplers[a.sampler],c=a.target,u=void 0!==c.node?c.node:c.id,h=void 0!==t.parameters?t.parameters[l.input]:l.input,p=void 0!==t.parameters?t.parameters[l.output]:l.output;s.push(this.getDependency("node",u)),n.push(this.getDependency("accessor",h)),r.push(this.getDependency("accessor",p)),o.push(l),i.push(c)}return Promise.all([Promise.all(s),Promise.all(n),Promise.all(r),Promise.all(o),Promise.all(i)]).then((function(s){const n=s[0],r=s[1],o=s[2],i=s[3],a=s[4],l=[];for(let e=0,t=n.length;e<t;e++){const t=n[e],s=r[e],c=o[e],u=i[e],h=a[e];if(void 0===t)continue;let p;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,$e[h.path]){case $e.weights:p=x;break;case $e.rotation:p=w;break;default:p=_}const d=t.name?t.name:t.uuid,f=void 0!==u.interpolation?et[u.interpolation]:m.NMF,g=[];$e[h.path]===$e.weights?t.traverse((function(e){e.morphTargetInfluences&&g.push(e.name?e.name:e.uuid)})):g.push(d);let y=c.array;if(c.normalized){const e=ct(y.constructor),t=new Float32Array(y.length);for(let s=0,n=y.length;s<n;s++)t[s]=y[s]*e;y=t}for(let e=0,t=g.length;e<t;e++){const t=new p(g[e]+"."+$e[h.path],s.array,y,f);"CUBICSPLINE"===u.interpolation&&(t.createInterpolant=function(e){return new(this instanceof w?Ve:je)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(t)}}const c=t.name?t.name:"animation_"+e;return new N(c,void 0,l)}))}createNodeMesh(e){const t=this.json,s=this,n=t.nodes[e];return void 0===n.mesh?null:s.getDependency("mesh",n.mesh).then((function(e){const t=s._getNodeRef(s.meshCache,n.mesh,e);return void 0!==n.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,s=n.weights.length;t<s;t++)e.morphTargetInfluences[t]=n.weights[t]})),t}))}loadNode(e){const t=this.json,s=this.extensions,n=this,r=t.nodes[e],o=r.name?n.createUniqueName(r.name):"";return function(){const t=[],s=n._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return s&&t.push(s),void 0!==r.camera&&t.push(n.getDependency("camera",r.camera).then((function(e){return n._getNodeRef(n.cameraCache,r.camera,e)}))),n._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let i;if(i=!0===r.isBone?new le.N:t.length>1?new oe.Z:1===t.length?t[0]:new ce.T,i!==t[0])for(let e=0,s=t.length;e<s;e++)i.add(t[e]);if(r.name&&(i.userData.name=r.name,i.name=o),ot(i,r),r.extensions&&rt(s,i,r),void 0!==r.matrix){const e=new ue.y;e.fromArray(r.matrix),i.applyMatrix4(e)}else void 0!==r.translation&&i.position.fromArray(r.translation),void 0!==r.rotation&&i.quaternion.fromArray(r.rotation),void 0!==r.scale&&i.scale.fromArray(r.scale);return n.associations.has(i)||n.associations.set(i,{}),n.associations.get(i).nodes=e,i}))}loadScene(e){const t=this.json,s=this.extensions,n=this.json.scenes[e],r=this,o=new oe.Z;n.name&&(o.name=r.createUniqueName(n.name)),ot(o,n),n.extensions&&rt(s,o,n);const i=n.nodes||[],a=[];for(let e=0,s=i.length;e<s;e++)a.push(ht(i[e],o,t,r));return Promise.all(a).then((function(){return r.associations=(e=>{const t=new Map;for(const[e,s]of r.associations)(e instanceof Z.F||e instanceof X.x)&&t.set(e,s);return e.traverse((e=>{const s=r.associations.get(e);null!=s&&t.set(e,s)})),t})(o),o}))}}function ht(e,t,s,n){const r=s.nodes[e];return n.getDependency("node",e).then((function(e){if(void 0===r.skin)return e;let t;return n.getDependency("skin",r.skin).then((function(e){t=e;const s=[];for(let e=0,r=t.joints.length;e<r;e++)s.push(n.getDependency("node",t.joints[e]));return Promise.all(s)})).then((function(s){return e.traverse((function(e){if(!e.isMesh)return;const n=[],r=[];for(let e=0,o=s.length;e<o;e++){const o=s[e];if(o){n.push(o);const s=new ue.y;void 0!==t.inverseBindMatrices&&s.fromArray(t.inverseBindMatrices.array,16*e),r.push(s)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}e.bind(new he.O(n,r),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const o=[];if(r.children){const t=r.children;for(let r=0,i=t.length;r<i;r++){const i=t[r];o.push(ht(i,e,s,n))}}return Promise.all(o)}))}function pt(e,t,s){const n=t.attributes,r=[];function o(t,n){return s.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(const t in n){const s=Qe[t]||t.toLowerCase();s in e.attributes||r.push(o(n[t],s))}if(void 0!==t.indices&&!e.index){const n=s.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));r.push(n)}return ot(e,t),function(e,t,s){const n=t.attributes,r=new pe.Z;if(void 0===n.POSITION)return;{const e=s.json.accessors[n.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new de.P(t[0],t[1],t[2]),new de.P(o[0],o[1],o[2])),e.normalized){const t=ct(Xe[e.componentType]);r.min.multiplyScalar(t),r.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new de.P,t=new de.P;for(let n=0,r=o.length;n<r;n++){const r=o[n];if(void 0!==r.POSITION){const n=s.json.accessors[r.POSITION],o=n.min,i=n.max;if(void 0!==o&&void 0!==i){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(i[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(i[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(i[2]))),n.normalized){const e=ct(Xe[n.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(e)}e.boundingBox=r;const i=new me.a;r.getCenter(i.center),i.radius=r.min.distanceTo(r.max)/2,e.boundingSphere=i}(e,t,s),Promise.all(r).then((function(){return void 0!==t.targets?function(e,t,s){let n=!1,r=!1;for(let e=0,s=t.length;e<s;e++){const s=t[e];if(void 0!==s.POSITION&&(n=!0),void 0!==s.NORMAL&&(r=!0),n&&r)break}if(!n&&!r)return Promise.resolve(e);const o=[],i=[];for(let a=0,l=t.length;a<l;a++){const l=t[a];if(n){const t=void 0!==l.POSITION?s.getDependency("accessor",l.POSITION):e.attributes.position;o.push(t)}if(r){const t=void 0!==l.NORMAL?s.getDependency("accessor",l.NORMAL):e.attributes.normal;i.push(t)}}return Promise.all([Promise.all(o),Promise.all(i)]).then((function(t){const s=t[0],o=t[1];return n&&(e.morphAttributes.position=s),r&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,s):e}))}function dt(e,t){let s=e.getIndex();if(null===s){const t=[],n=e.getAttribute("position");if(void 0===n)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<n.count;e++)t.push(e);e.setIndex(t),s=e.getIndex()}const n=s.count-2,r=[];if(t===m.z$h)for(let e=1;e<=n;e++)r.push(s.getX(0)),r.push(s.getX(e)),r.push(s.getX(e+1));else for(let e=0;e<n;e++)e%2==0?(r.push(s.getX(e)),r.push(s.getX(e+1)),r.push(s.getX(e+2))):(r.push(s.getX(e+2)),r.push(s.getX(e+1)),r.push(s.getX(e)));r.length/3!==n&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(r),o}}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[330],{1898:(t,s,i)=>{i.d(s,{Z:()=>r});var e=i(6881);class r{constructor(t=new e.P(1/0,1/0,1/0),s=new e.P(-1/0,-1/0,-1/0)){this.min=t,this.max=s}set(t,s){return this.min.copy(t),this.max.copy(s),this}setFromArray(t){let s=1/0,i=1/0,e=1/0,r=-1/0,h=-1/0,n=-1/0;for(let a=0,o=t.length;a<o;a+=3){const o=t[a],c=t[a+1],l=t[a+2];o<s&&(s=o),c<i&&(i=c),l<e&&(e=l),o>r&&(r=o),c>h&&(h=c),l>n&&(n=l)}return this.min.set(s,i,e),this.max.set(r,h,n),this}setFromBufferAttribute(t){let s=1/0,i=1/0,e=1/0,r=-1/0,h=-1/0,n=-1/0;for(let a=0,o=t.count;a<o;a++){const o=t.getX(a),c=t.getY(a),l=t.getZ(a);o<s&&(s=o),c<i&&(i=c),l<e&&(e=l),o>r&&(r=o),c>h&&(h=c),l>n&&(n=l)}return this.min.set(s,i,e),this.max.set(r,h,n),this}setFromPoints(t){this.makeEmpty();for(let s=0,i=t.length;s<i;s++)this.expandByPoint(t[s]);return this}setFromCenterAndSize(t,s){const i=n.copy(s).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const s=t.geometry;void 0!==s&&(null===s.boundingBox&&s.computeBoundingBox(),a.copy(s.boundingBox),a.applyMatrix4(t.matrixWorld),this.union(a));const i=t.children;for(let t=0,s=i.length;t<s;t++)this.expandByObject(i[t]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,s){return s.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,n),n.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let s,i;return t.normal.x>0?(s=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(s=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(s+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(s+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(s+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(s+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),s<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(x),d.subVectors(this.max,x),o.subVectors(t.a,x),c.subVectors(t.b,x),l.subVectors(t.c,x),u.subVectors(c,o),m.subVectors(l,c),y.subVectors(o,l);let s=[0,-u.z,u.y,0,-m.z,m.y,0,-y.z,y.y,u.z,0,-u.x,m.z,0,-m.x,y.z,0,-y.x,-u.y,u.x,0,-m.y,m.x,0,-y.y,y.x,0];return!!g(s,o,c,l,d)&&(s=[1,0,0,0,1,0,0,0,1],!!g(s,o,c,l,d)&&(p.crossVectors(u,m),s=[p.x,p.y,p.z],g(s,o,c,l,d)))}clampPoint(t,s){return s.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return n.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(n).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(h[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),h[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),h[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),h[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),h[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),h[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),h[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),h[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(h)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}r.prototype.isBox3=!0;const h=[new e.P,new e.P,new e.P,new e.P,new e.P,new e.P,new e.P,new e.P],n=new e.P,a=new r,o=new e.P,c=new e.P,l=new e.P,u=new e.P,m=new e.P,y=new e.P,x=new e.P,d=new e.P,p=new e.P,M=new e.P;function g(t,s,i,e,r){for(let h=0,n=t.length-3;h<=n;h+=3){M.fromArray(t,h);const n=r.x*Math.abs(M.x)+r.y*Math.abs(M.y)+r.z*Math.abs(M.z),a=s.dot(M),o=i.dot(M),c=e.dot(M);if(Math.max(-Math.max(a,o,c),Math.min(a,o,c))>n)return!1}return!0}},3662:(t,s,i)=>{i.d(s,{I:()=>l});var e=i(2043);const r={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},h={h:0,s:0,l:0},n={h:0,s:0,l:0};function a(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+6*(s-t)*(2/3-i):t}function o(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function c(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class l{constructor(t,s,i){return void 0===s&&void 0===i?this.set(t):this.setRGB(t,s,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,s,i){return this.r=t,this.g=s,this.b=i,this}setHSL(t,s,i){if(t=e.kz(t,1),s=e.uZ(s,0,1),i=e.uZ(i,0,1),0===s)this.r=this.g=this.b=i;else{const e=i<=.5?i*(1+s):i+s-i*s,r=2*i-e;this.r=a(r,e,t+1/3),this.g=a(r,e,t),this.b=a(r,e,t-1/3)}return this}setStyle(t){function s(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const e=i[1],r=i[2];switch(e){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,s(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,s(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const i=parseFloat(t[1])/360,e=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100;return s(t[4]),this.setHSL(i,e,r)}}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=i[1],s=t.length;if(3===s)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===s)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const s=r[t.toLowerCase()];return void 0!==s?this.setHex(s):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,s=2){return this.r=Math.pow(t.r,s),this.g=Math.pow(t.g,s),this.b=Math.pow(t.b,s),this}copyLinearToGamma(t,s=2){const i=s>0?1/s:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=o(t.r),this.g=o(t.g),this.b=o(t.b),this}copyLinearToSRGB(t){return this.r=c(t.r),this.g=c(t.g),this.b=c(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const s=this.r,i=this.g,e=this.b,r=Math.max(s,i,e),h=Math.min(s,i,e);let n,a;const o=(h+r)/2;if(h===r)n=0,a=0;else{const t=r-h;switch(a=o<=.5?t/(r+h):t/(2-r-h),r){case s:n=(i-e)/t+(i<e?6:0);break;case i:n=(e-s)/t+2;break;case e:n=(s-i)/t+4}n/=6}return t.h=n,t.s=a,t.l=o,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,s,i){return this.getHSL(h),h.h+=t,h.s+=s,h.l+=i,this.setHSL(h.h,h.s,h.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,s){return this.r=t.r+s.r,this.g=t.g+s.g,this.b=t.b+s.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,s){return this.r+=(t.r-this.r)*s,this.g+=(t.g-this.g)*s,this.b+=(t.b-this.b)*s,this}lerpColors(t,s,i){return this.r=t.r+(s.r-t.r)*i,this.g=t.g+(s.g-t.g)*i,this.b=t.b+(s.b-t.b)*i,this}lerpHSL(t,s){this.getHSL(h),t.getHSL(n);const i=e.t7(h.h,n.h,s),r=e.t7(h.s,n.s,s),a=e.t7(h.l,n.l,s);return this.setHSL(i,r,a),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,s=0){return this.r=t[s],this.g=t[s+1],this.b=t[s+2],this}toArray(t=[],s=0){return t[s]=this.r,t[s+1]=this.g,t[s+2]=this.b,t}fromBufferAttribute(t,s){return this.r=t.getX(s),this.g=t.getY(s),this.b=t.getZ(s),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}l.NAMES=r,l.prototype.isColor=!0,l.prototype.r=1,l.prototype.g=1,l.prototype.b=1},2903:(t,s,i)=>{i.d(s,{U:()=>c});var e=i(7092),r=i(6881),h=i(9203),n=i(2043);const a=new h.y,o=new e._;class c{constructor(t=0,s=0,i=0,e=c.DefaultOrder){this._x=t,this._y=s,this._z=i,this._order=e}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,s,i,e=this._order){return this._x=t,this._y=s,this._z=i,this._order=e,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,s=this._order,i=!0){const e=t.elements,r=e[0],h=e[4],a=e[8],o=e[1],c=e[5],l=e[9],u=e[2],m=e[6],y=e[10];switch(s){case"XYZ":this._y=Math.asin((0,n.uZ)(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,y),this._z=Math.atan2(-h,r)):(this._x=Math.atan2(m,c),this._z=0);break;case"YXZ":this._x=Math.asin(-(0,n.uZ)(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(a,y),this._z=Math.atan2(o,c)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin((0,n.uZ)(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-u,y),this._z=Math.atan2(-h,c)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-(0,n.uZ)(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(m,y),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-h,c));break;case"YZX":this._z=Math.asin((0,n.uZ)(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,y));break;case"XZY":this._z=Math.asin(-(0,n.uZ)(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(m,c),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-l,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,s,i){return a.makeRotationFromQuaternion(t),this.setFromRotationMatrix(a,s,i)}setFromVector3(t,s=this._order){return this.set(t.x,t.y,t.z,s)}reorder(t){return o.setFromEuler(this),this.setFromQuaternion(o,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],s=0){return t[s]=this._x,t[s+1]=this._y,t[s+2]=this._z,t[s+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new r.P(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}c.prototype.isEuler=!0,c.DefaultOrder="XYZ",c.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"]},4698:(t,s,i)=>{i.d(s,{i:()=>o});var e=i(6881),r=i(4699),h=i(1158);const n=new r.a,a=new e.P;class o{constructor(t=new h.J,s=new h.J,i=new h.J,e=new h.J,r=new h.J,n=new h.J){this.planes=[t,s,i,e,r,n]}set(t,s,i,e,r,h){const n=this.planes;return n[0].copy(t),n[1].copy(s),n[2].copy(i),n[3].copy(e),n[4].copy(r),n[5].copy(h),this}copy(t){const s=this.planes;for(let i=0;i<6;i++)s[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const s=this.planes,i=t.elements,e=i[0],r=i[1],h=i[2],n=i[3],a=i[4],o=i[5],c=i[6],l=i[7],u=i[8],m=i[9],y=i[10],x=i[11],d=i[12],p=i[13],M=i[14],g=i[15];return s[0].setComponents(n-e,l-a,x-u,g-d).normalize(),s[1].setComponents(n+e,l+a,x+u,g+d).normalize(),s[2].setComponents(n+r,l+o,x+m,g+p).normalize(),s[3].setComponents(n-r,l-o,x-m,g-p).normalize(),s[4].setComponents(n-h,l-c,x-y,g-M).normalize(),s[5].setComponents(n+h,l+c,x+y,g+M).normalize(),this}intersectsObject(t){const s=t.geometry;return null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(n)}intersectsSprite(t){return n.center.set(0,0,0),n.radius=.7071067811865476,n.applyMatrix4(t.matrixWorld),this.intersectsSphere(n)}intersectsSphere(t){const s=this.planes,i=t.center,e=-t.radius;for(let t=0;t<6;t++){if(s[t].distanceToPoint(i)<e)return!1}return!0}intersectsBox(t){const s=this.planes;for(let i=0;i<6;i++){const e=s[i];if(a.x=e.normal.x>0?t.max.x:t.min.x,a.y=e.normal.y>0?t.max.y:t.min.y,a.z=e.normal.z>0?t.max.z:t.min.z,e.distanceToPoint(a)<0)return!1}return!0}containsPoint(t){const s=this.planes;for(let i=0;i<6;i++)if(s[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}},8515:(t,s,i)=>{i.d(s,{_:()=>e});class e{constructor(t,s,i,e){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==e?e:new s.constructor(i),this.sampleValues=s,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const s=this.parameterPositions;let i=this._cachedIndex,e=s[i],r=s[i-1];t:{s:{let h;i:{e:if(!(t<e)){for(let h=i+2;;){if(void 0===e){if(t<r)break e;return i=s.length,this._cachedIndex=i,this.afterEnd_(i-1,t,r)}if(i===h)break;if(r=e,e=s[++i],t<e)break s}h=s.length;break i}if(t>=r)break t;{const n=s[1];t<n&&(i=2,r=n);for(let h=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,e);if(i===h)break;if(e=r,r=s[--i-1],t>=r)break s}h=i,i=0}}for(;i<h;){const e=i+h>>>1;t<s[e]?h=e:i=e+1}if(e=s[i],r=s[i-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,e);if(void 0===e)return i=s.length,this._cachedIndex=i,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,e)}return this.interpolate_(i,r,t,e)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const s=this.resultBuffer,i=this.sampleValues,e=this.valueSize,r=t*e;for(let t=0;t!==e;++t)s[t]=i[r+t];return s}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}e.prototype.beforeStart_=e.prototype.copySampleValue_,e.prototype.afterEnd_=e.prototype.copySampleValue_},2043:(t,s,i)=>{i.d(s,{qW:()=>r,I3:()=>h,DO:()=>n,uZ:()=>a,kz:()=>o,t7:()=>c,ZY:()=>l,wt:()=>u,h3:()=>m,gy:()=>y});const e=[];for(let t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);const r=Math.PI/180,h=180/Math.PI;function n(){const t=4294967295*Math.random()|0,s=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&s]+e[s>>8&255]+"-"+e[s>>16&15|64]+e[s>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]).toUpperCase()}function a(t,s,i){return Math.max(s,Math.min(i,t))}function o(t,s){return(t%s+s)%s}function c(t,s,i){return(1-i)*t+i*s}function l(t){return t*h}function u(t){return 0==(t&t-1)&&0!==t}function m(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function y(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}},1273:(t,s,i)=>{i.d(s,{V:()=>e});class e{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,s,i,e,r,h,n,a,o){const c=this.elements;return c[0]=t,c[1]=e,c[2]=n,c[3]=s,c[4]=r,c[5]=a,c[6]=i,c[7]=h,c[8]=o,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const s=this.elements,i=t.elements;return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[8]=i[8],this}extractBasis(t,s,i){return t.setFromMatrix3Column(this,0),s.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const s=t.elements;return this.set(s[0],s[4],s[8],s[1],s[5],s[9],s[2],s[6],s[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,s){const i=t.elements,e=s.elements,r=this.elements,h=i[0],n=i[3],a=i[6],o=i[1],c=i[4],l=i[7],u=i[2],m=i[5],y=i[8],x=e[0],d=e[3],p=e[6],M=e[1],g=e[4],z=e[7],_=e[2],w=e[5],b=e[8];return r[0]=h*x+n*M+a*_,r[3]=h*d+n*g+a*w,r[6]=h*p+n*z+a*b,r[1]=o*x+c*M+l*_,r[4]=o*d+c*g+l*w,r[7]=o*p+c*z+l*b,r[2]=u*x+m*M+y*_,r[5]=u*d+m*g+y*w,r[8]=u*p+m*z+y*b,this}multiplyScalar(t){const s=this.elements;return s[0]*=t,s[3]*=t,s[6]*=t,s[1]*=t,s[4]*=t,s[7]*=t,s[2]*=t,s[5]*=t,s[8]*=t,this}determinant(){const t=this.elements,s=t[0],i=t[1],e=t[2],r=t[3],h=t[4],n=t[5],a=t[6],o=t[7],c=t[8];return s*h*c-s*n*o-i*r*c+i*n*a+e*r*o-e*h*a}invert(){const t=this.elements,s=t[0],i=t[1],e=t[2],r=t[3],h=t[4],n=t[5],a=t[6],o=t[7],c=t[8],l=c*h-n*o,u=n*a-c*r,m=o*r-h*a,y=s*l+i*u+e*m;if(0===y)return this.set(0,0,0,0,0,0,0,0,0);const x=1/y;return t[0]=l*x,t[1]=(e*o-c*i)*x,t[2]=(n*i-e*h)*x,t[3]=u*x,t[4]=(c*s-e*a)*x,t[5]=(e*r-n*s)*x,t[6]=m*x,t[7]=(i*a-o*s)*x,t[8]=(h*s-i*r)*x,this}transpose(){let t;const s=this.elements;return t=s[1],s[1]=s[3],s[3]=t,t=s[2],s[2]=s[6],s[6]=t,t=s[5],s[5]=s[7],s[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const s=this.elements;return t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8],this}setUvTransform(t,s,i,e,r,h,n){const a=Math.cos(r),o=Math.sin(r);return this.set(i*a,i*o,-i*(a*h+o*n)+h+t,-e*o,e*a,-e*(-o*h+a*n)+n+s,0,0,1),this}scale(t,s){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=s,i[4]*=s,i[7]*=s,this}rotate(t){const s=Math.cos(t),i=Math.sin(t),e=this.elements,r=e[0],h=e[3],n=e[6],a=e[1],o=e[4],c=e[7];return e[0]=s*r+i*a,e[3]=s*h+i*o,e[6]=s*n+i*c,e[1]=-i*r+s*a,e[4]=-i*h+s*o,e[7]=-i*n+s*c,this}translate(t,s){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=s*i[2],i[4]+=s*i[5],i[7]+=s*i[8],this}equals(t){const s=this.elements,i=t.elements;for(let t=0;t<9;t++)if(s[t]!==i[t])return!1;return!0}fromArray(t,s=0){for(let i=0;i<9;i++)this.elements[i]=t[i+s];return this}toArray(t=[],s=0){const i=this.elements;return t[s]=i[0],t[s+1]=i[1],t[s+2]=i[2],t[s+3]=i[3],t[s+4]=i[4],t[s+5]=i[5],t[s+6]=i[6],t[s+7]=i[7],t[s+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}e.prototype.isMatrix3=!0},9203:(t,s,i)=>{i.d(s,{y:()=>r});var e=i(6881);class r{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,s,i,e,r,h,n,a,o,c,l,u,m,y,x,d){const p=this.elements;return p[0]=t,p[4]=s,p[8]=i,p[12]=e,p[1]=r,p[5]=h,p[9]=n,p[13]=a,p[2]=o,p[6]=c,p[10]=l,p[14]=u,p[3]=m,p[7]=y,p[11]=x,p[15]=d,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new r).fromArray(this.elements)}copy(t){const s=this.elements,i=t.elements;return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],this}copyPosition(t){const s=this.elements,i=t.elements;return s[12]=i[12],s[13]=i[13],s[14]=i[14],this}setFromMatrix3(t){const s=t.elements;return this.set(s[0],s[3],s[6],0,s[1],s[4],s[7],0,s[2],s[5],s[8],0,0,0,0,1),this}extractBasis(t,s,i){return t.setFromMatrixColumn(this,0),s.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,s,i){return this.set(t.x,s.x,i.x,0,t.y,s.y,i.y,0,t.z,s.z,i.z,0,0,0,0,1),this}extractRotation(t){const s=this.elements,i=t.elements,e=1/h.setFromMatrixColumn(t,0).length(),r=1/h.setFromMatrixColumn(t,1).length(),n=1/h.setFromMatrixColumn(t,2).length();return s[0]=i[0]*e,s[1]=i[1]*e,s[2]=i[2]*e,s[3]=0,s[4]=i[4]*r,s[5]=i[5]*r,s[6]=i[6]*r,s[7]=0,s[8]=i[8]*n,s[9]=i[9]*n,s[10]=i[10]*n,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const s=this.elements,i=t.x,e=t.y,r=t.z,h=Math.cos(i),n=Math.sin(i),a=Math.cos(e),o=Math.sin(e),c=Math.cos(r),l=Math.sin(r);if("XYZ"===t.order){const t=h*c,i=h*l,e=n*c,r=n*l;s[0]=a*c,s[4]=-a*l,s[8]=o,s[1]=i+e*o,s[5]=t-r*o,s[9]=-n*a,s[2]=r-t*o,s[6]=e+i*o,s[10]=h*a}else if("YXZ"===t.order){const t=a*c,i=a*l,e=o*c,r=o*l;s[0]=t+r*n,s[4]=e*n-i,s[8]=h*o,s[1]=h*l,s[5]=h*c,s[9]=-n,s[2]=i*n-e,s[6]=r+t*n,s[10]=h*a}else if("ZXY"===t.order){const t=a*c,i=a*l,e=o*c,r=o*l;s[0]=t-r*n,s[4]=-h*l,s[8]=e+i*n,s[1]=i+e*n,s[5]=h*c,s[9]=r-t*n,s[2]=-h*o,s[6]=n,s[10]=h*a}else if("ZYX"===t.order){const t=h*c,i=h*l,e=n*c,r=n*l;s[0]=a*c,s[4]=e*o-i,s[8]=t*o+r,s[1]=a*l,s[5]=r*o+t,s[9]=i*o-e,s[2]=-o,s[6]=n*a,s[10]=h*a}else if("YZX"===t.order){const t=h*a,i=h*o,e=n*a,r=n*o;s[0]=a*c,s[4]=r-t*l,s[8]=e*l+i,s[1]=l,s[5]=h*c,s[9]=-n*c,s[2]=-o*c,s[6]=i*l+e,s[10]=t-r*l}else if("XZY"===t.order){const t=h*a,i=h*o,e=n*a,r=n*o;s[0]=a*c,s[4]=-l,s[8]=o*c,s[1]=t*l+r,s[5]=h*c,s[9]=i*l-e,s[2]=e*l-i,s[6]=n*c,s[10]=r*l+t}return s[3]=0,s[7]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromQuaternion(t){return this.compose(a,t,o)}lookAt(t,s,i){const e=this.elements;return u.subVectors(t,s),0===u.lengthSq()&&(u.z=1),u.normalize(),c.crossVectors(i,u),0===c.lengthSq()&&(1===Math.abs(i.z)?u.x+=1e-4:u.z+=1e-4,u.normalize(),c.crossVectors(i,u)),c.normalize(),l.crossVectors(u,c),e[0]=c.x,e[4]=l.x,e[8]=u.x,e[1]=c.y,e[5]=l.y,e[9]=u.y,e[2]=c.z,e[6]=l.z,e[10]=u.z,this}multiply(t,s){return void 0!==s?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,s)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,s){const i=t.elements,e=s.elements,r=this.elements,h=i[0],n=i[4],a=i[8],o=i[12],c=i[1],l=i[5],u=i[9],m=i[13],y=i[2],x=i[6],d=i[10],p=i[14],M=i[3],g=i[7],z=i[11],_=i[15],w=e[0],b=e[4],f=e[8],S=e[12],P=e[1],k=e[5],V=e[9],C=e[13],v=e[2],E=e[6],q=e[10],T=e[14],F=e[3],A=e[7],B=e[11],Z=e[15];return r[0]=h*w+n*P+a*v+o*F,r[4]=h*b+n*k+a*E+o*A,r[8]=h*f+n*V+a*q+o*B,r[12]=h*S+n*C+a*T+o*Z,r[1]=c*w+l*P+u*v+m*F,r[5]=c*b+l*k+u*E+m*A,r[9]=c*f+l*V+u*q+m*B,r[13]=c*S+l*C+u*T+m*Z,r[2]=y*w+x*P+d*v+p*F,r[6]=y*b+x*k+d*E+p*A,r[10]=y*f+x*V+d*q+p*B,r[14]=y*S+x*C+d*T+p*Z,r[3]=M*w+g*P+z*v+_*F,r[7]=M*b+g*k+z*E+_*A,r[11]=M*f+g*V+z*q+_*B,r[15]=M*S+g*C+z*T+_*Z,this}multiplyScalar(t){const s=this.elements;return s[0]*=t,s[4]*=t,s[8]*=t,s[12]*=t,s[1]*=t,s[5]*=t,s[9]*=t,s[13]*=t,s[2]*=t,s[6]*=t,s[10]*=t,s[14]*=t,s[3]*=t,s[7]*=t,s[11]*=t,s[15]*=t,this}determinant(){const t=this.elements,s=t[0],i=t[4],e=t[8],r=t[12],h=t[1],n=t[5],a=t[9],o=t[13],c=t[2],l=t[6],u=t[10],m=t[14];return t[3]*(+r*a*l-e*o*l-r*n*u+i*o*u+e*n*m-i*a*m)+t[7]*(+s*a*m-s*o*u+r*h*u-e*h*m+e*o*c-r*a*c)+t[11]*(+s*o*l-s*n*m-r*h*l+i*h*m+r*n*c-i*o*c)+t[15]*(-e*n*c-s*a*l+s*n*u+e*h*l-i*h*u+i*a*c)}transpose(){const t=this.elements;let s;return s=t[1],t[1]=t[4],t[4]=s,s=t[2],t[2]=t[8],t[8]=s,s=t[6],t[6]=t[9],t[9]=s,s=t[3],t[3]=t[12],t[12]=s,s=t[7],t[7]=t[13],t[13]=s,s=t[11],t[11]=t[14],t[14]=s,this}setPosition(t,s,i){const e=this.elements;return t.isVector3?(e[12]=t.x,e[13]=t.y,e[14]=t.z):(e[12]=t,e[13]=s,e[14]=i),this}invert(){const t=this.elements,s=t[0],i=t[1],e=t[2],r=t[3],h=t[4],n=t[5],a=t[6],o=t[7],c=t[8],l=t[9],u=t[10],m=t[11],y=t[12],x=t[13],d=t[14],p=t[15],M=l*d*o-x*u*o+x*a*m-n*d*m-l*a*p+n*u*p,g=y*u*o-c*d*o-y*a*m+h*d*m+c*a*p-h*u*p,z=c*x*o-y*l*o+y*n*m-h*x*m-c*n*p+h*l*p,_=y*l*a-c*x*a-y*n*u+h*x*u+c*n*d-h*l*d,w=s*M+i*g+e*z+r*_;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/w;return t[0]=M*b,t[1]=(x*u*r-l*d*r-x*e*m+i*d*m+l*e*p-i*u*p)*b,t[2]=(n*d*r-x*a*r+x*e*o-i*d*o-n*e*p+i*a*p)*b,t[3]=(l*a*r-n*u*r-l*e*o+i*u*o+n*e*m-i*a*m)*b,t[4]=g*b,t[5]=(c*d*r-y*u*r+y*e*m-s*d*m-c*e*p+s*u*p)*b,t[6]=(y*a*r-h*d*r-y*e*o+s*d*o+h*e*p-s*a*p)*b,t[7]=(h*u*r-c*a*r+c*e*o-s*u*o-h*e*m+s*a*m)*b,t[8]=z*b,t[9]=(y*l*r-c*x*r-y*i*m+s*x*m+c*i*p-s*l*p)*b,t[10]=(h*x*r-y*n*r+y*i*o-s*x*o-h*i*p+s*n*p)*b,t[11]=(c*n*r-h*l*r-c*i*o+s*l*o+h*i*m-s*n*m)*b,t[12]=_*b,t[13]=(c*x*e-y*l*e+y*i*u-s*x*u-c*i*d+s*l*d)*b,t[14]=(y*n*e-h*x*e-y*i*a+s*x*a+h*i*d-s*n*d)*b,t[15]=(h*l*e-c*n*e+c*i*a-s*l*a-h*i*u+s*n*u)*b,this}scale(t){const s=this.elements,i=t.x,e=t.y,r=t.z;return s[0]*=i,s[4]*=e,s[8]*=r,s[1]*=i,s[5]*=e,s[9]*=r,s[2]*=i,s[6]*=e,s[10]*=r,s[3]*=i,s[7]*=e,s[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,s=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],e=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(s,i,e))}makeTranslation(t,s,i){return this.set(1,0,0,t,0,1,0,s,0,0,1,i,0,0,0,1),this}makeRotationX(t){const s=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,s,-i,0,0,i,s,0,0,0,0,1),this}makeRotationY(t){const s=Math.cos(t),i=Math.sin(t);return this.set(s,0,i,0,0,1,0,0,-i,0,s,0,0,0,0,1),this}makeRotationZ(t){const s=Math.cos(t),i=Math.sin(t);return this.set(s,-i,0,0,i,s,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,s){const i=Math.cos(s),e=Math.sin(s),r=1-i,h=t.x,n=t.y,a=t.z,o=r*h,c=r*n;return this.set(o*h+i,o*n-e*a,o*a+e*n,0,o*n+e*a,c*n+i,c*a-e*h,0,o*a-e*n,c*a+e*h,r*a*a+i,0,0,0,0,1),this}makeScale(t,s,i){return this.set(t,0,0,0,0,s,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,s,i,e,r,h){return this.set(1,i,r,0,t,1,h,0,s,e,1,0,0,0,0,1),this}compose(t,s,i){const e=this.elements,r=s._x,h=s._y,n=s._z,a=s._w,o=r+r,c=h+h,l=n+n,u=r*o,m=r*c,y=r*l,x=h*c,d=h*l,p=n*l,M=a*o,g=a*c,z=a*l,_=i.x,w=i.y,b=i.z;return e[0]=(1-(x+p))*_,e[1]=(m+z)*_,e[2]=(y-g)*_,e[3]=0,e[4]=(m-z)*w,e[5]=(1-(u+p))*w,e[6]=(d+M)*w,e[7]=0,e[8]=(y+g)*b,e[9]=(d-M)*b,e[10]=(1-(u+x))*b,e[11]=0,e[12]=t.x,e[13]=t.y,e[14]=t.z,e[15]=1,this}decompose(t,s,i){const e=this.elements;let r=h.set(e[0],e[1],e[2]).length();const a=h.set(e[4],e[5],e[6]).length(),o=h.set(e[8],e[9],e[10]).length();this.determinant()<0&&(r=-r),t.x=e[12],t.y=e[13],t.z=e[14],n.copy(this);const c=1/r,l=1/a,u=1/o;return n.elements[0]*=c,n.elements[1]*=c,n.elements[2]*=c,n.elements[4]*=l,n.elements[5]*=l,n.elements[6]*=l,n.elements[8]*=u,n.elements[9]*=u,n.elements[10]*=u,s.setFromRotationMatrix(n),i.x=r,i.y=a,i.z=o,this}makePerspective(t,s,i,e,r,h){void 0===h&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const n=this.elements,a=2*r/(s-t),o=2*r/(i-e),c=(s+t)/(s-t),l=(i+e)/(i-e),u=-(h+r)/(h-r),m=-2*h*r/(h-r);return n[0]=a,n[4]=0,n[8]=c,n[12]=0,n[1]=0,n[5]=o,n[9]=l,n[13]=0,n[2]=0,n[6]=0,n[10]=u,n[14]=m,n[3]=0,n[7]=0,n[11]=-1,n[15]=0,this}makeOrthographic(t,s,i,e,r,h){const n=this.elements,a=1/(s-t),o=1/(i-e),c=1/(h-r),l=(s+t)*a,u=(i+e)*o,m=(h+r)*c;return n[0]=2*a,n[4]=0,n[8]=0,n[12]=-l,n[1]=0,n[5]=2*o,n[9]=0,n[13]=-u,n[2]=0,n[6]=0,n[10]=-2*c,n[14]=-m,n[3]=0,n[7]=0,n[11]=0,n[15]=1,this}equals(t){const s=this.elements,i=t.elements;for(let t=0;t<16;t++)if(s[t]!==i[t])return!1;return!0}fromArray(t,s=0){for(let i=0;i<16;i++)this.elements[i]=t[i+s];return this}toArray(t=[],s=0){const i=this.elements;return t[s]=i[0],t[s+1]=i[1],t[s+2]=i[2],t[s+3]=i[3],t[s+4]=i[4],t[s+5]=i[5],t[s+6]=i[6],t[s+7]=i[7],t[s+8]=i[8],t[s+9]=i[9],t[s+10]=i[10],t[s+11]=i[11],t[s+12]=i[12],t[s+13]=i[13],t[s+14]=i[14],t[s+15]=i[15],t}}r.prototype.isMatrix4=!0;const h=new e.P,n=new r,a=new e.P(0,0,0),o=new e.P(1,1,1),c=new e.P,l=new e.P,u=new e.P},1158:(t,s,i)=>{i.d(s,{J:()=>o});var e=i(1273),r=i(6881);const h=new r.P,n=new r.P,a=new e.V;class o{constructor(t=new r.P(1,0,0),s=0){this.normal=t,this.constant=s}set(t,s){return this.normal.copy(t),this.constant=s,this}setComponents(t,s,i,e){return this.normal.set(t,s,i),this.constant=e,this}setFromNormalAndCoplanarPoint(t,s){return this.normal.copy(t),this.constant=-s.dot(this.normal),this}setFromCoplanarPoints(t,s,i){const e=h.subVectors(i,s).cross(n.subVectors(t,s)).normalize();return this.setFromNormalAndCoplanarPoint(e,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,s){return s.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,s){const i=t.delta(h),e=this.normal.dot(i);if(0===e)return 0===this.distanceToPoint(t.start)?s.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/e;return r<0||r>1?null:s.copy(i).multiplyScalar(r).add(t.start)}intersectsLine(t){const s=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return s<0&&i>0||i<0&&s>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,s){const i=s||a.getNormalMatrix(t),e=this.coplanarPoint(h).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-e.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}o.prototype.isPlane=!0},7092:(t,s,i)=>{i.d(s,{_:()=>r});var e=i(2043);class r{constructor(t=0,s=0,i=0,e=1){this._x=t,this._y=s,this._z=i,this._w=e}static slerp(t,s,i,e){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(t,s,e)}static slerpFlat(t,s,i,e,r,h,n){let a=i[e+0],o=i[e+1],c=i[e+2],l=i[e+3];const u=r[h+0],m=r[h+1],y=r[h+2],x=r[h+3];if(0===n)return t[s+0]=a,t[s+1]=o,t[s+2]=c,void(t[s+3]=l);if(1===n)return t[s+0]=u,t[s+1]=m,t[s+2]=y,void(t[s+3]=x);if(l!==x||a!==u||o!==m||c!==y){let t=1-n;const s=a*u+o*m+c*y+l*x,i=s>=0?1:-1,e=1-s*s;if(e>Number.EPSILON){const r=Math.sqrt(e),h=Math.atan2(r,s*i);t=Math.sin(t*h)/r,n=Math.sin(n*h)/r}const r=n*i;if(a=a*t+u*r,o=o*t+m*r,c=c*t+y*r,l=l*t+x*r,t===1-n){const t=1/Math.sqrt(a*a+o*o+c*c+l*l);a*=t,o*=t,c*=t,l*=t}}t[s]=a,t[s+1]=o,t[s+2]=c,t[s+3]=l}static multiplyQuaternionsFlat(t,s,i,e,r,h){const n=i[e],a=i[e+1],o=i[e+2],c=i[e+3],l=r[h],u=r[h+1],m=r[h+2],y=r[h+3];return t[s]=n*y+c*l+a*m-o*u,t[s+1]=a*y+c*u+o*l-n*m,t[s+2]=o*y+c*m+n*u-a*l,t[s+3]=c*y-n*l-a*u-o*m,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,s,i,e){return this._x=t,this._y=s,this._z=i,this._w=e,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,s){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,e=t._y,r=t._z,h=t._order,n=Math.cos,a=Math.sin,o=n(i/2),c=n(e/2),l=n(r/2),u=a(i/2),m=a(e/2),y=a(r/2);switch(h){case"XYZ":this._x=u*c*l+o*m*y,this._y=o*m*l-u*c*y,this._z=o*c*y+u*m*l,this._w=o*c*l-u*m*y;break;case"YXZ":this._x=u*c*l+o*m*y,this._y=o*m*l-u*c*y,this._z=o*c*y-u*m*l,this._w=o*c*l+u*m*y;break;case"ZXY":this._x=u*c*l-o*m*y,this._y=o*m*l+u*c*y,this._z=o*c*y+u*m*l,this._w=o*c*l-u*m*y;break;case"ZYX":this._x=u*c*l-o*m*y,this._y=o*m*l+u*c*y,this._z=o*c*y-u*m*l,this._w=o*c*l+u*m*y;break;case"YZX":this._x=u*c*l+o*m*y,this._y=o*m*l+u*c*y,this._z=o*c*y-u*m*l,this._w=o*c*l-u*m*y;break;case"XZY":this._x=u*c*l-o*m*y,this._y=o*m*l-u*c*y,this._z=o*c*y+u*m*l,this._w=o*c*l+u*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return!1!==s&&this._onChangeCallback(),this}setFromAxisAngle(t,s){const i=s/2,e=Math.sin(i);return this._x=t.x*e,this._y=t.y*e,this._z=t.z*e,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const s=t.elements,i=s[0],e=s[4],r=s[8],h=s[1],n=s[5],a=s[9],o=s[2],c=s[6],l=s[10],u=i+n+l;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(c-a)*t,this._y=(r-o)*t,this._z=(h-e)*t}else if(i>n&&i>l){const t=2*Math.sqrt(1+i-n-l);this._w=(c-a)/t,this._x=.25*t,this._y=(e+h)/t,this._z=(r+o)/t}else if(n>l){const t=2*Math.sqrt(1+n-i-l);this._w=(r-o)/t,this._x=(e+h)/t,this._y=.25*t,this._z=(a+c)/t}else{const t=2*Math.sqrt(1+l-i-n);this._w=(h-e)/t,this._x=(r+o)/t,this._y=(a+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,s){let i=t.dot(s)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*s.z-t.z*s.y,this._y=t.z*s.x-t.x*s.z,this._z=t.x*s.y-t.y*s.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(e.uZ(this.dot(t),-1,1)))}rotateTowards(t,s){const i=this.angleTo(t);if(0===i)return this;const e=Math.min(1,s/i);return this.slerp(t,e),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,s){return void 0!==s?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,s)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,s){const i=t._x,e=t._y,r=t._z,h=t._w,n=s._x,a=s._y,o=s._z,c=s._w;return this._x=i*c+h*n+e*o-r*a,this._y=e*c+h*a+r*n-i*o,this._z=r*c+h*o+i*a-e*n,this._w=h*c-i*n-e*a-r*o,this._onChangeCallback(),this}slerp(t,s){if(0===s)return this;if(1===s)return this.copy(t);const i=this._x,e=this._y,r=this._z,h=this._w;let n=h*t._w+i*t._x+e*t._y+r*t._z;if(n<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,n=-n):this.copy(t),n>=1)return this._w=h,this._x=i,this._y=e,this._z=r,this;const a=1-n*n;if(a<=Number.EPSILON){const t=1-s;return this._w=t*h+s*this._w,this._x=t*i+s*this._x,this._y=t*e+s*this._y,this._z=t*r+s*this._z,this.normalize(),this._onChangeCallback(),this}const o=Math.sqrt(a),c=Math.atan2(o,n),l=Math.sin((1-s)*c)/o,u=Math.sin(s*c)/o;return this._w=h*l+this._w*u,this._x=i*l+this._x*u,this._y=e*l+this._y*u,this._z=r*l+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,s,i){this.copy(t).slerp(s,i)}random(){const t=Math.random(),s=Math.sqrt(1-t),i=Math.sqrt(t),e=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(s*Math.cos(e),i*Math.sin(r),i*Math.cos(r),s*Math.sin(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,s=0){return this._x=t[s],this._y=t[s+1],this._z=t[s+2],this._w=t[s+3],this._onChangeCallback(),this}toArray(t=[],s=0){return t[s]=this._x,t[s+1]=this._y,t[s+2]=this._z,t[s+3]=this._w,t}fromBufferAttribute(t,s){return this._x=t.getX(s),this._y=t.getY(s),this._z=t.getZ(s),this._w=t.getW(s),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}r.prototype.isQuaternion=!0},7540:(t,s,i)=>{i.d(s,{z:()=>u});var e=i(6881);const r=new e.P,h=new e.P,n=new e.P,a=new e.P,o=new e.P,c=new e.P,l=new e.P;class u{constructor(t=new e.P,s=new e.P(0,0,-1)){this.origin=t,this.direction=s}set(t,s){return this.origin.copy(t),this.direction.copy(s),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,s){return s.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,r)),this}closestPointToPoint(t,s){s.subVectors(t,this.origin);const i=s.dot(this.direction);return i<0?s.copy(this.origin):s.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const s=r.subVectors(t,this.origin).dot(this.direction);return s<0?this.origin.distanceToSquared(t):(r.copy(this.direction).multiplyScalar(s).add(this.origin),r.distanceToSquared(t))}distanceSqToSegment(t,s,i,e){h.copy(t).add(s).multiplyScalar(.5),n.copy(s).sub(t).normalize(),a.copy(this.origin).sub(h);const r=.5*t.distanceTo(s),o=-this.direction.dot(n),c=a.dot(this.direction),l=-a.dot(n),u=a.lengthSq(),m=Math.abs(1-o*o);let y,x,d,p;if(m>0)if(y=o*l-c,x=o*c-l,p=r*m,y>=0)if(x>=-p)if(x<=p){const t=1/m;y*=t,x*=t,d=y*(y+o*x+2*c)+x*(o*y+x+2*l)+u}else x=r,y=Math.max(0,-(o*x+c)),d=-y*y+x*(x+2*l)+u;else x=-r,y=Math.max(0,-(o*x+c)),d=-y*y+x*(x+2*l)+u;else x<=-p?(y=Math.max(0,-(-o*r+c)),x=y>0?-r:Math.min(Math.max(-r,-l),r),d=-y*y+x*(x+2*l)+u):x<=p?(y=0,x=Math.min(Math.max(-r,-l),r),d=x*(x+2*l)+u):(y=Math.max(0,-(o*r+c)),x=y>0?r:Math.min(Math.max(-r,-l),r),d=-y*y+x*(x+2*l)+u);else x=o>0?-r:r,y=Math.max(0,-(o*x+c)),d=-y*y+x*(x+2*l)+u;return i&&i.copy(this.direction).multiplyScalar(y).add(this.origin),e&&e.copy(n).multiplyScalar(x).add(h),d}intersectSphere(t,s){r.subVectors(t.center,this.origin);const i=r.dot(this.direction),e=r.dot(r)-i*i,h=t.radius*t.radius;if(e>h)return null;const n=Math.sqrt(h-e),a=i-n,o=i+n;return a<0&&o<0?null:a<0?this.at(o,s):this.at(a,s)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const s=t.normal.dot(this.direction);if(0===s)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/s;return i>=0?i:null}intersectPlane(t,s){const i=this.distanceToPlane(t);return null===i?null:this.at(i,s)}intersectsPlane(t){const s=t.distanceToPoint(this.origin);if(0===s)return!0;return t.normal.dot(this.direction)*s<0}intersectBox(t,s){let i,e,r,h,n,a;const o=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,u=this.origin;return o>=0?(i=(t.min.x-u.x)*o,e=(t.max.x-u.x)*o):(i=(t.max.x-u.x)*o,e=(t.min.x-u.x)*o),c>=0?(r=(t.min.y-u.y)*c,h=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,h=(t.min.y-u.y)*c),i>h||r>e?null:((r>i||i!=i)&&(i=r),(h<e||e!=e)&&(e=h),l>=0?(n=(t.min.z-u.z)*l,a=(t.max.z-u.z)*l):(n=(t.max.z-u.z)*l,a=(t.min.z-u.z)*l),i>a||n>e?null:((n>i||i!=i)&&(i=n),(a<e||e!=e)&&(e=a),e<0?null:this.at(i>=0?i:e,s)))}intersectsBox(t){return null!==this.intersectBox(t,r)}intersectTriangle(t,s,i,e,r){o.subVectors(s,t),c.subVectors(i,t),l.crossVectors(o,c);let h,n=this.direction.dot(l);if(n>0){if(e)return null;h=1}else{if(!(n<0))return null;h=-1,n=-n}a.subVectors(this.origin,t);const u=h*this.direction.dot(c.crossVectors(a,c));if(u<0)return null;const m=h*this.direction.dot(o.cross(a));if(m<0)return null;if(u+m>n)return null;const y=-h*a.dot(l);return y<0?null:this.at(y/n,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}},4699:(t,s,i)=>{i.d(s,{a:()=>c});var e=i(1898),r=i(6881);const h=new e.Z,n=new r.P,a=new r.P,o=new r.P;class c{constructor(t=new r.P,s=-1){this.center=t,this.radius=s}set(t,s){return this.center.copy(t),this.radius=s,this}setFromPoints(t,s){const i=this.center;void 0!==s?i.copy(s):h.setFromPoints(t).getCenter(i);let e=0;for(let s=0,r=t.length;s<r;s++)e=Math.max(e,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(e),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const s=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=s*s}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,s){const i=this.center.distanceToSquared(t);return s.copy(t),i>this.radius*this.radius&&(s.sub(this.center).normalize(),s.multiplyScalar(this.radius).add(this.center)),s}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){o.subVectors(t,this.center);const s=o.lengthSq();if(s>this.radius*this.radius){const t=Math.sqrt(s),i=.5*(t-this.radius);this.center.add(o.multiplyScalar(i/t)),this.radius+=i}return this}union(t){return a.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(n.copy(t.center).add(a)),this.expandByPoint(n.copy(t.center).sub(a)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}},6214:(t,s,i)=>{i.d(s,{$:()=>r});var e=i(2043);class r{constructor(t=1,s=0,i=0){return this.radius=t,this.phi=s,this.theta=i,this}set(t,s,i){return this.radius=t,this.phi=s,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,s,i){return this.radius=Math.sqrt(t*t+s*s+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(e.uZ(s/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}},8121:(t,s,i)=>{i.d(s,{C:()=>x});var e=i(6881);const r=new e.P,h=new e.P,n=new e.P,a=new e.P,o=new e.P,c=new e.P,l=new e.P,u=new e.P,m=new e.P,y=new e.P;class x{constructor(t=new e.P,s=new e.P,i=new e.P){this.a=t,this.b=s,this.c=i}static getNormal(t,s,i,e){e.subVectors(i,s),r.subVectors(t,s),e.cross(r);const h=e.lengthSq();return h>0?e.multiplyScalar(1/Math.sqrt(h)):e.set(0,0,0)}static getBarycoord(t,s,i,e,a){r.subVectors(e,s),h.subVectors(i,s),n.subVectors(t,s);const o=r.dot(r),c=r.dot(h),l=r.dot(n),u=h.dot(h),m=h.dot(n),y=o*u-c*c;if(0===y)return a.set(-2,-1,-1);const x=1/y,d=(u*l-c*m)*x,p=(o*m-c*l)*x;return a.set(1-d-p,p,d)}static containsPoint(t,s,i,e){return this.getBarycoord(t,s,i,e,a),a.x>=0&&a.y>=0&&a.x+a.y<=1}static getUV(t,s,i,e,r,h,n,o){return this.getBarycoord(t,s,i,e,a),o.set(0,0),o.addScaledVector(r,a.x),o.addScaledVector(h,a.y),o.addScaledVector(n,a.z),o}static isFrontFacing(t,s,i,e){return r.subVectors(i,s),h.subVectors(t,s),r.cross(h).dot(e)<0}set(t,s,i){return this.a.copy(t),this.b.copy(s),this.c.copy(i),this}setFromPointsAndIndices(t,s,i,e){return this.a.copy(t[s]),this.b.copy(t[i]),this.c.copy(t[e]),this}setFromAttributeAndIndices(t,s,i,e){return this.a.fromBufferAttribute(t,s),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return r.subVectors(this.c,this.b),h.subVectors(this.a,this.b),.5*r.cross(h).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return x.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,s){return x.getBarycoord(t,this.a,this.b,this.c,s)}getUV(t,s,i,e,r){return x.getUV(t,this.a,this.b,this.c,s,i,e,r)}containsPoint(t){return x.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return x.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,s){const i=this.a,e=this.b,r=this.c;let h,n;o.subVectors(e,i),c.subVectors(r,i),u.subVectors(t,i);const a=o.dot(u),x=c.dot(u);if(a<=0&&x<=0)return s.copy(i);m.subVectors(t,e);const d=o.dot(m),p=c.dot(m);if(d>=0&&p<=d)return s.copy(e);const M=a*p-d*x;if(M<=0&&a>=0&&d<=0)return h=a/(a-d),s.copy(i).addScaledVector(o,h);y.subVectors(t,r);const g=o.dot(y),z=c.dot(y);if(z>=0&&g<=z)return s.copy(r);const _=g*x-a*z;if(_<=0&&x>=0&&z<=0)return n=x/(x-z),s.copy(i).addScaledVector(c,n);const w=d*z-g*p;if(w<=0&&p-d>=0&&g-z>=0)return l.subVectors(r,e),n=(p-d)/(p-d+(g-z)),s.copy(e).addScaledVector(l,n);const b=1/(w+_+M);return h=_*b,n=M*b,s.copy(i).addScaledVector(o,h).addScaledVector(c,n)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}},1138:(t,s,i)=>{i.d(s,{F:()=>e});class e{constructor(t=0,s=0){this.x=t,this.y=s}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,s){return this.x=t,this.y=s,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,s){switch(t){case 0:this.x=s;break;case 1:this.y=s;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,s){return void 0!==s?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,s)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,s){return this.x=t.x+s.x,this.y=t.y+s.y,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this}sub(t,s){return void 0!==s?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,s)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,s){return this.x=t.x-s.x,this.y=t.y-s.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const s=this.x,i=this.y,e=t.elements;return this.x=e[0]*s+e[3]*i+e[6],this.y=e[1]*s+e[4]*i+e[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,s){return this.x=Math.max(t.x,Math.min(s.x,this.x)),this.y=Math.max(t.y,Math.min(s.y,this.y)),this}clampScalar(t,s){return this.x=Math.max(t,Math.min(s,this.x)),this.y=Math.max(t,Math.min(s,this.y)),this}clampLength(t,s){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(s,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const s=this.x-t.x,i=this.y-t.y;return s*s+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,s){return this.x+=(t.x-this.x)*s,this.y+=(t.y-this.y)*s,this}lerpVectors(t,s,i){return this.x=t.x+(s.x-t.x)*i,this.y=t.y+(s.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,s=0){return this.x=t[s],this.y=t[s+1],this}toArray(t=[],s=0){return t[s]=this.x,t[s+1]=this.y,t}fromBufferAttribute(t,s,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(s),this.y=t.getY(s),this}rotateAround(t,s){const i=Math.cos(s),e=Math.sin(s),r=this.x-t.x,h=this.y-t.y;return this.x=r*i-h*e+t.x,this.y=r*e+h*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}e.prototype.isVector2=!0},6881:(t,s,i)=>{i.d(s,{P:()=>h});var e=i(2043),r=i(7092);class h{constructor(t=0,s=0,i=0){this.x=t,this.y=s,this.z=i}set(t,s,i){return void 0===i&&(i=this.z),this.x=t,this.y=s,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,s){switch(t){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,s){return void 0!==s?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,s)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,s){return this.x=t.x+s.x,this.y=t.y+s.y,this.z=t.z+s.z,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this}sub(t,s){return void 0!==s?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,s)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,s){return this.x=t.x-s.x,this.y=t.y-s.y,this.z=t.z-s.z,this}multiply(t,s){return void 0!==s?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,s)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,s){return this.x=t.x*s.x,this.y=t.y*s.y,this.z=t.z*s.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(a.setFromEuler(t))}applyAxisAngle(t,s){return this.applyQuaternion(a.setFromAxisAngle(t,s))}applyMatrix3(t){const s=this.x,i=this.y,e=this.z,r=t.elements;return this.x=r[0]*s+r[3]*i+r[6]*e,this.y=r[1]*s+r[4]*i+r[7]*e,this.z=r[2]*s+r[5]*i+r[8]*e,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const s=this.x,i=this.y,e=this.z,r=t.elements,h=1/(r[3]*s+r[7]*i+r[11]*e+r[15]);return this.x=(r[0]*s+r[4]*i+r[8]*e+r[12])*h,this.y=(r[1]*s+r[5]*i+r[9]*e+r[13])*h,this.z=(r[2]*s+r[6]*i+r[10]*e+r[14])*h,this}applyQuaternion(t){const s=this.x,i=this.y,e=this.z,r=t.x,h=t.y,n=t.z,a=t.w,o=a*s+h*e-n*i,c=a*i+n*s-r*e,l=a*e+r*i-h*s,u=-r*s-h*i-n*e;return this.x=o*a+u*-r+c*-n-l*-h,this.y=c*a+u*-h+l*-r-o*-n,this.z=l*a+u*-n+o*-h-c*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const s=this.x,i=this.y,e=this.z,r=t.elements;return this.x=r[0]*s+r[4]*i+r[8]*e,this.y=r[1]*s+r[5]*i+r[9]*e,this.z=r[2]*s+r[6]*i+r[10]*e,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,s){return this.x=Math.max(t.x,Math.min(s.x,this.x)),this.y=Math.max(t.y,Math.min(s.y,this.y)),this.z=Math.max(t.z,Math.min(s.z,this.z)),this}clampScalar(t,s){return this.x=Math.max(t,Math.min(s,this.x)),this.y=Math.max(t,Math.min(s,this.y)),this.z=Math.max(t,Math.min(s,this.z)),this}clampLength(t,s){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(s,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,s){return this.x+=(t.x-this.x)*s,this.y+=(t.y-this.y)*s,this.z+=(t.z-this.z)*s,this}lerpVectors(t,s,i){return this.x=t.x+(s.x-t.x)*i,this.y=t.y+(s.y-t.y)*i,this.z=t.z+(s.z-t.z)*i,this}cross(t,s){return void 0!==s?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,s)):this.crossVectors(this,t)}crossVectors(t,s){const i=t.x,e=t.y,r=t.z,h=s.x,n=s.y,a=s.z;return this.x=e*a-r*n,this.y=r*h-i*a,this.z=i*n-e*h,this}projectOnVector(t){const s=t.lengthSq();if(0===s)return this.set(0,0,0);const i=t.dot(this)/s;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return n.copy(this).projectOnVector(t),this.sub(n)}reflect(t){return this.sub(n.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const s=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===s)return Math.PI/2;const i=this.dot(t)/s;return Math.acos(e.uZ(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const s=this.x-t.x,i=this.y-t.y,e=this.z-t.z;return s*s+i*i+e*e}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,s,i){const e=Math.sin(s)*t;return this.x=e*Math.sin(i),this.y=Math.cos(s)*t,this.z=e*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,s,i){return this.x=t*Math.sin(s),this.y=i,this.z=t*Math.cos(s),this}setFromMatrixPosition(t){const s=t.elements;return this.x=s[12],this.y=s[13],this.z=s[14],this}setFromMatrixScale(t){const s=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),e=this.setFromMatrixColumn(t,2).length();return this.x=s,this.y=i,this.z=e,this}setFromMatrixColumn(t,s){return this.fromArray(t.elements,4*s)}setFromMatrix3Column(t,s){return this.fromArray(t.elements,3*s)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,s=0){return this.x=t[s],this.y=t[s+1],this.z=t[s+2],this}toArray(t=[],s=0){return t[s]=this.x,t[s+1]=this.y,t[s+2]=this.z,t}fromBufferAttribute(t,s,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(s),this.y=t.getY(s),this.z=t.getZ(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),s=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(s),this.y=i*Math.sin(s),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}h.prototype.isVector3=!0;const n=new h,a=new r._},223:(t,s,i)=>{i.d(s,{L:()=>e});class e{constructor(t=0,s=0,i=0,e=1){this.x=t,this.y=s,this.z=i,this.w=e}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,s,i,e){return this.x=t,this.y=s,this.z=i,this.w=e,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,s){switch(t){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;case 3:this.w=s;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,s){return void 0!==s?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,s)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,s){return this.x=t.x+s.x,this.y=t.y+s.y,this.z=t.z+s.z,this.w=t.w+s.w,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this.w+=t.w*s,this}sub(t,s){return void 0!==s?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,s)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,s){return this.x=t.x-s.x,this.y=t.y-s.y,this.z=t.z-s.z,this.w=t.w-s.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const s=this.x,i=this.y,e=this.z,r=this.w,h=t.elements;return this.x=h[0]*s+h[4]*i+h[8]*e+h[12]*r,this.y=h[1]*s+h[5]*i+h[9]*e+h[13]*r,this.z=h[2]*s+h[6]*i+h[10]*e+h[14]*r,this.w=h[3]*s+h[7]*i+h[11]*e+h[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const s=Math.sqrt(1-t.w*t.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/s,this.y=t.y/s,this.z=t.z/s),this}setAxisAngleFromRotationMatrix(t){let s,i,e,r;const h=.01,n=.1,a=t.elements,o=a[0],c=a[4],l=a[8],u=a[1],m=a[5],y=a[9],x=a[2],d=a[6],p=a[10];if(Math.abs(c-u)<h&&Math.abs(l-x)<h&&Math.abs(y-d)<h){if(Math.abs(c+u)<n&&Math.abs(l+x)<n&&Math.abs(y+d)<n&&Math.abs(o+m+p-3)<n)return this.set(1,0,0,0),this;s=Math.PI;const t=(o+1)/2,a=(m+1)/2,M=(p+1)/2,g=(c+u)/4,z=(l+x)/4,_=(y+d)/4;return t>a&&t>M?t<h?(i=0,e=.707106781,r=.707106781):(i=Math.sqrt(t),e=g/i,r=z/i):a>M?a<h?(i=.707106781,e=0,r=.707106781):(e=Math.sqrt(a),i=g/e,r=_/e):M<h?(i=.707106781,e=.707106781,r=0):(r=Math.sqrt(M),i=z/r,e=_/r),this.set(i,e,r,s),this}let M=Math.sqrt((d-y)*(d-y)+(l-x)*(l-x)+(u-c)*(u-c));return Math.abs(M)<.001&&(M=1),this.x=(d-y)/M,this.y=(l-x)/M,this.z=(u-c)/M,this.w=Math.acos((o+m+p-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,s){return this.x=Math.max(t.x,Math.min(s.x,this.x)),this.y=Math.max(t.y,Math.min(s.y,this.y)),this.z=Math.max(t.z,Math.min(s.z,this.z)),this.w=Math.max(t.w,Math.min(s.w,this.w)),this}clampScalar(t,s){return this.x=Math.max(t,Math.min(s,this.x)),this.y=Math.max(t,Math.min(s,this.y)),this.z=Math.max(t,Math.min(s,this.z)),this.w=Math.max(t,Math.min(s,this.w)),this}clampLength(t,s){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(s,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,s){return this.x+=(t.x-this.x)*s,this.y+=(t.y-this.y)*s,this.z+=(t.z-this.z)*s,this.w+=(t.w-this.w)*s,this}lerpVectors(t,s,i){return this.x=t.x+(s.x-t.x)*i,this.y=t.y+(s.y-t.y)*i,this.z=t.z+(s.z-t.z)*i,this.w=t.w+(s.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,s=0){return this.x=t[s],this.y=t[s+1],this.z=t[s+2],this.w=t[s+3],this}toArray(t=[],s=0){return t[s]=this.x,t[s+1]=this.y,t[s+2]=this.z,t[s+3]=this.w,t}fromBufferAttribute(t,s,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(s),this.y=t.getY(s),this.z=t.getZ(s),this.w=t.getW(s),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}e.prototype.isVector4=!0},8853:(t,s,i)=>{i.d(s,{d:()=>h});var e=i(1661),r=i(8515);class h extends r._{constructor(t,s,i,r){super(t,s,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:e.Pnf,endingEnd:e.Pnf}}intervalChanged_(t,s,i){const r=this.parameterPositions;let h=t-2,n=t+1,a=r[h],o=r[n];if(void 0===a)switch(this.getSettings_().endingStart){case e._lf:h=t,a=2*s-i;break;case e._sL:h=r.length-2,a=s+r[h]-r[h+1];break;default:h=t,a=i}if(void 0===o)switch(this.getSettings_().endingEnd){case e._lf:n=t,o=2*i-s;break;case e._sL:n=1,o=i+r[1]-r[0];break;default:n=t-1,o=s}const c=.5*(i-s),l=this.valueSize;this._weightPrev=c/(s-a),this._weightNext=c/(o-i),this._offsetPrev=h*l,this._offsetNext=n*l}interpolate_(t,s,i,e){const r=this.resultBuffer,h=this.sampleValues,n=this.valueSize,a=t*n,o=a-n,c=this._offsetPrev,l=this._offsetNext,u=this._weightPrev,m=this._weightNext,y=(i-s)/(e-s),x=y*y,d=x*y,p=-u*d+2*u*x-u*y,M=(1+u)*d+(-1.5-2*u)*x+(-.5+u)*y+1,g=(-1-m)*d+(1.5+m)*x+.5*y,z=m*d-m*x;for(let t=0;t!==n;++t)r[t]=p*h[c+t]+M*h[o+t]+g*h[a+t]+z*h[l+t];return r}}},1042:(t,s,i)=>{i.d(s,{c:()=>r});var e=i(8515);class r extends e._{constructor(t,s,i,e){super(t,s,i,e)}interpolate_(t){return this.copySampleValue_(t-1)}}},2547:(t,s,i)=>{i.d(s,{l:()=>r});var e=i(8515);class r extends e._{constructor(t,s,i,e){super(t,s,i,e)}interpolate_(t,s,i,e){const r=this.resultBuffer,h=this.sampleValues,n=this.valueSize,a=t*n,o=a-n,c=(i-s)/(e-s),l=1-c;for(let t=0;t!==n;++t)r[t]=h[o+t]*l+h[a+t]*c;return r}}},1950:(t,s,i)=>{i.d(s,{z:()=>h});var e=i(8515),r=i(7092);class h extends e._{constructor(t,s,i,e){super(t,s,i,e)}interpolate_(t,s,i,e){const h=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=(i-s)/(e-s);let c=t*a;for(let t=c+a;c!==t;c+=4)r._.slerpFlat(h,0,n,c-a,n,c,o);return h}}}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[874],{7858:(e,t,r)=>{r.d(t,{N:()=>s});var n=r(6469);class s extends n.T{constructor(){super(),this.type="Bone"}}s.prototype.isBone=!0},2010:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(6469);class s extends n.T{constructor(){super(),this.type="Group"}}s.prototype.isGroup=!0},1301:(e,t,r)=>{r.d(t,{x:()=>y});var n=r(4699),s=r(7540),o=r(9203),i=r(6469),a=r(6881),c=r(5785),u=r(9046),h=r(140);const l=new a.P,p=new a.P,f=new o.y,d=new s.z,m=new n.a;class y extends i.T{constructor(e=new u.u,t=new c.n){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[0];for(let e=1,n=t.count;e<n;e++)l.fromBufferAttribute(t,e-1),p.fromBufferAttribute(t,e),r[e]=r[e-1],r[e]+=l.distanceTo(p);e.setAttribute("lineDistance",new h.a$(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,n=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),m.copy(r.boundingSphere),m.applyMatrix4(n),m.radius+=s,!1===e.ray.intersectsSphere(m))return;f.copy(n).invert(),d.copy(e.ray).applyMatrix4(f);const i=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=i*i,u=new a.P,h=new a.P,l=new a.P,p=new a.P,y=this.isLineSegments?2:1;if(r.isBufferGeometry){const n=r.index,s=r.attributes.position;if(null!==n){for(let r=Math.max(0,o.start),i=Math.min(n.count,o.start+o.count)-1;r<i;r+=y){const o=n.getX(r),i=n.getX(r+1);u.fromBufferAttribute(s,o),h.fromBufferAttribute(s,i);if(d.distanceSqToSegment(u,h,p,l)>c)continue;p.applyMatrix4(this.matrixWorld);const a=e.ray.origin.distanceTo(p);a<e.near||a>e.far||t.push({distance:a,point:l.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}else{for(let r=Math.max(0,o.start),n=Math.min(s.count,o.start+o.count)-1;r<n;r+=y){u.fromBufferAttribute(s,r),h.fromBufferAttribute(s,r+1);if(d.distanceSqToSegment(u,h,p,l)>c)continue;p.applyMatrix4(this.matrixWorld);const n=e.ray.origin.distanceTo(p);n<e.near||n>e.far||t.push({distance:n,point:l.clone().applyMatrix4(this.matrixWorld),index:r,face:null,faceIndex:null,object:this})}}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const e=t[r[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,r=e.length;t<r;t++){const r=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}y.prototype.isLine=!0},2232:(e,t,r)=>{r.d(t,{b:()=>s});var n=r(1301);class s extends n.x{constructor(e,t){super(e,t),this.type="LineLoop"}}s.prototype.isLineLoop=!0},5920:(e,t,r)=>{r.d(t,{e:()=>c});var n=r(1301),s=r(6881),o=r(140);const i=new s.P,a=new s.P;class c extends n.x{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[];for(let e=0,n=t.count;e<n;e+=2)i.fromBufferAttribute(t,e),a.fromBufferAttribute(t,e+1),r[e]=0===e?0:r[e-1],r[e+1]=r[e]+i.distanceTo(a);e.setAttribute("lineDistance",new o.a$(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}c.prototype.isLineSegments=!0},6454:(e,t,r)=>{r.d(t,{K:()=>G});var n=r(6881),s=r(1138),o=r(4699),i=r(7540),a=r(9203),c=r(6469),u=r(8121),h=r(1661),l=r(6173),p=r(9046);const f=new a.y,d=new i.z,m=new o.a,y=new n.P,b=new n.P,g=new n.P,x=new n.P,T=new n.P,M=new n.P,w=new n.P,v=new n.P,E=new n.P,B=new s.F,I=new s.F,S=new s.F,A=new n.P,R=new n.P;class G extends c.T{constructor(e=new p.u,t=new l.v){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const e=t[r[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,r=e.length;t<r;t++){const r=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,n=this.material,s=this.matrixWorld;if(void 0===n)return;if(null===r.boundingSphere&&r.computeBoundingSphere(),m.copy(r.boundingSphere),m.applyMatrix4(s),!1===e.ray.intersectsSphere(m))return;if(f.copy(s).invert(),d.copy(e.ray).applyMatrix4(f),null!==r.boundingBox&&!1===d.intersectsBox(r.boundingBox))return;let o;if(r.isBufferGeometry){const s=r.index,i=r.attributes.position,a=r.morphAttributes.position,c=r.morphTargetsRelative,u=r.attributes.uv,h=r.attributes.uv2,l=r.groups,p=r.drawRange;if(null!==s)if(Array.isArray(n))for(let r=0,f=l.length;r<f;r++){const f=l[r],m=n[f.materialIndex];for(let r=Math.max(f.start,p.start),n=Math.min(s.count,Math.min(f.start+f.count,p.start+p.count));r<n;r+=3){const n=s.getX(r),l=s.getX(r+1),p=s.getX(r+2);o=P(this,m,e,d,i,a,c,u,h,n,l,p),o&&(o.faceIndex=Math.floor(r/3),o.face.materialIndex=f.materialIndex,t.push(o))}}else{for(let r=Math.max(0,p.start),l=Math.min(s.count,p.start+p.count);r<l;r+=3){const l=s.getX(r),p=s.getX(r+1),f=s.getX(r+2);o=P(this,n,e,d,i,a,c,u,h,l,p,f),o&&(o.faceIndex=Math.floor(r/3),t.push(o))}}else if(void 0!==i)if(Array.isArray(n))for(let r=0,s=l.length;r<s;r++){const s=l[r],f=n[s.materialIndex];for(let r=Math.max(s.start,p.start),n=Math.min(i.count,Math.min(s.start+s.count,p.start+p.count));r<n;r+=3){o=P(this,f,e,d,i,a,c,u,h,r,r+1,r+2),o&&(o.faceIndex=Math.floor(r/3),o.face.materialIndex=s.materialIndex,t.push(o))}}else{for(let r=Math.max(0,p.start),s=Math.min(i.count,p.start+p.count);r<s;r+=3){o=P(this,n,e,d,i,a,c,u,h,r,r+1,r+2),o&&(o.faceIndex=Math.floor(r/3),t.push(o))}}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function P(e,t,r,o,i,a,c,l,p,f,d,m){y.fromBufferAttribute(i,f),b.fromBufferAttribute(i,d),g.fromBufferAttribute(i,m);const G=e.morphTargetInfluences;if(a&&G){w.set(0,0,0),v.set(0,0,0),E.set(0,0,0);for(let e=0,t=a.length;e<t;e++){const t=G[e],r=a[e];0!==t&&(x.fromBufferAttribute(r,f),T.fromBufferAttribute(r,d),M.fromBufferAttribute(r,m),c?(w.addScaledVector(x,t),v.addScaledVector(T,t),E.addScaledVector(M,t)):(w.addScaledVector(x.sub(y),t),v.addScaledVector(T.sub(b),t),E.addScaledVector(M.sub(g),t)))}y.add(w),b.add(v),g.add(E)}e.isSkinnedMesh&&(e.boneTransform(f,y),e.boneTransform(d,b),e.boneTransform(m,g));const P=function(e,t,r,n,s,o,i,a){let c;if(c=t.side===h._Li?n.intersectTriangle(i,o,s,!0,a):n.intersectTriangle(s,o,i,t.side!==h.ehD,a),null===c)return null;R.copy(a),R.applyMatrix4(e.matrixWorld);const u=r.ray.origin.distanceTo(R);return u<r.near||u>r.far?null:{distance:u,point:R.clone(),object:e}}(e,t,r,o,y,b,g,A);if(P){l&&(B.fromBufferAttribute(l,f),I.fromBufferAttribute(l,d),S.fromBufferAttribute(l,m),P.uv=u.C.getUV(A,y,b,g,B,I,S,new s.F)),p&&(B.fromBufferAttribute(p,f),I.fromBufferAttribute(p,d),S.fromBufferAttribute(p,m),P.uv2=u.C.getUV(A,y,b,g,B,I,S,new s.F));const e={a:f,b:d,c:m,normal:new n.P,materialIndex:0};u.C.getNormal(y,b,g,e.normal),P.face=e}return P}G.prototype.isMesh=!0},2306:(e,t,r)=>{r.d(t,{w:()=>d});var n=r(4699),s=r(7540),o=r(9203),i=r(6469),a=r(6881),c=r(6679),u=r(9046);const h=new o.y,l=new s.z,p=new n.a,f=new a.P;class d extends i.T{constructor(e=new u.u,t=new c.U){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,n=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),p.copy(r.boundingSphere),p.applyMatrix4(n),p.radius+=s,!1===e.ray.intersectsSphere(p))return;h.copy(n).invert(),l.copy(e.ray).applyMatrix4(h);const i=s/((this.scale.x+this.scale.y+this.scale.z)/3),a=i*i;if(r.isBufferGeometry){const s=r.index,i=r.attributes.position;if(null!==s){for(let r=Math.max(0,o.start),c=Math.min(s.count,o.start+o.count);r<c;r++){const o=s.getX(r);f.fromBufferAttribute(i,o),m(f,o,a,n,e,t,this)}}else{for(let r=Math.max(0,o.start),s=Math.min(i.count,o.start+o.count);r<s;r++)f.fromBufferAttribute(i,r),m(f,r,a,n,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const e=t[r[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,r=e.length;t<r;t++){const r=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function m(e,t,r,n,s,o,i){const c=l.distanceSqToPoint(e);if(c<r){const r=new a.P;l.closestPointToPoint(e,r),r.applyMatrix4(n);const u=s.ray.origin.distanceTo(r);if(u<s.near||u>s.far)return;o.push({distance:u,distanceToRay:Math.sqrt(c),point:r,index:t,face:null,object:i})}}d.prototype.isPoints=!0},2170:(e,t,r)=>{r.d(t,{O:()=>h});var n=r(1661),s=r(7858),o=r(9203),i=r(3993),a=r(2043);const c=new o.y,u=new o.y;class h{constructor(e=[],t=[]){this.uuid=a.DO(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new o.y)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new o.y;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,n=this.boneTexture;for(let n=0,s=e.length;n<s;n++){const s=e[n]?e[n].matrixWorld:u;c.multiplyMatrices(s,t[n]),c.toArray(r,16*n)}null!==n&&(n.needsUpdate=!0)}clone(){return new h(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=a.h3(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new i.I(t,e,e,n.wk1,n.VzW);return this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,n=e.bones.length;r<n;r++){const n=e.bones[r];let i=t[n];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),i=new s.N),this.bones.push(i),this.boneInverses.push((new o.y).fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let n=0,s=t.length;n<s;n++){const s=t[n];e.bones.push(s.uuid);const o=r[n];e.boneInverses.push(o.toArray())}return e}}},2127:(e,t,r)=>{r.d(t,{T:()=>p});var n=r(6454),s=r(9203),o=r(6881),i=r(223);const a=new o.P,c=new i.L,u=new i.L,h=new o.P,l=new s.y;class p extends n.K{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new s.y,this.bindMatrixInverse=new s.y}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new i.L,t=this.geometry.attributes.skinWeight;for(let r=0,n=t.count;r<n;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);const n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,n=this.geometry;c.fromBufferAttribute(n.attributes.skinIndex,e),u.fromBufferAttribute(n.attributes.skinWeight,e),a.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const n=u.getComponent(e);if(0!==n){const s=c.getComponent(e);l.multiplyMatrices(r.bones[s].matrixWorld,r.boneInverses[s]),t.addScaledVector(h.copy(a).applyMatrix4(l),n)}}return t.applyMatrix4(this.bindMatrixInverse)}}p.prototype.isSkinnedMesh=!0}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[277],{5567:(e,n,i)=>{i.d(n,{W:()=>a});const a={alphamap_fragment:"#ifdef USE_ALPHAMAP\ndiffuseColor.a*=texture2D(alphaMap,vUv).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\nuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\nif(diffuseColor.a<alphaTest)discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\nuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\nfloat ambientOcclusion=(texture2D(aoMap,vUv2).r-1.0)*aoMapIntensity+1.0;reflectedLight.indirectDiffuse*=ambientOcclusion;\n#if defined(USE_ENVMAP)&&defined(STANDARD)\nfloat dotNV=saturate(dot(geometry.normal,geometry.viewDir));reflectedLight.indirectSpecular*=computeSpecularOcclusion(dotNV,ambientOcclusion,material.roughness);\n#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\nuniform sampler2D aoMap;uniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed=vec3(position);",beginnormal_vertex:"vec3 objectNormal=vec3(normal);\n#ifdef USE_TANGENT\nvec3 objectTangent=vec3(tangent.xyz);\n#endif",bsdfs:"vec3 BRDF_Lambert(const in vec3 diffuseColor){return RECIPROCAL_PI*diffuseColor;}vec3 F_Schlick(const in vec3 f0,const in float f90,const in float dotVH){float fresnel=exp2((-5.55473*dotVH-6.98316)*dotVH);return f0*(1.0-fresnel)+(f90*fresnel);}float V_GGX_SmithCorrelated(const in float alpha,const in float dotNL,const in float dotNV){float a2=pow2(alpha);float gv=dotNL*sqrt(a2+(1.0-a2)*pow2(dotNV));float gl=dotNV*sqrt(a2+(1.0-a2)*pow2(dotNL));return 0.5/max(gv+gl,EPSILON);}float D_GGX(const in float alpha,const in float dotNH){float a2=pow2(alpha);float denom=pow2(dotNH)*(a2-1.0)+1.0;return RECIPROCAL_PI*a2/pow2(denom);}vec3 BRDF_GGX(const in vec3 lightDir,const in vec3 viewDir,const in vec3 normal,const in vec3 f0,const in float f90,const in float roughness){float alpha=pow2(roughness);vec3 halfDir=normalize(lightDir+viewDir);float dotNL=saturate(dot(normal,lightDir));float dotNV=saturate(dot(normal,viewDir));float dotNH=saturate(dot(normal,halfDir));float dotVH=saturate(dot(viewDir,halfDir));vec3 F=F_Schlick(f0,f90,dotVH);float V=V_GGX_SmithCorrelated(alpha,dotNL,dotNV);float D=D_GGX(alpha,dotNH);return F*(V*D);}vec2 LTC_Uv(const in vec3 N,const in vec3 V,const in float roughness){const float LUT_SIZE=64.0;const float LUT_SCALE=(LUT_SIZE-1.0)/LUT_SIZE;const float LUT_BIAS=0.5/LUT_SIZE;float dotNV=saturate(dot(N,V));vec2 uv=vec2(roughness,sqrt(1.0-dotNV));uv=uv*LUT_SCALE+LUT_BIAS;return uv;}float LTC_ClippedSphereFormFactor(const in vec3 f){float l=length(f);return max((l*l+f.z)/(l+1.0),0.0);}vec3 LTC_EdgeVectorFormFactor(const in vec3 v1,const in vec3 v2){float x=dot(v1,v2);float y=abs(x);float a=0.8543985+(0.4965155+0.0145206*y)*y;float b=3.4175940+(4.1616724+y)*y;float v=a/b;float theta_sintheta=(x>0.0)?v:0.5*inversesqrt(max(1.0-x*x,1e-7))-v;return cross(v1,v2)*theta_sintheta;}vec3 LTC_Evaluate(const in vec3 N,const in vec3 V,const in vec3 P,const in mat3 mInv,const in vec3 rectCoords[4]){vec3 v1=rectCoords[1]-rectCoords[0];vec3 v2=rectCoords[3]-rectCoords[0];vec3 lightNormal=cross(v1,v2);if(dot(lightNormal,P-rectCoords[0])<0.0)return vec3(0.0);vec3 T1,T2;T1=normalize(V-N*dot(V,N));T2=-cross(N,T1);mat3 mat=mInv*transposeMat3(mat3(T1,T2,N));vec3 coords[4];coords[0]=mat*(rectCoords[0]-P);coords[1]=mat*(rectCoords[1]-P);coords[2]=mat*(rectCoords[2]-P);coords[3]=mat*(rectCoords[3]-P);coords[0]=normalize(coords[0]);coords[1]=normalize(coords[1]);coords[2]=normalize(coords[2]);coords[3]=normalize(coords[3]);vec3 vectorFormFactor=vec3(0.0);vectorFormFactor+=LTC_EdgeVectorFormFactor(coords[0],coords[1]);vectorFormFactor+=LTC_EdgeVectorFormFactor(coords[1],coords[2]);vectorFormFactor+=LTC_EdgeVectorFormFactor(coords[2],coords[3]);vectorFormFactor+=LTC_EdgeVectorFormFactor(coords[3],coords[0]);float result=LTC_ClippedSphereFormFactor(vectorFormFactor);return vec3(result);}float G_BlinnPhong_Implicit(){return 0.25;}float D_BlinnPhong(const in float shininess,const in float dotNH){return RECIPROCAL_PI*(shininess*0.5+1.0)*pow(dotNH,shininess);}vec3 BRDF_BlinnPhong(const in vec3 lightDir,const in vec3 viewDir,const in vec3 normal,const in vec3 specularColor,const in float shininess){vec3 halfDir=normalize(lightDir+viewDir);float dotNH=saturate(dot(normal,halfDir));float dotVH=saturate(dot(viewDir,halfDir));vec3 F=F_Schlick(specularColor,1.0,dotVH);float G=G_BlinnPhong_Implicit();float D=D_BlinnPhong(shininess,dotNH);return F*(G*D);}\n#if defined(USE_SHEEN)\nfloat D_Charlie(float roughness,float dotNH){float alpha=pow2(roughness);float invAlpha=1.0/alpha;float cos2h=dotNH*dotNH;float sin2h=max(1.0-cos2h,0.0078125);return(2.0+invAlpha)*pow(sin2h,invAlpha*0.5)/(2.0*PI);}float V_Neubelt(float dotNV,float dotNL){return saturate(1.0/(4.0*(dotNL+dotNV-dotNL*dotNV)));}vec3 BRDF_Sheen(const in vec3 lightDir,const in vec3 viewDir,const in vec3 normal,vec3 sheenColor,const in float sheenRoughness){vec3 halfDir=normalize(lightDir+viewDir);float dotNL=saturate(dot(normal,lightDir));float dotNV=saturate(dot(normal,viewDir));float dotNH=saturate(dot(normal,halfDir));float D=D_Charlie(sheenRoughness,dotNH);float V=V_Neubelt(dotNV,dotNL);return sheenColor*(D*V);}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;uniform float bumpScale;vec2 dHdxy_fwd(){vec2 dSTdx=dFdx(vUv);vec2 dSTdy=dFdy(vUv);float Hll=bumpScale*texture2D(bumpMap,vUv).x;float dBx=bumpScale*texture2D(bumpMap,vUv+dSTdx).x-Hll;float dBy=bumpScale*texture2D(bumpMap,vUv+dSTdy).x-Hll;return vec2(dBx,dBy);}vec3 perturbNormalArb(vec3 surf_pos,vec3 surf_norm,vec2 dHdxy,float faceDirection){vec3 vSigmaX=vec3(dFdx(surf_pos.x),dFdx(surf_pos.y),dFdx(surf_pos.z));vec3 vSigmaY=vec3(dFdy(surf_pos.x),dFdy(surf_pos.y),dFdy(surf_pos.z));vec3 vN=surf_norm;vec3 R1=cross(vSigmaY,vN);vec3 R2=cross(vN,vSigmaX);float fDet=dot(vSigmaX,R1)*faceDirection;vec3 vGrad=sign(fDet)*(dHdxy.x*R1+dHdxy.y*R2);return normalize(abs(fDet)*surf_norm-vGrad);}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES>0\nvec4 plane;\n#pragma unroll_loop_start\nfor(int i=0;i<UNION_CLIPPING_PLANES;i++){plane=clippingPlanes[i];if(dot(vClipPosition,plane.xyz)>plane.w)discard;}\n#pragma unroll_loop_end\n#if UNION_CLIPPING_PLANES<NUM_CLIPPING_PLANES\nbool clipped=true;\n#pragma unroll_loop_start\nfor(int i=UNION_CLIPPING_PLANES;i<NUM_CLIPPING_PLANES;i++){plane=clippingPlanes[i];clipped=(dot(vClipPosition,plane.xyz)>plane.w)&&clipped;}\n#pragma unroll_loop_end\nif(clipped)discard;\n#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES>0\nvarying vec3 vClipPosition;uniform vec4 clippingPlanes[NUM_CLIPPING_PLANES];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES>0\nvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES>0\nvClipPosition=-mvPosition.xyz;\n#endif",color_fragment:"#if defined(USE_COLOR_ALPHA)\ndiffuseColor*=vColor;\n#elif defined(USE_COLOR)\ndiffuseColor.rgb*=vColor;\n#endif",color_pars_fragment:"#if defined(USE_COLOR_ALPHA)\nvarying vec4 vColor;\n#elif defined(USE_COLOR)\nvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined(USE_COLOR_ALPHA)\nvarying vec4 vColor;\n#elif defined(USE_COLOR)||defined(USE_INSTANCING_COLOR)\nvarying vec3 vColor;\n#endif",color_vertex:"#if defined(USE_COLOR_ALPHA)\nvColor=vec4(1.0);\n#elif defined(USE_COLOR)||defined(USE_INSTANCING_COLOR)\nvColor=vec3(1.0);\n#endif\n#ifdef USE_COLOR\nvColor*=color;\n#endif\n#ifdef USE_INSTANCING_COLOR\nvColor.xyz*=instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a)clamp(a,0.0,1.0)\n#endif\n#define whiteComplement(a)(1.0-saturate(a))\nfloat pow2(const in float x){return x*x;}float pow3(const in float x){return x*x*x;}float pow4(const in float x){float x2=x*x;return x2*x2;}float max3(const in vec3 v){return max(max(v.x,v.y),v.z);}float average(const in vec3 color){return dot(color,vec3(0.3333));}highp float rand(const in vec2 uv){const highp float a=12.9898,b=78.233,c=43758.5453;highp float dt=dot(uv.xy,vec2(a,b)),sn=mod(dt,PI);return fract(sin(sn)*c);}\n#ifdef HIGH_PRECISION\nfloat precisionSafeLength(vec3 v){return length(v);}\n#else\nfloat precisionSafeLength(vec3 v){float maxComponent=max3(abs(v));return length(v/maxComponent)*maxComponent;}\n#endif\nstruct IncidentLight{vec3 color;vec3 direction;bool visible;};struct ReflectedLight{vec3 directDiffuse;vec3 directSpecular;vec3 indirectDiffuse;vec3 indirectSpecular;};struct GeometricContext{vec3 position;vec3 normal;vec3 viewDir;\n#ifdef USE_CLEARCOAT\nvec3 clearcoatNormal;\n#endif\n};vec3 transformDirection(in vec3 dir,in mat4 matrix){return normalize((matrix*vec4(dir,0.0)).xyz);}vec3 inverseTransformDirection(in vec3 dir,in mat4 matrix){return normalize((vec4(dir,0.0)*matrix).xyz);}mat3 transposeMat3(const in mat3 m){mat3 tmp;tmp[0]=vec3(m[0].x,m[1].x,m[2].x);tmp[1]=vec3(m[0].y,m[1].y,m[2].y);tmp[2]=vec3(m[0].z,m[1].z,m[2].z);return tmp;}float linearToRelativeLuminance(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}bool isPerspectiveMatrix(mat4 m){return m[2][3]==-1.0;}vec2 equirectUv(in vec3 dir){float u=atan(dir.z,dir.x)*RECIPROCAL_PI2+0.5;float v=asin(clamp(dir.y,-1.0,1.0))*RECIPROCAL_PI+0.5;return vec2(u,v);}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction){vec3 absDirection=abs(direction);float face=-1.0;if(absDirection.x>absDirection.z){if(absDirection.x>absDirection.y)face=direction.x>0.0?0.0:3.0;else face=direction.y>0.0?1.0:4.0;}else{if(absDirection.z>absDirection.y)face=direction.z>0.0?2.0:5.0;else face=direction.y>0.0?1.0:4.0;}return face;}vec2 getUV(vec3 direction,float face){vec2 uv;if(face==0.0){uv=vec2(direction.z,direction.y)/abs(direction.x);}else if(face==1.0){uv=vec2(-direction.x,-direction.z)/abs(direction.y);}else if(face==2.0){uv=vec2(-direction.x,direction.y)/abs(direction.z);}else if(face==3.0){uv=vec2(-direction.z,direction.y)/abs(direction.x);}else if(face==4.0){uv=vec2(-direction.x,direction.z)/abs(direction.y);}else{uv=vec2(direction.x,direction.y)/abs(direction.z);}return 0.5*(uv+1.0);}vec3 bilinearCubeUV(sampler2D envMap,vec3 direction,float mipInt){float face=getFace(direction);float filterInt=max(cubeUV_minMipLevel-mipInt,0.0);mipInt=max(mipInt,cubeUV_minMipLevel);float faceSize=exp2(mipInt);float texelSize=1.0/(3.0*cubeUV_maxTileSize);vec2 uv=getUV(direction,face)*(faceSize-1.0);vec2 f=fract(uv);uv+=0.5-f;if(face>2.0){uv.y+=faceSize;face-=3.0;}uv.x+=face*faceSize;if(mipInt<cubeUV_maxMipLevel){uv.y+=2.0*cubeUV_maxTileSize;}uv.y+=filterInt*2.0*cubeUV_minTileSize;uv.x+=3.0*max(0.0,cubeUV_maxTileSize-2.0*faceSize);uv*=texelSize;vec3 tl=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.x+=texelSize;vec3 tr=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.y+=texelSize;vec3 br=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.x-=texelSize;vec3 bl=envMapTexelToLinear(texture2D(envMap,uv)).rgb;vec3 tm=mix(tl,tr,f.x);vec3 bm=mix(bl,br,f.x);return mix(tm,bm,f.y);}\n#define r0 1.0\n#define v0 0.339\n#define m0-2.0\n#define r1 0.8\n#define v1 0.276\n#define m1-1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness){float mip=0.0;if(roughness>=r1){mip=(r0-roughness)*(m1-m0)/(r0-r1)+m0;}else if(roughness>=r4){mip=(r1-roughness)*(m4-m1)/(r1-r4)+m1;}else if(roughness>=r5){mip=(r4-roughness)*(m5-m4)/(r4-r5)+m4;}else if(roughness>=r6){mip=(r5-roughness)*(m6-m5)/(r5-r6)+m5;}else{mip=-2.0*log2(1.16*roughness);}return mip;}vec4 textureCubeUV(sampler2D envMap,vec3 sampleDir,float roughness){float mip=clamp(roughnessToMip(roughness),m0,cubeUV_maxMipLevel);float mipF=fract(mip);float mipInt=floor(mip);vec3 color0=bilinearCubeUV(envMap,sampleDir,mipInt);if(mipF==0.0){return vec4(color0,1.0);}else{vec3 color1=bilinearCubeUV(envMap,sampleDir,mipInt+1.0);return vec4(mix(color0,color1,mipF),1.0);}}\n#endif",defaultnormal_vertex:"vec3 transformedNormal=objectNormal;\n#ifdef USE_INSTANCING\nmat3 m=mat3(instanceMatrix);transformedNormal/=vec3(dot(m[0],m[0]),dot(m[1],m[1]),dot(m[2],m[2]));transformedNormal=m*transformedNormal;\n#endif\ntransformedNormal=normalMatrix*transformedNormal;\n#ifdef FLIP_SIDED\ntransformedNormal=-transformedNormal;\n#endif\n#ifdef USE_TANGENT\nvec3 transformedTangent=(modelViewMatrix*vec4(objectTangent,0.0)).xyz;\n#ifdef FLIP_SIDED\ntransformedTangent=-transformedTangent;\n#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\nuniform sampler2D displacementMap;uniform float displacementScale;uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\ntransformed+=normalize(objectNormal)*(texture2D(displacementMap,vUv).x*displacementScale+displacementBias);\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\nvec4 emissiveColor=texture2D(emissiveMap,vUv);emissiveColor.rgb=emissiveMapTexelToLinear(emissiveColor).rgb;totalEmissiveRadiance*=emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\nuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor=linearToOutputTexel(gl_FragColor);",encodings_pars_fragment:"vec4 LinearToLinear(in vec4 value){return value;}vec4 GammaToLinear(in vec4 value,in float gammaFactor){return vec4(pow(value.rgb,vec3(gammaFactor)),value.a);}vec4 LinearToGamma(in vec4 value,in float gammaFactor){return vec4(pow(value.rgb,vec3(1.0/gammaFactor)),value.a);}vec4 sRGBToLinear(in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}vec4 LinearTosRGB(in vec4 value){return vec4(mix(pow(value.rgb,vec3(0.41666))*1.055-vec3(0.055),value.rgb*12.92,vec3(lessThanEqual(value.rgb,vec3(0.0031308)))),value.a);}vec4 RGBEToLinear(in vec4 value){return vec4(value.rgb*exp2(value.a*255.0-128.0),1.0);}vec4 LinearToRGBE(in vec4 value){float maxComponent=max(max(value.r,value.g),value.b);float fExp=clamp(ceil(log2(maxComponent)),-128.0,127.0);return vec4(value.rgb/exp2(fExp),(fExp+128.0)/255.0);}vec4 RGBMToLinear(in vec4 value,in float maxRange){return vec4(value.rgb*value.a*maxRange,1.0);}vec4 LinearToRGBM(in vec4 value,in float maxRange){float maxRGB=max(value.r,max(value.g,value.b));float M=clamp(maxRGB/maxRange,0.0,1.0);M=ceil(M*255.0)/255.0;return vec4(value.rgb/(M*maxRange),M);}vec4 RGBDToLinear(in vec4 value,in float maxRange){return vec4(value.rgb*((maxRange/255.0)/value.a),1.0);}vec4 LinearToRGBD(in vec4 value,in float maxRange){float maxRGB=max(value.r,max(value.g,value.b));float D=max(maxRange/maxRGB,1.0);D=clamp(floor(D)/255.0,0.0,1.0);return vec4(value.rgb*(D*(255.0/maxRange)),D);}",envmap_fragment:"#ifdef USE_ENVMAP\n#ifdef ENV_WORLDPOS\nvec3 cameraToFrag;if(isOrthographic){cameraToFrag=normalize(vec3(-viewMatrix[0][2],-viewMatrix[1][2],-viewMatrix[2][2]));}else{cameraToFrag=normalize(vWorldPosition-cameraPosition);}vec3 worldNormal=inverseTransformDirection(normal,viewMatrix);\n#ifdef ENVMAP_MODE_REFLECTION\nvec3 reflectVec=reflect(cameraToFrag,worldNormal);\n#else\nvec3 reflectVec=refract(cameraToFrag,worldNormal,refractionRatio);\n#endif\n#else\nvec3 reflectVec=vReflect;\n#endif\n#ifdef ENVMAP_TYPE_CUBE\nvec4 envColor=textureCube(envMap,vec3(flipEnvMap*reflectVec.x,reflectVec.yz));envColor=envMapTexelToLinear(envColor);\n#elif defined(ENVMAP_TYPE_CUBE_UV)\nvec4 envColor=textureCubeUV(envMap,reflectVec,0.0);\n#else\nvec4 envColor=vec4(0.0);\n#endif\n#ifdef ENVMAP_BLENDING_MULTIPLY\noutgoingLight=mix(outgoingLight,outgoingLight*envColor.xyz,specularStrength*reflectivity);\n#elif defined(ENVMAP_BLENDING_MIX)\noutgoingLight=mix(outgoingLight,envColor.xyz,specularStrength*reflectivity);\n#elif defined(ENVMAP_BLENDING_ADD)\noutgoingLight+=envColor.xyz*specularStrength*reflectivity;\n#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\nuniform float envMapIntensity;uniform float flipEnvMap;\n#ifdef ENVMAP_TYPE_CUBE\nuniform samplerCube envMap;\n#else\nuniform sampler2D envMap;\n#endif\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\nuniform float reflectivity;\n#if defined(USE_BUMPMAP)||defined(USE_NORMALMAP)||defined(PHONG)\n#define ENV_WORLDPOS\n#endif\n#ifdef ENV_WORLDPOS\nvarying vec3 vWorldPosition;uniform float refractionRatio;\n#else\nvarying vec3 vReflect;\n#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n#if defined(USE_BUMPMAP)||defined(USE_NORMALMAP)||defined(PHONG)\n#define ENV_WORLDPOS\n#endif\n#ifdef ENV_WORLDPOS\nvarying vec3 vWorldPosition;\n#else\nvarying vec3 vReflect;uniform float refractionRatio;\n#endif\n#endif",envmap_physical_pars_fragment:"#if defined(USE_ENVMAP)\n#ifdef ENVMAP_MODE_REFRACTION\nuniform float refractionRatio;\n#endif\nvec3 getIBLIrradiance(const in vec3 normal){\n#if defined(ENVMAP_TYPE_CUBE_UV)\nvec3 worldNormal=inverseTransformDirection(normal,viewMatrix);vec4 envMapColor=textureCubeUV(envMap,worldNormal,1.0);return PI*envMapColor.rgb*envMapIntensity;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness){\n#if defined(ENVMAP_TYPE_CUBE_UV)\nvec3 reflectVec;\n#ifdef ENVMAP_MODE_REFLECTION\nreflectVec=reflect(-viewDir,normal);reflectVec=normalize(mix(reflectVec,normal,roughness*roughness));\n#else\nreflectVec=refract(-viewDir,normal,refractionRatio);\n#endif\nreflectVec=inverseTransformDirection(reflectVec,viewMatrix);vec4 envMapColor=textureCubeUV(envMap,reflectVec,roughness);return envMapColor.rgb*envMapIntensity;\n#else\nreturn vec3(0.0);\n#endif\n}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n#ifdef ENV_WORLDPOS\nvWorldPosition=worldPosition.xyz;\n#else\nvec3 cameraToVertex;if(isOrthographic){cameraToVertex=normalize(vec3(-viewMatrix[0][2],-viewMatrix[1][2],-viewMatrix[2][2]));}else{cameraToVertex=normalize(worldPosition.xyz-cameraPosition);}vec3 worldNormal=inverseTransformDirection(transformedNormal,viewMatrix);\n#ifdef ENVMAP_MODE_REFLECTION\nvReflect=reflect(cameraToVertex,worldNormal);\n#else\nvReflect=refract(cameraToVertex,worldNormal,refractionRatio);\n#endif\n#endif\n#endif",fog_vertex:"#ifdef USE_FOG\nvFogDepth=-mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\nvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n#ifdef FOG_EXP2\nfloat fogFactor=1.0-exp(-fogDensity*fogDensity*vFogDepth*vFogDepth);\n#else\nfloat fogFactor=smoothstep(fogNear,fogFar,vFogDepth);\n#endif\ngl_FragColor.rgb=mix(gl_FragColor.rgb,fogColor,fogFactor);\n#endif",fog_pars_fragment:"#ifdef USE_FOG\nuniform vec3 fogColor;varying float vFogDepth;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;uniform float fogFar;\n#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\nuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance(vec3 normal,vec3 lightDirection){float dotNL=dot(normal,lightDirection);vec2 coord=vec2(dotNL*0.5+0.5,0.0);\n#ifdef USE_GRADIENTMAP\nreturn texture2D(gradientMap,coord).rgb;\n#else\nreturn(coord.x<0.7)?vec3(0.7):vec3(1.0);\n#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\nvec4 lightMapTexel=texture2D(lightMap,vUv2);vec3 lightMapIrradiance=lightMapTexelToLinear(lightMapTexel).rgb*lightMapIntensity;\n#ifndef PHYSICALLY_CORRECT_LIGHTS\nlightMapIrradiance*=PI;\n#endif\nreflectedLight.indirectDiffuse+=lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\nuniform sampler2D lightMap;uniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse=vec3(1.0);GeometricContext geometry;geometry.position=mvPosition.xyz;geometry.normal=normalize(transformedNormal);geometry.viewDir=(isOrthographic)?vec3(0,0,1):normalize(-mvPosition.xyz);GeometricContext backGeometry;backGeometry.position=geometry.position;backGeometry.normal=-geometry.normal;backGeometry.viewDir=geometry.viewDir;vLightFront=vec3(0.0);vIndirectFront=vec3(0.0);\n#ifdef DOUBLE_SIDED\nvLightBack=vec3(0.0);vIndirectBack=vec3(0.0);\n#endif\nIncidentLight directLight;float dotNL;vec3 directLightColor_Diffuse;vIndirectFront+=getAmbientLightIrradiance(ambientLightColor);vIndirectFront+=getLightProbeIrradiance(lightProbe,geometry.normal);\n#ifdef DOUBLE_SIDED\nvIndirectBack+=getAmbientLightIrradiance(ambientLightColor);vIndirectBack+=getLightProbeIrradiance(lightProbe,backGeometry.normal);\n#endif\n#if NUM_POINT_LIGHTS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_POINT_LIGHTS;i++){getPointLightInfo(pointLights[i],geometry,directLight);dotNL=dot(geometry.normal,directLight.direction);directLightColor_Diffuse=directLight.color;vLightFront+=saturate(dotNL)*directLightColor_Diffuse;\n#ifdef DOUBLE_SIDED\nvLightBack+=saturate(-dotNL)*directLightColor_Diffuse;\n#endif\n}\n#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_SPOT_LIGHTS;i++){getSpotLightInfo(spotLights[i],geometry,directLight);dotNL=dot(geometry.normal,directLight.direction);directLightColor_Diffuse=directLight.color;vLightFront+=saturate(dotNL)*directLightColor_Diffuse;\n#ifdef DOUBLE_SIDED\nvLightBack+=saturate(-dotNL)*directLightColor_Diffuse;\n#endif\n}\n#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_DIR_LIGHTS;i++){getDirectionalLightInfo(directionalLights[i],geometry,directLight);dotNL=dot(geometry.normal,directLight.direction);directLightColor_Diffuse=directLight.color;vLightFront+=saturate(dotNL)*directLightColor_Diffuse;\n#ifdef DOUBLE_SIDED\nvLightBack+=saturate(-dotNL)*directLightColor_Diffuse;\n#endif\n}\n#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_HEMI_LIGHTS;i++){vIndirectFront+=getHemisphereLightIrradiance(hemisphereLights[i],geometry.normal);\n#ifdef DOUBLE_SIDED\nvIndirectBack+=getHemisphereLightIrradiance(hemisphereLights[i],backGeometry.normal);\n#endif\n}\n#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;uniform vec3 ambientLightColor;uniform vec3 lightProbe[9];vec3 shGetIrradianceAt(in vec3 normal,in vec3 shCoefficients[9]){float x=normal.x,y=normal.y,z=normal.z;vec3 result=shCoefficients[0]*0.886227;result+=shCoefficients[1]*2.0*0.511664*y;result+=shCoefficients[2]*2.0*0.511664*z;result+=shCoefficients[3]*2.0*0.511664*x;result+=shCoefficients[4]*2.0*0.429043*x*y;result+=shCoefficients[5]*2.0*0.429043*y*z;result+=shCoefficients[6]*(0.743125*z*z-0.247708);result+=shCoefficients[7]*2.0*0.429043*x*z;result+=shCoefficients[8]*0.429043*(x*x-y*y);return result;}vec3 getLightProbeIrradiance(const in vec3 lightProbe[9],const in vec3 normal){vec3 worldNormal=inverseTransformDirection(normal,viewMatrix);vec3 irradiance=shGetIrradianceAt(worldNormal,lightProbe);return irradiance;}vec3 getAmbientLightIrradiance(const in vec3 ambientLightColor){vec3 irradiance=ambientLightColor;return irradiance;}float getDistanceAttenuation(const in float lightDistance,const in float cutoffDistance,const in float decayExponent){\n#if defined(PHYSICALLY_CORRECT_LIGHTS)\nfloat distanceFalloff=1.0/max(pow(lightDistance,decayExponent),0.01);if(cutoffDistance>0.0){distanceFalloff*=pow2(saturate(1.0-pow4(lightDistance/cutoffDistance)));}return distanceFalloff;\n#else\nif(cutoffDistance>0.0&&decayExponent>0.0){return pow(saturate(-lightDistance/cutoffDistance+1.0),decayExponent);}return 1.0;\n#endif\n}float getSpotAttenuation(const in float coneCosine,const in float penumbraCosine,const in float angleCosine){return smoothstep(coneCosine,penumbraCosine,angleCosine);}\n#if NUM_DIR_LIGHTS>0\nstruct DirectionalLight{vec3 direction;vec3 color;};uniform DirectionalLight directionalLights[NUM_DIR_LIGHTS];void getDirectionalLightInfo(const in DirectionalLight directionalLight,const in GeometricContext geometry,out IncidentLight light){light.color=directionalLight.color;light.direction=directionalLight.direction;light.visible=true;}\n#endif\n#if NUM_POINT_LIGHTS>0\nstruct PointLight{vec3 position;vec3 color;float distance;float decay;};uniform PointLight pointLights[NUM_POINT_LIGHTS];void getPointLightInfo(const in PointLight pointLight,const in GeometricContext geometry,out IncidentLight light){vec3 lVector=pointLight.position-geometry.position;light.direction=normalize(lVector);float lightDistance=length(lVector);light.color=pointLight.color;light.color*=getDistanceAttenuation(lightDistance,pointLight.distance,pointLight.decay);light.visible=(light.color!=vec3(0.0));}\n#endif\n#if NUM_SPOT_LIGHTS>0\nstruct SpotLight{vec3 position;vec3 direction;vec3 color;float distance;float decay;float coneCos;float penumbraCos;};uniform SpotLight spotLights[NUM_SPOT_LIGHTS];void getSpotLightInfo(const in SpotLight spotLight,const in GeometricContext geometry,out IncidentLight light){vec3 lVector=spotLight.position-geometry.position;light.direction=normalize(lVector);float angleCos=dot(light.direction,spotLight.direction);float spotAttenuation=getSpotAttenuation(spotLight.coneCos,spotLight.penumbraCos,angleCos);if(spotAttenuation>0.0){float lightDistance=length(lVector);light.color=spotLight.color*spotAttenuation;light.color*=getDistanceAttenuation(lightDistance,spotLight.distance,spotLight.decay);light.visible=(light.color!=vec3(0.0));}else{light.color=vec3(0.0);light.visible=false;}}\n#endif\n#if NUM_RECT_AREA_LIGHTS>0\nstruct RectAreaLight{vec3 color;vec3 position;vec3 halfWidth;vec3 halfHeight;};uniform sampler2D ltc_1;uniform sampler2D ltc_2;uniform RectAreaLight rectAreaLights[NUM_RECT_AREA_LIGHTS];\n#endif\n#if NUM_HEMI_LIGHTS>0\nstruct HemisphereLight{vec3 direction;vec3 skyColor;vec3 groundColor;};uniform HemisphereLight hemisphereLights[NUM_HEMI_LIGHTS];vec3 getHemisphereLightIrradiance(const in HemisphereLight hemiLight,const in vec3 normal){float dotNL=dot(normal,hemiLight.direction);float hemiDiffuseWeight=0.5*dotNL+0.5;vec3 irradiance=mix(hemiLight.groundColor,hemiLight.skyColor,hemiDiffuseWeight);return irradiance;}\n#endif",lights_toon_fragment:"ToonMaterial material;material.diffuseColor=diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;struct ToonMaterial{vec3 diffuseColor;};void RE_Direct_Toon(const in IncidentLight directLight,const in GeometricContext geometry,const in ToonMaterial material,inout ReflectedLight reflectedLight){vec3 irradiance=getGradientIrradiance(geometry.normal,directLight.direction)*directLight.color;reflectedLight.directDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}void RE_IndirectDiffuse_Toon(const in vec3 irradiance,const in GeometricContext geometry,const in ToonMaterial material,inout ReflectedLight reflectedLight){reflectedLight.indirectDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}\n#define RE_Direct RE_Direct_Toon\n#define RE_IndirectDiffuse RE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD(material)(0)",lights_phong_fragment:"BlinnPhongMaterial material;material.diffuseColor=diffuseColor.rgb;material.specularColor=specular;material.specularShininess=shininess;material.specularStrength=specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;struct BlinnPhongMaterial{vec3 diffuseColor;vec3 specularColor;float specularShininess;float specularStrength;};void RE_Direct_BlinnPhong(const in IncidentLight directLight,const in GeometricContext geometry,const in BlinnPhongMaterial material,inout ReflectedLight reflectedLight){float dotNL=saturate(dot(geometry.normal,directLight.direction));vec3 irradiance=dotNL*directLight.color;reflectedLight.directDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);reflectedLight.directSpecular+=irradiance*BRDF_BlinnPhong(directLight.direction,geometry.viewDir,geometry.normal,material.specularColor,material.specularShininess)*material.specularStrength;}void RE_IndirectDiffuse_BlinnPhong(const in vec3 irradiance,const in GeometricContext geometry,const in BlinnPhongMaterial material,inout ReflectedLight reflectedLight){reflectedLight.indirectDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}\n#define RE_Direct RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse RE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD(material)(0)",lights_physical_fragment:"PhysicalMaterial material;material.diffuseColor=diffuseColor.rgb*(1.0-metalnessFactor);vec3 dxy=max(abs(dFdx(geometryNormal)),abs(dFdy(geometryNormal)));float geometryRoughness=max(max(dxy.x,dxy.y),dxy.z);material.roughness=max(roughnessFactor,0.0525);material.roughness+=geometryRoughness;material.roughness=min(material.roughness,1.0);\n#ifdef IOR\n#ifdef SPECULAR\nfloat specularIntensityFactor=specularIntensity;vec3 specularColorFactor=specularColor;\n#ifdef USE_SPECULARINTENSITYMAP\nspecularIntensityFactor*=texture2D(specularIntensityMap,vUv).a;\n#endif\n#ifdef USE_SPECULARCOLORMAP\nspecularColorFactor*=specularColorMapTexelToLinear(texture2D(specularColorMap,vUv)).rgb;\n#endif\nmaterial.specularF90=mix(specularIntensityFactor,1.0,metalnessFactor);\n#else\nfloat specularIntensityFactor=1.0;vec3 specularColorFactor=vec3(1.0);material.specularF90=1.0;\n#endif\nmaterial.specularColor=mix(min(pow2((ior-1.0)/(ior+1.0))*specularColorFactor,vec3(1.0))*specularIntensityFactor,diffuseColor.rgb,metalnessFactor);\n#else\nmaterial.specularColor=mix(vec3(0.04),diffuseColor.rgb,metalnessFactor);material.specularF90=1.0;\n#endif\n#ifdef USE_CLEARCOAT\nmaterial.clearcoat=clearcoat;material.clearcoatRoughness=clearcoatRoughness;material.clearcoatF0=vec3(0.04);material.clearcoatF90=1.0;\n#ifdef USE_CLEARCOATMAP\nmaterial.clearcoat*=texture2D(clearcoatMap,vUv).x;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\nmaterial.clearcoatRoughness*=texture2D(clearcoatRoughnessMap,vUv).y;\n#endif\nmaterial.clearcoat=saturate(material.clearcoat);material.clearcoatRoughness=max(material.clearcoatRoughness,0.0525);material.clearcoatRoughness+=geometryRoughness;material.clearcoatRoughness=min(material.clearcoatRoughness,1.0);\n#endif\n#ifdef USE_SHEEN\nmaterial.sheenColor=sheenColor;\n#ifdef USE_SHEENCOLORMAP\nmaterial.sheenColor*=sheenColorMapTexelToLinear(texture2D(sheenColorMap,vUv)).rgb;\n#endif\nmaterial.sheenRoughness=clamp(sheenRoughness,0.07,1.0);\n#ifdef USE_SHEENROUGHNESSMAP\nmaterial.sheenRoughness*=texture2D(sheenRoughnessMap,vUv).a;\n#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial{vec3 diffuseColor;float roughness;vec3 specularColor;float specularF90;\n#ifdef USE_CLEARCOAT\nfloat clearcoat;float clearcoatRoughness;vec3 clearcoatF0;float clearcoatF90;\n#endif\n#ifdef USE_SHEEN\nvec3 sheenColor;float sheenRoughness;\n#endif\n};vec3 clearcoatSpecular=vec3(0.0);vec2 DFGApprox(const in vec3 normal,const in vec3 viewDir,const in float roughness){float dotNV=saturate(dot(normal,viewDir));const vec4 c0=vec4(-1,-0.0275,-0.572,0.022);const vec4 c1=vec4(1,0.0425,1.04,-0.04);vec4 r=roughness*c0+c1;float a004=min(r.x*r.x,exp2(-9.28*dotNV))*r.x+r.y;vec2 fab=vec2(-1.04,1.04)*a004+r.zw;return fab;}vec3 EnvironmentBRDF(const in vec3 normal,const in vec3 viewDir,const in vec3 specularColor,const in float specularF90,const in float roughness){vec2 fab=DFGApprox(normal,viewDir,roughness);return specularColor*fab.x+specularF90*fab.y;}void computeMultiscattering(const in vec3 normal,const in vec3 viewDir,const in vec3 specularColor,const in float specularF90,const in float roughness,inout vec3 singleScatter,inout vec3 multiScatter){vec2 fab=DFGApprox(normal,viewDir,roughness);vec3 FssEss=specularColor*fab.x+specularF90*fab.y;float Ess=fab.x+fab.y;float Ems=1.0-Ess;vec3 Favg=specularColor+(1.0-specularColor)*0.047619;vec3 Fms=FssEss*Favg/(1.0-Ems*Favg);singleScatter+=FssEss;multiScatter+=Fms*Ems;}\n#if NUM_RECT_AREA_LIGHTS>0\nvoid RE_Direct_RectArea_Physical(const in RectAreaLight rectAreaLight,const in GeometricContext geometry,const in PhysicalMaterial material,inout ReflectedLight reflectedLight){vec3 normal=geometry.normal;vec3 viewDir=geometry.viewDir;vec3 position=geometry.position;vec3 lightPos=rectAreaLight.position;vec3 halfWidth=rectAreaLight.halfWidth;vec3 halfHeight=rectAreaLight.halfHeight;vec3 lightColor=rectAreaLight.color;float roughness=material.roughness;vec3 rectCoords[4];rectCoords[0]=lightPos+halfWidth-halfHeight;rectCoords[1]=lightPos-halfWidth-halfHeight;rectCoords[2]=lightPos-halfWidth+halfHeight;rectCoords[3]=lightPos+halfWidth+halfHeight;vec2 uv=LTC_Uv(normal,viewDir,roughness);vec4 t1=texture2D(ltc_1,uv);vec4 t2=texture2D(ltc_2,uv);mat3 mInv=mat3(vec3(t1.x,0,t1.y),vec3(0,1,0),vec3(t1.z,0,t1.w));vec3 fresnel=(material.specularColor*t2.x+(vec3(1.0)-material.specularColor)*t2.y);reflectedLight.directSpecular+=lightColor*fresnel*LTC_Evaluate(normal,viewDir,position,mInv,rectCoords);reflectedLight.directDiffuse+=lightColor*material.diffuseColor*LTC_Evaluate(normal,viewDir,position,mat3(1.0),rectCoords);}\n#endif\nvoid RE_Direct_Physical(const in IncidentLight directLight,const in GeometricContext geometry,const in PhysicalMaterial material,inout ReflectedLight reflectedLight){float dotNL=saturate(dot(geometry.normal,directLight.direction));vec3 irradiance=dotNL*directLight.color;\n#ifdef USE_CLEARCOAT\nfloat dotNLcc=saturate(dot(geometry.clearcoatNormal,directLight.direction));vec3 ccIrradiance=dotNLcc*directLight.color;clearcoatSpecular+=ccIrradiance*BRDF_GGX(directLight.direction,geometry.viewDir,geometry.clearcoatNormal,material.clearcoatF0,material.clearcoatF90,material.clearcoatRoughness);\n#endif\n#ifdef USE_SHEEN\nreflectedLight.directSpecular+=irradiance*BRDF_Sheen(directLight.direction,geometry.viewDir,geometry.normal,material.sheenColor,material.sheenRoughness);\n#endif\nreflectedLight.directSpecular+=irradiance*BRDF_GGX(directLight.direction,geometry.viewDir,geometry.normal,material.specularColor,material.specularF90,material.roughness);reflectedLight.directDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}void RE_IndirectDiffuse_Physical(const in vec3 irradiance,const in GeometricContext geometry,const in PhysicalMaterial material,inout ReflectedLight reflectedLight){reflectedLight.indirectDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}void RE_IndirectSpecular_Physical(const in vec3 radiance,const in vec3 irradiance,const in vec3 clearcoatRadiance,const in GeometricContext geometry,const in PhysicalMaterial material,inout ReflectedLight reflectedLight){\n#ifdef USE_CLEARCOAT\nclearcoatSpecular+=clearcoatRadiance*EnvironmentBRDF(geometry.clearcoatNormal,geometry.viewDir,material.clearcoatF0,material.clearcoatF90,material.clearcoatRoughness);\n#endif\nvec3 singleScattering=vec3(0.0);vec3 multiScattering=vec3(0.0);vec3 cosineWeightedIrradiance=irradiance*RECIPROCAL_PI;computeMultiscattering(geometry.normal,geometry.viewDir,material.specularColor,material.specularF90,material.roughness,singleScattering,multiScattering);vec3 diffuse=material.diffuseColor*(1.0-(singleScattering+multiScattering));reflectedLight.indirectSpecular+=radiance*singleScattering;reflectedLight.indirectSpecular+=multiScattering*cosineWeightedIrradiance;reflectedLight.indirectDiffuse+=diffuse*cosineWeightedIrradiance;}\n#define RE_Direct RE_Direct_Physical\n#define RE_Direct_RectArea RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion(const in float dotNV,const in float ambientOcclusion,const in float roughness){return saturate(pow(dotNV+ambientOcclusion,exp2(-16.0*roughness-1.0))-1.0+ambientOcclusion);}",lights_fragment_begin:"GeometricContext geometry;geometry.position=-vViewPosition;geometry.normal=normal;geometry.viewDir=(isOrthographic)?vec3(0,0,1):normalize(vViewPosition);\n#ifdef USE_CLEARCOAT\ngeometry.clearcoatNormal=clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if (NUM_POINT_LIGHTS>0)&&defined(RE_Direct)\nPointLight pointLight;\n#if defined(USE_SHADOWMAP)&&NUM_POINT_LIGHT_SHADOWS>0\nPointLightShadow pointLightShadow;\n#endif\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_POINT_LIGHTS;i++){pointLight=pointLights[i];getPointLightInfo(pointLight,geometry,directLight);\n#if defined(USE_SHADOWMAP)&&(UNROLLED_LOOP_INDEX<NUM_POINT_LIGHT_SHADOWS)\npointLightShadow=pointLightShadows[i];directLight.color*=all(bvec2(directLight.visible,receiveShadow))?getPointShadow(pointShadowMap[i],pointLightShadow.shadowMapSize,pointLightShadow.shadowBias,pointLightShadow.shadowRadius,vPointShadowCoord[i],pointLightShadow.shadowCameraNear,pointLightShadow.shadowCameraFar):1.0;\n#endif\nRE_Direct(directLight,geometry,material,reflectedLight);}\n#pragma unroll_loop_end\n#endif\n#if (NUM_SPOT_LIGHTS>0)&&defined(RE_Direct)\nSpotLight spotLight;\n#if defined(USE_SHADOWMAP)&&NUM_SPOT_LIGHT_SHADOWS>0\nSpotLightShadow spotLightShadow;\n#endif\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_SPOT_LIGHTS;i++){spotLight=spotLights[i];getSpotLightInfo(spotLight,geometry,directLight);\n#if defined(USE_SHADOWMAP)&&(UNROLLED_LOOP_INDEX<NUM_SPOT_LIGHT_SHADOWS)\nspotLightShadow=spotLightShadows[i];directLight.color*=all(bvec2(directLight.visible,receiveShadow))?getShadow(spotShadowMap[i],spotLightShadow.shadowMapSize,spotLightShadow.shadowBias,spotLightShadow.shadowRadius,vSpotShadowCoord[i]):1.0;\n#endif\nRE_Direct(directLight,geometry,material,reflectedLight);}\n#pragma unroll_loop_end\n#endif\n#if (NUM_DIR_LIGHTS>0)&&defined(RE_Direct)\nDirectionalLight directionalLight;\n#if defined(USE_SHADOWMAP)&&NUM_DIR_LIGHT_SHADOWS>0\nDirectionalLightShadow directionalLightShadow;\n#endif\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_DIR_LIGHTS;i++){directionalLight=directionalLights[i];getDirectionalLightInfo(directionalLight,geometry,directLight);\n#if defined(USE_SHADOWMAP)&&(UNROLLED_LOOP_INDEX<NUM_DIR_LIGHT_SHADOWS)\ndirectionalLightShadow=directionalLightShadows[i];directLight.color*=all(bvec2(directLight.visible,receiveShadow))?getShadow(directionalShadowMap[i],directionalLightShadow.shadowMapSize,directionalLightShadow.shadowBias,directionalLightShadow.shadowRadius,vDirectionalShadowCoord[i]):1.0;\n#endif\nRE_Direct(directLight,geometry,material,reflectedLight);}\n#pragma unroll_loop_end\n#endif\n#if (NUM_RECT_AREA_LIGHTS>0)&&defined(RE_Direct_RectArea)\nRectAreaLight rectAreaLight;\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_RECT_AREA_LIGHTS;i++){rectAreaLight=rectAreaLights[i];RE_Direct_RectArea(rectAreaLight,geometry,material,reflectedLight);}\n#pragma unroll_loop_end\n#endif\n#if defined(RE_IndirectDiffuse)\nvec3 iblIrradiance=vec3(0.0);vec3 irradiance=getAmbientLightIrradiance(ambientLightColor);irradiance+=getLightProbeIrradiance(lightProbe,geometry.normal);\n#if (NUM_HEMI_LIGHTS>0)\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_HEMI_LIGHTS;i++){irradiance+=getHemisphereLightIrradiance(hemisphereLights[i],geometry.normal);}\n#pragma unroll_loop_end\n#endif\n#endif\n#if defined(RE_IndirectSpecular)\nvec3 radiance=vec3(0.0);vec3 clearcoatRadiance=vec3(0.0);\n#endif",lights_fragment_maps:"#if defined(RE_IndirectDiffuse)\n#ifdef USE_LIGHTMAP\nvec4 lightMapTexel=texture2D(lightMap,vUv2);vec3 lightMapIrradiance=lightMapTexelToLinear(lightMapTexel).rgb*lightMapIntensity;\n#ifndef PHYSICALLY_CORRECT_LIGHTS\nlightMapIrradiance*=PI;\n#endif\nirradiance+=lightMapIrradiance;\n#endif\n#if defined(USE_ENVMAP)&&defined(STANDARD)&&defined(ENVMAP_TYPE_CUBE_UV)\niblIrradiance+=getIBLIrradiance(geometry.normal);\n#endif\n#endif\n#if defined(USE_ENVMAP)&&defined(RE_IndirectSpecular)\nradiance+=getIBLRadiance(geometry.viewDir,geometry.normal,material.roughness);\n#ifdef USE_CLEARCOAT\nclearcoatRadiance+=getIBLRadiance(geometry.viewDir,geometry.clearcoatNormal,material.clearcoatRoughness);\n#endif\n#endif",lights_fragment_end:"#if defined(RE_IndirectDiffuse)\nRE_IndirectDiffuse(irradiance,geometry,material,reflectedLight);\n#endif\n#if defined(RE_IndirectSpecular)\nRE_IndirectSpecular(radiance,iblIrradiance,clearcoatRadiance,geometry,material,reflectedLight);\n#endif",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF)&&defined(USE_LOGDEPTHBUF_EXT)\ngl_FragDepthEXT=vIsPerspective==0.0?gl_FragCoord.z:log2(vFragDepth)*logDepthBufFC*0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined(USE_LOGDEPTHBUF)&&defined(USE_LOGDEPTHBUF_EXT)\nuniform float logDepthBufFC;varying float vFragDepth;varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n#ifdef USE_LOGDEPTHBUF_EXT\nvarying float vFragDepth;varying float vIsPerspective;\n#else\nuniform float logDepthBufFC;\n#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n#ifdef USE_LOGDEPTHBUF_EXT\nvFragDepth=1.0+gl_Position.w;vIsPerspective=float(isPerspectiveMatrix(projectionMatrix));\n#else\nif(isPerspectiveMatrix(projectionMatrix)){gl_Position.z=log2(max(EPSILON,gl_Position.w+1.0))*logDepthBufFC-1.0;gl_Position.z*=gl_Position.w;}\n#endif\n#endif",map_fragment:"#ifdef USE_MAP\nvec4 texelColor=texture2D(map,vUv);texelColor=mapTexelToLinear(texelColor);diffuseColor*=texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\nuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined(USE_MAP)||defined(USE_ALPHAMAP)\nvec2 uv=(uvTransform*vec3(gl_PointCoord.x,1.0-gl_PointCoord.y,1)).xy;\n#endif\n#ifdef USE_MAP\nvec4 mapTexel=texture2D(map,uv);diffuseColor*=mapTexelToLinear(mapTexel);\n#endif\n#ifdef USE_ALPHAMAP\ndiffuseColor.a*=texture2D(alphaMap,uv).g;\n#endif",map_particle_pars_fragment:"#if defined(USE_MAP)||defined(USE_ALPHAMAP)\nuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\nuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor=metalness;\n#ifdef USE_METALNESSMAP\nvec4 texelMetalness=texture2D(metalnessMap,vUv);metalnessFactor*=texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\nuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\nobjectNormal*=morphTargetBaseInfluence;\n#ifdef MORPHTARGETS_TEXTURE\nfor(int i=0;i<MORPHTARGETS_COUNT;i++){if(morphTargetInfluences[i]>0.0)objectNormal+=getMorph(gl_VertexID,i,1,2)*morphTargetInfluences[i];}\n#else\nobjectNormal+=morphNormal0*morphTargetInfluences[0];objectNormal+=morphNormal1*morphTargetInfluences[1];objectNormal+=morphNormal2*morphTargetInfluences[2];objectNormal+=morphNormal3*morphTargetInfluences[3];\n#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\nuniform float morphTargetBaseInfluence;\n#ifdef MORPHTARGETS_TEXTURE\nuniform float morphTargetInfluences[MORPHTARGETS_COUNT];uniform sampler2DArray morphTargetsTexture;uniform vec2 morphTargetsTextureSize;vec3 getMorph(const in int vertexIndex,const in int morphTargetIndex,const in int offset,const in int stride){float texelIndex=float(vertexIndex*stride+offset);float y=floor(texelIndex/morphTargetsTextureSize.x);float x=texelIndex-y*morphTargetsTextureSize.x;vec3 morphUV=vec3((x+0.5)/morphTargetsTextureSize.x,y/morphTargetsTextureSize.y,morphTargetIndex);return texture(morphTargetsTexture,morphUV).xyz;}\n#else\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[8];\n#else\nuniform float morphTargetInfluences[4];\n#endif\n#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\ntransformed*=morphTargetBaseInfluence;\n#ifdef MORPHTARGETS_TEXTURE\nfor(int i=0;i<MORPHTARGETS_COUNT;i++){\n#ifndef USE_MORPHNORMALS\nif(morphTargetInfluences[i]>0.0)transformed+=getMorph(gl_VertexID,i,0,1)*morphTargetInfluences[i];\n#else\nif(morphTargetInfluences[i]>0.0)transformed+=getMorph(gl_VertexID,i,0,2)*morphTargetInfluences[i];\n#endif\n}\n#else\ntransformed+=morphTarget0*morphTargetInfluences[0];transformed+=morphTarget1*morphTargetInfluences[1];transformed+=morphTarget2*morphTargetInfluences[2];transformed+=morphTarget3*morphTargetInfluences[3];\n#ifndef USE_MORPHNORMALS\ntransformed+=morphTarget4*morphTargetInfluences[4];transformed+=morphTarget5*morphTargetInfluences[5];transformed+=morphTarget6*morphTargetInfluences[6];transformed+=morphTarget7*morphTargetInfluences[7];\n#endif\n#endif\n#endif",normal_fragment_begin:"float faceDirection=gl_FrontFacing?1.0:-1.0;\n#ifdef FLAT_SHADED\nvec3 fdx=vec3(dFdx(vViewPosition.x),dFdx(vViewPosition.y),dFdx(vViewPosition.z));vec3 fdy=vec3(dFdy(vViewPosition.x),dFdy(vViewPosition.y),dFdy(vViewPosition.z));vec3 normal=normalize(cross(fdx,fdy));\n#else\nvec3 normal=normalize(vNormal);\n#ifdef DOUBLE_SIDED\nnormal=normal*faceDirection;\n#endif\n#ifdef USE_TANGENT\nvec3 tangent=normalize(vTangent);vec3 bitangent=normalize(vBitangent);\n#ifdef DOUBLE_SIDED\ntangent=tangent*faceDirection;bitangent=bitangent*faceDirection;\n#endif\n#if defined(TANGENTSPACE_NORMALMAP)||defined(USE_CLEARCOAT_NORMALMAP)\nmat3 vTBN=mat3(tangent,bitangent,normal);\n#endif\n#endif\n#endif\nvec3 geometryNormal=normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\nnormal=texture2D(normalMap,vUv).xyz*2.0-1.0;\n#ifdef FLIP_SIDED\nnormal=-normal;\n#endif\n#ifdef DOUBLE_SIDED\nnormal=normal*faceDirection;\n#endif\nnormal=normalize(normalMatrix*normal);\n#elif defined(TANGENTSPACE_NORMALMAP)\nvec3 mapN=texture2D(normalMap,vUv).xyz*2.0-1.0;mapN.xy*=normalScale;\n#ifdef USE_TANGENT\nnormal=normalize(vTBN*mapN);\n#else\nnormal=perturbNormal2Arb(-vViewPosition,normal,mapN,faceDirection);\n#endif\n#elif defined(USE_BUMPMAP)\nnormal=perturbNormalArb(-vViewPosition,normal,dHdxy_fwd(),faceDirection);\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\nvNormal=normalize(transformedNormal);\n#ifdef USE_TANGENT\nvTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);\n#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;uniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\nuniform mat3 normalMatrix;\n#endif\n#if !defined(USE_TANGENT)&&(defined(TANGENTSPACE_NORMALMAP)||defined(USE_CLEARCOAT_NORMALMAP))\nvec3 perturbNormal2Arb(vec3 eye_pos,vec3 surf_norm,vec3 mapN,float faceDirection){vec3 q0=vec3(dFdx(eye_pos.x),dFdx(eye_pos.y),dFdx(eye_pos.z));vec3 q1=vec3(dFdy(eye_pos.x),dFdy(eye_pos.y),dFdy(eye_pos.z));vec2 st0=dFdx(vUv.st);vec2 st1=dFdy(vUv.st);vec3 N=surf_norm;vec3 q1perp=cross(q1,N);vec3 q0perp=cross(N,q0);vec3 T=q1perp*st0.x+q0perp*st1.x;vec3 B=q1perp*st0.y+q0perp*st1.y;float det=max(dot(T,T),dot(B,B));float scale=(det==0.0)?0.0:faceDirection*inversesqrt(det);return normalize(T*(mapN.x*scale)+B*(mapN.y*scale)+N*mapN.z);}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\nvec3 clearcoatNormal=geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\nvec3 clearcoatMapN=texture2D(clearcoatNormalMap,vUv).xyz*2.0-1.0;clearcoatMapN.xy*=clearcoatNormalScale;\n#ifdef USE_TANGENT\nclearcoatNormal=normalize(vTBN*clearcoatMapN);\n#else\nclearcoatNormal=perturbNormal2Arb(-vViewPosition,clearcoatNormal,clearcoatMapN,faceDirection);\n#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\nuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\nuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\nuniform sampler2D clearcoatNormalMap;uniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a=1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a*=transmissionAlpha+0.1;\n#endif\ngl_FragColor=vec4(outgoingLight,diffuseColor.a);",packing:"vec3 packNormalToRGB(const in vec3 normal){return normalize(normal)*0.5+0.5;}vec3 unpackRGBToNormal(const in vec3 rgb){return 2.0*rgb.xyz-1.0;}const float PackUpscale=256./255.;const float UnpackDownscale=255./256.;const vec3 PackFactors=vec3(256.*256.*256.,256.*256.,256.);const vec4 UnpackFactors=UnpackDownscale/vec4(PackFactors,1.);const float ShiftRight8=1./256.;vec4 packDepthToRGBA(const in float v){vec4 r=vec4(fract(v*PackFactors),v);r.yzw-=r.xyz*ShiftRight8;return r*PackUpscale;}float unpackRGBAToDepth(const in vec4 v){return dot(v,UnpackFactors);}vec4 pack2HalfToRGBA(vec2 v){vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}vec2 unpackRGBATo2Half(vec4 v){return vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));}float viewZToOrthographicDepth(const in float viewZ,const in float near,const in float far){return(viewZ+near)/(near-far);}float orthographicDepthToViewZ(const in float linearClipZ,const in float near,const in float far){return linearClipZ*(near-far)-near;}float viewZToPerspectiveDepth(const in float viewZ,const in float near,const in float far){return((near+viewZ)*far)/((far-near)*viewZ);}float perspectiveDepthToViewZ(const in float invClipZ,const in float near,const in float far){return(near*far)/((far-near)*invClipZ-far);}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\ngl_FragColor.rgb*=gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition=vec4(transformed,1.0);\n#ifdef USE_INSTANCING\nmvPosition=instanceMatrix*mvPosition;\n#endif\nmvPosition=modelViewMatrix*mvPosition;gl_Position=projectionMatrix*mvPosition;",dithering_fragment:"#ifdef DITHERING\ngl_FragColor.rgb=dithering(gl_FragColor.rgb);\n#endif",dithering_pars_fragment:"#ifdef DITHERING\nvec3 dithering(vec3 color){float grid_position=rand(gl_FragCoord.xy);vec3 dither_shift_RGB=vec3(0.25/255.0,-0.25/255.0,0.25/255.0);dither_shift_RGB=mix(2.0*dither_shift_RGB,-2.0*dither_shift_RGB,grid_position);return color+dither_shift_RGB;}\n#endif",roughnessmap_fragment:"float roughnessFactor=roughness;\n#ifdef USE_ROUGHNESSMAP\nvec4 texelRoughness=texture2D(roughnessMap,vUv);roughnessFactor*=texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\nuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n#if NUM_DIR_LIGHT_SHADOWS>0\nuniform sampler2D directionalShadowMap[NUM_DIR_LIGHT_SHADOWS];varying vec4 vDirectionalShadowCoord[NUM_DIR_LIGHT_SHADOWS];struct DirectionalLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;};uniform DirectionalLightShadow directionalLightShadows[NUM_DIR_LIGHT_SHADOWS];\n#endif\n#if NUM_SPOT_LIGHT_SHADOWS>0\nuniform sampler2D spotShadowMap[NUM_SPOT_LIGHT_SHADOWS];varying vec4 vSpotShadowCoord[NUM_SPOT_LIGHT_SHADOWS];struct SpotLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;};uniform SpotLightShadow spotLightShadows[NUM_SPOT_LIGHT_SHADOWS];\n#endif\n#if NUM_POINT_LIGHT_SHADOWS>0\nuniform sampler2D pointShadowMap[NUM_POINT_LIGHT_SHADOWS];varying vec4 vPointShadowCoord[NUM_POINT_LIGHT_SHADOWS];struct PointLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;float shadowCameraNear;float shadowCameraFar;};uniform PointLightShadow pointLightShadows[NUM_POINT_LIGHT_SHADOWS];\n#endif\nfloat texture2DCompare(sampler2D depths,vec2 uv,float compare){return step(compare,unpackRGBAToDepth(texture2D(depths,uv)));}vec2 texture2DDistribution(sampler2D shadow,vec2 uv){return unpackRGBATo2Half(texture2D(shadow,uv));}float VSMShadow(sampler2D shadow,vec2 uv,float compare){float occlusion=1.0;vec2 distribution=texture2DDistribution(shadow,uv);float hard_shadow=step(compare,distribution.x);if(hard_shadow!=1.0){float distance=compare-distribution.x;float variance=max(0.00000,distribution.y*distribution.y);float softness_probability=variance/(variance+distance*distance);softness_probability=clamp((softness_probability-0.3)/(0.95-0.3),0.0,1.0);occlusion=clamp(max(hard_shadow,softness_probability),0.0,1.0);}return occlusion;}float getShadow(sampler2D shadowMap,vec2 shadowMapSize,float shadowBias,float shadowRadius,vec4 shadowCoord){float shadow=1.0;shadowCoord.xyz/=shadowCoord.w;shadowCoord.z+=shadowBias;bvec4 inFrustumVec=bvec4(shadowCoord.x>=0.0,shadowCoord.x<=1.0,shadowCoord.y>=0.0,shadowCoord.y<=1.0);bool inFrustum=all(inFrustumVec);bvec2 frustumTestVec=bvec2(inFrustum,shadowCoord.z<=1.0);bool frustumTest=all(frustumTestVec);if(frustumTest){\n#if defined(SHADOWMAP_TYPE_PCF)\nvec2 texelSize=vec2(1.0)/shadowMapSize;float dx0=-texelSize.x*shadowRadius;float dy0=-texelSize.y*shadowRadius;float dx1=+texelSize.x*shadowRadius;float dy1=+texelSize.y*shadowRadius;float dx2=dx0/2.0;float dy2=dy0/2.0;float dx3=dx1/2.0;float dy3=dy1/2.0;shadow=(texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx0,dy0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx1,dy0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx2,dy2),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy2),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx3,dy2),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx0,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx2,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy,shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx3,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx1,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx2,dy3),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy3),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx3,dy3),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx0,dy1),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy1),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx1,dy1),shadowCoord.z))*(1.0/17.0);\n#elif defined(SHADOWMAP_TYPE_PCF_SOFT)\nvec2 texelSize=vec2(1.0)/shadowMapSize;float dx=texelSize.x;float dy=texelSize.y;vec2 uv=shadowCoord.xy;vec2 f=fract(uv*shadowMapSize+0.5);uv-=f*texelSize;shadow=(texture2DCompare(shadowMap,uv,shadowCoord.z)+texture2DCompare(shadowMap,uv+vec2(dx,0.0),shadowCoord.z)+texture2DCompare(shadowMap,uv+vec2(0.0,dy),shadowCoord.z)+texture2DCompare(shadowMap,uv+texelSize,shadowCoord.z)+mix(texture2DCompare(shadowMap,uv+vec2(-dx,0.0),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,0.0),shadowCoord.z),f.x)+mix(texture2DCompare(shadowMap,uv+vec2(-dx,dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,dy),shadowCoord.z),f.x)+mix(texture2DCompare(shadowMap,uv+vec2(0.0,-dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(0.0,2.0*dy),shadowCoord.z),f.y)+mix(texture2DCompare(shadowMap,uv+vec2(dx,-dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(dx,2.0*dy),shadowCoord.z),f.y)+mix(mix(texture2DCompare(shadowMap,uv+vec2(-dx,-dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,-dy),shadowCoord.z),f.x),mix(texture2DCompare(shadowMap,uv+vec2(-dx,2.0*dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,2.0*dy),shadowCoord.z),f.x),f.y))*(1.0/9.0);\n#elif defined(SHADOWMAP_TYPE_VSM)\nshadow=VSMShadow(shadowMap,shadowCoord.xy,shadowCoord.z);\n#else\nshadow=texture2DCompare(shadowMap,shadowCoord.xy,shadowCoord.z);\n#endif\n}return shadow;}vec2 cubeToUV(vec3 v,float texelSizeY){vec3 absV=abs(v);float scaleToCube=1.0/max(absV.x,max(absV.y,absV.z));absV*=scaleToCube;v*=scaleToCube*(1.0-2.0*texelSizeY);vec2 planar=v.xy;float almostATexel=1.5*texelSizeY;float almostOne=1.0-almostATexel;if(absV.z>=almostOne){if(v.z>0.0)planar.x=4.0-v.x;}else if(absV.x>=almostOne){float signX=sign(v.x);planar.x=v.z*signX+2.0*signX;}else if(absV.y>=almostOne){float signY=sign(v.y);planar.x=v.x+2.0*signY+2.0;planar.y=v.z*signY-2.0;}return vec2(0.125,0.25)*planar+vec2(0.375,0.75);}float getPointShadow(sampler2D shadowMap,vec2 shadowMapSize,float shadowBias,float shadowRadius,vec4 shadowCoord,float shadowCameraNear,float shadowCameraFar){vec2 texelSize=vec2(1.0)/(shadowMapSize*vec2(4.0,2.0));vec3 lightToPosition=shadowCoord.xyz;float dp=(length(lightToPosition)-shadowCameraNear)/(shadowCameraFar-shadowCameraNear);dp+=shadowBias;vec3 bd3D=normalize(lightToPosition);\n#if defined(SHADOWMAP_TYPE_PCF)||defined(SHADOWMAP_TYPE_PCF_SOFT)||defined(SHADOWMAP_TYPE_VSM)\nvec2 offset=vec2(-1,1)*shadowRadius*texelSize.y;return(texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xyy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yyy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xyx,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yyx,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xxy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yxy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xxx,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yxx,texelSize.y),dp))*(1.0/9.0);\n#else\nreturn texture2DCompare(shadowMap,cubeToUV(bd3D,texelSize.y),dp);\n#endif\n}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n#if NUM_DIR_LIGHT_SHADOWS>0\nuniform mat4 directionalShadowMatrix[NUM_DIR_LIGHT_SHADOWS];varying vec4 vDirectionalShadowCoord[NUM_DIR_LIGHT_SHADOWS];struct DirectionalLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;};uniform DirectionalLightShadow directionalLightShadows[NUM_DIR_LIGHT_SHADOWS];\n#endif\n#if NUM_SPOT_LIGHT_SHADOWS>0\nuniform mat4 spotShadowMatrix[NUM_SPOT_LIGHT_SHADOWS];varying vec4 vSpotShadowCoord[NUM_SPOT_LIGHT_SHADOWS];struct SpotLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;};uniform SpotLightShadow spotLightShadows[NUM_SPOT_LIGHT_SHADOWS];\n#endif\n#if NUM_POINT_LIGHT_SHADOWS>0\nuniform mat4 pointShadowMatrix[NUM_POINT_LIGHT_SHADOWS];varying vec4 vPointShadowCoord[NUM_POINT_LIGHT_SHADOWS];struct PointLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;float shadowCameraNear;float shadowCameraFar;};uniform PointLightShadow pointLightShadows[NUM_POINT_LIGHT_SHADOWS];\n#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n#if NUM_DIR_LIGHT_SHADOWS>0||NUM_SPOT_LIGHT_SHADOWS>0||NUM_POINT_LIGHT_SHADOWS>0\nvec3 shadowWorldNormal=inverseTransformDirection(transformedNormal,viewMatrix);vec4 shadowWorldPosition;\n#endif\n#if NUM_DIR_LIGHT_SHADOWS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_DIR_LIGHT_SHADOWS;i++){shadowWorldPosition=worldPosition+vec4(shadowWorldNormal*directionalLightShadows[i].shadowNormalBias,0);vDirectionalShadowCoord[i]=directionalShadowMatrix[i]*shadowWorldPosition;}\n#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHT_SHADOWS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_SPOT_LIGHT_SHADOWS;i++){shadowWorldPosition=worldPosition+vec4(shadowWorldNormal*spotLightShadows[i].shadowNormalBias,0);vSpotShadowCoord[i]=spotShadowMatrix[i]*shadowWorldPosition;}\n#pragma unroll_loop_end\n#endif\n#if NUM_POINT_LIGHT_SHADOWS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_POINT_LIGHT_SHADOWS;i++){shadowWorldPosition=worldPosition+vec4(shadowWorldNormal*pointLightShadows[i].shadowNormalBias,0);vPointShadowCoord[i]=pointShadowMatrix[i]*shadowWorldPosition;}\n#pragma unroll_loop_end\n#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask(){float shadow=1.0;\n#ifdef USE_SHADOWMAP\n#if NUM_DIR_LIGHT_SHADOWS>0\nDirectionalLightShadow directionalLight;\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_DIR_LIGHT_SHADOWS;i++){directionalLight=directionalLightShadows[i];shadow*=receiveShadow?getShadow(directionalShadowMap[i],directionalLight.shadowMapSize,directionalLight.shadowBias,directionalLight.shadowRadius,vDirectionalShadowCoord[i]):1.0;}\n#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHT_SHADOWS>0\nSpotLightShadow spotLight;\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_SPOT_LIGHT_SHADOWS;i++){spotLight=spotLightShadows[i];shadow*=receiveShadow?getShadow(spotShadowMap[i],spotLight.shadowMapSize,spotLight.shadowBias,spotLight.shadowRadius,vSpotShadowCoord[i]):1.0;}\n#pragma unroll_loop_end\n#endif\n#if NUM_POINT_LIGHT_SHADOWS>0\nPointLightShadow pointLight;\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_POINT_LIGHT_SHADOWS;i++){pointLight=pointLightShadows[i];shadow*=receiveShadow?getPointShadow(pointShadowMap[i],pointLight.shadowMapSize,pointLight.shadowBias,pointLight.shadowRadius,vPointShadowCoord[i],pointLight.shadowCameraNear,pointLight.shadowCameraFar):1.0;}\n#pragma unroll_loop_end\n#endif\n#endif\nreturn shadow;}",skinbase_vertex:"#ifdef USE_SKINNING\nmat4 boneMatX=getBoneMatrix(skinIndex.x);mat4 boneMatY=getBoneMatrix(skinIndex.y);mat4 boneMatZ=getBoneMatrix(skinIndex.z);mat4 boneMatW=getBoneMatrix(skinIndex.w);\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\nuniform mat4 bindMatrix;uniform mat4 bindMatrixInverse;\n#ifdef BONE_TEXTURE\nuniform highp sampler2D boneTexture;uniform int boneTextureSize;mat4 getBoneMatrix(const in float i){float j=i*4.0;float x=mod(j,float(boneTextureSize));float y=floor(j/float(boneTextureSize));float dx=1.0/float(boneTextureSize);float dy=1.0/float(boneTextureSize);y=dy*(y+0.5);vec4 v1=texture2D(boneTexture,vec2(dx*(x+0.5),y));vec4 v2=texture2D(boneTexture,vec2(dx*(x+1.5),y));vec4 v3=texture2D(boneTexture,vec2(dx*(x+2.5),y));vec4 v4=texture2D(boneTexture,vec2(dx*(x+3.5),y));mat4 bone=mat4(v1,v2,v3,v4);return bone;}\n#else\nuniform mat4 boneMatrices[MAX_BONES];mat4 getBoneMatrix(const in float i){mat4 bone=boneMatrices[int(i)];return bone;}\n#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\nvec4 skinVertex=bindMatrix*vec4(transformed,1.0);vec4 skinned=vec4(0.0);skinned+=boneMatX*skinVertex*skinWeight.x;skinned+=boneMatY*skinVertex*skinWeight.y;skinned+=boneMatZ*skinVertex*skinWeight.z;skinned+=boneMatW*skinVertex*skinWeight.w;transformed=(bindMatrixInverse*skinned).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\nmat4 skinMatrix=mat4(0.0);skinMatrix+=skinWeight.x*boneMatX;skinMatrix+=skinWeight.y*boneMatY;skinMatrix+=skinWeight.z*boneMatZ;skinMatrix+=skinWeight.w*boneMatW;skinMatrix=bindMatrixInverse*skinMatrix*bindMatrix;objectNormal=vec4(skinMatrix*vec4(objectNormal,0.0)).xyz;\n#ifdef USE_TANGENT\nobjectTangent=vec4(skinMatrix*vec4(objectTangent,0.0)).xyz;\n#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular=texture2D(specularMap,vUv);specularStrength=texelSpecular.r;\n#else\nspecularStrength=1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined(TONE_MAPPING)\ngl_FragColor.rgb=toneMapping(gl_FragColor.rgb);\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a)clamp(a,0.0,1.0)\n#endif\nuniform float toneMappingExposure;vec3 LinearToneMapping(vec3 color){return toneMappingExposure*color;}vec3 ReinhardToneMapping(vec3 color){color*=toneMappingExposure;return saturate(color/(vec3(1.0)+color));}vec3 OptimizedCineonToneMapping(vec3 color){color*=toneMappingExposure;color=max(vec3(0.0),color-0.004);return pow((color*(6.2*color+0.5))/(color*(6.2*color+1.7)+0.06),vec3(2.2));}vec3 RRTAndODTFit(vec3 v){vec3 a=v*(v+0.0245786)-0.000090537;vec3 b=v*(0.983729*v+0.4329510)+0.238081;return a/b;}vec3 ACESFilmicToneMapping(vec3 color){const mat3 ACESInputMat=mat3(vec3(0.59719,0.07600,0.02840),vec3(0.35458,0.90834,0.13383),vec3(0.04823,0.01566,0.83777));const mat3 ACESOutputMat=mat3(vec3(1.60475,-0.10208,-0.00327),vec3(-0.53108,1.10813,-0.07276),vec3(-0.07367,-0.00605,1.07602));color*=toneMappingExposure/0.6;color=ACESInputMat*color;color=RRTAndODTFit(color);color=ACESOutputMat*color;return saturate(color);}vec3 CustomToneMapping(vec3 color){return color;}",transmission_fragment:"#ifdef USE_TRANSMISSION\nfloat transmissionAlpha=1.0;float transmissionFactor=transmission;float thicknessFactor=thickness;\n#ifdef USE_TRANSMISSIONMAP\ntransmissionFactor*=texture2D(transmissionMap,vUv).r;\n#endif\n#ifdef USE_THICKNESSMAP\nthicknessFactor*=texture2D(thicknessMap,vUv).g;\n#endif\nvec3 pos=vWorldPosition;vec3 v=normalize(cameraPosition-pos);vec3 n=inverseTransformDirection(normal,viewMatrix);vec4 transmission=getIBLVolumeRefraction(n,v,roughnessFactor,material.diffuseColor,material.specularColor,material.specularF90,pos,modelMatrix,viewMatrix,projectionMatrix,ior,thicknessFactor,attenuationColor,attenuationDistance);totalDiffuse=mix(totalDiffuse,transmission.rgb,transmissionFactor);transmissionAlpha=mix(transmissionAlpha,transmission.a,transmissionFactor);\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\nuniform float transmission;uniform float thickness;uniform float attenuationDistance;uniform vec3 attenuationColor;\n#ifdef USE_TRANSMISSIONMAP\nuniform sampler2D transmissionMap;\n#endif\n#ifdef USE_THICKNESSMAP\nuniform sampler2D thicknessMap;\n#endif\nuniform vec2 transmissionSamplerSize;uniform sampler2D transmissionSamplerMap;uniform mat4 modelMatrix;uniform mat4 projectionMatrix;varying vec3 vWorldPosition;vec3 getVolumeTransmissionRay(vec3 n,vec3 v,float thickness,float ior,mat4 modelMatrix){vec3 refractionVector=refract(-v,normalize(n),1.0/ior);vec3 modelScale;modelScale.x=length(vec3(modelMatrix[0].xyz));modelScale.y=length(vec3(modelMatrix[1].xyz));modelScale.z=length(vec3(modelMatrix[2].xyz));return normalize(refractionVector)*thickness*modelScale;}float applyIorToRoughness(float roughness,float ior){return roughness*clamp(ior*2.0-2.0,0.0,1.0);}vec4 getTransmissionSample(vec2 fragCoord,float roughness,float ior){float framebufferLod=log2(transmissionSamplerSize.x)*applyIorToRoughness(roughness,ior);\n#ifdef TEXTURE_LOD_EXT\nreturn texture2DLodEXT(transmissionSamplerMap,fragCoord.xy,framebufferLod);\n#else\nreturn texture2D(transmissionSamplerMap,fragCoord.xy,framebufferLod);\n#endif\n}vec3 applyVolumeAttenuation(vec3 radiance,float transmissionDistance,vec3 attenuationColor,float attenuationDistance){if(attenuationDistance==0.0){return radiance;}else{vec3 attenuationCoefficient=-log(attenuationColor)/attenuationDistance;vec3 transmittance=exp(-attenuationCoefficient*transmissionDistance);return transmittance*radiance;}}vec4 getIBLVolumeRefraction(vec3 n,vec3 v,float roughness,vec3 diffuseColor,vec3 specularColor,float specularF90,vec3 position,mat4 modelMatrix,mat4 viewMatrix,mat4 projMatrix,float ior,float thickness,vec3 attenuationColor,float attenuationDistance){vec3 transmissionRay=getVolumeTransmissionRay(n,v,thickness,ior,modelMatrix);vec3 refractedRayExit=position+transmissionRay;vec4 ndcPos=projMatrix*viewMatrix*vec4(refractedRayExit,1.0);vec2 refractionCoords=ndcPos.xy/ndcPos.w;refractionCoords+=1.0;refractionCoords/=2.0;vec4 transmittedLight=getTransmissionSample(refractionCoords,roughness,ior);vec3 attenuatedColor=applyVolumeAttenuation(transmittedLight.rgb,length(transmissionRay),attenuationColor,attenuationDistance);vec3 F=EnvironmentBRDF(n,v,specularColor,specularF90,roughness);return vec4((1.0-F)*attenuatedColor*diffuseColor,transmittedLight.a);}\n#endif",uv_pars_fragment:"#if (defined(USE_UV)&&!defined(UVS_VERTEX_ONLY))\nvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n#ifdef UVS_VERTEX_ONLY\nvec2 vUv;\n#else\nvarying vec2 vUv;\n#endif\nuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\nvUv=(uvTransform*vec3(uv,1)).xy;\n#endif",uv2_pars_fragment:"#if defined(USE_LIGHTMAP)||defined(USE_AOMAP)\nvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined(USE_LIGHTMAP)||defined(USE_AOMAP)\nattribute vec2 uv2;varying vec2 vUv2;uniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined(USE_LIGHTMAP)||defined(USE_AOMAP)\nvUv2=(uv2Transform*vec3(uv2,1)).xy;\n#endif",worldpos_vertex:"#if defined(USE_ENVMAP)||defined(DISTANCE)||defined(USE_SHADOWMAP)||defined(USE_TRANSMISSION)\nvec4 worldPosition=vec4(transformed,1.0);\n#ifdef USE_INSTANCING\nworldPosition=instanceMatrix*worldPosition;\n#endif\nworldPosition=modelMatrix*worldPosition;\n#endif",background_vert:"varying vec2 vUv;uniform mat3 uvTransform;void main(){vUv=(uvTransform*vec3(uv,1)).xy;gl_Position=vec4(position.xy,1.0,1.0);}",background_frag:"uniform sampler2D t2D;varying vec2 vUv;void main(){vec4 texColor=texture2D(t2D,vUv);gl_FragColor=mapTexelToLinear(texColor);\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main(){vWorldDirection=transformDirection(position,modelMatrix);\n#include <begin_vertex>\n#include <project_vertex>\ngl_Position.z=gl_Position.w;}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;varying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main(){vec3 vReflect=vWorldDirection;\n#include <envmap_fragment>\ngl_FragColor=envColor;gl_FragColor.a*=opacity;\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;void main(){\n#include <uv_vertex>\n#include <skinbase_vertex>\n#ifdef USE_DISPLACEMENTMAP\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinnormal_vertex>\n#endif\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\nvHighPrecisionZW=gl_Position.zw;}",depth_frag:"#if DEPTH_PACKING==3200\nuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;void main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(1.0);\n#if DEPTH_PACKING==3200\ndiffuseColor.a=opacity;\n#endif\n#include <map_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <logdepthbuf_fragment>\nfloat fragCoordZ=0.5*vHighPrecisionZW[0]/vHighPrecisionZW[1]+0.5;\n#if DEPTH_PACKING==3200\ngl_FragColor=vec4(vec3(1.0-fragCoordZ),opacity);\n#elif DEPTH_PACKING==3201\ngl_FragColor=packDepthToRGBA(fragCoordZ);\n#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <skinbase_vertex>\n#ifdef USE_DISPLACEMENTMAP\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinnormal_vertex>\n#endif\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <worldpos_vertex>\n#include <clipping_planes_vertex>\nvWorldPosition=worldPosition.xyz;}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;uniform float nearDistance;uniform float farDistance;varying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(1.0);\n#include <map_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\nfloat dist=length(vWorldPosition-referencePosition);dist=(dist-nearDistance)/(farDistance-nearDistance);dist=saturate(dist);gl_FragColor=packDepthToRGBA(dist);}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main(){vWorldDirection=transformDirection(position,modelMatrix);\n#include <begin_vertex>\n#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;varying vec3 vWorldDirection;\n#include <common>\nvoid main(){vec3 direction=normalize(vWorldDirection);vec2 sampleUV=equirectUv(direction);vec4 texColor=texture2D(tEquirect,sampleUV);gl_FragColor=mapTexelToLinear(texColor);\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;attribute float lineDistance;varying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){vLineDistance=scale*lineDistance;\n#include <color_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;uniform float opacity;uniform float dashSize;uniform float totalSize;varying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nif(mod(vLineDistance,totalSize)>dashSize){discard;}vec3 outgoingLight=vec3(0.0);vec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <color_fragment>\noutgoingLight=diffuseColor.rgb;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#if defined(USE_ENVMAP)||defined(USE_SKINNING)\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#endif\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <worldpos_vertex>\n#include <envmap_vertex>\n#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;uniform float opacity;\n#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <specularmap_fragment>\nReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));\n#ifdef USE_LIGHTMAP\nvec4 lightMapTexel=texture2D(lightMap,vUv2);reflectedLight.indirectDiffuse+=lightMapTexelToLinear(lightMapTexel).rgb*lightMapIntensity;\n#else\nreflectedLight.indirectDiffuse+=vec3(1.0);\n#endif\n#include <aomap_fragment>\nreflectedLight.indirectDiffuse*=diffuseColor.rgb;vec3 outgoingLight=reflectedLight.indirectDiffuse;\n#include <envmap_fragment>\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;varying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <worldpos_vertex>\n#include <envmap_vertex>\n#include <lights_lambert_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;uniform vec3 emissive;uniform float opacity;varying vec3 vLightFront;varying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <specularmap_fragment>\n#include <emissivemap_fragment>\n#ifdef DOUBLE_SIDED\nreflectedLight.indirectDiffuse+=(gl_FrontFacing)?vIndirectFront:vIndirectBack;\n#else\nreflectedLight.indirectDiffuse+=vIndirectFront;\n#endif\n#include <lightmap_fragment>\nreflectedLight.indirectDiffuse*=BRDF_Lambert(diffuseColor.rgb);\n#ifdef DOUBLE_SIDED\nreflectedLight.directDiffuse=(gl_FrontFacing)?vLightFront:vLightBack;\n#else\nreflectedLight.directDiffuse=vLightFront;\n#endif\nreflectedLight.directDiffuse*=BRDF_Lambert(diffuseColor.rgb)*getShadowMask();\n#include <aomap_fragment>\nvec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+totalEmissiveRadiance;\n#include <envmap_fragment>\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <color_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <fog_vertex>\nvViewPosition=-mvPosition.xyz;}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;uniform float opacity;uniform sampler2D matcap;varying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\nvec3 viewDir=normalize(vViewPosition);vec3 x=normalize(vec3(viewDir.z,0.0,-viewDir.x));vec3 y=cross(viewDir,x);vec2 uv=vec2(dot(x,normal),dot(y,normal))*0.495+0.5;\n#ifdef USE_MATCAP\nvec4 matcapColor=texture2D(matcap,uv);matcapColor=matcapTexelToLinear(matcapColor);\n#else\nvec4 matcapColor=vec4(1.0);\n#endif\nvec3 outgoingLight=diffuseColor.rgb*matcapColor.rgb;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined(FLAT_SHADED)||defined(USE_BUMPMAP)||defined(TANGENTSPACE_NORMALMAP)\nvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#if defined(FLAT_SHADED)||defined(USE_BUMPMAP)||defined(TANGENTSPACE_NORMALMAP)\nvViewPosition=-mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined(FLAT_SHADED)||defined(USE_BUMPMAP)||defined(TANGENTSPACE_NORMALMAP)\nvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\n#include <logdepthbuf_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\ngl_FragColor=vec4(packNormalToRGB(normal),opacity);}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <worldpos_vertex>\n#include <envmap_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;uniform vec3 emissive;uniform vec3 specular;uniform float shininess;uniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <specularmap_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_phong_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular+totalEmissiveRadiance;\n#include <envmap_fragment>\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\nvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <worldpos_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n#ifdef USE_TRANSMISSION\nvWorldPosition=worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n#define IOR\n#define SPECULAR\n#endif\nuniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;\n#ifdef IOR\nuniform float ior;\n#endif\n#ifdef SPECULAR\nuniform float specularIntensity;uniform vec3 specularColor;\n#ifdef USE_SPECULARINTENSITYMAP\nuniform sampler2D specularIntensityMap;\n#endif\n#ifdef USE_SPECULARCOLORMAP\nuniform sampler2D specularColorMap;\n#endif\n#endif\n#ifdef USE_CLEARCOAT\nuniform float clearcoat;uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\nuniform vec3 sheenColor;uniform float sheenRoughness;\n#ifdef USE_SHEENCOLORMAP\nuniform sampler2D sheenColorMap;\n#endif\n#ifdef USE_SHEENROUGHNESSMAP\nuniform sampler2D sheenRoughnessMap;\n#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <roughnessmap_fragment>\n#include <metalnessmap_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <clearcoat_normal_fragment_begin>\n#include <clearcoat_normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_physical_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 totalDiffuse=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse;vec3 totalSpecular=reflectedLight.directSpecular+reflectedLight.indirectSpecular;\n#include <transmission_fragment>\nvec3 outgoingLight=totalDiffuse+totalSpecular+totalEmissiveRadiance;\n#ifdef USE_CLEARCOAT\nfloat dotNVcc=saturate(dot(geometry.clearcoatNormal,geometry.viewDir));vec3 Fcc=F_Schlick(material.clearcoatF0,material.clearcoatF90,dotNVcc);outgoingLight=outgoingLight*(1.0-material.clearcoat*Fcc)+clearcoatSpecular*material.clearcoat;\n#endif\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <worldpos_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;uniform vec3 emissive;uniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_toon_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+totalEmissiveRadiance;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",points_vert:"uniform float size;uniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <color_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <project_vertex>\ngl_PointSize=size;\n#ifdef USE_SIZEATTENUATION\nbool isPerspective=isPerspectiveMatrix(projectionMatrix);if(isPerspective)gl_PointSize*=(scale/-mvPosition.z);\n#endif\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <worldpos_vertex>\n#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;uniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec3 outgoingLight=vec3(0.0);vec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <map_particle_fragment>\n#include <color_fragment>\n#include <alphatest_fragment>\noutgoingLight=diffuseColor.rgb;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main(){\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\n#include <worldpos_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;uniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main(){gl_FragColor=vec4(color,opacity*(1.0-getShadowMask()));\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;uniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\nvec4 mvPosition=modelViewMatrix*vec4(0.0,0.0,0.0,1.0);vec2 scale;scale.x=length(vec3(modelMatrix[0].x,modelMatrix[0].y,modelMatrix[0].z));scale.y=length(vec3(modelMatrix[1].x,modelMatrix[1].y,modelMatrix[1].z));\n#ifndef USE_SIZEATTENUATION\nbool isPerspective=isPerspectiveMatrix(projectionMatrix);if(isPerspective)scale*=-mvPosition.z;\n#endif\nvec2 alignedPosition=(position.xy-(center-vec2(0.5)))*scale;vec2 rotatedPosition;rotatedPosition.x=cos(rotation)*alignedPosition.x-sin(rotation)*alignedPosition.y;rotatedPosition.y=sin(rotation)*alignedPosition.x+cos(rotation)*alignedPosition.y;mvPosition.xy+=rotatedPosition;gl_Position=projectionMatrix*mvPosition;\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;uniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec3 outgoingLight=vec3(0.0);vec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\noutgoingLight=diffuseColor.rgb;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n}"}},1306:(e,n,i)=>{i.d(n,{Z:()=>a});const a="void main(){gl_FragColor=vec4(1.0,0.0,0.0,1.0);}"},5880:(e,n,i)=>{i.d(n,{Z:()=>a});const a="void main(){gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}"},5967:(e,n,i)=>{i.d(n,{V:()=>s});var a=i(5567),r=i(6682),t=i(1138),o=i(6881),l=i(3935),c=i(3662),d=i(1273);const s={basic:{uniforms:(0,r.Rh)([l.r.common,l.r.specularmap,l.r.envmap,l.r.aomap,l.r.lightmap,l.r.fog]),vertexShader:a.W.meshbasic_vert,fragmentShader:a.W.meshbasic_frag},lambert:{uniforms:(0,r.Rh)([l.r.common,l.r.specularmap,l.r.envmap,l.r.aomap,l.r.lightmap,l.r.emissivemap,l.r.fog,l.r.lights,{emissive:{value:new c.I(0)}}]),vertexShader:a.W.meshlambert_vert,fragmentShader:a.W.meshlambert_frag},phong:{uniforms:(0,r.Rh)([l.r.common,l.r.specularmap,l.r.envmap,l.r.aomap,l.r.lightmap,l.r.emissivemap,l.r.bumpmap,l.r.normalmap,l.r.displacementmap,l.r.fog,l.r.lights,{emissive:{value:new c.I(0)},specular:{value:new c.I(1118481)},shininess:{value:30}}]),vertexShader:a.W.meshphong_vert,fragmentShader:a.W.meshphong_frag},standard:{uniforms:(0,r.Rh)([l.r.common,l.r.envmap,l.r.aomap,l.r.lightmap,l.r.emissivemap,l.r.bumpmap,l.r.normalmap,l.r.displacementmap,l.r.roughnessmap,l.r.metalnessmap,l.r.fog,l.r.lights,{emissive:{value:new c.I(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:a.W.meshphysical_vert,fragmentShader:a.W.meshphysical_frag},toon:{uniforms:(0,r.Rh)([l.r.common,l.r.aomap,l.r.lightmap,l.r.emissivemap,l.r.bumpmap,l.r.normalmap,l.r.displacementmap,l.r.gradientmap,l.r.fog,l.r.lights,{emissive:{value:new c.I(0)}}]),vertexShader:a.W.meshtoon_vert,fragmentShader:a.W.meshtoon_frag},matcap:{uniforms:(0,r.Rh)([l.r.common,l.r.bumpmap,l.r.normalmap,l.r.displacementmap,l.r.fog,{matcap:{value:null}}]),vertexShader:a.W.meshmatcap_vert,fragmentShader:a.W.meshmatcap_frag},points:{uniforms:(0,r.Rh)([l.r.points,l.r.fog]),vertexShader:a.W.points_vert,fragmentShader:a.W.points_frag},dashed:{uniforms:(0,r.Rh)([l.r.common,l.r.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:a.W.linedashed_vert,fragmentShader:a.W.linedashed_frag},depth:{uniforms:(0,r.Rh)([l.r.common,l.r.displacementmap]),vertexShader:a.W.depth_vert,fragmentShader:a.W.depth_frag},normal:{uniforms:(0,r.Rh)([l.r.common,l.r.bumpmap,l.r.normalmap,l.r.displacementmap,{opacity:{value:1}}]),vertexShader:a.W.meshnormal_vert,fragmentShader:a.W.meshnormal_frag},sprite:{uniforms:(0,r.Rh)([l.r.sprite,l.r.fog]),vertexShader:a.W.sprite_vert,fragmentShader:a.W.sprite_frag},background:{uniforms:{uvTransform:{value:new d.V},t2D:{value:null}},vertexShader:a.W.background_vert,fragmentShader:a.W.background_frag},cube:{uniforms:(0,r.Rh)([l.r.envmap,{opacity:{value:1}}]),vertexShader:a.W.cube_vert,fragmentShader:a.W.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:a.W.equirect_vert,fragmentShader:a.W.equirect_frag},distanceRGBA:{uniforms:(0,r.Rh)([l.r.common,l.r.displacementmap,{referencePosition:{value:new o.P},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:a.W.distanceRGBA_vert,fragmentShader:a.W.distanceRGBA_frag},shadow:{uniforms:(0,r.Rh)([l.r.lights,l.r.fog,{color:{value:new c.I(0)},opacity:{value:1}}]),vertexShader:a.W.shadow_vert,fragmentShader:a.W.shadow_frag}};s.physical={uniforms:(0,r.Rh)([s.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new t.F(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new c.I(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new t.F},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new c.I(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new c.I(1,1,1)},specularColorMap:{value:null}}]),vertexShader:a.W.meshphysical_vert,fragmentShader:a.W.meshphysical_frag}},8557:(e,n,i)=>{i.d(n,{u:()=>a,D:()=>r});const a="void main(){gl_Position=vec4(position,1.0);}",r="uniform sampler2D shadow_pass;uniform vec2 resolution;uniform float radius;\n#include <packing>\nvoid main(){const float samples=float(VSM_SAMPLES);float mean=0.0;float squared_mean=0.0;float uvStride=samples<=1.0?0.0:2.0/(samples-1.0);float uvStart=samples<=1.0?0.0:-1.0;for(float i=0.0;i<samples;i++){float uvOffset=uvStart+i*uvStride;\n#ifdef HORIZONTAL_PASS\nvec2 distribution=unpackRGBATo2Half(texture2D(shadow_pass,(gl_FragCoord.xy+vec2(uvOffset,0.0)*radius)/resolution));mean+=distribution.x;squared_mean+=distribution.y*distribution.y+distribution.x*distribution.x;\n#else\nfloat depth=unpackRGBAToDepth(texture2D(shadow_pass,(gl_FragCoord.xy+vec2(0.0,uvOffset)*radius)/resolution));mean+=depth;squared_mean+=depth*depth;\n#endif\n}mean=mean/samples;squared_mean=squared_mean/samples;float std_dev=sqrt(squared_mean-mean*mean);gl_FragColor=pack2HalfToRGBA(vec2(mean,std_dev));}"},3935:(e,n,i)=>{i.d(n,{r:()=>o});var a=i(3662),r=i(1138),t=i(1273);const o={common:{diffuse:{value:new a.I(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new t.V},uv2Transform:{value:new t.V},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new r.F(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new a.I(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new a.I(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new t.V}},sprite:{diffuse:{value:new a.I(16777215)},opacity:{value:1},center:{value:new r.F(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new t.V}}}},6682:(e,n,i)=>{function a(e){const n={};for(const i in e){n[i]={};for(const a in e[i]){const r=e[i][a];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?n[i][a]=r.clone():Array.isArray(r)?n[i][a]=r.slice():n[i][a]=r}}return n}function r(e){const n={};for(let i=0;i<e.length;i++){const r=a(e[i]);for(const e in r)n[e]=r[e]}return n}i.d(n,{dw:()=>a,Rh:()=>r,rD:()=>t});const t={clone:a,merge:r}}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[551],{2304:(e,t,a)=>{function r(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,a,r){switch(t.calls++,a){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a)}}}}a.d(t,{I:()=>r})},2504:(e,t,a)=>{a.d(t,{J:()=>n});var r=a(1661);function n(e){function t(t,a){t.opacity.value=a.opacity,a.color&&t.diffuse.value.copy(a.color),a.emissive&&t.emissive.value.copy(a.emissive).multiplyScalar(a.emissiveIntensity),a.map&&(t.map.value=a.map),a.alphaMap&&(t.alphaMap.value=a.alphaMap),a.specularMap&&(t.specularMap.value=a.specularMap),a.alphaTest>0&&(t.alphaTest.value=a.alphaTest);const r=e.get(a).envMap;let n,i;r&&(t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,t.reflectivity.value=a.reflectivity,t.ior.value=a.ior,t.refractionRatio.value=a.refractionRatio),a.lightMap&&(t.lightMap.value=a.lightMap,t.lightMapIntensity.value=a.lightMapIntensity),a.aoMap&&(t.aoMap.value=a.aoMap,t.aoMapIntensity.value=a.aoMapIntensity),a.map?n=a.map:a.specularMap?n=a.specularMap:a.displacementMap?n=a.displacementMap:a.normalMap?n=a.normalMap:a.bumpMap?n=a.bumpMap:a.roughnessMap?n=a.roughnessMap:a.metalnessMap?n=a.metalnessMap:a.alphaMap?n=a.alphaMap:a.emissiveMap?n=a.emissiveMap:a.clearcoatMap?n=a.clearcoatMap:a.clearcoatNormalMap?n=a.clearcoatNormalMap:a.clearcoatRoughnessMap?n=a.clearcoatRoughnessMap:a.specularIntensityMap?n=a.specularIntensityMap:a.specularColorMap?n=a.specularColorMap:a.transmissionMap?n=a.transmissionMap:a.thicknessMap?n=a.thicknessMap:a.sheenColorMap?n=a.sheenColorMap:a.sheenRoughnessMap&&(n=a.sheenRoughnessMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix)),a.aoMap?i=a.aoMap:a.lightMap&&(i=a.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function a(t,a){t.roughness.value=a.roughness,t.metalness.value=a.metalness,a.roughnessMap&&(t.roughnessMap.value=a.roughnessMap),a.metalnessMap&&(t.metalnessMap.value=a.metalnessMap),a.emissiveMap&&(t.emissiveMap.value=a.emissiveMap),a.bumpMap&&(t.bumpMap.value=a.bumpMap,t.bumpScale.value=a.bumpScale,a.side===r._Li&&(t.bumpScale.value*=-1)),a.normalMap&&(t.normalMap.value=a.normalMap,t.normalScale.value.copy(a.normalScale),a.side===r._Li&&t.normalScale.value.negate()),a.displacementMap&&(t.displacementMap.value=a.displacementMap,t.displacementScale.value=a.displacementScale,t.displacementBias.value=a.displacementBias);e.get(a).envMap&&(t.envMapIntensity.value=a.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,n,i,o,s){n.isMeshBasicMaterial?t(e,n):n.isMeshLambertMaterial?(t(e,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,n)):n.isMeshToonMaterial?(t(e,n),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===r._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===r._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshPhongMaterial?(t(e,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===r._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===r._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshStandardMaterial?(t(e,n),n.isMeshPhysicalMaterial?function(e,t,n){a(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===r._Li&&e.clearcoatNormalScale.value.negate()));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,n,s):a(e,n)):n.isMeshMatcapMaterial?(t(e,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===r._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===r._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDepthMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDistanceMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,n)):n.isMeshNormalMaterial?(t(e,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===r._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===r._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,n)):n.isPointsMaterial?function(e,t,a,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*a,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,n,i,o):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let a;t.map?a=t.map:t.alphaMap&&(a=t.alphaMap);void 0!==a&&(!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uvTransform.value.copy(a.matrix))}(e,n):n.isShadowMaterial?(e.color.value.copy(n.color),e.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}},6738:(e,t,a)=>{a.d(t,{i:()=>c});var r=a(1661),n=a(5491),i=a(6881),o=a(1138);function s(e,t){return e[0]-t[0]}function l(e,t){return Math.abs(t[1])-Math.abs(e[1])}function u(e,t){let a=1;const r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?a=127:r instanceof Int16Array?a=32767:r instanceof Int32Array?a=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(a)}function c(e,t,a){const c={},p=new Float32Array(8),d=new WeakMap,f=new i.P,h=[];for(let e=0;e<8;e++)h[e]=[e,0];return{update:function(i,m,g,M){const b=i.morphTargetInfluences;if(!0===t.isWebGL2){const i=m.morphAttributes.position.length;let s=d.get(m);if(void 0===s||s.count!==i){void 0!==s&&s.texture.dispose();const e=void 0!==m.morphAttributes.normal,a=m.morphAttributes.position,l=m.morphAttributes.normal||[],c=!0===e?2:1;let p=m.attributes.position.count*c,h=1;p>t.maxTextureSize&&(h=Math.ceil(p/t.maxTextureSize),p=t.maxTextureSize);const g=new Float32Array(p*h*4*i),M=new n.C(g,p,h,i);M.format=r.wk1,M.type=r.VzW;const b=4*c;for(let t=0;t<i;t++){const r=a[t],n=l[t],i=p*h*4*t;for(let t=0;t<r.count;t++){f.fromBufferAttribute(r,t),!0===r.normalized&&u(f,r);const a=t*b;g[i+a+0]=f.x,g[i+a+1]=f.y,g[i+a+2]=f.z,g[i+a+3]=0,!0===e&&(f.fromBufferAttribute(n,t),!0===n.normalized&&u(f,n),g[i+a+4]=f.x,g[i+a+5]=f.y,g[i+a+6]=f.z,g[i+a+7]=0)}}s={count:i,texture:M,size:new o.F(p,h)},d.set(m,s)}let l=0;for(let e=0;e<b.length;e++)l+=b[e];const c=m.morphTargetsRelative?1:1-l;M.getUniforms().setValue(e,"morphTargetBaseInfluence",c),M.getUniforms().setValue(e,"morphTargetInfluences",b),M.getUniforms().setValue(e,"morphTargetsTexture",s.texture,a),M.getUniforms().setValue(e,"morphTargetsTextureSize",s.size)}else{const t=void 0===b?0:b.length;let a=c[m.id];if(void 0===a||a.length!==t){a=[];for(let e=0;e<t;e++)a[e]=[e,0];c[m.id]=a}for(let e=0;e<t;e++){const t=a[e];t[0]=e,t[1]=b[e]}a.sort(l);for(let e=0;e<8;e++)e<t&&a[e][1]?(h[e][0]=a[e][0],h[e][1]=a[e][1]):(h[e][0]=Number.MAX_SAFE_INTEGER,h[e][1]=0);h.sort(s);const r=m.morphAttributes.position,n=m.morphAttributes.normal;let i=0;for(let e=0;e<8;e++){const t=h[e],a=t[0],o=t[1];a!==Number.MAX_SAFE_INTEGER&&o?(r&&m.getAttribute("morphTarget"+e)!==r[a]&&m.setAttribute("morphTarget"+e,r[a]),n&&m.getAttribute("morphNormal"+e)!==n[a]&&m.setAttribute("morphNormal"+e,n[a]),p[e]=o,i+=o):(r&&!0===m.hasAttribute("morphTarget"+e)&&m.deleteAttribute("morphTarget"+e),n&&!0===m.hasAttribute("morphNormal"+e)&&m.deleteAttribute("morphNormal"+e),p[e]=0)}const o=m.morphTargetsRelative?1:1-i;M.getUniforms().setValue(e,"morphTargetBaseInfluence",o),M.getUniforms().setValue(e,"morphTargetInfluences",p)}}}}},4469:(e,t,a)=>{function r(e,t,a,r){let n=new WeakMap;function i(e){const t=e.target;t.removeEventListener("dispose",i),a.remove(t.instanceMatrix),null!==t.instanceColor&&a.remove(t.instanceColor)}return{update:function(e){const o=r.render.frame,s=e.geometry,l=t.get(e,s);return n.get(l)!==o&&(t.update(l),n.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",i)&&e.addEventListener("dispose",i),a.update(e.instanceMatrix,34962),null!==e.instanceColor&&a.update(e.instanceColor,34962)),l},dispose:function(){n=new WeakMap}}}a.d(t,{E:()=>r})},5502:(e,t,a)=>{a.d(t,{Z:()=>R});var r=a(1661),n=a(1895);function i(e,t,a){const r=e.createShader(t);return e.shaderSource(r,a),e.compileShader(r),r}var o=a(5567);let s=0;function l(e){switch(e){case r.rnI:return["Linear","( value )"];case r.knz:return["sRGB","( value )"];case r.KC9:return["RGBE","( value )"];case r.LgE:return["RGBM","( value, 7.0 )"];case r.Inb:return["RGBM","( value, 16.0 )"];case r.gMp:return["RGBD","( value, 256.0 )"];case r.pMV:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function u(e,t,a){const r=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();return r&&""===n?"":a.toUpperCase()+"\n\n"+n+"\n\n"+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function c(e,t){const a=l(t);return"vec4 "+e+"( vec4 value ) { return "+a[0]+"ToLinear"+a[1]+"; }"}function p(e,t){const a=l(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function d(e,t){let a;switch(t){case r.EoG:a="Linear";break;case r.CdI:a="Reinhard";break;case r.YGz:a="OptimizedCineon";break;case r.LY2:a="ACESFilmic";break;case r.dZ3:a="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),a="Linear"}return"vec3 "+e+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function f(e){return""!==e}function h(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function m(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const g=/^[ \t]*#include +<([\w\d./]+)>/gm;function M(e){return e.replace(g,b)}function b(e,t){const a=o.W[t];if(void 0===a)throw new Error("Can not resolve #include <"+t+">");return M(a)}const S=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,T=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function x(e){return e.replace(T,_).replace(S,v)}function v(e,t,a,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),_(e,t,a,r)}function _(e,t,a,r){let n="";for(let e=parseInt(t);e<parseInt(a);e++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return n}function E(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function w(e,t,a,l){const g=e.getContext(),b=a.defines;let S=a.vertexShader,T=a.fragmentShader;const v=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===r._iA?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===r.ntZ?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===r.dwk&&(t="SHADOWMAP_TYPE_VSM"),t}(a),_=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case r.fY$:case r.vxC:t="ENVMAP_TYPE_CUBE";break;case r.g8_:case r.SVc:t="ENVMAP_TYPE_CUBE_UV"}return t}(a),w=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case r.vxC:case r.SVc:t="ENVMAP_MODE_REFRACTION"}return t}(a),L=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case r.Ns1:t="ENVMAP_BLENDING_MULTIPLY";break;case r.qhX:t="ENVMAP_BLENDING_MIX";break;case r.NDo:t="ENVMAP_BLENDING_ADD"}return t}(a),A=e.gammaFactor>0?e.gammaFactor:1,y=a.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(f).join("\n")}(a),R=function(e){const t=[];for(const a in e){const r=e[a];!1!==r&&t.push("#define "+a+" "+r)}return t.join("\n")}(b),P=g.createProgram();let C,D,F=a.glslVersion?"#version "+a.glslVersion+"\n":"";a.isRawShaderMaterial?(C=[R].filter(f).join("\n"),C.length>0&&(C+="\n"),D=[y,R].filter(f).join("\n"),D.length>0&&(D+="\n")):(C=[E(a),"#define SHADER_NAME "+a.shaderName,R,a.instancing?"#define USE_INSTANCING":"",a.instancingColor?"#define USE_INSTANCING_COLOR":"",a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+A,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+w:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.morphTargets&&a.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",a.morphTargets&&a.isWebGL2?"#define MORPHTARGETS_COUNT "+a.morphTargetsCount:"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+v:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(f).join("\n"),D=[y,E(a),"#define SHADER_NAME "+a.shaderName,R,"#define GAMMA_FACTOR "+A,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+_:"",a.envMap?"#define "+w:"",a.envMap?"#define "+L:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoat?"#define USE_CLEARCOAT":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.alphaTest?"#define USE_ALPHATEST":"",a.sheen?"#define USE_SHEEN":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors||a.instancingColor?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+v:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(a.extensionShaderTextureLOD||a.envMap)&&a.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",a.toneMapping!==r.uL9?"#define TONE_MAPPING":"",a.toneMapping!==r.uL9?o.W.tonemapping_pars_fragment:"",a.toneMapping!==r.uL9?d("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.format===r.UCm?"#define OPAQUE":"",o.W.encodings_pars_fragment,a.map?c("mapTexelToLinear",a.mapEncoding):"",a.matcap?c("matcapTexelToLinear",a.matcapEncoding):"",a.envMap?c("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMap?c("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.specularColorMap?c("specularColorMapTexelToLinear",a.specularColorMapEncoding):"",a.sheenColorMap?c("sheenColorMapTexelToLinear",a.sheenColorMapEncoding):"",a.lightMap?c("lightMapTexelToLinear",a.lightMapEncoding):"",p("linearToOutputTexel",a.outputEncoding),a.depthPacking?"#define DEPTH_PACKING "+a.depthPacking:"","\n"].filter(f).join("\n")),S=M(S),S=h(S,a),S=m(S,a),T=M(T),T=h(T,a),T=m(T,a),S=x(S),T=x(T),a.isWebGL2&&!0!==a.isRawShaderMaterial&&(F="#version 300 es\n",C=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+C,D=["#define varying in",a.glslVersion===r.LSk?"":"out highp vec4 pc_fragColor;",a.glslVersion===r.LSk?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+D);const I=F+D+T,U=i(g,35633,F+C+S),N=i(g,35632,I);if(g.attachShader(P,U),g.attachShader(P,N),void 0!==a.index0AttributeName?g.bindAttribLocation(P,0,a.index0AttributeName):!0===a.morphTargets&&g.bindAttribLocation(P,0,"position"),g.linkProgram(P),e.debug.checkShaderErrors){const e=g.getProgramInfoLog(P).trim(),t=g.getShaderInfoLog(U).trim(),a=g.getShaderInfoLog(N).trim();let r=!0,n=!0;if(!1===g.getProgramParameter(P,35714)){r=!1;const t=u(g,U,"vertex"),a=u(g,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+g.getError()+" - VALIDATE_STATUS "+g.getProgramParameter(P,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+a)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==a||(n=!1);n&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:C},fragmentShader:{log:a,prefix:D}})}let O,G;return g.deleteShader(U),g.deleteShader(N),this.getUniforms=function(){return void 0===O&&(O=new n.y(g,P)),O},this.getAttributes=function(){return void 0===G&&(G=function(e,t){const a={},r=e.getProgramParameter(t,35721);for(let n=0;n<r;n++){const r=e.getActiveAttrib(t,n),i=r.name;let o=1;35674===r.type&&(o=2),35675===r.type&&(o=3),35676===r.type&&(o=4),a[i]={type:r.type,location:e.getAttribLocation(t,i),locationSize:o}}return a}(g,P)),G},this.destroy=function(){l.releaseStatesOfProgram(this),g.deleteProgram(P),this.program=void 0},this.name=a.shaderName,this.id=s++,this.cacheKey=t,this.usedTimes=1,this.program=P,this.vertexShader=U,this.fragmentShader=N,this}var L=a(5967),A=a(6682),y=a(392);function R(e,t,a,n,i,o,s){const l=[],u=i.isWebGL2,c=i.logarithmicDepthBuffer,p=i.floatVertexTextures,d=i.maxVertexUniforms,f=i.vertexTextures;let h=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},g=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function M(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=r.rnI,t}return{getParameters:function(o,l,g,b,S){const T=b.fog,x=o.isMeshStandardMaterial?b.environment:null,v=(o.isMeshStandardMaterial?a:t).get(o.envMap||x),_=m[o.type],E=S.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(p)return 1024;{const e=d,a=Math.floor((e-20)/4),r=Math.min(a,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(S):0;let w,A;if(null!==o.precision&&(h=i.getMaxPrecision(o.precision),h!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",h,"instead.")),_){const e=L.V[_];w=e.vertexShader,A=e.fragmentShader}else w=o.vertexShader,A=o.fragmentShader;const y=e.getRenderTarget(),R=o.alphaTest>0,P=o.clearcoat>0;return{isWebGL2:u,shaderID:_,shaderName:o.type,vertexShader:w,fragmentShader:A,defines:o.defines,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:h,instancing:!0===S.isInstancedMesh,instancingColor:!0===S.isInstancedMesh&&null!==S.instanceColor,supportsVertexTextures:f,outputEncoding:null!==y?M(y.texture):e.outputEncoding,map:!!o.map,mapEncoding:M(o.map),matcap:!!o.matcap,matcapEncoding:M(o.matcap),envMap:!!v,envMapMode:v&&v.mapping,envMapEncoding:M(v),envMapCubeUV:!!v&&(v.mapping===r.g8_||v.mapping===r.SVc),lightMap:!!o.lightMap,lightMapEncoding:M(o.lightMap),aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:M(o.emissiveMap),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===r.PA7,tangentSpaceNormalMap:o.normalMapType===r.IOt,clearcoat:P,clearcoatMap:P&&!!o.clearcoatMap,clearcoatRoughnessMap:P&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:P&&!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,specularColorMapEncoding:M(o.specularColorMap),alphaMap:!!o.alphaMap,alphaTest:R,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenColorMapEncoding:M(o.sheenColorMap),sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!S.geometry&&!!S.geometry.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!S.geometry&&!!S.geometry.attributes.color&&4===S.geometry.attributes.color.itemSize,vertexUvs:!!o.map||!!o.bumpMap||!!o.normalMap||!!o.specularMap||!!o.alphaMap||!!o.emissiveMap||!!o.roughnessMap||!!o.metalnessMap||!!o.clearcoatMap||!!o.clearcoatRoughnessMap||!!o.clearcoatNormalMap||!!o.displacementMap||!!o.transmissionMap||!!o.thicknessMap||!!o.specularIntensityMap||!!o.specularColorMap||!!o.sheenColorMap||o.sheenRoughnessMap,uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap||!o.displacementMap),fog:!!T,useFog:o.fog,fogExp2:T&&T.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===S.isSkinnedMesh&&E>0,maxBones:E,useVertexTexture:p,morphTargets:!!S.geometry&&!!S.geometry.morphAttributes.position,morphNormals:!!S.geometry&&!!S.geometry.morphAttributes.normal,morphTargetsCount:S.geometry&&S.geometry.morphAttributes.position?S.geometry.morphAttributes.position.length:0,numDirLights:l.directional.length,numPointLights:l.point.length,numSpotLights:l.spot.length,numRectAreaLights:l.rectArea.length,numHemiLights:l.hemi.length,numDirLightShadows:l.directionalShadowMap.length,numPointLightShadows:l.pointShadowMap.length,numSpotLightShadows:l.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,format:o.format,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&g.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:r.uL9,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===r.ehD,flipSided:o.side===r._Li,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||n.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){const a=[];if(t.shaderID?a.push(t.shaderID):(a.push((0,y.Wu)(t.fragmentShader)),a.push((0,y.Wu)(t.vertexShader))),void 0!==t.defines)for(const e in t.defines)a.push(e),a.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<g.length;e++)a.push(t[g[e]]);a.push(e.outputEncoding),a.push(e.gammaFactor)}return a.push(t.customProgramCacheKey),a.join()},getUniforms:function(e){const t=m[e.type];let a;if(t){const e=L.V[t];a=A.rD.clone(e.uniforms)}else a=e.uniforms;return a},acquireProgram:function(t,a){let r;for(let e=0,t=l.length;e<t;e++){const t=l[e];if(t.cacheKey===a){r=t,++r.usedTimes;break}}return void 0===r&&(r=new w(e,a,t,o),l.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=l.indexOf(e);l[t]=l[l.length-1],l.pop(),e.destroy()}},programs:l}}},7905:(e,t,a)=>{function r(){let e=new WeakMap;return{get:function(t){let a=e.get(t);return void 0===a&&(a={},e.set(t,a)),a},remove:function(t){e.delete(t)},update:function(t,a,r){e.get(t)[a]=r},dispose:function(){e=new WeakMap}}}a.d(t,{Z:()=>r})},6423:(e,t,a)=>{function r(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function n(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function i(e){const t=[];let a=0;const i=[],o=[],s=[],l={id:-1};function u(r,n,i,o,s,u){let c=t[a];const p=e.get(i);return void 0===c?(c={id:r.id,object:r,geometry:n,material:i,program:p.program||l,groupOrder:o,renderOrder:r.renderOrder,z:s,group:u},t[a]=c):(c.id=r.id,c.object=r,c.geometry=n,c.material=i,c.program=p.program||l,c.groupOrder=o,c.renderOrder=r.renderOrder,c.z=s,c.group=u),a++,c}return{opaque:i,transmissive:o,transparent:s,init:function(){a=0,i.length=0,o.length=0,s.length=0},push:function(e,t,a,r,n,l){const c=u(e,t,a,r,n,l);a.transmission>0?o.push(c):!0===a.transparent?s.push(c):i.push(c)},unshift:function(e,t,a,r,n,l){const c=u(e,t,a,r,n,l);a.transmission>0?o.unshift(c):!0===a.transparent?s.unshift(c):i.unshift(c)},finish:function(){for(let e=a,r=t.length;e<r;e++){const a=t[e];if(null===a.id)break;a.id=null,a.object=null,a.geometry=null,a.material=null,a.program=null,a.group=null}},sort:function(e,t){i.length>1&&i.sort(e||r),o.length>1&&o.sort(t||n),s.length>1&&s.sort(t||n)}}}function o(e){let t=new WeakMap;return{get:function(a,r){let n;return!1===t.has(a)?(n=new i(e),t.set(a,[n])):r>=t.get(a).length?(n=new i(e),t.get(a).push(n)):n=t.get(a)[r],n},dispose:function(){t=new WeakMap}}}a.d(t,{M:()=>o})},9801:(e,t,a)=>{a.d(t,{Q:()=>f});var r=a(3662),n=a(9203),i=a(1138),o=a(6881),s=a(3935);function l(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let a;switch(t.type){case"DirectionalLight":a={direction:new o.P,color:new r.I};break;case"SpotLight":a={position:new o.P,direction:new o.P,color:new r.I,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":a={position:new o.P,color:new r.I,distance:0,decay:0};break;case"HemisphereLight":a={direction:new o.P,skyColor:new r.I,groundColor:new r.I};break;case"RectAreaLight":a={color:new r.I,position:new o.P,halfWidth:new o.P,halfHeight:new o.P}}return e[t.id]=a,a}}}let u=0;function c(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function p(e,t){const a=new l,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let a;switch(t.type){case"DirectionalLight":case"SpotLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new i.F};break;case"PointLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new i.F,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=a,a}}}(),p={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)p.probe.push(new o.P);const d=new o.P,f=new n.y,h=new n.y;return{setup:function(n,i){let o=0,l=0,d=0;for(let e=0;e<9;e++)p.probe[e].set(0,0,0);let f=0,h=0,m=0,g=0,M=0,b=0,S=0,T=0;n.sort(c);const x=!0!==i?Math.PI:1;for(let e=0,t=n.length;e<t;e++){const t=n[e],i=t.color,s=t.intensity,u=t.distance,c=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=i.r*s*x,l+=i.g*s*x,d+=i.b*s*x;else if(t.isLightProbe)for(let e=0;e<9;e++)p.probe[e].addScaledVector(t.sh.coefficients[e],s);else if(t.isDirectionalLight){const e=a.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){const e=t.shadow,a=r.get(t);a.shadowBias=e.bias,a.shadowNormalBias=e.normalBias,a.shadowRadius=e.radius,a.shadowMapSize=e.mapSize,p.directionalShadow[f]=a,p.directionalShadowMap[f]=c,p.directionalShadowMatrix[f]=t.shadow.matrix,b++}p.directional[f]=e,f++}else if(t.isSpotLight){const e=a.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(i).multiplyScalar(s*x),e.distance=u,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,a=r.get(t);a.shadowBias=e.bias,a.shadowNormalBias=e.normalBias,a.shadowRadius=e.radius,a.shadowMapSize=e.mapSize,p.spotShadow[m]=a,p.spotShadowMap[m]=c,p.spotShadowMatrix[m]=t.shadow.matrix,T++}p.spot[m]=e,m++}else if(t.isRectAreaLight){const e=a.get(t);e.color.copy(i).multiplyScalar(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),p.rectArea[g]=e,g++}else if(t.isPointLight){const e=a.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,a=r.get(t);a.shadowBias=e.bias,a.shadowNormalBias=e.normalBias,a.shadowRadius=e.radius,a.shadowMapSize=e.mapSize,a.shadowCameraNear=e.camera.near,a.shadowCameraFar=e.camera.far,p.pointShadow[h]=a,p.pointShadowMap[h]=c,p.pointShadowMatrix[h]=t.shadow.matrix,S++}p.point[h]=e,h++}else if(t.isHemisphereLight){const e=a.get(t);e.skyColor.copy(t.color).multiplyScalar(s*x),e.groundColor.copy(t.groundColor).multiplyScalar(s*x),p.hemi[M]=e,M++}}g>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(p.rectAreaLTC1=s.r.LTC_FLOAT_1,p.rectAreaLTC2=s.r.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(p.rectAreaLTC1=s.r.LTC_HALF_1,p.rectAreaLTC2=s.r.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),p.ambient[0]=o,p.ambient[1]=l,p.ambient[2]=d;const v=p.hash;v.directionalLength===f&&v.pointLength===h&&v.spotLength===m&&v.rectAreaLength===g&&v.hemiLength===M&&v.numDirectionalShadows===b&&v.numPointShadows===S&&v.numSpotShadows===T||(p.directional.length=f,p.spot.length=m,p.rectArea.length=g,p.point.length=h,p.hemi.length=M,p.directionalShadow.length=b,p.directionalShadowMap.length=b,p.pointShadow.length=S,p.pointShadowMap.length=S,p.spotShadow.length=T,p.spotShadowMap.length=T,p.directionalShadowMatrix.length=b,p.pointShadowMatrix.length=S,p.spotShadowMatrix.length=T,v.directionalLength=f,v.pointLength=h,v.spotLength=m,v.rectAreaLength=g,v.hemiLength=M,v.numDirectionalShadows=b,v.numPointShadows=S,v.numSpotShadows=T,p.version=u++)},setupView:function(e,t){let a=0,r=0,n=0,i=0,o=0;const s=t.matrixWorldInverse;for(let t=0,l=e.length;t<l;t++){const l=e[t];if(l.isDirectionalLight){const e=p.directional[a];e.direction.setFromMatrixPosition(l.matrixWorld),d.setFromMatrixPosition(l.target.matrixWorld),e.direction.sub(d),e.direction.transformDirection(s),a++}else if(l.isSpotLight){const e=p.spot[n];e.position.setFromMatrixPosition(l.matrixWorld),e.position.applyMatrix4(s),e.direction.setFromMatrixPosition(l.matrixWorld),d.setFromMatrixPosition(l.target.matrixWorld),e.direction.sub(d),e.direction.transformDirection(s),n++}else if(l.isRectAreaLight){const e=p.rectArea[i];e.position.setFromMatrixPosition(l.matrixWorld),e.position.applyMatrix4(s),h.identity(),f.copy(l.matrixWorld),f.premultiply(s),h.extractRotation(f),e.halfWidth.set(.5*l.width,0,0),e.halfHeight.set(0,.5*l.height,0),e.halfWidth.applyMatrix4(h),e.halfHeight.applyMatrix4(h),i++}else if(l.isPointLight){const e=p.point[r];e.position.setFromMatrixPosition(l.matrixWorld),e.position.applyMatrix4(s),r++}else if(l.isHemisphereLight){const e=p.hemi[o];e.direction.setFromMatrixPosition(l.matrixWorld),e.direction.transformDirection(s),e.direction.normalize(),o++}}},state:p}}function d(e,t){const a=new p(e,t),r=[],n=[];return{init:function(){r.length=0,n.length=0},state:{lightsArray:r,shadowsArray:n,lights:a},setupLights:function(e){a.setup(r,e)},setupLightsView:function(e){a.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){n.push(e)}}}function f(e,t){let a=new WeakMap;return{get:function(r,n=0){let i;return!1===a.has(r)?(i=new d(e,t),a.set(r,[i])):n>=a.get(r).length?(i=new d(e,t),a.get(r).push(i)):i=a.get(r)[n],i},dispose:function(){a=new WeakMap}}}},5116:(e,t,a)=>{a.d(t,{c:()=>m});var r=a(1661),n=a(4302),i=a(2114),o=a(7683),s=a(1621),l=a(140),u=a(9046),c=a(6454),p=a(223),d=a(1138),f=a(4698),h=a(8557);function m(e,t,a){let m=new f.i;const g=new d.F,M=new d.F,b=new p.L,S=new i.l({depthPacking:r.mSO}),T=new o.L,x={},v=a.maxTextureSize,_={0:r._Li,1:r.Wl3,2:r.ehD},E=new s.j({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new d.F},radius:{value:4}},vertexShader:h.u,fragmentShader:h.D}),w=E.clone();w.defines.HORIZONTAL_PASS=1;const L=new u.u;L.setAttribute("position",new l.Tl(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new c.K(L,E),y=this;function R(a,r){const n=t.update(A);E.defines.VSM_SAMPLES!==a.blurSamples&&(E.defines.VSM_SAMPLES=a.blurSamples,w.defines.VSM_SAMPLES=a.blurSamples,E.needsUpdate=!0,w.needsUpdate=!0),E.uniforms.shadow_pass.value=a.map.texture,E.uniforms.resolution.value=a.mapSize,E.uniforms.radius.value=a.radius,e.setRenderTarget(a.mapPass),e.clear(),e.renderBufferDirect(r,null,n,E,A,null),w.uniforms.shadow_pass.value=a.mapPass.texture,w.uniforms.resolution.value=a.mapSize,w.uniforms.radius.value=a.radius,e.setRenderTarget(a.map),e.clear(),e.renderBufferDirect(r,null,n,w,A,null)}function P(t,a,n,i,o,s,l){let u=null;const c=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(u=void 0!==c?c:!0===i.isPointLight?T:S,e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=u.uuid,t=n.uuid;let a=x[e];void 0===a&&(a={},x[e]=a);let r=a[t];void 0===r&&(r=u.clone(),a[t]=r),u=r}return u.visible=n.visible,u.wireframe=n.wireframe,l===r.dwk?u.side=null!==n.shadowSide?n.shadowSide:n.side:u.side=null!==n.shadowSide?n.shadowSide:_[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=o,u.farDistance=s),u}function C(a,n,i,o,s){if(!1===a.visible)return;if(a.layers.test(n.layers)&&(a.isMesh||a.isLine||a.isPoints)&&(a.castShadow||a.receiveShadow&&s===r.dwk)&&(!a.frustumCulled||m.intersectsObject(a))){a.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,a.matrixWorld);const r=t.update(a),n=a.material;if(Array.isArray(n)){const t=r.groups;for(let l=0,u=t.length;l<u;l++){const u=t[l],c=n[u.materialIndex];if(c&&c.visible){const t=P(a,0,c,o,i.near,i.far,s);e.renderBufferDirect(i,null,r,t,a,u)}}}else if(n.visible){const t=P(a,0,n,o,i.near,i.far,s);e.renderBufferDirect(i,null,r,t,a,null)}}const l=a.children;for(let e=0,t=l.length;e<t;e++)C(l[e],n,i,o,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=r._iA,this.render=function(t,a,i){if(!1===y.enabled)return;if(!1===y.autoUpdate&&!1===y.needsUpdate)return;if(0===t.length)return;const o=e.getRenderTarget(),s=e.getActiveCubeFace(),l=e.getActiveMipmapLevel(),u=e.state;u.setBlending(r.jFi),u.buffers.color.setClear(1,1,1,1),u.buffers.depth.setTest(!0),u.setScissorTest(!1);for(let o=0,s=t.length;o<s;o++){const s=t[o],l=s.shadow;if(void 0===l){console.warn("THREE.WebGLShadowMap:",s,"has no shadow.");continue}if(!1===l.autoUpdate&&!1===l.needsUpdate)continue;g.copy(l.mapSize);const c=l.getFrameExtents();if(g.multiply(c),M.copy(l.mapSize),(g.x>v||g.y>v)&&(g.x>v&&(M.x=Math.floor(v/c.x),g.x=M.x*c.x,l.mapSize.x=M.x),g.y>v&&(M.y=Math.floor(v/c.y),g.y=M.y*c.y,l.mapSize.y=M.y)),null===l.map&&!l.isPointLightShadow&&this.type===r.dwk){const e={minFilter:r.wem,magFilter:r.wem,format:r.wk1};l.map=new n.d(g.x,g.y,e),l.map.texture.name=s.name+".shadowMap",l.mapPass=new n.d(g.x,g.y,e),l.camera.updateProjectionMatrix()}if(null===l.map){const e={minFilter:r.TyD,magFilter:r.TyD,format:r.wk1};l.map=new n.d(g.x,g.y,e),l.map.texture.name=s.name+".shadowMap",l.camera.updateProjectionMatrix()}e.setRenderTarget(l.map),e.clear();const p=l.getViewportCount();for(let e=0;e<p;e++){const t=l.getViewport(e);b.set(M.x*t.x,M.y*t.y,M.x*t.z,M.y*t.w),u.viewport(b),l.updateMatrices(s,e),m=l.getFrustum(),C(a,i,l.camera,s,this.type)}l.isPointLightShadow||this.type!==r.dwk||R(l,i),l.needsUpdate=!1}y.needsUpdate=!1,e.setRenderTarget(o,s,l)}}},181:(e,t,a)=>{a.d(t,{m:()=>i});var r=a(1661),n=a(223);function i(e,t,a){const i=a.isWebGL2;const o=new function(){let t=!1;const a=new n.L;let r=null;const i=new n.L(0,0,0,0);return{setMask:function(a){r===a||t||(e.colorMask(a,a,a,a),r=a)},setLocked:function(e){t=e},setClear:function(t,r,n,o,s){!0===s&&(t*=o,r*=o,n*=o),a.set(t,r,n,o),!1===i.equals(a)&&(e.clearColor(t,r,n,o),i.copy(a))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){let t=!1,a=null,n=null,i=null;return{setTest:function(e){e?G(2929):W(2929)},setMask:function(r){a===r||t||(e.depthMask(r),a=r)},setFunc:function(t){if(n!==t){if(t)switch(t){case r.BVF:e.depthFunc(512);break;case r.Se2:e.depthFunc(519);break;case r.Zr5:e.depthFunc(513);break;case r.vCF:e.depthFunc(515);break;case r.eD:e.depthFunc(514);break;case r.ksN:e.depthFunc(518);break;case r.w$m:e.depthFunc(516);break;case r.M6v:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);n=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,a=null,n=null,i=null}}},l=new function(){let t=!1,a=null,r=null,n=null,i=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?G(2960):W(2960))},setMask:function(r){a===r||t||(e.stencilMask(r),a=r)},setFunc:function(t,a,o){r===t&&n===a&&i===o||(e.stencilFunc(t,a,o),r=t,n=a,i=o)},setOp:function(t,a,r){o===t&&s===a&&l===r||(e.stencilOp(t,a,r),o=t,s=a,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,a=null,r=null,n=null,i=null,o=null,s=null,l=null,u=null}}};let u={},c={},p=null,d=!1,f=null,h=null,m=null,g=null,M=null,b=null,S=null,T=!1,x=null,v=null,_=null,E=null,w=null;const L=e.getParameter(35661);let A=!1,y=0;const R=e.getParameter(7938);-1!==R.indexOf("WebGL")?(y=parseFloat(/^WebGL (\d)/.exec(R)[1]),A=y>=1):-1!==R.indexOf("OpenGL ES")&&(y=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),A=y>=2);let P=null,C={};const D=e.getParameter(3088),F=e.getParameter(2978),I=(new n.L).fromArray(D),U=(new n.L).fromArray(F);function N(t,a,r){const n=new Uint8Array(4),i=e.createTexture();e.bindTexture(t,i),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(a+t,0,6408,1,1,0,6408,5121,n);return i}const O={};function G(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function W(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}O[3553]=N(3553,3553,1),O[34067]=N(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),l.setClear(0),G(2929),s.setFunc(r.vCF),V(!1),z(r.tm_),G(2884),H(r.jFi);const B={[r.bGH]:32774,[r.Wbm]:32778,[r.rOj]:32779};if(i)B[r.r_]=32775,B[r.Sm8]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(B[r.r_]=e.MIN_EXT,B[r.Sm8]=e.MAX_EXT)}const k={[r.c8b]:0,[r.ghN]:1,[r.KhW]:768,[r.k74]:770,[r.RlZ]:776,[r.Vdb]:774,[r.fSK]:772,[r.iWC]:769,[r.LgZ]:771,[r.Wpd]:775,[r.Hy8]:773};function H(t,a,n,i,o,s,l,u){if(t!==r.jFi){if(!1===d&&(G(3042),d=!0),t===r.Xaj)o=o||a,s=s||n,l=l||i,a===h&&o===M||(e.blendEquationSeparate(B[a],B[o]),h=a,M=o),n===m&&i===g&&s===b&&l===S||(e.blendFuncSeparate(k[n],k[i],k[s],k[l]),m=n,g=i,b=s,S=l),f=t,T=null;else if(t!==f||u!==T){if(h===r.bGH&&M===r.bGH||(e.blendEquation(32774),h=r.bGH,M=r.bGH),u)switch(t){case r.bdR:e.blendFuncSeparate(1,771,1,771);break;case r.WMw:e.blendFunc(1,1);break;case r.N4l:e.blendFuncSeparate(0,0,769,771);break;case r.M5h:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case r.bdR:e.blendFuncSeparate(770,771,1,771);break;case r.WMw:e.blendFunc(770,1);break;case r.N4l:e.blendFunc(0,769);break;case r.M5h:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,b=null,S=null,f=t,T=u}}else!0===d&&(W(3042),d=!1)}function V(t){x!==t&&(t?e.frontFace(2304):e.frontFace(2305),x=t)}function z(t){t!==r.PeU?(G(2884),t!==v&&(t===r.tm_?e.cullFace(1029):t===r.S2y?e.cullFace(1028):e.cullFace(1032))):W(2884),v=t}function X(t,a,r){t?(G(32823),E===a&&w===r||(e.polygonOffset(a,r),E=a,w=r)):W(32823)}function j(t){void 0===t&&(t=33984+L-1),P!==t&&(e.activeTexture(t),P=t)}return{buffers:{color:o,depth:s,stencil:l},enable:G,disable:W,bindFramebuffer:function(t,a){return c[t]!==a&&(e.bindFramebuffer(t,a),c[t]=a,i&&(36009===t&&(c[36160]=a),36160===t&&(c[36009]=a)),!0)},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:H,setMaterial:function(e,t){e.side===r.ehD?W(2884):G(2884);let a=e.side===r._Li;t&&(a=!a),V(a),e.blending===r.bdR&&!1===e.transparent?H(r.jFi):H(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);const n=e.stencilWrite;l.setTest(n),n&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),X(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?G(32926):W(32926)},setFlipSided:V,setCullFace:z,setLineWidth:function(t){t!==_&&(A&&e.lineWidth(t),_=t)},setPolygonOffset:X,setScissorTest:function(e){e?G(3089):W(3089)},activeTexture:j,bindTexture:function(t,a){null===P&&j();let r=C[P];void 0===r&&(r={type:void 0,texture:void 0},C[P]=r),r.type===t&&r.texture===a||(e.bindTexture(t,a||O[t]),r.type=t,r.texture=a)},unbindTexture:function(){const t=C[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===U.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),U.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===i&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},P=null,C={},c={},p=null,d=!1,f=null,h=null,m=null,g=null,M=null,b=null,S=null,T=!1,x=null,v=null,_=null,E=null,w=null,I.set(0,0,e.canvas.width,e.canvas.height),U.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),l.reset()}}}},1643:(e,t,a)=>{a.d(t,{w:()=>o});var r=a(1661),n=a(2043),i=a(392);function o(e,t,a,o,s,l,u){const c=s.isWebGL2,p=s.maxTextures,d=s.maxCubemapSize,f=s.maxTextureSize,h=s.maxSamples,m=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):void 0,g=new WeakMap;let M,b=!1;try{b="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function S(e,t){return b?new OffscreenCanvas(e,t):(0,i.c)("canvas")}function T(e,t,a,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?n.gy:Math.floor,o=r(i*e.width),s=r(i*e.height);void 0===M&&(M=S(o,s));const l=a?S(o,s):M;l.width=o,l.height=s;return l.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function x(e){return n.wt(e.width)&&n.wt(e.height)}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==r.TyD&&e.minFilter!==r.wem}function _(t){e.generateMipmap(t)}function E(a,r,n){if(!1===c)return r;if(null!==a){if(void 0!==e[a])return e[a];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+a+"'")}let i=r;return 6403===r&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===r&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===r&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325!==i&&33326!==i&&34842!==i&&34836!==i||t.get("EXT_color_buffer_float"),i}function w(e){return e===r.TyD||e===r.YLQ||e===r.aH4?9728:9729}function L(t){const a=t.target;a.removeEventListener("dispose",L),function(t){const a=o.get(t);if(void 0===a.__webglInit)return;e.deleteTexture(a.__webglTexture),o.remove(t)}(a),a.isVideoTexture&&g.delete(a),u.memory.textures--}function A(t){const a=t.target;a.removeEventListener("dispose",A),function(t){const a=t.texture,r=o.get(t),n=o.get(a);if(!t)return;void 0!==n.__webglTexture&&(e.deleteTexture(n.__webglTexture),u.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&e.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let t=0,r=a.length;t<r;t++){const r=o.get(a[t]);r.__webglTexture&&(e.deleteTexture(r.__webglTexture),u.memory.textures--),o.remove(a[t])}o.remove(a),o.remove(t)}(a)}let y=0;function R(e,t){const r=o.get(e);if(e.isVideoTexture&&function(e){const t=u.render.frame;g.get(e)!==t&&(g.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){const a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void U(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}a.activeTexture(33984+t),a.bindTexture(3553,r.__webglTexture)}function P(t,n){const i=o.get(t);t.version>0&&i.__version!==t.version?function(t,n,i){if(6!==n.image.length)return;I(t,n),a.activeTexture(33984+i),a.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment),e.pixelStorei(37443,0);const o=n&&(n.isCompressedTexture||n.image[0].isCompressedTexture),s=n.image[0]&&n.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=o||s?s?n.image[e].image:n.image[e]:T(n.image[e],!1,!0,d);const p=x(u[0])||c,f=l.convert(n.format),h=l.convert(n.type),m=E(n.internalFormat,f,h,n.encoding);let g;if(F(34067,n,p),o)for(let e=0;e<6;e++){g=u[e].mipmaps;for(let t=0;t<g.length;t++){const i=g[t];n.format!==r.wk1&&n.format!==r.UCm?null!==f?a.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):a.texImage2D(34069+e,t,m,i.width,i.height,0,f,h,i.data)}}else{g=n.mipmaps;for(let e=0;e<6;e++)if(s){a.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,f,h,u[e].data);for(let t=0;t<g.length;t++){const r=g[t].image[e].image;a.texImage2D(34069+e,t+1,m,r.width,r.height,0,f,h,r.data)}}else{a.texImage2D(34069+e,0,m,f,h,u[e]);for(let t=0;t<g.length;t++){const r=g[t];a.texImage2D(34069+e,t+1,m,f,h,r.image[e])}}}v(n,p)&&_(34067);t.__version=n.version,n.onUpdate&&n.onUpdate(n)}(i,t,n):(a.activeTexture(33984+n),a.bindTexture(34067,i.__webglTexture))}const C={[r.rpg]:10497,[r.uWy]:33071,[r.OoA]:33648},D={[r.TyD]:9728,[r.YLQ]:9984,[r.aH4]:9986,[r.wem]:9729,[r.qyh]:9985,[r.D1R]:9987};function F(a,n,i){if(i?(e.texParameteri(a,10242,C[n.wrapS]),e.texParameteri(a,10243,C[n.wrapT]),32879!==a&&35866!==a||e.texParameteri(a,32882,C[n.wrapR]),e.texParameteri(a,10240,D[n.magFilter]),e.texParameteri(a,10241,D[n.minFilter])):(e.texParameteri(a,10242,33071),e.texParameteri(a,10243,33071),32879!==a&&35866!==a||e.texParameteri(a,32882,33071),n.wrapS===r.uWy&&n.wrapT===r.uWy||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(a,10240,w(n.magFilter)),e.texParameteri(a,10241,w(n.minFilter)),n.minFilter!==r.TyD&&n.minFilter!==r.wem&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const i=t.get("EXT_texture_filter_anisotropic");if(n.type===r.VzW&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&n.type===r.cLu&&!1===t.has("OES_texture_half_float_linear"))return;(n.anisotropy>1||o.get(n).__currentAnisotropy)&&(e.texParameterf(a,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(n.anisotropy,s.getMaxAnisotropy())),o.get(n).__currentAnisotropy=n.anisotropy)}}function I(t,a){void 0===t.__webglInit&&(t.__webglInit=!0,a.addEventListener("dispose",L),t.__webglTexture=e.createTexture(),u.memory.textures++)}function U(t,n,i){let o=3553;n.isDataTexture2DArray&&(o=35866),n.isDataTexture3D&&(o=32879),I(t,n),a.activeTexture(33984+i),a.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment),e.pixelStorei(37443,0);const s=function(e){return!c&&(e.wrapS!==r.uWy||e.wrapT!==r.uWy||e.minFilter!==r.TyD&&e.minFilter!==r.wem)}(n)&&!1===x(n.image),u=T(n.image,s,!1,f),p=x(u)||c,d=l.convert(n.format);let h,m=l.convert(n.type),g=E(n.internalFormat,d,m,n.encoding);F(o,n,p);const M=n.mipmaps;if(n.isDepthTexture)g=6402,c?g=n.type===r.VzW?36012:n.type===r.JQ4?33190:n.type===r.wJv?35056:33189:n.type===r.VzW&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),n.format===r.qkB&&6402===g&&n.type!==r.LsT&&n.type!==r.JQ4&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=r.LsT,m=l.convert(n.type)),n.format===r.brP&&6402===g&&(g=34041,n.type!==r.wJv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=r.wJv,m=l.convert(n.type))),a.texImage2D(3553,0,g,u.width,u.height,0,d,m,null);else if(n.isDataTexture)if(M.length>0&&p){for(let e=0,t=M.length;e<t;e++)h=M[e],a.texImage2D(3553,e,g,h.width,h.height,0,d,m,h.data);n.generateMipmaps=!1}else a.texImage2D(3553,0,g,u.width,u.height,0,d,m,u.data);else if(n.isCompressedTexture)for(let e=0,t=M.length;e<t;e++)h=M[e],n.format!==r.wk1&&n.format!==r.UCm?null!==d?a.compressedTexImage2D(3553,e,g,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):a.texImage2D(3553,e,g,h.width,h.height,0,d,m,h.data);else if(n.isDataTexture2DArray)a.texImage3D(35866,0,g,u.width,u.height,u.depth,0,d,m,u.data);else if(n.isDataTexture3D)a.texImage3D(32879,0,g,u.width,u.height,u.depth,0,d,m,u.data);else{const e=function(e,t,a){return!0===v(e,a)?Math.log2(Math.max(t.width,t.height))+1:e.mipmaps.length>0?e.mipmaps.length:1}(n,u,p),r=c&&!0!==n.isVideoTexture,i=void 0===t.__version;if(M.length>0&&p){r&&i&&a.texStorage2D(3553,e,g,M[0].width,M[0].height);for(let e=0,t=M.length;e<t;e++)h=M[e],r?a.texSubImage2D(3553,e,0,0,d,m,h):a.texImage2D(3553,e,g,d,m,h);n.generateMipmaps=!1}else r?(i&&a.texStorage2D(3553,e,g,u.width,u.height),a.texSubImage2D(3553,0,0,0,d,m,u)):a.texImage2D(3553,0,g,d,m,u)}v(n,p)&&_(o),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function N(t,r,n,i,s){const u=l.convert(n.format),c=l.convert(n.type),p=E(n.internalFormat,u,c,n.encoding);o.get(r).__hasExternalTextures||(32879===s||35866===s?a.texImage3D(s,0,p,r.width,r.height,r.depth,0,u,c,null):a.texImage2D(s,0,p,r.width,r.height,0,u,c,null)),a.bindFramebuffer(36160,t),r.useRenderToTexture?m.framebufferTexture2DMultisampleEXT(36160,i,s,o.get(n).__webglTexture,0,W(r)):e.framebufferTexture2D(36160,i,s,o.get(n).__webglTexture,0),a.bindFramebuffer(36160,null)}function O(t,a,n){if(e.bindRenderbuffer(36161,t),a.depthBuffer&&!a.stencilBuffer){let i=33189;if(n||a.useRenderToTexture){const t=a.depthTexture;t&&t.isDepthTexture&&(t.type===r.VzW?i=36012:t.type===r.JQ4&&(i=33190));const n=W(a);a.useRenderToTexture?m.renderbufferStorageMultisampleEXT(36161,n,i,a.width,a.height):e.renderbufferStorageMultisample(36161,n,i,a.width,a.height)}else e.renderbufferStorage(36161,i,a.width,a.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(a.depthBuffer&&a.stencilBuffer){const r=W(a);n&&a.useRenderbuffer?e.renderbufferStorageMultisample(36161,r,35056,a.width,a.height):a.useRenderToTexture?m.renderbufferStorageMultisampleEXT(36161,r,35056,a.width,a.height):e.renderbufferStorage(36161,34041,a.width,a.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===a.isWebGLMultipleRenderTargets?a.texture[0]:a.texture,r=l.convert(t.format),i=l.convert(t.type),o=E(t.internalFormat,r,i,t.encoding),s=W(a);n&&a.useRenderbuffer?e.renderbufferStorageMultisample(36161,s,o,a.width,a.height):a.useRenderToTexture?m.renderbufferStorageMultisampleEXT(36161,s,o,a.width,a.height):e.renderbufferStorage(36161,o,a.width,a.height)}e.bindRenderbuffer(36161,null)}function G(t){const n=o.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!n.__autoAllocateDepthBuffer){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(a.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");o.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),R(n.depthTexture,0);const i=o.get(n.depthTexture).__webglTexture,s=W(n);if(n.depthTexture.format===r.qkB)n.useRenderToTexture?m.framebufferTexture2DMultisampleEXT(36160,36096,3553,i,0,s):e.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==r.brP)throw new Error("Unknown depthTexture format");n.useRenderToTexture?m.framebufferTexture2DMultisampleEXT(36160,33306,3553,i,0,s):e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(let r=0;r<6;r++)a.bindFramebuffer(36160,n.__webglFramebuffer[r]),n.__webglDepthbuffer[r]=e.createRenderbuffer(),O(n.__webglDepthbuffer[r],t,!1)}else a.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),O(n.__webglDepthbuffer,t,!1);a.bindFramebuffer(36160,null)}function W(e){return c&&(e.useRenderbuffer||e.useRenderToTexture)?Math.min(h,e.samples):0}let B=!1,k=!1;this.allocateTextureUnit=function(){const e=y;return e>=p&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+p),y+=1,e},this.resetTextureUnits=function(){y=0},this.setTexture2D=R,this.setTexture2DArray=function(e,t){const r=o.get(e);e.version>0&&r.__version!==e.version?U(r,e,t):(a.activeTexture(33984+t),a.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){const r=o.get(e);e.version>0&&r.__version!==e.version?U(r,e,t):(a.activeTexture(33984+t),a.bindTexture(32879,r.__webglTexture))},this.setTextureCube=P,this.rebindTextures=function(e,t,a){const r=o.get(e);void 0!==t&&N(r.__webglFramebuffer,e,e.texture,36064,3553),void 0!==a&&G(e)},this.setupRenderTarget=function(t){const n=t.texture,i=o.get(t),p=o.get(n);t.addEventListener("dispose",A),!0!==t.isWebGLMultipleRenderTargets&&(void 0===p.__webglTexture&&(p.__webglTexture=e.createTexture()),p.__version=n.version,u.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,h=n.isDataTexture3D||n.isDataTexture2DArray,m=x(t)||c;if(!c||n.format!==r.UCm||n.type!==r.VzW&&n.type!==r.cLu||(n.format=r.wk1,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),d){i.__webglFramebuffer=[];for(let t=0;t<6;t++)i.__webglFramebuffer[t]=e.createFramebuffer()}else if(i.__webglFramebuffer=e.createFramebuffer(),f)if(s.drawBuffers){const a=t.texture;for(let t=0,r=a.length;t<r;t++){const r=o.get(a[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),u.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(t.useRenderbuffer)if(c){i.__webglMultisampledFramebuffer=e.createFramebuffer(),i.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,i.__webglColorRenderbuffer);const r=l.convert(n.format),o=l.convert(n.type),s=E(n.internalFormat,r,o,n.encoding),u=W(t);e.renderbufferStorageMultisample(36161,u,s,t.width,t.height),a.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(i.__webglDepthRenderbuffer=e.createRenderbuffer(),O(i.__webglDepthRenderbuffer,t,!0)),a.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(d){a.bindTexture(34067,p.__webglTexture),F(34067,n,m);for(let e=0;e<6;e++)N(i.__webglFramebuffer[e],t,n,36064,34069+e);v(n,m)&&_(34067),a.unbindTexture()}else if(f){const e=t.texture;for(let r=0,n=e.length;r<n;r++){const n=e[r],s=o.get(n);a.bindTexture(3553,s.__webglTexture),F(3553,n,m),N(i.__webglFramebuffer,t,n,36064+r,3553),v(n,m)&&_(3553)}a.unbindTexture()}else{let e=3553;if(h)if(c){e=n.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");a.bindTexture(e,p.__webglTexture),F(e,n,m),N(i.__webglFramebuffer,t,n,36064,e),v(n,m)&&_(e),a.unbindTexture()}t.depthBuffer&&G(t)},this.updateRenderTargetMipmap=function(e){const t=x(e)||c,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let n=0,i=r.length;n<i;n++){const i=r[n];if(v(i,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,r=o.get(i).__webglTexture;a.bindTexture(t,r),_(t),a.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.useRenderbuffer)if(c){const r=t.width,n=t.height;let i=16384;const s=[36064],l=t.stencilBuffer?33306:36096;t.depthBuffer&&s.push(l),t.ignoreDepthForMultisampleCopy||(t.depthBuffer&&(i|=256),t.stencilBuffer&&(i|=1024));const u=o.get(t);a.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),a.bindFramebuffer(36009,u.__webglFramebuffer),t.ignoreDepthForMultisampleCopy&&(e.invalidateFramebuffer(36008,[l]),e.invalidateFramebuffer(36009,[l])),e.blitFramebuffer(0,0,r,n,0,0,r,n,i,9728),e.invalidateFramebuffer(36008,s),a.bindFramebuffer(36008,null),a.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=G,this.setupFrameBufferTexture=N,this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),R(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===k&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),k=!0),e=e.texture),P(e,t)}}},1895:(e,t,a)=>{a.d(t,{y:()=>ce});var r=a(3882),n=a(4467),i=a(5491),o=a(7962);const s=new n.x,l=new i.C,u=new o.z,c=new r.B,p=[],d=[],f=new Float32Array(16),h=new Float32Array(9),m=new Float32Array(4);function g(e,t,a){const r=e[0];if(r<=0||r>0)return e;const n=t*a;let i=p[n];if(void 0===i&&(i=new Float32Array(n),p[n]=i),0!==t){r.toArray(i,0);for(let r=1,n=0;r!==t;++r)n+=a,e[r].toArray(i,n)}return i}function M(e,t){if(e.length!==t.length)return!1;for(let a=0,r=e.length;a<r;a++)if(e[a]!==t[a])return!1;return!0}function b(e,t){for(let a=0,r=t.length;a<r;a++)e[a]=t[a]}function S(e,t){let a=d[t];void 0===a&&(a=new Int32Array(t),d[t]=a);for(let r=0;r!==t;++r)a[r]=e.allocateTextureUnit();return a}function T(e,t){const a=this.cache;a[0]!==t&&(e.uniform1f(this.addr,t),a[0]=t)}function x(e,t){const a=this.cache;if(void 0!==t.x)a[0]===t.x&&a[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),a[0]=t.x,a[1]=t.y);else{if(M(a,t))return;e.uniform2fv(this.addr,t),b(a,t)}}function v(e,t){const a=this.cache;if(void 0!==t.x)a[0]===t.x&&a[1]===t.y&&a[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),a[0]=t.x,a[1]=t.y,a[2]=t.z);else if(void 0!==t.r)a[0]===t.r&&a[1]===t.g&&a[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),a[0]=t.r,a[1]=t.g,a[2]=t.b);else{if(M(a,t))return;e.uniform3fv(this.addr,t),b(a,t)}}function _(e,t){const a=this.cache;if(void 0!==t.x)a[0]===t.x&&a[1]===t.y&&a[2]===t.z&&a[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=t.w);else{if(M(a,t))return;e.uniform4fv(this.addr,t),b(a,t)}}function E(e,t){const a=this.cache,r=t.elements;if(void 0===r){if(M(a,t))return;e.uniformMatrix2fv(this.addr,!1,t),b(a,t)}else{if(M(a,r))return;m.set(r),e.uniformMatrix2fv(this.addr,!1,m),b(a,r)}}function w(e,t){const a=this.cache,r=t.elements;if(void 0===r){if(M(a,t))return;e.uniformMatrix3fv(this.addr,!1,t),b(a,t)}else{if(M(a,r))return;h.set(r),e.uniformMatrix3fv(this.addr,!1,h),b(a,r)}}function L(e,t){const a=this.cache,r=t.elements;if(void 0===r){if(M(a,t))return;e.uniformMatrix4fv(this.addr,!1,t),b(a,t)}else{if(M(a,r))return;f.set(r),e.uniformMatrix4fv(this.addr,!1,f),b(a,r)}}function A(e,t){const a=this.cache;a[0]!==t&&(e.uniform1i(this.addr,t),a[0]=t)}function y(e,t){const a=this.cache;M(a,t)||(e.uniform2iv(this.addr,t),b(a,t))}function R(e,t){const a=this.cache;M(a,t)||(e.uniform3iv(this.addr,t),b(a,t))}function P(e,t){const a=this.cache;M(a,t)||(e.uniform4iv(this.addr,t),b(a,t))}function C(e,t){const a=this.cache;a[0]!==t&&(e.uniform1ui(this.addr,t),a[0]=t)}function D(e,t){const a=this.cache;M(a,t)||(e.uniform2uiv(this.addr,t),b(a,t))}function F(e,t){const a=this.cache;M(a,t)||(e.uniform3uiv(this.addr,t),b(a,t))}function I(e,t){const a=this.cache;M(a,t)||(e.uniform4uiv(this.addr,t),b(a,t))}function U(e,t,a){const r=this.cache,n=a.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),a.safeSetTexture2D(t||s,n)}function N(e,t,a){const r=this.cache,n=a.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),a.setTexture3D(t||u,n)}function O(e,t,a){const r=this.cache,n=a.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),a.safeSetTextureCube(t||c,n)}function G(e,t,a){const r=this.cache,n=a.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),a.setTexture2DArray(t||l,n)}function W(e,t){e.uniform1fv(this.addr,t)}function B(e,t){const a=g(t,this.size,2);e.uniform2fv(this.addr,a)}function k(e,t){const a=g(t,this.size,3);e.uniform3fv(this.addr,a)}function H(e,t){const a=g(t,this.size,4);e.uniform4fv(this.addr,a)}function V(e,t){const a=g(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,a)}function z(e,t){const a=g(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,a)}function X(e,t){const a=g(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,a)}function j(e,t){e.uniform1iv(this.addr,t)}function Y(e,t){e.uniform2iv(this.addr,t)}function q(e,t){e.uniform3iv(this.addr,t)}function K(e,t){e.uniform4iv(this.addr,t)}function J(e,t){e.uniform1uiv(this.addr,t)}function Q(e,t){e.uniform2uiv(this.addr,t)}function Z(e,t){e.uniform3uiv(this.addr,t)}function $(e,t){e.uniform4uiv(this.addr,t)}function ee(e,t,a){const r=t.length,n=S(a,r);e.uniform1iv(this.addr,n);for(let e=0;e!==r;++e)a.safeSetTexture2D(t[e]||s,n[e])}function te(e,t,a){const r=t.length,n=S(a,r);e.uniform1iv(this.addr,n);for(let e=0;e!==r;++e)a.setTexture3D(t[e]||u,n[e])}function ae(e,t,a){const r=t.length,n=S(a,r);e.uniform1iv(this.addr,n);for(let e=0;e!==r;++e)a.safeSetTextureCube(t[e]||c,n[e])}function re(e,t,a){const r=t.length,n=S(a,r);e.uniform1iv(this.addr,n);for(let e=0;e!==r;++e)a.setTexture2DArray(t[e]||l,n[e])}function ne(e,t,a){this.id=e,this.addr=a,this.cache=[],this.setValue=function(e){switch(e){case 5126:return T;case 35664:return x;case 35665:return v;case 35666:return _;case 35674:return E;case 35675:return w;case 35676:return L;case 5124:case 35670:return A;case 35667:case 35671:return y;case 35668:case 35672:return R;case 35669:case 35673:return P;case 5125:return C;case 36294:return D;case 36295:return F;case 36296:return I;case 35678:case 36198:case 36298:case 36306:case 35682:return U;case 35679:case 36299:case 36307:return N;case 35680:case 36300:case 36308:case 36293:return O;case 36289:case 36303:case 36311:case 36292:return G}}(t.type)}function ie(e,t,a){this.id=e,this.addr=a,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return W;case 35664:return B;case 35665:return k;case 35666:return H;case 35674:return V;case 35675:return z;case 35676:return X;case 5124:case 35670:return j;case 35667:case 35671:return Y;case 35668:case 35672:return q;case 35669:case 35673:return K;case 5125:return J;case 36294:return Q;case 36295:return Z;case 36296:return $;case 35678:case 36198:case 36298:case 36306:case 35682:return ee;case 35679:case 36299:case 36307:return te;case 35680:case 36300:case 36308:case 36293:return ae;case 36289:case 36303:case 36311:case 36292:return re}}(t.type)}function oe(e){this.id=e,this.seq=[],this.map={}}ie.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),b(t,e)},oe.prototype.setValue=function(e,t,a){const r=this.seq;for(let n=0,i=r.length;n!==i;++n){const i=r[n];i.setValue(e,t[i.id],a)}};const se=/(\w+)(\])?(\[|\.)?/g;function le(e,t){e.seq.push(t),e.map[t.id]=t}function ue(e,t,a){const r=e.name,n=r.length;for(se.lastIndex=0;;){const i=se.exec(r),o=se.lastIndex;let s=i[1];const l="]"===i[2],u=i[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===n){le(a,void 0===u?new ne(s,e,t):new ie(s,e,t));break}{let e=a.map[s];void 0===e&&(e=new oe(s),le(a,e)),a=e}}}function ce(e,t){this.seq=[],this.map={};const a=e.getProgramParameter(t,35718);for(let r=0;r<a;++r){const a=e.getActiveUniform(t,r);ue(a,e.getUniformLocation(t,a.name),this)}}ce.prototype.setValue=function(e,t,a,r){const n=this.map[t];void 0!==n&&n.setValue(e,a,r)},ce.prototype.setOptional=function(e,t,a){const r=t[a];void 0!==r&&this.setValue(e,a,r)},ce.upload=function(e,t,a,r){for(let n=0,i=t.length;n!==i;++n){const i=t[n],o=a[i.id];!1!==o.needsUpdate&&i.setValue(e,o.value,r)}},ce.seqWithValue=function(e,t){const a=[];for(let r=0,n=e.length;r!==n;++r){const n=e[r];n.id in t&&a.push(n)}return a}},9627:(e,t,a)=>{a.d(t,{f:()=>n});var r=a(1661);function n(e,t,a){const n=a.isWebGL2;return{convert:function(e){let a;if(e===r.ywz)return 5121;if(e===r.k0A)return 32819;if(e===r.irR)return 32820;if(e===r.XNv)return 33635;if(e===r.T95)return 5120;if(e===r.iAb)return 5122;if(e===r.LsT)return 5123;if(e===r.Kz5)return 5124;if(e===r.JQ4)return 5125;if(e===r.VzW)return 5126;if(e===r.cLu)return n?5131:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(e===r.OTo)return 6406;if(e===r.UCm)return 6407;if(e===r.wk1)return 6408;if(e===r.Y8D)return 6409;if(e===r.cRx)return 6410;if(e===r.qkB)return 6402;if(e===r.brP)return 34041;if(e===r.hEm)return 6403;if(e===r.D9w)return 36244;if(e===r.av9)return 33319;if(e===r.CtA)return 33320;if(e===r.F5G)return 36248;if(e===r.E2K)return 36249;if(e===r.wuA||e===r.BFQ||e===r.v3W||e===r.ILR){if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(e===r.wuA)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===r.BFQ)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===r.v3W)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===r.ILR)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===r._AM||e===r.vCx||e===r.eaV||e===r.CaW){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(e===r._AM)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===r.vCx)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===r.eaV)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===r.CaW)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===r.fto)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===r.l0P||e===r.ekQ)&&(a=t.get("WEBGL_compressed_texture_etc"),null!==a)){if(e===r.l0P)return a.COMPRESSED_RGB8_ETC2;if(e===r.ekQ)return a.COMPRESSED_RGBA8_ETC2_EAC}return e===r.ptH||e===r.jZA||e===r.y2t||e===r.gi4||e===r.Djp||e===r.BG$||e===r.NYV||e===r.xJs||e===r.pKu||e===r.GG6||e===r.Gih||e===r.FUD||e===r.iiP||e===r.SvJ||e===r.APR||e===r.Abz||e===r.v6B||e===r.pnl||e===r.OS$||e===r._wO||e===r.bcs||e===r.Y5S||e===r.Wso||e===r.p1$||e===r.I0h||e===r.Yjz||e===r.ePn||e===r.HBG?(a=t.get("WEBGL_compressed_texture_astc"),null!==a?e:null):e===r.bsb?(a=t.get("EXT_texture_compression_bptc"),null!==a?e:null):e===r.wJv?n?34042:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[682],{7082:(e,t,r)=>{r.d(t,{i:()=>gt});var n,i,o,a,s,l,c,u,f,d,p,g,h,v,m,x,y,b,w,k,T,C,S,O,E,M,P,_,R=1,A=[],L=[],B=Date.now,I=B(),z=0,N=1,F=function(e){return e},D=function(e){return p(e)[0]||($(e)?console.warn("Element not found:",e):null)},W=function(e){return Math.round(1e5*e)/1e5||0},H=function(){return"undefined"!=typeof window},q=function(){return n||H()&&(n=window.gsap)&&n.registerPlugin&&n},V=function(e){return!!~c.indexOf(e)},U=function(e,t){return~A.indexOf(e)&&A[A.indexOf(e)+1][t]},X=function(e,t){var r=t.s,n=t.sc,i=L.indexOf(e),o=n===ke.sc?1:2;return!~i&&(i=L.push(e)-1),L[i+o]||(L[i+o]=U(e,r)||(V(e)?n:function(t){return arguments.length?e[r]=t:e[r]}))},Y=function(e){return U(e,"getBoundingClientRect")||(V(e)?function(){return ct.width=o.innerWidth,ct.height=o.innerHeight,ct}:function(){return Se(e)})},j=function(e,t){var r=t.s,n=t.d2,i=t.d,a=t.a;return(r="scroll"+n)&&(a=U(e,r))?a()-Y(e)()[i]:V(e)?(l[r]||s[r])-(o["inner"+n]||s["client"+n]||l["client"+n]):e[r]-e["offset"+n]},Z=function(e,t){for(var r=0;r<T.length;r+=3)(!t||~t.indexOf(T[r+1]))&&e(T[r],T[r+1],T[r+2])},$=function(e){return"string"==typeof e},G=function(e){return"function"==typeof e},J=function(e){return"number"==typeof e},K=function(e){return"object"==typeof e},Q=function(e){return G(e)&&e()},ee=function(e,t){return function(){var r=Q(e),n=Q(t);return function(){Q(r),Q(n)}}},te=function(e,t,r){return e&&e.progress(t?0:1)&&r&&e.pause()},re=function(e,t){var r=t(e);r&&r.totalTime&&(e.callbackAnimation=r)},ne=Math.abs,ie="scrollLeft",oe="scrollTop",ae="left",se="top",le="right",ce="bottom",ue="width",fe="height",de="Right",pe="Left",ge="Top",he="Bottom",ve="padding",me="margin",xe="Width",ye="Height",be="px",we={s:ie,p:ae,p2:pe,os:le,os2:de,d:ue,d2:xe,a:"x",sc:function(e){return arguments.length?o.scrollTo(e,ke.sc()):o.pageXOffset||a.scrollLeft||s.scrollLeft||l.scrollLeft||0}},ke={s:oe,p:se,p2:ge,os:ce,os2:he,d:fe,d2:ye,a:"y",op:we,sc:function(e){return arguments.length?o.scrollTo(we.sc(),e):o.pageYOffset||a.scrollTop||s.scrollTop||l.scrollTop||0}},Te=function(e){return o.getComputedStyle(e)},Ce=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},Se=function(e,t){var r=t&&"matrix(1, 0, 0, 1, 0, 0)"!==Te(e)[y]&&n.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),i=e.getBoundingClientRect();return r&&r.progress(0).kill(),i},Oe=function(e,t){var r=t.d2;return e["offset"+r]||e["client"+r]||0},Ee=function(e){var t,r=[],n=e.labels,i=e.duration();for(t in n)r.push(n[t]/i);return r},Me=function(e){var t=n.utils.snap(e),r=Array.isArray(e)&&e.slice(0).sort((function(e,t){return e-t}));return r?function(e,n){var i;if(!n)return t(e);if(n>0){for(e-=1e-4,i=0;i<r.length;i++)if(r[i]>=e)return r[i];return r[i-1]}for(i=r.length,e+=1e-4;i--;)if(r[i]<=e)return r[i];return r[0]}:function(r,n){var i=t(r);return!n||Math.abs(i-r)<.001||i-r<0==n<0?i:t(n<0?r-e:r+e)}},Pe=function(e,t,r,n){return r.split(",").forEach((function(r){return e(t,r,n)}))},_e=function(e,t,r){return e.addEventListener(t,r,{passive:!0})},Re=function(e,t,r){return e.removeEventListener(t,r)},Ae={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},Le={toggleActions:"play",anticipatePin:0},Be={top:0,left:0,center:.5,bottom:1,right:1},Ie=function(e,t){if($(e)){var r=e.indexOf("="),n=~r?+(e.charAt(r-1)+1)*parseFloat(e.substr(r+1)):0;~r&&(e.indexOf("%")>r&&(n*=t/100),e=e.substr(0,r-1)),e=n+(e in Be?Be[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},ze=function(e,t,r,n,i,o,s,c){var u=i.startColor,f=i.endColor,d=i.fontSize,p=i.indent,g=i.fontWeight,h=a.createElement("div"),v=V(r)||"fixed"===U(r,"pinType"),m=-1!==e.indexOf("scroller"),x=v?l:r,y=-1!==e.indexOf("start"),b=y?u:f,w="border-color:"+b+";font-size:"+d+";color:"+b+";font-weight:"+g+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return w+="position:"+((m||c)&&v?"fixed;":"absolute;"),(m||c||!v)&&(w+=(n===ke?le:ce)+":"+(o+parseFloat(p))+"px;"),s&&(w+="box-sizing:border-box;text-align:left;width:"+s.offsetWidth+"px;"),h._isStart=y,h.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),h.style.cssText=w,h.innerText=t||0===t?e+"-"+t:e,x.children[0]?x.insertBefore(h,x.children[0]):x.appendChild(h),h._offset=h["offset"+n.op.d2],Ne(h,0,n,y),h},Ne=function(e,t,r,i){var o={display:"block"},a=r[i?"os2":"p2"],s=r[i?"p2":"os2"];e._isFlipped=i,o[r.a+"Percent"]=i?-100:0,o[r.a]=i?"1px":0,o["border"+a+xe]=1,o["border"+s+xe]=0,o[r.p]=t+"px",n.set(e,o)},Fe=[],De={},We=function(){return B()-z>20&&rt()},He=function(){var e=B();z!==e?(rt(),z||Ze("scrollStart"),z=e):d||(d=f(rt))},qe=function(){return!m&&!O&&!a.fullscreenElement&&u.restart(!0)},Ve={},Ue=[],Xe=[],Ye=function(e){var t,r=n.ticker.frame,a=[],s=0;if(P!==r||R){for(Je();s<Xe.length;s+=4)(t=o.matchMedia(Xe[s]).matches)!==Xe[s+3]&&(Xe[s+3]=t,t?a.push(s):Je(1,Xe[s])||G(Xe[s+2])&&Xe[s+2]());for(Ge(),s=0;s<a.length;s++)t=a[s],M=Xe[t],Xe[t+2]=Xe[t+1](e);M=0,i&&Qe(0,1),P=r,Ze("matchMedia")}},je=function e(){return Re(gt,"scrollEnd",e)||Qe(!0)},Ze=function(e){return Ve[e]&&Ve[e].map((function(e){return e()}))||Ue},$e=[],Ge=function(e){for(var t=0;t<$e.length;t+=5)e&&$e[t+4]!==e||($e[t].style.cssText=$e[t+1],$e[t].getBBox&&$e[t].setAttribute("transform",$e[t+2]||""),$e[t+3].uncache=1)},Je=function(e,t){var r;for(b=0;b<Fe.length;b++)r=Fe[b],t&&r.media!==t||(e?r.kill(1):r.revert());t&&Ge(t),t||Ze("revert")},Ke=function(){return L.forEach((function(e){return"function"==typeof e&&(e.rec=0)}))},Qe=function(e,t){if(!z||e){_=!0;var r=Ze("refreshInit");C&&gt.sort(),t||Je(),Fe.forEach((function(e){return e.refresh()})),r.forEach((function(e){return e&&e.render&&e.render(-1)})),Ke(),u.pause(),_=!1,Ze("refresh")}else _e(gt,"scrollEnd",je)},et=0,tt=1,rt=function(){if(!_){var e=Fe.length,t=B(),r=t-I>=50,n=e&&Fe[0].scroll();if(tt=et>n?-1:1,et=n,r&&(z&&!x&&t-z>200&&(z=0,Ze("scrollEnd")),h=I,I=t),tt<0){for(b=e;b-- >0;)Fe[b]&&Fe[b].update(0,r);tt=1}else for(b=0;b<e;b++)Fe[b]&&Fe[b].update(0,r);d=0}},nt=[ae,se,ce,le,"marginBottom","marginRight","marginTop","marginLeft","display","flexShrink","float","zIndex","grid-column-start","grid-column-end","grid-row-start","grid-row-end","grid-area","justify-self","align-self","place-self"],it=nt.concat([ue,fe,"boxSizing","maxWidth","maxHeight","position",me,ve,"paddingTop","paddingRight","paddingBottom","paddingLeft"]),ot=function(e,t,r,n){if(e.parentNode!==t){for(var i,o=nt.length,a=t.style,s=e.style;o--;)a[i=nt[o]]=r[i];a.position="absolute"===r.position?"absolute":"relative","inline"===r.display&&(a.display="inline-block"),s.bottom=s.right="auto",a.overflow="visible",a.boxSizing="border-box",a.width=Oe(e,we)+be,a.height=Oe(e,ke)+be,a.padding=s.margin=s.top=s.left="0",st(n),s.width=s.maxWidth=r.width,s.height=s.maxHeight=r.height,s.padding=r.padding,e.parentNode.insertBefore(t,e),t.appendChild(e)}},at=/([A-Z])/g,st=function(e){if(e){var t,r,i=e.t.style,o=e.length,a=0;for((e.t._gsap||n.core.getCache(e.t)).uncache=1;a<o;a+=2)r=e[a+1],t=e[a],r?i[t]=r:i[t]&&i.removeProperty(t.replace(at,"-$1").toLowerCase())}},lt=function(e){for(var t=it.length,r=e.style,n=[],i=0;i<t;i++)n.push(it[i],r[it[i]]);return n.t=e,n},ct={left:0,top:0},ut=function(e,t,r,n,i,o,a,c,u,f,d,p,g){G(e)&&(e=e(c)),$(e)&&"max"===e.substr(0,3)&&(e=p+("="===e.charAt(4)?Ie("0"+e.substr(3),r):0));var h,v,m,x=g?g.time():0;if(g&&g.seek(0),J(e))a&&Ne(a,r,n,!0);else{G(t)&&(t=t(c));var y,b,w,k,T=e.split(" ");m=D(t)||l,(y=Se(m)||{})&&(y.left||y.top)||"none"!==Te(m).display||(k=m.style.display,m.style.display="block",y=Se(m),k?m.style.display=k:m.style.removeProperty("display")),b=Ie(T[0],y[n.d]),w=Ie(T[1]||"0",r),e=y[n.p]-u[n.p]-f+b+i-w,a&&Ne(a,w,n,r-w<20||a._isStart&&w>20),r-=r-w}if(o){var C=e+r,S=o._isStart;h="scroll"+n.d2,Ne(o,C,n,S&&C>20||!S&&(d?Math.max(l[h],s[h]):o.parentNode[h])<=C+1),d&&(u=Se(a),d&&(o.style[n.op.p]=u[n.op.p]-n.op.m-o._offset+be))}return g&&m&&(h=Se(m),g.seek(p),v=Se(m),g._caScrollDist=h[n.p]-v[n.p],e=e/g._caScrollDist*p),g&&g.seek(x),g?e:Math.round(e)},ft=/(?:webkit|moz|length|cssText|inset)/i,dt=function(e,t,r,i){if(e.parentNode!==t){var o,a,s=e.style;if(t===l){for(o in e._stOrig=s.cssText,a=Te(e))+o||ft.test(o)||!a[o]||"string"!=typeof s[o]||"0"===o||(s[o]=a[o]);s.top=r,s.left=i}else s.cssText=e._stOrig;n.core.getCache(e).uncache=1,t.appendChild(e)}},pt=function(e,t){var r,i,o=X(e,t),a="_scroll"+t.p2,s=function t(s,l,c,u,f){var d=t.tween,p=l.onComplete,g={};return d&&d.kill(),r=Math.round(c),l[a]=s,l.modifiers=g,g[a]=function(e){return(e=W(o()))!==r&&e!==i&&Math.abs(e-r)>2?(d.kill(),t.tween=0):e=c+u*d.ratio+f*d.ratio*d.ratio,i=r,r=W(e)},l.onComplete=function(){t.tween=0,p&&p.call(d)},d=t.tween=n.to(e,l)};return e[a]=o,e.addEventListener("wheel",(function(){return s.tween&&s.tween.kill()&&(s.tween=0)}),{passive:!0}),s};we.op=ke;var gt=function(){function e(t,r){i||e.register(n)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(t,r)}return e.prototype.init=function(t,r){if(this.progress=this.start=0,this.vars&&this.kill(1),N){var i,c,u,f,d,v,y,w,k,T,O,P,_,L,I,W,H,q,Z,Q,ee,ie,oe,ae,se,le,ce,ue,fe,de,pe,ge,he,ye,Pe,Be,Ne,We,Ve,Ue,Xe=t=Ce($(t)||J(t)||t.nodeType?{trigger:t}:t,Le),Ye=Xe.onUpdate,Ze=Xe.toggleClass,$e=Xe.id,Ge=Xe.onToggle,Je=Xe.onRefresh,Ke=Xe.scrub,Qe=Xe.trigger,et=Xe.pin,rt=Xe.pinSpacing,nt=Xe.invalidateOnRefresh,it=Xe.anticipatePin,at=Xe.onScrubComplete,ft=Xe.onSnapComplete,gt=Xe.once,ht=Xe.snap,vt=Xe.pinReparent,mt=Xe.pinSpacer,xt=Xe.containerAnimation,yt=Xe.fastScrollEnd,bt=Xe.preventOverlaps,wt=t.horizontal||t.containerAnimation&&!1!==t.horizontal?we:ke,kt=!Ke&&0!==Ke,Tt=D(t.scroller||o),Ct=n.core.getCache(Tt),St=V(Tt),Ot="fixed"===("pinType"in t?t.pinType:U(Tt,"pinType")||St&&"fixed"),Et=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],Mt=kt&&t.toggleActions.split(" "),Pt="markers"in t?t.markers:Le.markers,_t=St?0:parseFloat(Te(Tt)["border"+wt.p2+xe])||0,Rt=this,At=t.onRefreshInit&&function(){return t.onRefreshInit(Rt)},Lt=function(e,t,r){var n=r.d,i=r.d2,a=r.a;return(a=U(e,"getBoundingClientRect"))?function(){return a()[n]}:function(){return(t?o["inner"+i]:e["client"+i])||0}}(Tt,St,wt),Bt=function(e,t){return!t||~A.indexOf(e)?Y(e):function(){return ct}}(Tt,St),It=0,zt=X(Tt,wt);if(Rt.media=M,it*=45,Rt.scroller=Tt,Rt.scroll=xt?xt.time.bind(xt):zt,f=zt(),Rt.vars=t,r=r||t.animation,"refreshPriority"in t&&(C=1),Ct.tweenScroll=Ct.tweenScroll||{top:pt(Tt,ke),left:pt(Tt,we)},Rt.tweenTo=i=Ct.tweenScroll[wt.p],r&&(r.vars.lazy=!1,r._initted||!1!==r.vars.immediateRender&&!1!==t.immediateRender&&r.render(0,!0,!0),Rt.animation=r.pause(),r.scrollTrigger=Rt,(pe=J(Ke)&&Ke)&&(de=n.to(r,{ease:"power3",duration:pe,onComplete:function(){return at&&at(Rt)}})),ue=0,$e||($e=r.vars.id)),Fe.push(Rt),ht&&(K(ht)&&!ht.push||(ht={snapTo:ht}),"scrollBehavior"in l.style&&n.set(St?[l,s]:Tt,{scrollBehavior:"auto"}),u=G(ht.snapTo)?ht.snapTo:"labels"===ht.snapTo?function(e){return function(t){return n.utils.snap(Ee(e),t)}}(r):"labelsDirectional"===ht.snapTo?(We=r,function(e,t){return Me(Ee(We))(e,t.direction)}):!1!==ht.directional?function(e,t){return Me(ht.snapTo)(e,t.direction)}:n.utils.snap(ht.snapTo),ge=ht.duration||{min:.1,max:2},ge=K(ge)?g(ge.min,ge.max):g(ge,ge),he=n.delayedCall(ht.delay||pe/2||.1,(function(){if(Math.abs(Rt.getVelocity())<10&&!x&&It!==zt()){var e=r&&!kt?r.totalProgress():Rt.progress,t=(e-fe)/(B()-h)*1e3||0,o=n.utils.clamp(-Rt.progress,1-Rt.progress,ne(t/2)*t/.185),a=Rt.progress+(!1===ht.inertia?0:o),s=g(0,1,u(a,Rt)),l=zt(),c=Math.round(v+s*_),f=ht,d=f.onStart,p=f.onInterrupt,m=f.onComplete,b=i.tween;if(l<=y&&l>=v&&c!==l){if(b&&!b._initted&&b.data<=ne(c-l))return;!1===ht.inertia&&(o=s-Rt.progress),i(c,{duration:ge(ne(.185*Math.max(ne(a-e),ne(s-e))/t/.05||0)),ease:ht.ease||"power3",data:ne(c-l),onInterrupt:function(){return he.restart(!0)&&p&&p(Rt)},onComplete:function(){It=zt(),ue=fe=r&&!kt?r.totalProgress():Rt.progress,ft&&ft(Rt),m&&m(Rt)}},l,o*_,c-l-o*_),d&&d(Rt,i.tween)}}else Rt.isActive&&he.restart(!0)})).pause()),$e&&(De[$e]=Rt),Qe=Rt.trigger=D(Qe||et),et=!0===et?Qe:D(et),$(Ze)&&(Ze={targets:Qe,className:Ze}),et&&(!1===rt||rt===me||(rt=!(!rt&&"flex"===Te(et.parentNode).display)&&ve),Rt.pin=et,!1!==t.force3D&&n.set(et,{force3D:!0}),(c=n.core.getCache(et)).spacer?L=c.pinState:(mt&&((mt=D(mt))&&!mt.nodeType&&(mt=mt.current||mt.nativeElement),c.spacerIsNative=!!mt,mt&&(c.spacerState=lt(mt))),c.spacer=H=mt||a.createElement("div"),H.classList.add("pin-spacer"),$e&&H.classList.add("pin-spacer-"+$e),c.pinState=L=lt(et)),Rt.spacer=H=c.spacer,ce=Te(et),oe=ce[rt+wt.os2],Z=n.getProperty(et),Q=n.quickSetter(et,wt.a,be),ot(et,H,ce),W=lt(et)),Pt&&(P=K(Pt)?Ce(Pt,Ae):Ae,T=ze("scroller-start",$e,Tt,wt,P,0),O=ze("scroller-end",$e,Tt,wt,P,0,T),q=T["offset"+wt.op.d2],w=ze("start",$e,Tt,wt,P,q,0,xt),k=ze("end",$e,Tt,wt,P,q,0,xt),xt&&(Ne=n.quickSetter([w,k],wt.a,be)),Ot||A.length&&!0===U(Tt,"fixedMarkers")||(Ue=Te(Ve=St?l:Tt).position,Ve.style.position="absolute"===Ue||"fixed"===Ue?Ue:"relative",n.set([T,O],{force3D:!0}),se=n.quickSetter(T,wt.a,be),le=n.quickSetter(O,wt.a,be))),xt){var Nt=xt.vars.onUpdate,Ft=xt.vars.onUpdateParams;xt.eventCallback("onUpdate",(function(){Rt.update(0,0,1),Nt&&Nt.apply(Ft||[])}))}Rt.previous=function(){return Fe[Fe.indexOf(Rt)-1]},Rt.next=function(){return Fe[Fe.indexOf(Rt)+1]},Rt.revert=function(e){var t=!1!==e||!Rt.enabled,n=m;t!==Rt.isReverted&&(t&&(Rt.scroll.rec||(Rt.scroll.rec=zt()),Pe=Math.max(zt(),Rt.scroll.rec||0),ye=Rt.progress,Be=r&&r.progress()),w&&[w,k,T,O].forEach((function(e){return e.style.display=t?"none":"block"})),t&&(m=1),Rt.update(t),m=n,et&&(t?function(e,t,r){st(r);var n=e._gsap;if(n.spacerIsNative)st(n.spacerState);else if(e.parentNode===t){var i=t.parentNode;i&&(i.insertBefore(e,t),i.removeChild(t))}}(et,H,L):(!vt||!Rt.isActive)&&ot(et,H,Te(et),ae)),Rt.isReverted=t)},Rt.refresh=function(i,o){if(!m&&Rt.enabled||o)if(et&&i&&z)_e(e,"scrollEnd",je);else{m=1,de&&de.pause(),nt&&r&&r.progress(0).invalidate(),Rt.isReverted||Rt.revert();for(var a,s,c,u,p,g,h,x,b,C,E=Lt(),M=Bt(),P=xt?xt.duration():j(Tt,wt),R=0,A=0,B=t.end,N=t.endTrigger||Qe,F=t.start||(0!==t.start&&Qe?et?"0 0":"0 100%":0),q=t.pinnedContainer&&D(t.pinnedContainer),V=Qe&&Math.max(0,Fe.indexOf(Rt))||0,U=V;U--;)(g=Fe[U]).end||g.refresh(0,1)||(m=1),!(h=g.pin)||h!==Qe&&h!==et||g.isReverted||(C||(C=[]),C.unshift(g),g.revert());for(G(F)&&(F=F(Rt)),v=ut(F,Qe,E,wt,zt(),w,T,Rt,M,_t,Ot,P,xt)||(et?-.001:0),G(B)&&(B=B(Rt)),$(B)&&!B.indexOf("+=")&&(~B.indexOf(" ")?B=($(F)?F.split(" ")[0]:"")+B:(R=Ie(B.substr(2),E),B=$(F)?F:v+R,N=Qe)),y=Math.max(v,ut(B||(N?"100% 0":P),N,E,wt,zt()+R,k,O,Rt,M,_t,Ot,P,xt))||-.001,_=y-v||(v-=.01)&&.001,R=0,U=V;U--;)(h=(g=Fe[U]).pin)&&g.start-g._pinPush<v&&!xt&&(a=g.end-g.start,(h===Qe||h===q)&&!J(F)&&(R+=a),h===et&&(A+=a));if(v+=R,y+=R,Rt._pinPush=A,w&&R&&((a={})[wt.a]="+="+R,q&&(a[wt.p]="-="+zt()),n.set([w,k],a)),et)a=Te(et),u=wt===ke,c=zt(),ee=parseFloat(Z(wt.a))+A,!P&&y>1&&((St?l:Tt).style["overflow-"+wt.a]="scroll"),ot(et,H,a),W=lt(et),s=Se(et,!0),x=Ot&&X(Tt,u?we:ke)(),rt&&((ae=[rt+wt.os2,_+A+be]).t=H,(U=rt===ve?Oe(et,wt)+_+A:0)&&ae.push(wt.d,U+be),st(ae),Ot&&zt(Pe)),Ot&&((p={top:s.top+(u?c-v:x)+be,left:s.left+(u?x:c-v)+be,boxSizing:"border-box",position:"fixed"}).width=p.maxWidth=Math.ceil(s.width)+be,p.height=p.maxHeight=Math.ceil(s.height)+be,p.margin=p.marginTop=p.marginRight=p.marginBottom=p.marginLeft="0",p.padding=a.padding,p.paddingTop=a.paddingTop,p.paddingRight=a.paddingRight,p.paddingBottom=a.paddingBottom,p.paddingLeft=a.paddingLeft,I=function(e,t,r){for(var n,i=[],o=e.length,a=r?8:0;a<o;a+=2)n=e[a],i.push(n,n in t?t[n]:e[a+1]);return i.t=e.t,i}(L,p,vt)),r?(b=r._initted,S(1),r.render(r.duration(),!0,!0),ie=Z(wt.a)-ee+_+A,_!==ie&&I.splice(I.length-2,2),r.render(0,!0,!0),b||r.invalidate(),S(0)):ie=_;else if(Qe&&zt()&&!xt)for(s=Qe.parentNode;s&&s!==l;)s._pinOffset&&(v-=s._pinOffset,y-=s._pinOffset),s=s.parentNode;C&&C.forEach((function(e){return e.revert(!1)})),Rt.start=v,Rt.end=y,f=d=zt(),xt||(f<Pe&&zt(Pe),Rt.scroll.rec=0),Rt.revert(!1),m=0,r&&kt&&r._initted&&r.progress()!==Be&&r.progress(Be,!0).render(r.time(),!0,!0),ye!==Rt.progress&&(r&&!kt&&r.totalProgress(ye,!0),Rt.progress=ye,Rt.update(0,0,1)),et&&rt&&(H._pinOffset=Math.round(Rt.progress*ie)),Je&&Je(Rt)}},Rt.getVelocity=function(){return(zt()-d)/(B()-h)*1e3||0},Rt.endAnimation=function(){te(Rt.callbackAnimation),r&&(de?de.progress(1):r.paused()?kt||te(r,Rt.direction<0,1):te(r,r.reversed()))},Rt.getTrailing=function(e){var t=Fe.indexOf(Rt),r=Rt.direction>0?Fe.slice(0,t).reverse():Fe.slice(t+1);return $(e)?r.filter((function(t){return t.vars.preventOverlaps===e})):r},Rt.update=function(e,t,n){if(!xt||n||e){var o,a,s,c,u,g,x,b=Rt.scroll(),w=e?0:(b-v)/_,k=w<0?0:w>1?1:w||0,C=Rt.progress;if(t&&(d=f,f=xt?zt():b,ht&&(fe=ue,ue=r&&!kt?r.totalProgress():k)),it&&!k&&et&&!m&&!R&&z&&v<b+(b-d)/(B()-h)*it&&(k=1e-4),k!==C&&Rt.enabled){if(c=(u=(o=Rt.isActive=!!k&&k<1)!==(!!C&&C<1))||!!k!=!!C,Rt.direction=k>C?1:-1,Rt.progress=k,c&&!m&&(a=k&&!C?0:1===k?1:1===C?2:3,kt&&(s=!u&&"none"!==Mt[a+1]&&Mt[a+1]||Mt[a],x=r&&("complete"===s||"reset"===s||s in r))),bt&&u&&(x||Ke||!r)&&(G(bt)?bt(Rt):Rt.getTrailing(bt).forEach((function(e){return e.endAnimation()}))),kt||(!de||m||R?r&&r.totalProgress(k,!!m):(de.vars.totalProgress=k,de.invalidate().restart())),et)if(e&&rt&&(H.style[rt+wt.os2]=oe),Ot){if(c){if(g=!e&&k>C&&y+1>b&&b+1>=j(Tt,wt),vt)if(e||!o&&!g)dt(et,H);else{var S=Se(et,!0),O=b-v;dt(et,l,S.top+(wt===ke?O:0)+be,S.left+(wt===ke?0:O)+be)}st(o||g?I:W),ie!==_&&k<1&&o||Q(ee+(1!==k||g?0:ie))}}else Q(ee+ie*k);ht&&!i.tween&&!m&&!R&&he.restart(!0),Ze&&(u||gt&&k&&(k<1||!E))&&p(Ze.targets).forEach((function(e){return e.classList[o||gt?"add":"remove"](Ze.className)})),Ye&&!kt&&!e&&Ye(Rt),c&&!m?(kt&&(x&&("complete"===s?r.pause().totalProgress(1):"reset"===s?r.restart(!0).pause():"restart"===s?r.restart(!0):r[s]()),Ye&&Ye(Rt)),!u&&E||(Ge&&u&&re(Rt,Ge),Et[a]&&re(Rt,Et[a]),gt&&(1===k?Rt.kill(!1,1):Et[a]=0),u||Et[a=1===k?1:3]&&re(Rt,Et[a])),yt&&!o&&Math.abs(Rt.getVelocity())>(J(yt)?yt:2500)&&(te(Rt.callbackAnimation),de?de.progress(1):te(r,!k,1))):kt&&Ye&&!m&&Ye(Rt)}if(le){var M=xt?b/xt.duration()*(xt._caScrollDist||0):b;se(M+(T._isFlipped?1:0)),le(M)}Ne&&Ne(-b/xt.duration()*(xt._caScrollDist||0))}},Rt.enable=function(t,r){Rt.enabled||(Rt.enabled=!0,_e(Tt,"resize",qe),_e(Tt,"scroll",He),At&&_e(e,"refreshInit",At),!1!==t&&(Rt.progress=ye=0,f=d=It=zt()),!1!==r&&Rt.refresh())},Rt.getTween=function(e){return e&&i?i.tween:de},Rt.disable=function(t,r){if(Rt.enabled&&(!1!==t&&Rt.revert(),Rt.enabled=Rt.isActive=!1,r||de&&de.pause(),Pe=0,c&&(c.uncache=1),At&&Re(e,"refreshInit",At),he&&(he.pause(),i.tween&&i.tween.kill()&&(i.tween=0)),!St)){for(var n=Fe.length;n--;)if(Fe[n].scroller===Tt&&Fe[n]!==Rt)return;Re(Tt,"resize",qe),Re(Tt,"scroll",He)}},Rt.kill=function(e,t){Rt.disable(e,t),de&&de.kill(),$e&&delete De[$e];var n=Fe.indexOf(Rt);Fe.splice(n,1),n===b&&tt>0&&b--,n=0,Fe.forEach((function(e){return e.scroller===Rt.scroller&&(n=1)})),n||(Rt.scroll.rec=0),r&&(r.scrollTrigger=null,e&&r.render(-1),t||r.kill()),w&&[w,k,T,O].forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),et&&(c&&(c.uncache=1),n=0,Fe.forEach((function(e){return e.pin===et&&n++})),n||(c.spacer=0))},Rt.enable(!1,!1),r&&r.add&&!_?n.delayedCall(.01,(function(){return v||y||Rt.refresh()}))&&(_=.01)&&(v=y=0):Rt.refresh()}else this.update=this.refresh=this.kill=F},e.register=function(t){if(!i&&(n=t||q(),H()&&window.document&&(o=window,a=document,s=a.documentElement,l=a.body),n&&(p=n.utils.toArray,g=n.utils.clamp,S=n.core.suppressOverwrites||F,n.core.globals("ScrollTrigger",e),l))){f=o.requestAnimationFrame||function(e){return setTimeout(e,16)},_e(o,"wheel",He),c=[o,a,s,l],_e(a,"scroll",He);var r,d=l.style,h=d.borderTopStyle;d.borderTopStyle="solid",r=Se(l),ke.m=Math.round(r.top+ke.sc())||0,we.m=Math.round(r.left+we.sc())||0,h?d.borderTopStyle=h:d.removeProperty("border-top-style"),v=setInterval(We,200),n.delayedCall(.5,(function(){return R=0})),_e(a,"touchcancel",F),_e(l,"touchstart",F),Pe(_e,a,"pointerdown,touchstart,mousedown",(function(){return x=1})),Pe(_e,a,"pointerup,touchend,mouseup",(function(){return x=0})),y=n.utils.checkPrefix("transform"),it.push(y),i=B(),u=n.delayedCall(.2,Qe).pause(),T=[a,"visibilitychange",function(){var e=o.innerWidth,t=o.innerHeight;a.hidden?(w=e,k=t):w===e&&k===t||qe()},a,"DOMContentLoaded",Qe,o,"load",function(){return z||Qe()},o,"resize",qe],Z(_e)}return i},e.defaults=function(e){for(var t in e)Le[t]=e[t]},e.kill=function(){N=0,Fe.slice(0).forEach((function(e){return e.kill(1)}))},e.config=function(e){"limitCallbacks"in e&&(E=!!e.limitCallbacks);var t=e.syncInterval;t&&clearInterval(v)||(v=t)&&setInterval(We,t),"autoRefreshEvents"in e&&(Z(Re)||Z(_e,e.autoRefreshEvents||"none"),O=-1===(e.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var r=D(e),n=L.indexOf(r),i=V(r);~n&&L.splice(n,i?6:2),i?A.unshift(o,t,l,t,s,t):A.unshift(r,t)},e.matchMedia=function(e){var t,r,n,i,a;for(r in e)n=Xe.indexOf(r),i=e[r],M=r,"all"===r?i():(t=o.matchMedia(r))&&(t.matches&&(a=i()),~n?(Xe[n+1]=ee(Xe[n+1],i),Xe[n+2]=ee(Xe[n+2],a)):(n=Xe.length,Xe.push(r,i,a),t.addListener?t.addListener(Ye):t.addEventListener("change",Ye)),Xe[n+3]=t.matches),M=0;return Xe},e.clearMatchMedia=function(e){e||(Xe.length=0),(e=Xe.indexOf(e))>=0&&Xe.splice(e,4)},e.isInViewport=function(e,t,r){var n=($(e)?D(e):e).getBoundingClientRect(),i=n[r?ue:fe]*t||0;return r?n.right-i>0&&n.left+i<o.innerWidth:n.bottom-i>0&&n.top+i<o.innerHeight},e.positionInViewport=function(e,t,r){$(e)&&(e=D(e));var n=e.getBoundingClientRect(),i=n[r?ue:fe],a=null==t?i/2:t in Be?Be[t]*i:~t.indexOf("%")?parseFloat(t)*i/100:parseFloat(t)||0;return r?(n.left+a)/o.innerWidth:(n.top+a)/o.innerHeight},e}();gt.version="3.8.0",gt.saveStyles=function(e){return e?p(e).forEach((function(e){if(e&&e.style){var t=$e.indexOf(e);t>=0&&$e.splice(t,5),$e.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),n.core.getCache(e),M)}})):$e},gt.revert=function(e,t){return Je(!e,t)},gt.create=function(e,t){return new gt(e,t)},gt.refresh=function(e){return e?qe():(i||gt.register())&&Qe(!0)},gt.update=rt,gt.clearScrollMemory=Ke,gt.maxScroll=function(e,t){return j(e,t?we:ke)},gt.getScrollFunc=function(e,t){return X(D(e),t?we:ke)},gt.getById=function(e){return De[e]},gt.getAll=function(){return Fe.slice(0)},gt.isScrolling=function(){return!!z},gt.snapDirectional=Me,gt.addEventListener=function(e,t){var r=Ve[e]||(Ve[e]=[]);~r.indexOf(t)||r.push(t)},gt.removeEventListener=function(e,t){var r=Ve[e],n=r&&r.indexOf(t);n>=0&&r.splice(n,1)},gt.batch=function(e,t){var r,i=[],o={},a=t.interval||.016,s=t.batchMax||1e9,l=function(e,t){var r=[],i=[],o=n.delayedCall(a,(function(){t(r,i),r=[],i=[]})).pause();return function(e){r.length||o.restart(!0),r.push(e.trigger),i.push(e),s<=r.length&&o.progress(1)}};for(r in t)o[r]="on"===r.substr(0,2)&&G(t[r])&&"onRefreshInit"!==r?l(0,t[r]):t[r];return G(s)&&(s=s(),_e(gt,"refresh",(function(){return s=t.batchMax()}))),p(e).forEach((function(e){var t={};for(r in o)t[r]=o[r];t.trigger=e,i.push(gt.create(t))})),i},gt.sort=function(e){return Fe.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+e.start-(t.start+-1e6*(t.vars.refreshPriority||0))})},q()&&n.registerPlugin(gt)}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[365],{5317:(t,e,r)=>{function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}r.d(e,{l1:()=>We,Fo:()=>gr,p8:()=>wr,Wy:()=>oe,Ok:()=>kt,SI:()=>tt,d4:()=>et,r9:()=>V,m2:()=>W,Ks:()=>fr,bQ:()=>it,fS:()=>xt,JV:()=>mr,kr:()=>ze,UI:()=>ve,if:()=>$e,$i:()=>mt,xr:()=>Ee,Fc:()=>E,Pr:()=>Dt,lC:()=>ht,S5:()=>ur,DY:()=>bt,GN:()=>Se});var s,a,o,u,h,_,f,l,c,p,d,m,g,v,y,T,w,b,k,x,D,A,C,M,R,S,O,z,E={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},P={duration:.5,overwrite:!1,delay:0},F=1e8,I=1e-8,L=2*Math.PI,U=L/4,B=0,N=Math.sqrt,q=Math.cos,Q=Math.sin,V=function(t){return"string"==typeof t},j=function(t){return"function"==typeof t},G=function(t){return"number"==typeof t},W=function(t){return void 0===t},Y=function(t){return"object"==typeof t},Z=function(t){return!1!==t},H=function(){return"undefined"!=typeof window},J=function(t){return j(t)||V(t)},K="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},$=Array.isArray,X=/(?:-?\.?\d|\.)+/gi,tt=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,et=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,rt=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,it=/[+-]=-?[.\d]+/,nt=/[^,'"\[\]\s]+/gi,st=/[\d.+\-=]+(?:e[-+]\d*)*/i,at={},ot={},ut=function(t){return(ot=Pt(t,at))&&wr},ht=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},_t=function(t,e){return!e&&console.warn(t)},ft=function(t,e){return t&&(at[t]=e)&&ot&&(ot[t]=e)||at},lt=function(){return 0},ct={},pt=[],dt={},mt={},gt={},vt=30,yt=[],Tt="",wt=function(t){var e,r,i=t[0];if(Y(i)||j(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(r=yt.length;r--&&!yt[r].targetTest(i););e=yt[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new We(t[r],e)))||t.splice(r,1);return t},bt=function(t){return t._gsap||wt(fe(t))[0]._gsap},kt=function(t,e,r){return(r=t[e])&&j(r)?t[e]():W(r)&&t.getAttribute&&t.getAttribute(e)||r},xt=function(t,e){return(t=t.split(",")).forEach(e)||t},Dt=function(t){return Math.round(1e5*t)/1e5||0},At=function(t){return Math.round(1e7*t)/1e7||0},Ct=function(t,e){for(var r=e.length,i=0;t.indexOf(e[i])<0&&++i<r;);return i<r},Mt=function(){var t,e,r=pt.length,i=pt.slice(0);for(dt={},pt.length=0,t=0;t<r;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Rt=function(t,e,r,i){pt.length&&Mt(),t.render(e,r,i),pt.length&&Mt()},St=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(nt).length<2?e:V(t)?t.trim():t},Ot=function(t){return t},zt=function(t,e){for(var r in e)r in t||(t[r]=e[r]);return t},Et=function(t,e){for(var r in e)r in t||"duration"===r||"ease"===r||(t[r]=e[r])},Pt=function(t,e){for(var r in e)t[r]=e[r];return t},Ft=function t(e,r){for(var i in r)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=Y(r[i])?t(e[i]||(e[i]={}),r[i]):r[i]);return e},It=function(t,e){var r,i={};for(r in t)r in e||(i[r]=t[r]);return i},Lt=function(t){var e=t.parent||a,r=t.keyframes?Et:zt;if(Z(t.inherit))for(;e;)r(t,e.vars.defaults),e=e.parent||e._dp;return t},Ut=function(t,e,r,i){void 0===r&&(r="_first"),void 0===i&&(i="_last");var n=e._prev,s=e._next;n?n._next=s:t[r]===e&&(t[r]=s),s?s._prev=n:t[i]===e&&(t[i]=n),e._next=e._prev=e.parent=null},Bt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Nt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},qt=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Qt=function t(e){return!e||e._ts&&t(e.parent)},Vt=function(t){return t._repeat?jt(t._tTime,t=t.duration()+t._rDelay)*t:0},jt=function(t,e){var r=Math.floor(t/=e);return t&&r===t?r-1:r},Gt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Wt=function(t){return t._end=At(t._start+(t._tDur/Math.abs(t._ts||t._rts||I)||0))},Yt=function(t,e){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=At(r._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Wt(t),r._dirty||Nt(r,t)),t},Zt=function(t,e){var r;if((e._time||e._initted&&!e._dur)&&(r=Gt(t.rawTime(),e),(!e._dur||ae(0,e.totalDuration(),r)-e._tTime>I)&&e.render(r,!0)),Nt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-1e-8}},Ht=function(t,e,r,i){return e.parent&&Bt(e),e._start=At((G(r)?r:r||t!==a?ie(t,r,e):t._time)+e._delay),e._end=At(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,r,i,n){void 0===r&&(r="_first"),void 0===i&&(i="_last");var s,a=t[i];if(n)for(s=e[n];a&&a[n]>s;)a=a._prev;a?(e._next=a._next,a._next=e):(e._next=t[r],t[r]=e),e._next?e._next._prev=e:t[i]=e,e._prev=a,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),Xt(e)||(t._recent=e),i||Zt(t,e),t},Jt=function(t,e){return(at.ScrollTrigger||ht("scrollTrigger",e))&&at.ScrollTrigger.create(e,t)},Kt=function(t,e,r,i){return Xe(t,e),t._initted?!r&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&f!==Ee.frame?(pt.push(t),t._lazy=[e,i],1):void 0:1},$t=function t(e){var r=e.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||t(r))},Xt=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},te=function(t,e,r,i){var n=t._repeat,s=At(e)||0,a=t._tTime/t._tDur;return a&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=n?n<0?1e10:At(s*(n+1)+t._rDelay*n):s,a&&!i?Yt(t,t._tTime=t._tDur*a):t.parent&&Wt(t),r||Nt(t.parent,t),t},ee=function(t){return t instanceof Ze?Nt(t):te(t,t._dur)},re={_start:0,endTime:lt,totalDuration:lt},ie=function t(e,r,i){var n,s,a,o=e.labels,u=e._recent||re,h=e.duration()>=F?u.endTime(!1):e._dur;return V(r)&&(isNaN(r)||r in o)?(s=r.charAt(0),a="%"===r.substr(-1),n=r.indexOf("="),"<"===s||">"===s?(n>=0&&(r=r.replace(/=/,"")),("<"===s?u._start:u.endTime(u._repeat>=0))+(parseFloat(r.substr(1))||0)*(a?(n<0?u:i).totalDuration()/100:1)):n<0?(r in o||(o[r]=h),o[r]):(s=parseFloat(r.charAt(n-1)+r.substr(n+1)),a&&i&&(s=s/100*($(i)?i[0]:i).totalDuration()),n>1?t(e,r.substr(0,n-1),i)+s:h+s)):null==r?h:+r},ne=function(t,e,r){var i,n,s=G(e[1]),a=(s?2:1)+(t<2?0:1),o=e[a];if(s&&(o.duration=e[1]),o.parent=r,t){for(i=o,n=r;n&&!("immediateRender"in i);)i=n.vars.defaults||{},n=Z(n.vars.inherit)&&n.parent;o.immediateRender=Z(i.immediateRender),t<2?o.runBackwards=1:o.startAt=e[a-1]}return new ir(e[0],o,e[a+1])},se=function(t,e){return t||0===t?e(t):e},ae=function(t,e,r){return r<t?t:r>e?e:r},oe=function(t){if("string"!=typeof t)return"";var e=st.exec(t);return e?t.substr(e.index+e[0].length):""},ue=[].slice,he=function(t,e){return t&&Y(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Y(t[0]))&&!t.nodeType&&t!==o},_e=function(t,e,r){return void 0===r&&(r=[]),t.forEach((function(t){var i;return V(t)&&!e||he(t,1)?(i=r).push.apply(i,fe(t)):r.push(t)}))||r},fe=function(t,e,r){return!V(t)||r||!u&&Pe()?$(t)?_e(t,r):he(t)?ue.call(t,0):t?[t]:[]:ue.call((e||h).querySelectorAll(t),0)},le=function(t){return t.sort((function(){return.5-Math.random()}))},ce=function(t){if(j(t))return t;var e=Y(t)?t:{each:t},r=qe(e.ease),i=e.from||0,n=parseFloat(e.base)||0,s={},a=i>0&&i<1,o=isNaN(i)||a,u=e.axis,h=i,_=i;return V(i)?h=_={center:.5,edges:.5,end:1}[i]||0:!a&&o&&(h=i[0],_=i[1]),function(t,a,f){var l,c,p,d,m,g,v,y,T,w=(f||e).length,b=s[w];if(!b){if(!(T="auto"===e.grid?0:(e.grid||[1,F])[1])){for(v=-F;v<(v=f[T++].getBoundingClientRect().left)&&T<w;);T--}for(b=s[w]=[],l=o?Math.min(T,w)*h-.5:i%T,c=o?w*_/T-.5:i/T|0,v=0,y=F,g=0;g<w;g++)p=g%T-l,d=c-(g/T|0),b[g]=m=u?Math.abs("y"===u?d:p):N(p*p+d*d),m>v&&(v=m),m<y&&(y=m);"random"===i&&le(b),b.max=v-y,b.min=y,b.v=w=(parseFloat(e.amount)||parseFloat(e.each)*(T>w?w-1:u?"y"===u?w/T:T:Math.max(T,w/T))||0)*("edges"===i?-1:1),b.b=w<0?n-w:n,b.u=oe(e.amount||e.each)||0,r=r&&w<0?Be(r):r}return w=(b[t]-b.min)/b.max||0,At(b.b+(r?r(w):w)*b.v)+b.u}},pe=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var i=Math.round(parseFloat(r)/t)*t*e;return(i-i%1)/e+(G(r)?0:oe(r))}},de=function(t,e){var r,i,n=$(t);return!n&&Y(t)&&(r=n=t.radius||F,t.values?(t=fe(t.values),(i=!G(t[0]))&&(r*=r)):t=pe(t.increment)),se(e,n?j(t)?function(e){return i=t(e),Math.abs(i-e)<=r?i:e}:function(e){for(var n,s,a=parseFloat(i?e.x:e),o=parseFloat(i?e.y:0),u=F,h=0,_=t.length;_--;)(n=i?(n=t[_].x-a)*n+(s=t[_].y-o)*s:Math.abs(t[_]-a))<u&&(u=n,h=_);return h=!r||u<=r?t[h]:e,i||h===e||G(e)?h:h+oe(e)}:pe(t))},me=function(t,e,r,i){return se($(t)?!e:!0===r?!!(r=0):!i,(function(){return $(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(e-t+.99*r))/r)*r*i)/i}))},ge=function(t,e,r){return se(r,(function(r){return t[~~e(r)]}))},ve=function(t){for(var e,r,i,n,s=0,a="";~(e=t.indexOf("random(",s));)i=t.indexOf(")",e),n="["===t.charAt(e+7),r=t.substr(e+7,i-e-7).match(n?nt:X),a+=t.substr(s,e-s)+me(n?r:+r[0],n?0:+r[1],+r[2]||1e-5),s=i+1;return a+t.substr(s,t.length-s)},ye=function(t,e,r,i,n){var s=e-t,a=i-r;return se(n,(function(e){return r+((e-t)/s*a||0)}))},Te=function(t,e,r){var i,n,s,a=t.labels,o=F;for(i in a)(n=a[i]-e)<0==!!r&&n&&o>(n=Math.abs(n))&&(s=i,o=n);return s},we=function(t,e,r){var i,n,s=t.vars,a=s[e];if(a)return i=s[e+"Params"],n=s.callbackScope||t,r&&pt.length&&Mt(),i?a.apply(n,i):a.call(n)},be=function(t){return Bt(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&we(t,"onInterrupt"),t},ke=function(t){var e=(t=!t.name&&t.default||t).name,r=j(t),i=e&&!r&&t.init?function(){this._props=[]}:t,n={init:lt,render:lr,add:Ke,kill:pr,modifier:cr,rawVars:0},s={targetTest:0,get:0,getSetter:ur,aliases:{},register:0};if(Pe(),t!==i){if(mt[e])return;zt(i,zt(It(t,n),s)),Pt(i.prototype,Pt(n,It(t,s))),mt[i.prop=e]=i,t.targetTest&&(yt.push(i),ct[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}ft(e,i),t.register&&t.register(wr,i,gr)},xe=255,De={aqua:[0,xe,xe],lime:[0,xe,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,xe],navy:[0,0,128],white:[xe,xe,xe],olive:[128,128,0],yellow:[xe,xe,0],orange:[xe,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[xe,0,0],pink:[xe,192,203],cyan:[0,xe,xe],transparent:[xe,xe,xe,0]},Ae=function(t,e,r){return(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(r-e)*t*6:t<.5?r:3*t<2?e+(r-e)*(2/3-t)*6:e)*xe+.5|0},Ce=function(t,e,r){var i,n,s,a,o,u,h,_,f,l,c=t?G(t)?[t>>16,t>>8&xe,t&xe]:0:De.black;if(!c){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),De[t])c=De[t];else if("#"===t.charAt(0)){if(t.length<6&&(i=t.charAt(1),n=t.charAt(2),s=t.charAt(3),t="#"+i+i+n+n+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(c=parseInt(t.substr(1,6),16))>>16,c>>8&xe,c&xe,parseInt(t.substr(7),16)/255];c=[(t=parseInt(t.substr(1),16))>>16,t>>8&xe,t&xe]}else if("hsl"===t.substr(0,3))if(c=l=t.match(X),e){if(~t.indexOf("="))return c=t.match(tt),r&&c.length<4&&(c[3]=1),c}else a=+c[0]%360/360,o=+c[1]/100,i=2*(u=+c[2]/100)-(n=u<=.5?u*(o+1):u+o-u*o),c.length>3&&(c[3]*=1),c[0]=Ae(a+1/3,i,n),c[1]=Ae(a,i,n),c[2]=Ae(a-1/3,i,n);else c=t.match(X)||De.transparent;c=c.map(Number)}return e&&!l&&(i=c[0]/xe,n=c[1]/xe,s=c[2]/xe,u=((h=Math.max(i,n,s))+(_=Math.min(i,n,s)))/2,h===_?a=o=0:(f=h-_,o=u>.5?f/(2-h-_):f/(h+_),a=h===i?(n-s)/f+(n<s?6:0):h===n?(s-i)/f+2:(i-n)/f+4,a*=60),c[0]=~~(a+.5),c[1]=~~(100*o+.5),c[2]=~~(100*u+.5)),r&&c.length<4&&(c[3]=1),c},Me=function(t){var e=[],r=[],i=-1;return t.split(Se).forEach((function(t){var n=t.match(et)||[];e.push.apply(e,n),r.push(i+=n.length+1)})),e.c=r,e},Re=function(t,e,r){var i,n,s,a,o="",u=(t+o).match(Se),h=e?"hsla(":"rgba(",_=0;if(!u)return t;if(u=u.map((function(t){return(t=Ce(t,e,1))&&h+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),r&&(s=Me(t),(i=r.c).join(o)!==s.c.join(o)))for(a=(n=t.replace(Se,"1").split(et)).length-1;_<a;_++)o+=n[_]+(~i.indexOf(_)?u.shift()||h+"0,0,0,0)":(s.length?s:u.length?u:r).shift());if(!n)for(a=(n=t.split(Se)).length-1;_<a;_++)o+=n[_]+u[_];return o+n[a]},Se=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in De)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Oe=/hsl[a]?\(/,ze=function(t){var e,r=t.join(" ");if(Se.lastIndex=0,Se.test(r))return e=Oe.test(r),t[1]=Re(t[1],e),t[0]=Re(t[0],e,Me(t[1])),!0},Ee=(T=Date.now,w=500,b=33,k=T(),x=k,A=D=1e3/240,M=function t(e){var r,i,n,s,a=T()-x,o=!0===e;if(a>w&&(k+=a-b),((r=(n=(x+=a)-k)-A)>0||o)&&(s=++g.frame,v=n-1e3*g.time,g.time=n/=1e3,A+=r+(r>=D?4:D-r),i=1),o||(p=d(t)),i)for(y=0;y<C.length;y++)C[y](n,v,s,e)},g={time:0,frame:0,tick:function(){M(!0)},deltaRatio:function(t){return v/(1e3/(t||60))},wake:function(){_&&(!u&&H()&&(o=u=window,h=o.document||{},at.gsap=wr,(o.gsapVersions||(o.gsapVersions=[])).push(wr.version),ut(ot||o.GreenSockGlobals||!o.gsap&&o||{}),m=o.requestAnimationFrame),p&&g.sleep(),d=m||function(t){return setTimeout(t,A-1e3*g.time+1|0)},c=1,M(2))},sleep:function(){(m?o.cancelAnimationFrame:clearTimeout)(p),c=0,d=lt},lagSmoothing:function(t,e){w=t||1e8,b=Math.min(e,w,0)},fps:function(t){D=1e3/(t||240),A=1e3*g.time+D},add:function(t){C.indexOf(t)<0&&C.push(t),Pe()},remove:function(t){var e;~(e=C.indexOf(t))&&C.splice(e,1)&&y>=e&&y--},_listeners:C=[]}),Pe=function(){return!c&&Ee.wake()},Fe={},Ie=/^[\d.\-M][\d.\-,\s]/,Le=/["']/g,Ue=function(t){for(var e,r,i,n={},s=t.substr(1,t.length-3).split(":"),a=s[0],o=1,u=s.length;o<u;o++)r=s[o],e=o!==u-1?r.lastIndexOf(","):r.length,i=r.substr(0,e),n[a]=isNaN(i)?i.replace(Le,"").trim():+i,a=r.substr(e+1).trim();return n},Be=function(t){return function(e){return 1-t(1-e)}},Ne=function t(e,r){for(var i,n=e._first;n;)n instanceof Ze?t(n,r):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===r||(n.timeline?t(n.timeline,r):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=r)),n=n._next},qe=function(t,e){return t&&(j(t)?t:Fe[t]||function(t){var e,r,i,n,s=(t+"").split("("),a=Fe[s[0]];return a&&s.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[Ue(s[1])]:(e=t,r=e.indexOf("(")+1,i=e.indexOf(")"),n=e.indexOf("(",r),e.substring(r,~n&&n<i?e.indexOf(")",i+1):i)).split(",").map(St)):Fe._CE&&Ie.test(t)?Fe._CE("",t):a}(t))||e},Qe=function(t,e,r,i){void 0===r&&(r=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var n,s={easeIn:e,easeOut:r,easeInOut:i};return xt(t,(function(t){for(var e in Fe[t]=at[t]=s,Fe[n=t.toLowerCase()]=r,s)Fe[n+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Fe[t+"."+e]=s[e]})),s},Ve=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},je=function t(e,r,i){var n=r>=1?r:1,s=(i||(e?.3:.45))/(r<1?r:1),a=s/L*(Math.asin(1/n)||0),o=function(t){return 1===t?1:n*Math.pow(2,-10*t)*Q((t-a)*s)+1},u="out"===e?o:"in"===e?function(t){return 1-o(1-t)}:Ve(o);return s=L/s,u.config=function(r,i){return t(e,r,i)},u},Ge=function t(e,r){void 0===r&&(r=1.70158);var i=function(t){return t?--t*t*((r+1)*t+r)+1:0},n="out"===e?i:"in"===e?function(t){return 1-i(1-t)}:Ve(i);return n.config=function(r){return t(e,r)},n};xt("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var r=e<5?e+1:e;Qe(t+",Power"+(r-1),e?function(t){return Math.pow(t,r)}:function(t){return t},(function(t){return 1-Math.pow(1-t,r)}),(function(t){return t<.5?Math.pow(2*t,r)/2:1-Math.pow(2*(1-t),r)/2}))})),Fe.Linear.easeNone=Fe.none=Fe.Linear.easeIn,Qe("Elastic",je("in"),je("out"),je()),R=7.5625,O=1/(S=2.75),Qe("Bounce",(function(t){return 1-z(1-t)}),z=function(t){return t<O?R*t*t:t<.7272727272727273?R*Math.pow(t-1.5/S,2)+.75:t<.9090909090909092?R*(t-=2.25/S)*t+.9375:R*Math.pow(t-2.625/S,2)+.984375}),Qe("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Qe("Circ",(function(t){return-(N(1-t*t)-1)})),Qe("Sine",(function(t){return 1===t?1:1-q(t*U)})),Qe("Back",Ge("in"),Ge("out"),Ge()),Fe.SteppedEase=Fe.steps=at.SteppedEase={config:function(t,e){void 0===t&&(t=1);var r=1/t,i=t+(e?0:1),n=e?1:0;return function(t){return((i*ae(0,.99999999,t)|0)+n)*r}}},P.ease=Fe["quad.out"],xt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return Tt+=t+","+t+"Params,"}));var We=function(t,e){this.id=B++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:kt,this.set=e?e.getSetter:ur},Ye=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,te(this,+t.duration,1,1),this.data=t.data,c||Ee.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,te(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Pe(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Yt(this,t),!r._dp||r.parent||Zt(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Ht(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===I||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Rt(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Vt(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Vt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*r,e):this._repeat?jt(this._tTime,r)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Gt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,qt(this.totalTime(ae(-this._delay,this._tDur,e),!0)),Wt(this),this},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Pe(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==I&&(this._tTime-=I)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Ht(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(Z(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Gt(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,r=arguments.length?t:e.rawTime();e;)r=e._start+r/(e._ts||1),e=e._dp;return r},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,ee(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,ee(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(ie(this,t),Z(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,Z(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,r=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=r&&t<this.endTime(!0)-I))},e.eventCallback=function(t,e,r){var i=this.vars;return arguments.length>1?(e?(i[t]=e,r&&(i[t+"Params"]=r),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},e.then=function(t){var e=this;return new Promise((function(r){var i=j(t)?t:Ot,n=function(){var t=e.then;e.then=null,j(i)&&(i=i(e))&&(i.then||i===e)&&(e.then=t),r(i),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?n():e._prom=n}))},e.kill=function(){be(this)},t}();zt(Ye.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Ze=function(t){function e(e,r){var n;return void 0===e&&(e={}),(n=t.call(this,e)||this).labels={},n.smoothChildTiming=!!e.smoothChildTiming,n.autoRemoveChildren=!!e.autoRemoveChildren,n._sort=Z(e.sortChildren),a&&Ht(e.parent||a,i(n),r),e.reversed&&n.reverse(),e.paused&&n.paused(!0),e.scrollTrigger&&Jt(i(n),e.scrollTrigger),n}n(e,t);var r=e.prototype;return r.to=function(t,e,r){return ne(0,arguments,this),this},r.from=function(t,e,r){return ne(1,arguments,this),this},r.fromTo=function(t,e,r,i){return ne(2,arguments,this),this},r.set=function(t,e,r){return e.duration=0,e.parent=this,Lt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new ir(t,e,ie(this,r),1),this},r.call=function(t,e,r){return Ht(this,ir.delayedCall(0,t,e),r)},r.staggerTo=function(t,e,r,i,n,s,a){return r.duration=e,r.stagger=r.stagger||i,r.onComplete=s,r.onCompleteParams=a,r.parent=this,new ir(t,r,ie(this,n)),this},r.staggerFrom=function(t,e,r,i,n,s,a){return r.runBackwards=1,Lt(r).immediateRender=Z(r.immediateRender),this.staggerTo(t,e,r,i,n,s,a)},r.staggerFromTo=function(t,e,r,i,n,s,a,o){return i.startAt=r,Lt(i).immediateRender=Z(i.immediateRender),this.staggerTo(t,e,i,n,s,a,o)},r.render=function(t,e,r){var i,n,s,o,u,h,_,f,l,c,p,d,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=t<=0?0:At(t),T=this._zTime<0!=t<0&&(this._initted||!v);if(this!==a&&y>g&&t>=0&&(y=g),y!==this._tTime||r||T){if(m!==this._time&&v&&(y+=this._time-m,t+=this._time-m),i=y,l=this._start,h=!(f=this._ts),T&&(v||(m=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(p=this._yoyo,u=v+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*u+t,e,r);if(i=At(y%u),y===g?(o=this._repeat,i=v):((o=~~(y/u))&&o===y/u&&(i=v,o--),i>v&&(i=v)),c=jt(this._tTime,u),!m&&this._tTime&&c!==o&&(c=o),p&&1&o&&(i=v-i,d=1),o!==c&&!this._lock){var w=p&&1&c,b=w===(p&&1&o);if(o<c&&(w=!w),m=w?0:v,this._lock=1,this.render(m||(d?0:At(o*u)),e,!v)._lock=0,this._tTime=y,!e&&this.parent&&we(this,"onRepeat"),this.vars.repeatRefresh&&!d&&(this.invalidate()._lock=1),m&&m!==this._time||h!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,g=this._tDur,b&&(this._lock=2,m=w?v:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!d&&this.invalidate()),this._lock=0,!this._ts&&!h)return this;Ne(this,d)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(_=function(t,e,r){var i;if(r>e)for(i=t._first;i&&i._start<=r;){if(!i._dur&&"isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=r;){if(!i._dur&&"isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,At(m),At(i)),_&&(y-=i-(i=_._start))),this._tTime=y,this._time=i,this._act=!f,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&i&&!e&&(we(this,"onStart"),this._tTime!==y))return this;if(i>=m&&t>=0)for(n=this._first;n;){if(s=n._next,(n._act||i>=n._start)&&n._ts&&_!==n){if(n.parent!==this)return this.render(t,e,r);if(n.render(n._ts>0?(i-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(i-n._start)*n._ts,e,r),i!==this._time||!this._ts&&!h){_=0,s&&(y+=this._zTime=-1e-8);break}}n=s}else{n=this._last;for(var k=t<0?t:i;n;){if(s=n._prev,(n._act||k<=n._end)&&n._ts&&_!==n){if(n.parent!==this)return this.render(t,e,r);if(n.render(n._ts>0?(k-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(k-n._start)*n._ts,e,r),i!==this._time||!this._ts&&!h){_=0,s&&(y+=this._zTime=k?-1e-8:I);break}}n=s}}if(_&&!e&&(this.pause(),_.render(i>=m?0:-1e-8)._zTime=i>=m?1:-1,this._ts))return this._start=l,Wt(this),this.render(t,e,r);this._onUpdate&&!e&&we(this,"onUpdate",!0),(y===g&&g>=this.totalDuration()||!y&&m)&&(l!==this._start&&Math.abs(f)===Math.abs(this._ts)||this._lock||((t||!v)&&(y===g&&this._ts>0||!y&&this._ts<0)&&Bt(this,1),e||t<0&&!m||!y&&!m&&g||(we(this,y===g&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<g&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(t,e){var r=this;if(G(e)||(e=ie(this,e,t)),!(t instanceof Ye)){if($(t))return t.forEach((function(t){return r.add(t,e)})),this;if(V(t))return this.addLabel(t,e);if(!j(t))return this;t=ir.delayedCall(0,t)}return this!==t?Ht(this,t,e):this},r.getChildren=function(t,e,r,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===i&&(i=-F);for(var n=[],s=this._first;s;)s._start>=i&&(s instanceof ir?e&&n.push(s):(r&&n.push(s),t&&n.push.apply(n,s.getChildren(!0,e,r)))),s=s._next;return n},r.getById=function(t){for(var e=this.getChildren(1,1,1),r=e.length;r--;)if(e[r].vars.id===t)return e[r]},r.remove=function(t){return V(t)?this.removeLabel(t):j(t)?this.killTweensOf(t):(Ut(this,t),t===this._recent&&(this._recent=this._last),Nt(this))},r.totalTime=function(e,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=At(Ee.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,r),this._forcing=0,this):this._tTime},r.addLabel=function(t,e){return this.labels[t]=ie(this,e),this},r.removeLabel=function(t){return delete this.labels[t],this},r.addPause=function(t,e,r){var i=ir.delayedCall(0,e||lt,r);return i.data="isPause",this._hasPause=1,Ht(this,i,ie(this,t))},r.removePause=function(t){var e=this._first;for(t=ie(this,t);e;)e._start===t&&"isPause"===e.data&&Bt(e),e=e._next},r.killTweensOf=function(t,e,r){for(var i=this.getTweensOf(t,r),n=i.length;n--;)He!==i[n]&&i[n].kill(t,e);return this},r.getTweensOf=function(t,e){for(var r,i=[],n=fe(t),s=this._first,a=G(e);s;)s instanceof ir?Ct(s._targets,n)&&(a?(!He||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&i.push(s):(r=s.getTweensOf(n,e)).length&&i.push.apply(i,r),s=s._next;return i},r.tweenTo=function(t,e){e=e||{};var r,i=this,n=ie(i,t),s=e,a=s.startAt,o=s.onStart,u=s.onStartParams,h=s.immediateRender,_=ir.to(i,zt({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:n,overwrite:"auto",duration:e.duration||Math.abs((n-(a&&"time"in a?a.time:i._time))/i.timeScale())||I,onStart:function(){if(i.pause(),!r){var t=e.duration||Math.abs((n-(a&&"time"in a?a.time:i._time))/i.timeScale());_._dur!==t&&te(_,t,0,1).render(_._time,!0,!0),r=1}o&&o.apply(_,u||[])}},e));return h?_.render(0):_},r.tweenFromTo=function(t,e,r){return this.tweenTo(e,zt({startAt:{time:ie(this,t)}},r))},r.recent=function(){return this._recent},r.nextLabel=function(t){return void 0===t&&(t=this._time),Te(this,ie(this,t))},r.previousLabel=function(t){return void 0===t&&(t=this._time),Te(this,ie(this,t),1)},r.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+I)},r.shiftChildren=function(t,e,r){void 0===r&&(r=0);for(var i,n=this._first,s=this.labels;n;)n._start>=r&&(n._start+=t,n._end+=t),n=n._next;if(e)for(i in s)s[i]>=r&&(s[i]+=t);return Nt(this)},r.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},r.clear=function(t){void 0===t&&(t=!0);for(var e,r=this._first;r;)e=r._next,this.remove(r),r=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Nt(this)},r.totalDuration=function(t){var e,r,i,n=0,s=this,o=s._last,u=F;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(i=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(r=o._start)>u&&s._sort&&o._ts&&!s._lock?(s._lock=1,Ht(s,o,r-o._delay,1)._lock=0):u=r,r<0&&o._ts&&(n-=r,(!i&&!s._dp||i&&i.smoothChildTiming)&&(s._start+=r/s._ts,s._time-=r,s._tTime-=r),s.shiftChildren(-r,!1,-Infinity),u=0),o._end>n&&o._ts&&(n=o._end),o=e;te(s,s===a&&s._time>n?s._time:n,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(a._ts&&(Rt(a,Gt(t,a)),f=Ee.frame),Ee.frame>=vt){vt+=E.autoSleep||120;var e=a._first;if((!e||!e._ts)&&E.autoSleep&&Ee._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ee.sleep()}}},e}(Ye);zt(Ze.prototype,{_lock:0,_hasPause:0,_forcing:0});var He,Je=function(t,e,r,i,n,s,a){var o,u,h,_,f,l,c,p,d=new gr(this._pt,t,e,0,1,fr,null,n),m=0,g=0;for(d.b=r,d.e=i,r+="",(c=~(i+="").indexOf("random("))&&(i=ve(i)),s&&(s(p=[r,i],t,e),r=p[0],i=p[1]),u=r.match(rt)||[];o=rt.exec(i);)_=o[0],f=i.substring(m,o.index),h?h=(h+1)%5:"rgba("===f.substr(-5)&&(h=1),_!==u[g++]&&(l=parseFloat(u[g-1])||0,d._pt={_next:d._pt,p:f||1===g?f:",",s:l,c:"="===_.charAt(1)?parseFloat(_.substr(2))*("-"===_.charAt(0)?-1:1):parseFloat(_)-l,m:h&&h<4?Math.round:0},m=rt.lastIndex);return d.c=m<i.length?i.substring(m,i.length):"",d.fp=a,(it.test(i)||c)&&(d.e=0),this._pt=d,d},Ke=function(t,e,r,i,n,s,a,o,u){j(i)&&(i=i(n||0,t,s));var h,_=t[e],f="get"!==r?r:j(_)?u?t[e.indexOf("set")||!j(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():_,l=j(_)?u?ar:sr:nr;if(V(i)&&(~i.indexOf("random(")&&(i=ve(i)),"="===i.charAt(1)&&((h=parseFloat(f)+parseFloat(i.substr(2))*("-"===i.charAt(0)?-1:1)+(oe(f)||0))||0===h)&&(i=h)),f!==i)return isNaN(f*i)||""===i?(!_&&!(e in t)&&ht(e,i),Je.call(this,t,e,f,i,l,o||E.stringFilter,u)):(h=new gr(this._pt,t,e,+f||0,i-(f||0),"boolean"==typeof _?_r:hr,0,l),u&&(h.fp=u),a&&h.modifier(a,this,t),this._pt=h)},$e=function(t,e,r,i,n,s){var a,o,u,h;if(mt[t]&&!1!==(a=new mt[t]).init(n,a.rawVars?e[t]:function(t,e,r,i,n){if(j(t)&&(t=tr(t,n,e,r,i)),!Y(t)||t.style&&t.nodeType||$(t)||K(t))return V(t)?tr(t,n,e,r,i):t;var s,a={};for(s in t)a[s]=tr(t[s],n,e,r,i);return a}(e[t],i,n,s,r),r,i,s)&&(r._pt=o=new gr(r._pt,n,t,0,1,a.render,a,0,a.priority),r!==l))for(u=r._ptLookup[r._targets.indexOf(n)],h=a._props.length;h--;)u[a._props[h]]=o;return a},Xe=function t(e,r){var i,n,o,u,h,_,f,l,c,p,d,m,g,v=e.vars,y=v.ease,T=v.startAt,w=v.immediateRender,b=v.lazy,k=v.onUpdate,x=v.onUpdateParams,D=v.callbackScope,A=v.runBackwards,C=v.yoyoEase,M=v.keyframes,R=v.autoRevert,S=e._dur,O=e._startAt,z=e._targets,E=e.parent,F=E&&"nested"===E.data?E.parent._targets:z,L="auto"===e._overwrite&&!s,U=e.timeline;if(U&&(!M||!y)&&(y="none"),e._ease=qe(y,P.ease),e._yEase=C?Be(qe(!0===C?y:C,P.ease)):0,C&&e._yoyo&&!e._repeat&&(C=e._yEase,e._yEase=e._ease,e._ease=C),e._from=!U&&!!v.runBackwards,!U){if(m=(l=z[0]?bt(z[0]).harness:0)&&v[l.prop],i=It(v,ct),O&&O.render(-1,!0).kill(),T)if(Bt(e._startAt=ir.set(z,zt({data:"isStart",overwrite:!1,parent:E,immediateRender:!0,lazy:Z(b),startAt:null,delay:0,onUpdate:k,onUpdateParams:x,callbackScope:D,stagger:0},T))),r<0&&!w&&!R&&e._startAt.render(-1,!0),w){if(r>0&&!R&&(e._startAt=0),S&&r<=0)return void(r&&(e._zTime=r))}else!1===R&&(e._startAt=0);else if(A&&S)if(O)!R&&(e._startAt=0);else if(r&&(w=!1),o=zt({overwrite:!1,data:"isFromStart",lazy:w&&Z(b),immediateRender:w,stagger:0,parent:E},i),m&&(o[l.prop]=m),Bt(e._startAt=ir.set(z,o)),r<0&&e._startAt.render(-1,!0),w){if(!r)return}else t(e._startAt,I);for(e._pt=0,b=S&&Z(b)||b&&!S,n=0;n<z.length;n++){if(f=(h=z[n])._gsap||wt(z)[n]._gsap,e._ptLookup[n]=p={},dt[f.id]&&pt.length&&Mt(),d=F===z?n:F.indexOf(h),l&&!1!==(c=new l).init(h,m||i,e,d,F)&&(e._pt=u=new gr(e._pt,h,c.name,0,1,c.render,c,0,c.priority),c._props.forEach((function(t){p[t]=u})),c.priority&&(_=1)),!l||m)for(o in i)mt[o]&&(c=$e(o,i,e,d,h,F))?c.priority&&(_=1):p[o]=u=Ke.call(e,h,o,"get",i[o],d,F,0,v.stringFilter);e._op&&e._op[n]&&e.kill(h,e._op[n]),L&&e._pt&&(He=e,a.killTweensOf(h,p,e.globalTime(r)),g=!e.parent,He=0),e._pt&&b&&(dt[f.id]=1)}_&&mr(e),e._onInit&&e._onInit(e)}e._onUpdate=k,e._initted=(!e._op||e._pt)&&!g},tr=function(t,e,r,i,n){return j(t)?t.call(e,r,i,n):V(t)&&~t.indexOf("random(")?ve(t):t},er=Tt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",rr=(er+",id,stagger,delay,duration,paused,scrollTrigger").split(","),ir=function(t){function e(e,r,n,o){var u;"number"==typeof r&&(n.duration=r,r=n,n=null);var h,_,f,l,c,p,d,m,g=(u=t.call(this,o?r:Lt(r))||this).vars,v=g.duration,y=g.delay,T=g.immediateRender,w=g.stagger,b=g.overwrite,k=g.keyframes,x=g.defaults,D=g.scrollTrigger,A=g.yoyoEase,C=r.parent||a,M=($(e)||K(e)?G(e[0]):"length"in r)?[e]:fe(e);if(u._targets=M.length?wt(M):_t("GSAP target "+e+" not found. https://greensock.com",!E.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=b,k||w||J(v)||J(y)){if(r=u.vars,(h=u.timeline=new Ze({data:"nested",defaults:x||{}})).kill(),h.parent=h._dp=i(u),h._start=0,k)Lt(zt(h.vars.defaults,{ease:"none"})),w?M.forEach((function(t,e){return k.forEach((function(r,i){return h.to(t,r,i?">":e*w)}))})):k.forEach((function(t){return h.to(M,t,">")}));else{if(l=M.length,d=w?ce(w):lt,Y(w))for(c in w)~er.indexOf(c)&&(m||(m={}),m[c]=w[c]);for(_=0;_<l;_++){for(c in f={},r)rr.indexOf(c)<0&&(f[c]=r[c]);f.stagger=0,A&&(f.yoyoEase=A),m&&Pt(f,m),p=M[_],f.duration=+tr(v,i(u),_,p,M),f.delay=(+tr(y,i(u),_,p,M)||0)-u._delay,!w&&1===l&&f.delay&&(u._delay=y=f.delay,u._start+=y,f.delay=0),h.to(p,f,d(_,p,M))}h.duration()?v=y=0:u.timeline=0}v||u.duration(v=h.duration())}else u.timeline=0;return!0!==b||s||(He=i(u),a.killTweensOf(M),He=0),Ht(C,i(u),n),r.reversed&&u.reverse(),r.paused&&u.paused(!0),(T||!v&&!k&&u._start===At(C._time)&&Z(T)&&Qt(i(u))&&"nested"!==C.data)&&(u._tTime=-1e-8,u.render(Math.max(0,-y))),D&&Jt(i(u),D),u}n(e,t);var r=e.prototype;return r.render=function(t,e,r){var i,n,s,a,o,u,h,_,f,l=this._time,c=this._tDur,p=this._dur,d=t>c-I&&t>=0?c:t<I?0:t;if(p){if(d!==this._tTime||!t||r||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=t<0){if(i=d,_=this.timeline,this._repeat){if(a=p+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,r);if(i=At(d%a),d===c?(s=this._repeat,i=p):((s=~~(d/a))&&s===d/a&&(i=p,s--),i>p&&(i=p)),(u=this._yoyo&&1&s)&&(f=this._yEase,i=p-i),o=jt(this._tTime,a),i===l&&!r&&this._initted)return this;s!==o&&(_&&this._yEase&&Ne(_,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=r=1,this.render(At(a*s),!0).invalidate()._lock=0))}if(!this._initted){if(Kt(this,t<0?t:i,r,e))return this._tTime=0,this;if(p!==this._dur)return this.render(t,e,r)}if(this._tTime=d,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=h=(f||this._ease)(i/p),this._from&&(this.ratio=h=1-h),i&&!l&&!e&&(we(this,"onStart"),this._tTime!==d))return this;for(n=this._pt;n;)n.r(h,n.d),n=n._next;_&&_.render(t<0?t:!i&&u?-1e-8:_._dur*h,e,r)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,r),we(this,"onUpdate")),this._repeat&&s!==o&&this.vars.onRepeat&&!e&&this.parent&&we(this,"onRepeat"),d!==this._tDur&&d||this._tTime!==d||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!p)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Bt(this,1),e||t<0&&!l||!d&&!l||(we(this,d===c?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,r,i){var n,s,a,o=t.ratio,u=e<0||!e&&(!t._start&&$t(t)&&(t._initted||!Xt(t))||(t._ts<0||t._dp._ts<0)&&!Xt(t))?0:1,h=t._rDelay,_=0;if(h&&t._repeat&&(_=ae(0,t._tDur,e),s=jt(_,h),a=jt(t._tTime,h),t._yoyo&&1&s&&(u=1-u),s!==a&&(o=1-u,t.vars.repeatRefresh&&t._initted&&t.invalidate())),u!==o||i||t._zTime===I||!e&&t._zTime){if(!t._initted&&Kt(t,e,i,r))return;for(a=t._zTime,t._zTime=e||(r?I:0),r||(r=e&&!a),t.ratio=u,t._from&&(u=1-u),t._time=0,t._tTime=_,n=t._pt;n;)n.r(u,n.d),n=n._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!r&&we(t,"onUpdate"),_&&t._repeat&&!r&&t.parent&&we(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===u&&(u&&Bt(t,1),r||(we(t,u?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,r);return this},r.targets=function(){return this._targets},r.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},r.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?be(this):this;if(this.timeline){var r=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,He&&!0!==He.vars.overwrite)._first||be(this),this.parent&&r!==this.timeline.totalDuration()&&te(this,this._dur*this.timeline._tDur/r,0,1),this}var i,n,s,a,o,u,h,_=this._targets,f=t?fe(t):_,l=this._ptLookup,c=this._pt;if((!e||"all"===e)&&function(t,e){for(var r=t.length,i=r===e.length;i&&r--&&t[r]===e[r];);return r<0}(_,f))return"all"===e&&(this._pt=0),be(this);for(i=this._op=this._op||[],"all"!==e&&(V(e)&&(o={},xt(e,(function(t){return o[t]=1})),e=o),e=function(t,e){var r,i,n,s,a=t[0]?bt(t[0]).harness:0,o=a&&a.aliases;if(!o)return e;for(i in r=Pt({},e),o)if(i in r)for(n=(s=o[i].split(",")).length;n--;)r[s[n]]=r[i];return r}(_,e)),h=_.length;h--;)if(~f.indexOf(_[h]))for(o in n=l[h],"all"===e?(i[h]=e,a=n,s={}):(s=i[h]=i[h]||{},a=e),a)(u=n&&n[o])&&("kill"in u.d&&!0!==u.d.kill(o)||Ut(this,u,"_pt"),delete n[o]),"all"!==s&&(s[o]=1);return this._initted&&!this._pt&&c&&be(this),this},e.to=function(t,r){return new e(t,r,arguments[2])},e.from=function(t,e){return ne(1,arguments)},e.delayedCall=function(t,r,i,n){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:r,onReverseComplete:r,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:n})},e.fromTo=function(t,e,r){return ne(2,arguments)},e.set=function(t,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(t,r)},e.killTweensOf=function(t,e,r){return a.killTweensOf(t,e,r)},e}(Ye);zt(ir.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),xt("staggerTo,staggerFrom,staggerFromTo",(function(t){ir[t]=function(){var e=new Ze,r=ue.call(arguments,0);return r.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,r)}}));var nr=function(t,e,r){return t[e]=r},sr=function(t,e,r){return t[e](r)},ar=function(t,e,r,i){return t[e](i.fp,r)},or=function(t,e,r){return t.setAttribute(e,r)},ur=function(t,e){return j(t[e])?sr:W(t[e])&&t.setAttribute?or:nr},hr=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},_r=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},fr=function(t,e){var r=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*t):Math.round(1e4*(r.s+r.c*t))/1e4)+i,r=r._next;i+=e.c}e.set(e.t,e.p,i,e)},lr=function(t,e){for(var r=e._pt;r;)r.r(t,r.d),r=r._next},cr=function(t,e,r,i){for(var n,s=this._pt;s;)n=s._next,s.p===i&&s.modifier(t,e,r),s=n},pr=function(t){for(var e,r,i=this._pt;i;)r=i._next,i.p===t&&!i.op||i.op===t?Ut(this,i,"_pt"):i.dep||(e=1),i=r;return!e},dr=function(t,e,r,i){i.mSet(t,e,i.m.call(i.tween,r,i.mt),i)},mr=function(t){for(var e,r,i,n,s=t._pt;s;){for(e=s._next,r=i;r&&r.pr>s.pr;)r=r._next;(s._prev=r?r._prev:n)?s._prev._next=s:i=s,(s._next=r)?r._prev=s:n=s,s=e}t._pt=i},gr=function(){function t(t,e,r,i,n,s,a,o,u){this.t=e,this.s=i,this.c=n,this.p=r,this.r=s||hr,this.d=a||this,this.set=o||nr,this.pr=u||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,r){this.mSet=this.mSet||this.set,this.set=dr,this.m=t,this.mt=r,this.tween=e},t}();xt(Tt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return ct[t]=1})),at.TweenMax=at.TweenLite=ir,at.TimelineLite=at.TimelineMax=Ze,a=new Ze({sortChildren:!1,defaults:P,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),E.stringFilter=ze;var vr={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach((function(t){return ke(t)}))},timeline:function(t){return new Ze(t)},getTweensOf:function(t,e){return a.getTweensOf(t,e)},getProperty:function(t,e,r,i){V(t)&&(t=fe(t)[0]);var n=bt(t||{}).get,s=r?Ot:St;return"native"===r&&(r=""),t?e?s((mt[e]&&mt[e].get||n)(t,e,r,i)):function(e,r,i){return s((mt[e]&&mt[e].get||n)(t,e,r,i))}:t},quickSetter:function(t,e,r){if((t=fe(t)).length>1){var i=t.map((function(t){return wr.quickSetter(t,e,r)})),n=i.length;return function(t){for(var e=n;e--;)i[e](t)}}t=t[0]||{};var s=mt[e],a=bt(t),o=a.harness&&(a.harness.aliases||{})[e]||e,u=s?function(e){var i=new s;l._pt=0,i.init(t,r?e+r:e,l,0,[t]),i.render(1,i),l._pt&&lr(1,l)}:a.set(t,o);return s?u:function(e){return u(t,o,r?e+r:e,a,1)}},isTweening:function(t){return a.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=qe(t.ease,P.ease)),Ft(P,t||{})},config:function(t){return Ft(E,t||{})},registerEffect:function(t){var e=t.name,r=t.effect,i=t.plugins,n=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach((function(t){return t&&!mt[t]&&!at[t]&&_t(e+" effect requires "+t+" plugin.")})),gt[e]=function(t,e,i){return r(fe(t),zt(e||{},n),i)},s&&(Ze.prototype[e]=function(t,r,i){return this.add(gt[e](t,Y(r)?r:(i=r)&&{},this),i)})},registerEase:function(t,e){Fe[t]=qe(e)},parseEase:function(t,e){return arguments.length?qe(t,e):Fe},getById:function(t){return a.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var r,i,n=new Ze(t);for(n.smoothChildTiming=Z(t.smoothChildTiming),a.remove(n),n._dp=0,n._time=n._tTime=a._time,r=a._first;r;)i=r._next,!e&&!r._dur&&r instanceof ir&&r.vars.onComplete===r._targets[0]||Ht(n,r,r._start-r._delay),r=i;return Ht(a,n,0),n},utils:{wrap:function t(e,r,i){var n=r-e;return $(e)?ge(e,t(0,e.length),r):se(i,(function(t){return(n+(t-e)%n)%n+e}))},wrapYoyo:function t(e,r,i){var n=r-e,s=2*n;return $(e)?ge(e,t(0,e.length-1),r):se(i,(function(t){return e+((t=(s+(t-e)%s)%s||0)>n?s-t:t)}))},distribute:ce,random:me,snap:de,normalize:function(t,e,r){return ye(t,e,0,1,r)},getUnit:oe,clamp:function(t,e,r){return se(r,(function(r){return ae(t,e,r)}))},splitColor:Ce,toArray:fe,selector:function(t){return t=fe(t)[0]||_t("Invalid scope")||{},function(e){var r=t.current||t.nativeElement||t;return fe(e,r.querySelectorAll?r:r===t?_t("Invalid scope")||h.createElement("div"):t)}},mapRange:ye,pipe:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(r){return t(parseFloat(r))+(e||oe(r))}},interpolate:function t(e,r,i,n){var s=isNaN(e+r)?0:function(t){return(1-t)*e+t*r};if(!s){var a,o,u,h,_,f=V(e),l={};if(!0===i&&(n=1)&&(i=null),f)e={p:e},r={p:r};else if($(e)&&!$(r)){for(u=[],h=e.length,_=h-2,o=1;o<h;o++)u.push(t(e[o-1],e[o]));h--,s=function(t){t*=h;var e=Math.min(_,~~t);return u[e](t-e)},i=r}else n||(e=Pt($(e)?[]:{},e));if(!u){for(a in r)Ke.call(l,e,a,"get",r[a]);s=function(t){return lr(t,l)||(f?e.p:e)}}}return se(i,s)},shuffle:le},install:ut,effects:gt,ticker:Ee,updateRoot:Ze.updateRoot,plugins:mt,globalTimeline:a,core:{PropTween:gr,globals:ft,Tween:ir,Timeline:Ze,Animation:Ye,getCache:bt,_removeLinkedListItem:Ut,suppressOverwrites:function(t){return s=t}}};xt("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return vr[t]=ir[t]})),Ee.add(Ze.updateRoot),l=vr.to({},{duration:0});var yr=function(t,e){for(var r=t._pt;r&&r.p!==e&&r.op!==e&&r.fp!==e;)r=r._next;return r},Tr=function(t,e){return{name:t,rawVars:1,init:function(t,r,i){i._onInit=function(t){var i,n;if(V(r)&&(i={},xt(r,(function(t){return i[t]=1})),r=i),e){for(n in i={},r)i[n]=e(r[n]);r=i}!function(t,e){var r,i,n,s=t._targets;for(r in e)for(i=s.length;i--;)(n=t._ptLookup[i][r])&&(n=n.d)&&(n._pt&&(n=yr(n,r)),n&&n.modifier&&n.modifier(e[r],t,s[i],r))}(t,r)}}}},wr=vr.registerPlugin({name:"attr",init:function(t,e,r,i,n){var s,a;for(s in e)(a=this.add(t,"setAttribute",(t.getAttribute(s)||0)+"",e[s],i,n,0,0,s))&&(a.op=s),this._props.push(s)}},{name:"endArray",init:function(t,e){for(var r=e.length;r--;)this.add(t,r,t[r]||0,e[r])}},Tr("roundProps",pe),Tr("modifiers"),Tr("snap",de))||vr;ir.version=Ze.version=wr.version="3.8.0",_=1,H()&&Pe();Fe.Power0,Fe.Power1,Fe.Power2,Fe.Power3,Fe.Power4,Fe.Linear,Fe.Quad,Fe.Cubic,Fe.Quart,Fe.Quint,Fe.Strong,Fe.Elastic,Fe.Back,Fe.SteppedEase,Fe.Bounce,Fe.Sine,Fe.Expo,Fe.Circ},2642:(t,e,r)=>{r.d(e,{ZP:()=>s});var i=r(5317),n=r(9975),s=i.p8.registerPlugin(n._Z)||i.p8;s.core.Tween}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[78],{140:(t,e,i)=>{i.d(e,{a$:()=>d,lC:()=>p,ql:()=>c,Tl:()=>u});var s=i(223),r=i(6881),n=i(1138),a=i(3662),o=i(1661);const h=new r.P,l=new n.F;class u{constructor(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.usage=o.W2J,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[t+s]=e.array[i+s];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let i=0;for(let s=0,r=t.length;s<r;s++){let r=t[s];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),r=new a.I),e[i++]=r.r,e[i++]=r.g,e[i++]=r.b}return this}copyVector2sArray(t){const e=this.array;let i=0;for(let s=0,r=t.length;s<r;s++){let r=t[s];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),r=new n.F),e[i++]=r.x,e[i++]=r.y}return this}copyVector3sArray(t){const e=this.array;let i=0;for(let s=0,n=t.length;s<n;s++){let n=t[s];void 0===n&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),n=new r.P),e[i++]=n.x,e[i++]=n.y,e[i++]=n.z}return this}copyVector4sArray(t){const e=this.array;let i=0;for(let r=0,n=t.length;r<n;r++){let n=t[r];void 0===n&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),n=new s.L),e[i++]=n.x,e[i++]=n.y,e[i++]=n.z,e[i++]=n.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)l.fromBufferAttribute(this,e),l.applyMatrix3(t),this.setXY(e,l.x,l.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)h.fromBufferAttribute(this,e),h.applyMatrix3(t),this.setXYZ(e,h.x,h.y,h.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)h.x=this.getX(e),h.y=this.getY(e),h.z=this.getZ(e),h.applyMatrix4(t),this.setXYZ(e,h.x,h.y,h.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)h.x=this.getX(e),h.y=this.getY(e),h.z=this.getZ(e),h.applyNormalMatrix(t),this.setXYZ(e,h.x,h.y,h.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)h.x=this.getX(e),h.y=this.getY(e),h.z=this.getZ(e),h.transformDirection(t),this.setXYZ(e,h.x,h.y,h.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,s){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this}setXYZW(t,e,i,s,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=s,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==o.W2J&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}u.prototype.isBufferAttribute=!0;class c extends u{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class p extends u{constructor(t,e,i){super(new Uint32Array(t),e,i)}}(class extends u{constructor(t,e,i){super(new Uint16Array(t),e,i)}}).prototype.isFloat16BufferAttribute=!0;class d extends u{constructor(t,e,i){super(new Float32Array(t),e,i)}}},9046:(t,e,i)=>{i.d(e,{u:()=>w});var s=i(6881),r=i(1138),n=i(1898),a=i(7406),o=i(140),h=i(4699),l=i(6469),u=i(9203),c=i(1273),p=i(2043),d=i(392);let m=0;const g=new u.y,f=new l.T,y=new s.P,v=new n.Z,x=new n.Z,M=new s.P;class w extends a.p{constructor(){super(),Object.defineProperty(this,"id",{value:m++}),this.uuid=p.DO(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new((0,d.uH)(t)>65535?o.lC:o.ql)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const e=(new c.V).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}const s=this.attributes.tangent;return void 0!==s&&(s.transformDirection(t),s.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return g.makeRotationFromQuaternion(t),this.applyMatrix4(g),this}rotateX(t){return g.makeRotationX(t),this.applyMatrix4(g),this}rotateY(t){return g.makeRotationY(t),this.applyMatrix4(g),this}rotateZ(t){return g.makeRotationZ(t),this.applyMatrix4(g),this}translate(t,e,i){return g.makeTranslation(t,e,i),this.applyMatrix4(g),this}scale(t,e,i){return g.makeScale(t,e,i),this.applyMatrix4(g),this}lookAt(t){return f.lookAt(t),f.updateMatrix(),this.applyMatrix4(f.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(y).negate(),this.translate(y.x,y.y,y.z),this}setFromPoints(t){const e=[];for(let i=0,s=t.length;i<s;i++){const s=t[i];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new o.a$(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new n.Z);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new s.P(-1/0,-1/0,-1/0),new s.P(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];v.setFromBufferAttribute(i),this.morphTargetsRelative?(M.addVectors(this.boundingBox.min,v.min),this.boundingBox.expandByPoint(M),M.addVectors(this.boundingBox.max,v.max),this.boundingBox.expandByPoint(M)):(this.boundingBox.expandByPoint(v.min),this.boundingBox.expandByPoint(v.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new h.a);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new s.P,1/0);if(t){const i=this.boundingSphere.center;if(v.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];x.setFromBufferAttribute(i),this.morphTargetsRelative?(M.addVectors(v.min,x.min),v.expandByPoint(M),M.addVectors(v.max,x.max),v.expandByPoint(M)):(v.expandByPoint(x.min),v.expandByPoint(x.max))}v.getCenter(i);let s=0;for(let e=0,r=t.count;e<r;e++)M.fromBufferAttribute(t,e),s=Math.max(s,i.distanceToSquared(M));if(e)for(let r=0,n=e.length;r<n;r++){const n=e[r],a=this.morphTargetsRelative;for(let e=0,r=n.count;e<r;e++)M.fromBufferAttribute(n,e),a&&(y.fromBufferAttribute(t,e),M.add(y)),s=Math.max(s,i.distanceToSquared(M))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=t.array,n=e.position.array,a=e.normal.array,h=e.uv.array,l=n.length/3;void 0===e.tangent&&this.setAttribute("tangent",new o.Tl(new Float32Array(4*l),4));const u=e.tangent.array,c=[],p=[];for(let t=0;t<l;t++)c[t]=new s.P,p[t]=new s.P;const d=new s.P,m=new s.P,g=new s.P,f=new r.F,y=new r.F,v=new r.F,x=new s.P,M=new s.P;function w(t,e,i){d.fromArray(n,3*t),m.fromArray(n,3*e),g.fromArray(n,3*i),f.fromArray(h,2*t),y.fromArray(h,2*e),v.fromArray(h,2*i),m.sub(d),g.sub(d),y.sub(f),v.sub(f);const s=1/(y.x*v.y-v.x*y.y);isFinite(s)&&(x.copy(m).multiplyScalar(v.y).addScaledVector(g,-y.y).multiplyScalar(s),M.copy(g).multiplyScalar(y.x).addScaledVector(m,-v.x).multiplyScalar(s),c[t].add(x),c[e].add(x),c[i].add(x),p[t].add(M),p[e].add(M),p[i].add(M))}let b=this.groups;0===b.length&&(b=[{start:0,count:i.length}]);for(let t=0,e=b.length;t<e;++t){const e=b[t],s=e.start;for(let t=s,r=s+e.count;t<r;t+=3)w(i[t+0],i[t+1],i[t+2])}const S=new s.P,A=new s.P,P=new s.P,T=new s.P;function O(t){P.fromArray(a,3*t),T.copy(P);const e=c[t];S.copy(e),S.sub(P.multiplyScalar(P.dot(e))).normalize(),A.crossVectors(T,e);const i=A.dot(p[t])<0?-1:1;u[4*t]=S.x,u[4*t+1]=S.y,u[4*t+2]=S.z,u[4*t+3]=i}for(let t=0,e=b.length;t<e;++t){const e=b[t],s=e.start;for(let t=s,r=s+e.count;t<r;t+=3)O(i[t+0]),O(i[t+1]),O(i[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new o.Tl(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);const r=new s.P,n=new s.P,a=new s.P,h=new s.P,l=new s.P,u=new s.P,c=new s.P,p=new s.P;if(t)for(let s=0,o=t.count;s<o;s+=3){const o=t.getX(s+0),d=t.getX(s+1),m=t.getX(s+2);r.fromBufferAttribute(e,o),n.fromBufferAttribute(e,d),a.fromBufferAttribute(e,m),c.subVectors(a,n),p.subVectors(r,n),c.cross(p),h.fromBufferAttribute(i,o),l.fromBufferAttribute(i,d),u.fromBufferAttribute(i,m),h.add(c),l.add(c),u.add(c),i.setXYZ(o,h.x,h.y,h.z),i.setXYZ(d,l.x,l.y,l.z),i.setXYZ(m,u.x,u.y,u.z)}else for(let t=0,s=e.count;t<s;t+=3)r.fromBufferAttribute(e,t+0),n.fromBufferAttribute(e,t+1),a.fromBufferAttribute(e,t+2),c.subVectors(a,n),p.subVectors(r,n),c.cross(p),i.setXYZ(t+0,c.x,c.y,c.z),i.setXYZ(t+1,c.x,c.y,c.z),i.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const s in i){if(void 0===t.attributes[s])continue;const r=i[s].array,n=t.attributes[s],a=n.array,o=n.itemSize*e,h=Math.min(a.length,r.length-o);for(let t=0,e=o;t<h;t++,e++)r[e]=a[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)M.fromBufferAttribute(t,e),M.normalize(),t.setXYZ(e,M.x,M.y,M.z)}toNonIndexed(){function t(t,e){const i=t.array,s=t.itemSize,r=t.normalized,n=new i.constructor(e.length*s);let a=0,h=0;for(let r=0,o=e.length;r<o;r++){a=t.isInterleavedBufferAttribute?e[r]*t.data.stride+t.offset:e[r]*s;for(let t=0;t<s;t++)n[h++]=i[a++]}return new o.Tl(n,s,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new w,i=this.index.array,s=this.attributes;for(const r in s){const n=t(s[r],i);e.setAttribute(r,n)}const r=this.morphAttributes;for(const s in r){const n=[],a=r[s];for(let e=0,s=a.length;e<s;e++){const s=t(a[e],i);n.push(s)}e.morphAttributes[s]=n}e.morphTargetsRelative=this.morphTargetsRelative;const n=this.groups;for(let t=0,i=n.length;t<i;t++){const i=n[t];e.addGroup(i.start,i.count,i.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const e in i){const s=i[e];t.data.attributes[e]=s.toJSON(t.data)}const s={};let r=!1;for(const e in this.morphAttributes){const i=this.morphAttributes[e],n=[];for(let e=0,s=i.length;e<s;e++){const s=i[e];n.push(s.toJSON(t.data))}n.length>0&&(s[e]=n,r=!0)}r&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const n=this.groups;n.length>0&&(t.data.groups=JSON.parse(JSON.stringify(n)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(e));const s=t.attributes;for(const t in s){const i=s[t];this.setAttribute(t,i.clone(e))}const r=t.morphAttributes;for(const t in r){const i=[],s=r[t];for(let t=0,r=s.length;t<r;t++)i.push(s[t].clone(e));this.morphAttributes[t]=i}this.morphTargetsRelative=t.morphTargetsRelative;const n=t.groups;for(let t=0,e=n.length;t<e;t++){const e=n[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=t.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}w.prototype.isBufferGeometry=!0},7406:(t,e,i)=>{i.d(e,{p:()=>s});class s{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const i=this._listeners[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const i=e.slice(0);for(let e=0,s=i.length;e<s;e++)i[e].call(this,t);t.target=null}}}},6469:(t,e,i)=>{i.d(e,{T:()=>A});var s=i(7092),r=i(6881),n=i(9203),a=i(7406),o=i(2903);class h{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}var l=i(1273),u=i(2043);let c=0;const p=new r.P,d=new s._,m=new n.y,g=new r.P,f=new r.P,y=new r.P,v=new s._,x=new r.P(1,0,0),M=new r.P(0,1,0),w=new r.P(0,0,1),b={type:"added"},S={type:"removed"};class A extends a.p{constructor(){super(),Object.defineProperty(this,"id",{value:c++}),this.uuid=u.DO(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=A.DefaultUp.clone();const t=new r.P,e=new o.U,i=new s._,a=new r.P(1,1,1);e._onChange((function(){i.setFromEuler(e,!1)})),i._onChange((function(){e.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new n.y},normalMatrix:{value:new l.V}}),this.matrix=new n.y,this.matrixWorld=new n.y,this.matrixAutoUpdate=A.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new h,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return d.setFromAxisAngle(t,e),this.quaternion.multiply(d),this}rotateOnWorldAxis(t,e){return d.setFromAxisAngle(t,e),this.quaternion.premultiply(d),this}rotateX(t){return this.rotateOnAxis(x,t)}rotateY(t){return this.rotateOnAxis(M,t)}rotateZ(t){return this.rotateOnAxis(w,t)}translateOnAxis(t,e){return p.copy(t).applyQuaternion(this.quaternion),this.position.add(p.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(x,t)}translateY(t){return this.translateOnAxis(M,t)}translateZ(t){return this.translateOnAxis(w,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(m.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?g.copy(t):g.set(t,e,i);const s=this.parent;this.updateWorldMatrix(!0,!1),f.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?m.lookAt(f,g,this.up):m.lookAt(g,f,this.up),this.quaternion.setFromRotationMatrix(m),s&&(m.extractRotation(s.matrixWorld),d.setFromRotationMatrix(m),this.quaternion.premultiply(d.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(b)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(S)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(S)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),m.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),m.multiply(t.parent.matrixWorld)),t.applyMatrix4(m),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,s=this.children.length;i<s;i++){const s=this.children[i].getObjectByProperty(t,e);if(void 0!==s)return s}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(f,t,y),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(f,v,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,s=e.length;i<s;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,i=t.length;e<i;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function r(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const i=e.shapes;if(Array.isArray(i))for(let e=0,s=i.length;e<s;e++){const s=i[e];r(t.shapes,s)}else r(t.shapes,i)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let i=0,s=this.material.length;i<s;i++)e.push(r(t.materials,this.material[i]));s.material=e}else s.material=r(t.materials,this.material);if(this.children.length>0){s.children=[];for(let e=0;e<this.children.length;e++)s.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let e=0;e<this.animations.length;e++){const i=this.animations[e];s.animations.push(r(t.animations,i))}}if(e){const e=n(t.geometries),s=n(t.materials),r=n(t.textures),a=n(t.images),o=n(t.shapes),h=n(t.skeletons),l=n(t.animations);e.length>0&&(i.geometries=e),s.length>0&&(i.materials=s),r.length>0&&(i.textures=r),a.length>0&&(i.images=a),o.length>0&&(i.shapes=o),h.length>0&&(i.skeletons=h),l.length>0&&(i.animations=l)}return i.object=s,i;function n(t){const e=[];for(const i in t){const s=t[i];delete s.metadata,e.push(s)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const i=t.children[e];this.add(i.clone())}return this}}A.DefaultUp=new r.P(0,1,0),A.DefaultMatrixAutoUpdate=!0,A.prototype.isObject3D=!0},5006:(t,e,i)=>{i.d(e,{P:()=>n});var s=i(392);let r;class n{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===r&&(r=(0,s.c)("canvas")),r.width=t.width,r.height=t.height;const i=r.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=r}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}},7411:(t,e,i)=>{i.d(e,{a:()=>N});var s=i(1661),r=i(140),n=i(9046),a=i(6454),o=i(3131),h=i(1051),l=i(1621);class u extends l.j{constructor(t){super(t),this.type="RawShaderMaterial"}}u.prototype.isRawShaderMaterial=!0;var c=i(1138),p=i(6881),d=i(3662),m=i(4302),g=i(6173),f=i(6724);const y=Math.pow(2,8),v=[.125,.215,.35,.446,.526,.582],x=5+v.length,M=20,w={[s.rnI]:0,[s.knz]:1,[s.KC9]:2,[s.LgE]:3,[s.Inb]:4,[s.gMp]:5,[s.pMV]:6},b=new o.i,{_lodPlanes:S,_sizeLods:A,_sigmas:P}=_(),T=new d.I;let O=null;const C=(1+Math.sqrt(5))/2,R=1/C,z=[new p.P(1,1,1),new p.P(-1,1,1),new p.P(1,1,-1),new p.P(-1,1,-1),new p.P(0,C,R),new p.P(0,C,-R),new p.P(R,0,C),new p.P(-R,0,C),new p.P(C,R,0),new p.P(-C,R,0)];class N{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const e=new Float32Array(t),i=new p.P(0,1,0);return new u({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i},inputEncoding:{value:w[s.rnI]},outputEncoding:{value:w[s.rnI]}},vertexShader:I(),fragmentShader:`precision mediump float;precision mediump int;varying vec3 vOutputDirection;uniform sampler2D envMap;uniform int samples;uniform float weights[n];uniform bool latitudinal;uniform float dTheta;uniform float mipInt;uniform vec3 poleAxis;\n${k()}\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\nvec3 getSample(float theta,vec3 axis){float cosTheta=cos(theta);vec3 sampleDirection=vOutputDirection*cosTheta+cross(axis,vOutputDirection)*sin(theta)+axis*dot(axis,vOutputDirection)*(1.0-cosTheta);return bilinearCubeUV(envMap,sampleDirection,mipInt);}void main(){vec3 axis=latitudinal?poleAxis:cross(poleAxis,vOutputDirection);if(all(equal(axis,vec3(0.0)))){axis=vec3(vOutputDirection.z,0.0,-vOutputDirection.x);}axis=normalize(axis);gl_FragColor=vec4(0.0,0.0,0.0,1.0);gl_FragColor.rgb+=weights[0]*getSample(0.0,axis);for(int i=1;i<n;i++){if(i>=samples){break;}float theta=dTheta*float(i);gl_FragColor.rgb+=weights[i]*getSample(-1.0*theta,axis);gl_FragColor.rgb+=weights[i]*getSample(theta,axis);}gl_FragColor=linearToOutputTexel(gl_FragColor);}`,blending:s.jFi,depthTest:!1,depthWrite:!1})}(M),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,s=100){O=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(t,i,s,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=D(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=F(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<S.length;t++)S[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(O),t.scissorTest=!1,L(t,0,0,t.width,t.height)}_fromTexture(t){O=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:s.TyD,minFilter:s.TyD,generateMipmaps:!1,type:s.ywz,format:s.aoB,encoding:B(t)?t.encoding:s.KC9,depthBuffer:!1},i=E(e);return i.depthBuffer=!t,this._pingPongRenderTarget=E(e),i}_compileMaterial(t){const e=new a.K(S[0],t);this._renderer.compile(e,b)}_sceneToCubeUV(t,e,i,r){const n=new h.c(90,1,e,i),o=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,c=u.autoClear,p=u.outputEncoding,d=u.toneMapping;u.getClearColor(T),u.toneMapping=s.uL9,u.outputEncoding=s.rnI,u.autoClear=!1;const m=new g.v({name:"PMREM.Background",side:s._Li,depthWrite:!1,depthTest:!1}),v=new a.K(new f.D,m);let x=!1;const M=t.background;M?M.isColor&&(m.color.copy(M),t.background=null,x=!0):(m.color.copy(T),x=!0);for(let e=0;e<6;e++){const i=e%3;0==i?(n.up.set(0,o[e],0),n.lookAt(l[e],0,0)):1==i?(n.up.set(0,0,o[e]),n.lookAt(0,l[e],0)):(n.up.set(0,o[e],0),n.lookAt(0,0,l[e])),L(r,i*y,e>2?y:0,y,y),u.setRenderTarget(r),x&&u.render(v,n),u.render(t,n)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=d,u.outputEncoding=p,u.autoClear=c,t.background=M}_setEncoding(t,e){t.value=w[e.encoding]}_textureToCubeUV(t,e){const i=this._renderer,r=t.mapping===s.fY$||t.mapping===s.vxC;r?null==this._cubemapShader&&(this._cubemapShader=D()):null==this._equirectShader&&(this._equirectShader=F());const n=r?this._cubemapShader:this._equirectShader,o=new a.K(S[0],n),h=n.uniforms;h.envMap.value=t,r||h.texelSize.value.set(1/t.image.width,1/t.image.height),this._setEncoding(h.inputEncoding,t),this._setEncoding(h.outputEncoding,e.texture),L(e,0,0,3*y,2*y),i.setRenderTarget(e),i.render(o,b)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let e=1;e<x;e++){const i=Math.sqrt(P[e]*P[e]-P[e-1]*P[e-1]),s=z[(e-1)%z.length];this._blur(t,e-1,e,i,s)}e.autoClear=i}_blur(t,e,i,s,r){const n=this._pingPongRenderTarget;this._halfBlur(t,n,e,i,s,"latitudinal",r),this._halfBlur(n,t,i,i,s,"longitudinal",r)}_halfBlur(t,e,i,s,r,n,o){const h=this._renderer,l=this._blurMaterial;"latitudinal"!==n&&"longitudinal"!==n&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new a.K(S[s],l),c=l.uniforms,p=A[i]-1,d=isFinite(r)?Math.PI/(2*p):2*Math.PI/39,m=r/d,g=isFinite(r)?1+Math.floor(3*m):M;g>M&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const f=[];let v=0;for(let t=0;t<M;++t){const e=t/m,i=Math.exp(-e*e/2);f.push(i),0==t?v+=i:t<g&&(v+=2*i)}for(let t=0;t<f.length;t++)f[t]=f[t]/v;c.envMap.value=t.texture,c.samples.value=g,c.weights.value=f,c.latitudinal.value="latitudinal"===n,o&&(c.poleAxis.value=o),c.dTheta.value=d,c.mipInt.value=8-i,this._setEncoding(c.inputEncoding,t.texture),this._setEncoding(c.outputEncoding,t.texture);const x=A[s];L(e,3*Math.max(0,y-2*x),(0===s?0:2*y)+2*x*(s>4?s-8+4:0),3*x,2*x),h.setRenderTarget(e),h.render(u,b)}}function B(t){return void 0!==t&&t.type===s.ywz&&(t.encoding===s.rnI||t.encoding===s.knz||t.encoding===s.pMV)}function _(){const t=[],e=[],i=[];let s=8;for(let a=0;a<x;a++){const o=Math.pow(2,s);e.push(o);let h=1/o;a>4?h=v[a-8+4-1]:0==a&&(h=0),i.push(h);const l=1/(o-1),u=-l/2,c=1+l/2,p=[u,u,c,u,c,c,u,u,c,c,u,c],d=6,m=6,g=3,f=2,y=1,x=new Float32Array(g*m*d),M=new Float32Array(f*m*d),w=new Float32Array(y*m*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,i=t>2?0:-1,s=[e,i,0,e+2/3,i,0,e+2/3,i+1,0,e,i,0,e+2/3,i+1,0,e,i+1,0];x.set(s,g*m*t),M.set(p,f*m*t);const r=[t,t,t,t,t,t];w.set(r,y*m*t)}const b=new n.u;b.setAttribute("position",new r.Tl(x,g)),b.setAttribute("uv",new r.Tl(M,f)),b.setAttribute("faceIndex",new r.Tl(w,y)),t.push(b),s>4&&s--}return{_lodPlanes:t,_sizeLods:e,_sigmas:i}}function E(t){const e=new m.d(3*y,3*y,t);return e.texture.mapping=s.g8_,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function L(t,e,i,s,r){t.viewport.set(e,i,s,r),t.scissor.set(e,i,s,r)}function F(){const t=new c.F(1,1);return new u({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:w[s.rnI]},outputEncoding:{value:w[s.rnI]}},vertexShader:I(),fragmentShader:`precision mediump float;precision mediump int;varying vec3 vOutputDirection;uniform sampler2D envMap;uniform vec2 texelSize;\n${k()}\n#include <common>\nvoid main(){gl_FragColor=vec4(0.0,0.0,0.0,1.0);vec3 outputDirection=normalize(vOutputDirection);vec2 uv=equirectUv(outputDirection);vec2 f=fract(uv/texelSize-0.5);uv-=f*texelSize;vec3 tl=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.x+=texelSize.x;vec3 tr=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.y+=texelSize.y;vec3 br=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.x-=texelSize.x;vec3 bl=envMapTexelToLinear(texture2D(envMap,uv)).rgb;vec3 tm=mix(tl,tr,f.x);vec3 bm=mix(bl,br,f.x);gl_FragColor.rgb=mix(tm,bm,f.y);gl_FragColor=linearToOutputTexel(gl_FragColor);}`,blending:s.jFi,depthTest:!1,depthWrite:!1})}function D(){return new u({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:w[s.rnI]},outputEncoding:{value:w[s.rnI]}},vertexShader:I(),fragmentShader:`precision mediump float;precision mediump int;varying vec3 vOutputDirection;uniform samplerCube envMap;\n${k()}\nvoid main(){gl_FragColor=vec4(0.0,0.0,0.0,1.0);gl_FragColor.rgb=envMapTexelToLinear(textureCube(envMap,vec3(-vOutputDirection.x,vOutputDirection.yz))).rgb;gl_FragColor=linearToOutputTexel(gl_FragColor);}`,blending:s.jFi,depthTest:!1,depthWrite:!1})}function I(){return"precision mediump float;precision mediump int;attribute vec3 position;attribute vec2 uv;attribute float faceIndex;varying vec3 vOutputDirection;vec3 getDirection(vec2 uv,float face){uv=2.0*uv-1.0;vec3 direction=vec3(uv,1.0);if(face==0.0){direction=direction.zyx;}else if(face==1.0){direction=direction.xzy;direction.xz*=-1.0;}else if(face==2.0){direction.x*=-1.0;}else if(face==3.0){direction=direction.zyx;direction.xz*=-1.0;}else if(face==4.0){direction=direction.xzy;direction.xy*=-1.0;}else if(face==5.0){direction.z*=-1.0;}return direction;}void main(){vOutputDirection=getDirection(uv,faceIndex);gl_Position=vec4(position,1.0);}"}function k(){return"uniform int inputEncoding;uniform int outputEncoding;\n#include <encodings_pars_fragment>\nvec4 inputTexelToLinear(vec4 value){if(inputEncoding==0){return value;}else if(inputEncoding==1){return sRGBToLinear(value);}else if(inputEncoding==2){return RGBEToLinear(value);}else if(inputEncoding==3){return RGBMToLinear(value,7.0);}else if(inputEncoding==4){return RGBMToLinear(value,16.0);}else if(inputEncoding==5){return RGBDToLinear(value,256.0);}else{return GammaToLinear(value,2.2);}}vec4 linearToOutputTexel(vec4 value){if(outputEncoding==0){return value;}else if(outputEncoding==1){return LinearTosRGB(value);}else if(outputEncoding==2){return LinearToRGBE(value);}else if(outputEncoding==3){return LinearToRGBM(value,7.0);}else if(outputEncoding==4){return LinearToRGBM(value,16.0);}else if(outputEncoding==5){return LinearToRGBD(value,256.0);}else{return LinearToGamma(value,2.2);}}vec4 envMapTexelToLinear(vec4 color){return inputTexelToLinear(color);}"}},2514:(t,e,i)=>{i.d(e,{H:()=>o});var s=i(2043),r=i(1138),n=i(6881),a=i(9203);class o{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,s=this.getPoint(0),r=0;e.push(0);for(let n=1;n<=t;n++)i=this.getPoint(n/t),r+=i.distanceTo(s),e.push(r),s=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const i=this.getLengths();let s=0;const r=i.length;let n;n=e||t*i[r-1];let a,o=0,h=r-1;for(;o<=h;)if(s=Math.floor(o+(h-o)/2),a=i[s]-n,a<0)o=s+1;else{if(!(a>0)){h=s;break}h=s-1}if(s=h,i[s]===n)return s/(r-1);const l=i[s];return(s+(n-l)/(i[s+1]-l))/(r-1)}getTangent(t,e){const i=1e-4;let s=t-i,a=t+i;s<0&&(s=0),a>1&&(a=1);const o=this.getPoint(s),h=this.getPoint(a),l=e||(o.isVector2?new r.F:new n.P);return l.copy(h).sub(o).normalize(),l}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){const i=new n.P,r=[],o=[],h=[],l=new n.P,u=new a.y;for(let e=0;e<=t;e++){const i=e/t;r[e]=this.getTangentAt(i,new n.P)}o[0]=new n.P,h[0]=new n.P;let c=Number.MAX_VALUE;const p=Math.abs(r[0].x),d=Math.abs(r[0].y),m=Math.abs(r[0].z);p<=c&&(c=p,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),m<=c&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),o[0].crossVectors(r[0],l),h[0].crossVectors(r[0],o[0]);for(let e=1;e<=t;e++){if(o[e]=o[e-1].clone(),h[e]=h[e-1].clone(),l.crossVectors(r[e-1],r[e]),l.length()>Number.EPSILON){l.normalize();const t=Math.acos(s.uZ(r[e-1].dot(r[e]),-1,1));o[e].applyMatrix4(u.makeRotationAxis(l,t))}h[e].crossVectors(r[e],o[e])}if(!0===e){let e=Math.acos(s.uZ(o[0].dot(o[t]),-1,1));e/=t,r[0].dot(l.crossVectors(o[0],o[t]))>0&&(e=-e);for(let i=1;i<=t;i++)o[i].applyMatrix4(u.makeRotationAxis(r[i],e*i)),h[i].crossVectors(r[i],o[i])}return{tangents:r,normals:o,binormals:h}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}},7546:(t,e,i)=>{i.d(e,{Y:()=>u});var s=i(6881),r=i(2514);function n(){let t=0,e=0,i=0,s=0;function r(r,n,a,o){t=r,e=a,i=-3*r+3*n-2*a-o,s=2*r-2*n+a+o}return{initCatmullRom:function(t,e,i,s,n){r(e,i,n*(i-t),n*(s-e))},initNonuniformCatmullRom:function(t,e,i,s,n,a,o){let h=(e-t)/n-(i-t)/(n+a)+(i-e)/a,l=(i-e)/a-(s-e)/(a+o)+(s-i)/o;h*=a,l*=a,r(e,i,h,l)},calc:function(r){const n=r*r;return t+e*r+i*n+s*(n*r)}}}const a=new s.P,o=new n,h=new n,l=new n;class u extends r.H{constructor(t=[],e=!1,i="centripetal",s=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=s}getPoint(t,e=new s.P){const i=e,r=this.points,n=r.length,u=(n-(this.closed?0:1))*t;let c,p,d=Math.floor(u),m=u-d;this.closed?d+=d>0?0:(Math.floor(Math.abs(d)/n)+1)*n:0===m&&d===n-1&&(d=n-2,m=1),this.closed||d>0?c=r[(d-1)%n]:(a.subVectors(r[0],r[1]).add(r[0]),c=a);const g=r[d%n],f=r[(d+1)%n];if(this.closed||d+2<n?p=r[(d+2)%n]:(a.subVectors(r[n-1],r[n-2]).add(r[n-1]),p=a),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(c.distanceToSquared(g),t),i=Math.pow(g.distanceToSquared(f),t),s=Math.pow(f.distanceToSquared(p),t);i<1e-4&&(i=1),e<1e-4&&(e=i),s<1e-4&&(s=i),o.initNonuniformCatmullRom(c.x,g.x,f.x,p.x,e,i,s),h.initNonuniformCatmullRom(c.y,g.y,f.y,p.y,e,i,s),l.initNonuniformCatmullRom(c.z,g.z,f.z,p.z,e,i,s)}else"catmullrom"===this.curveType&&(o.initCatmullRom(c.x,g.x,f.x,p.x,this.tension),h.initCatmullRom(c.y,g.y,f.y,p.y,this.tension),l.initCatmullRom(c.z,g.z,f.z,p.z,this.tension));return i.set(o.calc(m),h.calc(m),l.calc(m)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push((new s.P).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}u.prototype.isCatmullRomCurve3=!0},6724:(t,e,i)=>{i.d(e,{D:()=>a});var s=i(9046),r=i(140),n=i(6881);class a extends s.u{constructor(t=1,e=1,i=1,s=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:s,heightSegments:a,depthSegments:o};const h=this;s=Math.floor(s),a=Math.floor(a),o=Math.floor(o);const l=[],u=[],c=[],p=[];let d=0,m=0;function g(t,e,i,s,r,a,o,g,f,y,v){const x=a/f,M=o/y,w=a/2,b=o/2,S=g/2,A=f+1,P=y+1;let T=0,O=0;const C=new n.P;for(let n=0;n<P;n++){const a=n*M-b;for(let o=0;o<A;o++){const h=o*x-w;C[t]=h*s,C[e]=a*r,C[i]=S,u.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[i]=g>0?1:-1,c.push(C.x,C.y,C.z),p.push(o/f),p.push(1-n/y),T+=1}}for(let t=0;t<y;t++)for(let e=0;e<f;e++){const i=d+e+A*t,s=d+e+A*(t+1),r=d+(e+1)+A*(t+1),n=d+(e+1)+A*t;l.push(i,s,n),l.push(s,r,n),O+=6}h.addGroup(m,O,v),m+=O,d+=T}g("z","y","x",-1,-1,i,e,t,o,a,0),g("z","y","x",1,-1,i,e,-t,o,a,1),g("x","z","y",1,1,t,i,e,s,o,2),g("x","z","y",1,-1,t,i,-e,s,o,3),g("x","y","z",1,-1,t,e,i,s,a,4),g("x","y","z",-1,-1,t,e,-i,s,a,5),this.setIndex(l),this.setAttribute("position",new r.a$(u,3)),this.setAttribute("normal",new r.a$(c,3)),this.setAttribute("uv",new r.a$(p,2))}static fromJSON(t){return new a(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}},4078:(t,e,i)=>{i.d(e,{_:()=>n});var s=i(9046),r=i(140);class n extends s.u{constructor(t=1,e=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:s};const n=t/2,a=e/2,o=Math.floor(i),h=Math.floor(s),l=o+1,u=h+1,c=t/o,p=e/h,d=[],m=[],g=[],f=[];for(let t=0;t<u;t++){const e=t*p-a;for(let i=0;i<l;i++){const s=i*c-n;m.push(s,-e,0),g.push(0,0,1),f.push(i/o),f.push(1-t/h)}}for(let t=0;t<h;t++)for(let e=0;e<o;e++){const i=e+l*t,s=e+l*(t+1),r=e+1+l*(t+1),n=e+1+l*t;d.push(i,s,n),d.push(s,r,n)}this.setIndex(d),this.setAttribute("position",new r.a$(m,3)),this.setAttribute("normal",new r.a$(g,3)),this.setAttribute("uv",new r.a$(f,2))}static fromJSON(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}}},2785:(t,e,i)=>{i.d(e,{x:()=>a});var s=i(9046),r=i(140),n=i(6881);class a extends s.u{constructor(t=1,e=32,i=16,s=0,a=2*Math.PI,o=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:s,phiLength:a,thetaStart:o,thetaLength:h},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));const l=Math.min(o+h,Math.PI);let u=0;const c=[],p=new n.P,d=new n.P,m=[],g=[],f=[],y=[];for(let r=0;r<=i;r++){const n=[],m=r/i;let v=0;0==r&&0==o?v=.5/e:r==i&&l==Math.PI&&(v=-.5/e);for(let i=0;i<=e;i++){const r=i/e;p.x=-t*Math.cos(s+r*a)*Math.sin(o+m*h),p.y=t*Math.cos(o+m*h),p.z=t*Math.sin(s+r*a)*Math.sin(o+m*h),g.push(p.x,p.y,p.z),d.copy(p).normalize(),f.push(d.x,d.y,d.z),y.push(r+v,1-m),n.push(u++)}c.push(n)}for(let t=0;t<i;t++)for(let s=0;s<e;s++){const e=c[t][s+1],r=c[t][s],n=c[t+1][s],a=c[t+1][s+1];(0!==t||o>0)&&m.push(e,r,a),(t!==i-1||l<Math.PI)&&m.push(r,n,a)}this.setIndex(m),this.setAttribute("position",new r.a$(g,3)),this.setAttribute("normal",new r.a$(f,3)),this.setAttribute("uv",new r.a$(y,2))}static fromJSON(t){return new a(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}},1043:(t,e,i)=>{i.d(e,{F:()=>a});var s=i(9046),r=i(140),n=i(6881);class a extends s.u{constructor(t=1,e=.4,i=64,s=8,a=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:s,p:a,q:o},i=Math.floor(i),s=Math.floor(s);const h=[],l=[],u=[],c=[],p=new n.P,d=new n.P,m=new n.P,g=new n.P,f=new n.P,y=new n.P,v=new n.P;for(let r=0;r<=i;++r){const n=r/i*a*Math.PI*2;x(n,a,o,t,m),x(n+.01,a,o,t,g),y.subVectors(g,m),v.addVectors(g,m),f.crossVectors(y,v),v.crossVectors(f,y),f.normalize(),v.normalize();for(let t=0;t<=s;++t){const n=t/s*Math.PI*2,a=-e*Math.cos(n),o=e*Math.sin(n);p.x=m.x+(a*v.x+o*f.x),p.y=m.y+(a*v.y+o*f.y),p.z=m.z+(a*v.z+o*f.z),l.push(p.x,p.y,p.z),d.subVectors(p,m).normalize(),u.push(d.x,d.y,d.z),c.push(r/i),c.push(t/s)}}for(let t=1;t<=i;t++)for(let e=1;e<=s;e++){const i=(s+1)*(t-1)+(e-1),r=(s+1)*t+(e-1),n=(s+1)*t+e,a=(s+1)*(t-1)+e;h.push(i,r,a),h.push(r,n,a)}function x(t,e,i,s,r){const n=Math.cos(t),a=Math.sin(t),o=i/e*t,h=Math.cos(o);r.x=s*(2+h)*.5*n,r.y=s*(2+h)*a*.5,r.z=s*Math.sin(o)*.5}this.setIndex(h),this.setAttribute("position",new r.a$(l,3)),this.setAttribute("normal",new r.a$(u,3)),this.setAttribute("uv",new r.a$(c,2))}static fromJSON(t){return new a(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}},3868:(t,e,i)=>{i.d(e,{W:()=>b});var s={};i.r(s),i.d(s,{ArcCurve:()=>l,CatmullRomCurve3:()=>u.Y,CubicBezierCurve:()=>m,CubicBezierCurve3:()=>f,EllipseCurve:()=>h,LineCurve:()=>y,LineCurve3:()=>v,QuadraticBezierCurve:()=>x,QuadraticBezierCurve3:()=>M,SplineCurve:()=>w});var r=i(9046),n=i(140),a=i(2514),o=i(1138);class h extends a.H{constructor(t=0,e=0,i=1,s=1,r=0,n=2*Math.PI,a=!1,o=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=s,this.aStartAngle=r,this.aEndAngle=n,this.aClockwise=a,this.aRotation=o}getPoint(t,e){const i=e||new o.F,s=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const n=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=s;for(;r>s;)r-=s;r<Number.EPSILON&&(r=n?0:s),!0!==this.aClockwise||n||(r===s?r=-s:r-=s);const a=this.aStartAngle+t*r;let h=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),i=h-this.aX,s=l-this.aY;h=i*t-s*e+this.aX,l=i*e+s*t+this.aY}return i.set(h,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}h.prototype.isEllipseCurve=!0;class l extends h{constructor(t,e,i,s,r,n){super(t,e,i,i,s,r,n),this.type="ArcCurve"}}l.prototype.isArcCurve=!0;var u=i(7546);function c(t,e,i,s,r){const n=.5*(s-e),a=.5*(r-i),o=t*t;return(2*i-2*s+n+a)*(t*o)+(-3*i+3*s-2*n-a)*o+n*t+i}function p(t,e,i,s){return function(t,e){const i=1-t;return i*i*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,i)+function(t,e){return t*t*e}(t,s)}function d(t,e,i,s,r){return function(t,e){const i=1-t;return i*i*i*e}(t,e)+function(t,e){const i=1-t;return 3*i*i*t*e}(t,i)+function(t,e){return 3*(1-t)*t*t*e}(t,s)+function(t,e){return t*t*t*e}(t,r)}class m extends a.H{constructor(t=new o.F,e=new o.F,i=new o.F,s=new o.F){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=s}getPoint(t,e=new o.F){const i=e,s=this.v0,r=this.v1,n=this.v2,a=this.v3;return i.set(d(t,s.x,r.x,n.x,a.x),d(t,s.y,r.y,n.y,a.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}m.prototype.isCubicBezierCurve=!0;var g=i(6881);class f extends a.H{constructor(t=new g.P,e=new g.P,i=new g.P,s=new g.P){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=s}getPoint(t,e=new g.P){const i=e,s=this.v0,r=this.v1,n=this.v2,a=this.v3;return i.set(d(t,s.x,r.x,n.x,a.x),d(t,s.y,r.y,n.y,a.y),d(t,s.z,r.z,n.z,a.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}f.prototype.isCubicBezierCurve3=!0;class y extends a.H{constructor(t=new o.F,e=new o.F){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new o.F){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const i=e||new o.F;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}y.prototype.isLineCurve=!0;class v extends a.H{constructor(t=new g.P,e=new g.P){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new g.P){const i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class x extends a.H{constructor(t=new o.F,e=new o.F,i=new o.F){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new o.F){const i=e,s=this.v0,r=this.v1,n=this.v2;return i.set(p(t,s.x,r.x,n.x),p(t,s.y,r.y,n.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}x.prototype.isQuadraticBezierCurve=!0;class M extends a.H{constructor(t=new g.P,e=new g.P,i=new g.P){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new g.P){const i=e,s=this.v0,r=this.v1,n=this.v2;return i.set(p(t,s.x,r.x,n.x),p(t,s.y,r.y,n.y),p(t,s.z,r.z,n.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}M.prototype.isQuadraticBezierCurve3=!0;class w extends a.H{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new o.F){const i=e,s=this.points,r=(s.length-1)*t,n=Math.floor(r),a=r-n,h=s[0===n?n:n-1],l=s[n],u=s[n>s.length-2?s.length-1:n+1],p=s[n>s.length-3?s.length-1:n+2];return i.set(c(a,h.x,l.x,u.x,p.x),c(a,h.y,l.y,u.y,p.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push(i.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const i=this.points[e];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const i=t.points[e];this.points.push((new o.F).fromArray(i))}return this}}w.prototype.isSplineCurve=!0;class b extends r.u{constructor(t=new M(new g.P(-1,-1,0),new g.P(-1,1,0),new g.P(1,1,0)),e=64,i=1,s=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:s,closed:r};const a=t.computeFrenetFrames(e,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const h=new g.P,l=new g.P,u=new o.F;let c=new g.P;const p=[],d=[],m=[],f=[];function y(r){c=t.getPointAt(r/e,c);const n=a.normals[r],o=a.binormals[r];for(let t=0;t<=s;t++){const e=t/s*Math.PI*2,r=Math.sin(e),a=-Math.cos(e);l.x=a*n.x+r*o.x,l.y=a*n.y+r*o.y,l.z=a*n.z+r*o.z,l.normalize(),d.push(l.x,l.y,l.z),h.x=c.x+i*l.x,h.y=c.y+i*l.y,h.z=c.z+i*l.z,p.push(h.x,h.y,h.z)}}!function(){for(let t=0;t<e;t++)y(t);y(!1===r?e:0),function(){for(let t=0;t<=e;t++)for(let i=0;i<=s;i++)u.x=t/e,u.y=i/s,m.push(u.x,u.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=s;e++){const i=(s+1)*(t-1)+(e-1),r=(s+1)*t+(e-1),n=(s+1)*t+e,a=(s+1)*(t-1)+e;f.push(i,r,a),f.push(r,n,a)}}()}(),this.setIndex(f),this.setAttribute("position",new n.a$(p,3)),this.setAttribute("normal",new n.a$(d,3)),this.setAttribute("uv",new n.a$(m,2))}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new b((new s[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}},1507:(t,e,i)=>{i.d(e,{M:()=>r});var s=i(7185);class r extends s._{constructor(t,e){super(t,e),this.type="AmbientLight"}}r.prototype.isAmbientLight=!0},7185:(t,e,i)=>{i.d(e,{_:()=>n});var s=i(6469),r=i(3662);class n extends s.T{constructor(t,e=1){super(),this.type="Light",this.color=new r.I(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}n.prototype.isLight=!0},5696:(t,e,i)=>{i.d(e,{c:()=>y});var s=i(7185),r=i(9203),n=i(1138),a=i(6881),o=i(223),h=i(4698);const l=new r.y,u=new a.P,c=new a.P;var p=i(1051);const d=new r.y,m=new a.P,g=new a.P;class f extends class{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new n.F(512,512),this.map=null,this.mapPass=null,this.matrix=new r.y,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new h.i,this._frameExtents=new n.F(1,1),this._viewportCount=1,this._viewports=[new o.L(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;u.setFromMatrixPosition(t.matrixWorld),e.position.copy(u),c.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(c),e.updateMatrixWorld(),l.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(l),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(e.projectionMatrix),i.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}{constructor(){super(new p.c(90,1,.5,500)),this._frameExtents=new n.F(4,2),this._viewportCount=6,this._viewports=[new o.L(2,1,1,1),new o.L(0,1,1,1),new o.L(3,1,1,1),new o.L(1,1,1,1),new o.L(3,0,1,1),new o.L(1,0,1,1)],this._cubeDirections=[new a.P(1,0,0),new a.P(-1,0,0),new a.P(0,0,1),new a.P(0,0,-1),new a.P(0,1,0),new a.P(0,-1,0)],this._cubeUps=[new a.P(0,1,0),new a.P(0,1,0),new a.P(0,1,0),new a.P(0,1,0),new a.P(0,0,1),new a.P(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,s=this.matrix,r=t.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),m.setFromMatrixPosition(t.matrixWorld),i.position.copy(m),g.copy(i.position),g.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(g),i.updateMatrixWorld(),s.makeTranslation(-m.x,-m.y,-m.z),d.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(d)}}f.prototype.isPointLightShadow=!0;class y extends s._{constructor(t,e,i=0,s=1){super(t,e),this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new f}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}y.prototype.isPointLight=!0},8221:(t,e,i)=>{i.d(e,{d:()=>l});const s={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};const r=new class{constructor(t,e,i){const s=this;let r,n=!1,a=0,o=0;const h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,!1===n&&void 0!==s.onStart&&s.onStart(t,a,o),n=!0},this.itemEnd=function(t){a++,void 0!==s.onProgress&&s.onProgress(t,a,o),a===o&&(n=!1,void 0!==s.onLoad&&s.onLoad())},this.itemError=function(t){void 0!==s.onError&&s.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return h.push(t,e),this},this.removeHandler=function(t){const e=h.indexOf(t);return-1!==e&&h.splice(e,2),this},this.getHandler=function(t){for(let e=0,i=h.length;e<i;e+=2){const i=h[e],s=h[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return s}return null}}};class n{constructor(t){this.manager=void 0!==t?t:r,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise((function(s,r){i.load(t,s,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}var a=i(392);class o extends n{constructor(t){super(t)}load(t,e,i,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const n=this,o=s.get(t);if(void 0!==o)return n.manager.itemStart(t),setTimeout((function(){e&&e(o),n.manager.itemEnd(t)}),0),o;const h=(0,a.c)("img");function l(){c(),s.add(t,this),e&&e(this),n.manager.itemEnd(t)}function u(e){c(),r&&r(e),n.manager.itemError(t),n.manager.itemEnd(t)}function c(){h.removeEventListener("load",l,!1),h.removeEventListener("error",u,!1)}return h.addEventListener("load",l,!1),h.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(h.crossOrigin=this.crossOrigin),n.manager.itemStart(t),h.src=t,h}}var h=i(4467);class l extends n{constructor(t){super(t)}load(t,e,i,s){const r=new h.x,n=new o(this.manager);return n.setCrossOrigin(this.crossOrigin),n.setPath(this.path),n.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),i,s),r}}},4164:(t,e,i)=>{i.d(e,{F:()=>o});var s=i(7406),r=i(1661),n=i(2043);let a=0;class o extends s.p{constructor(){super(),Object.defineProperty(this,"id",{value:a++}),this.uuid=n.DO(),this.name="",this.type="Material",this.fog=!0,this.blending=r.bdR,this.side=r.Wl3,this.vertexColors=!1,this.opacity=1,this.format=r.wk1,this.transparent=!1,this.blendSrc=r.k74,this.blendDst=r.LgZ,this.blendEquation=r.bGH,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=r.vCF,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=r.cum,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=r.x5V,this.stencilZFail=r.x5V,this.stencilZPass=r.x5V,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const i=t[e];if(void 0===i){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===r.esl;continue}const s=this[e];void 0!==s?s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[e]=i:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function s(t){const e=[];for(const i in t){const s=t[i];delete s.metadata,e.push(s)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==r.bdR&&(i.blending=this.blending),this.side!==r.Wl3&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.format!==r.wk1&&(i.format=this.format),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),e){const e=s(t.textures),r=s(t.images);e.length>0&&(i.textures=e),r.length>0&&(i.images=r)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.format=t.format,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(null!==e){const t=e.length;i=new Array(t);for(let s=0;s!==t;++s)i[s]=e[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}o.prototype.isMaterial=!0},6173:(t,e,i)=>{i.d(e,{v:()=>a});var s=i(4164),r=i(1661),n=i(3662);class a extends s.F{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new n.I(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=r.Ns1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}a.prototype.isMeshBasicMaterial=!0},2114:(t,e,i)=>{i.d(e,{l:()=>n});var s=i(4164),r=i(1661);class n extends s.F{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=r.z81,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}n.prototype.isMeshDepthMaterial=!0},7683:(t,e,i)=>{i.d(e,{L:()=>n});var s=i(4164),r=i(6881);class n extends s.F{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new r.P,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}n.prototype.isMeshDistanceMaterial=!0},2434:(t,e,i)=>{i.d(e,{E:()=>l});var s=i(1138),r=i(1661),n=i(4164),a=i(3662);class o extends n.F{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new a.I(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a.I(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=r.IOt,this.normalScale=new s.F(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}o.prototype.isMeshStandardMaterial=!0;var h=i(2043);class l extends o{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new s.F(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return h.uZ(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new a.I(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new a.I(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new a.I(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}l.prototype.isMeshPhysicalMaterial=!0},1621:(t,e,i)=>{i.d(e,{j:()=>o});var s=i(4164),r=i(6682),n=i(5880),a=i(1306);class o extends s.F{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=n.Z,this.fragmentShader=a.Z,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=(0,r.dw)(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?e.uniforms[i]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?e.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[i]={type:"m4",value:s.toArray()}:e.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const i={};for(const t in this.extensions)!0===this.extensions[t]&&(i[t]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}o.prototype.isShaderMaterial=!0}}]);
(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[560],{4679:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var o=n(8081),a=n.n(o),r=n(3645),i=n.n(r)()(a());i.push([e.id,"body{background:#040d21;margin:0;color:#627597}article{background:#fff;width:100%;height:100vh;display:flex;flex-direction:column}article h1{padding:0;margin:auto;color:#000;font-size:4rem;font-family:sans-serif}article #scene1,article #scene2,article #scene3,article #scene4{margin:auto;height:80vh;width:100%;background:#fff}article #scene1 canvas,article #scene2 canvas,article #scene3 canvas,article #scene4 canvas{max-width:100%}",""]);const s=i},5812:e=>{e.exports="uniform float time;\nuniform sampler2D tex;\nuniform float lvl;\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvec3 faceNormal(vec3 pos) {\n\tvec3 fdx = dFdx(pos);\n\tvec3 fdy = dFdy(pos);\n\treturn normalize(cross(fdx, fdy));\n}\nbool isBackSide(vec3 pos) {\n\treturn dot(normalize(pos), faceNormal(pos)) < 0.0;\n}\nvec3 col = vec3(0.7333, 0.6863, 1.0);\nvoid main() {\n\tfloat opacity = 1.0;\n\tif (vPos.z < (lvl + ((cos(((time * 1.0) + vPos.x) + (vPos.y * 2.0)) / 15.0) / 4.0))) {\n\t\topacity = 0.0;\n\t}\n\tgl_FragColor.w = opacity - 0.1;\n\tif (isBackSide(vPos)) {\n\t\tgl_FragColor.xyz = col;\n\t}\n\telse {\n\t\tvec4 t = texture2D(tex, (vUv / 1.5) + fract(time / 15.0));\n\t\tgl_FragColor.xyz = mix(col, col * (1.0 - vNormal.z), distance(0.5, vPos.z));\n\t\tgl_FragColor.xyz *= (normalize(t.xyz).y * (col * 2.0));\n\t}\n}\n"},4596:e=>{e.exports="uniform float time;\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvoid main() {\n\tvec3 transformed = position;\n\tvNormal = normal;\n\tvUv = uv;\n\tvPos = transformed;\n\tvec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},1515:e=>{e.exports="uniform float time;\nuniform sampler2D tex;\nuniform vec3 col;\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvec3 faceNormal(vec3 pos) {\n\tvec3 fdx = dFdx(pos);\n\tvec3 fdy = dFdy(pos);\n\treturn normalize(cross(fdx, fdy));\n}\nbool isBackSide(vec3 pos) {\n\treturn dot(normalize(pos), faceNormal(pos)) < 0.0;\n}\nvoid main() {\n\tfloat opacity = 1.0;\n\tif (vPos.z < (0.0 + (sin((time + (vUv.x * 5.0)) + (vUv.y * 3.0)) / 10.0))) {\n\t\topacity = 0.0;\n\t}\n\tgl_FragColor.w = opacity;\n\tif (isBackSide(vPos)) {\n\t\tgl_FragColor.xyz = col;\n\t}\n\telse {\n\t\tvec4 t = texture2D(tex, (vUv / 1.5) + fract(time / 15.0));\n\t\tgl_FragColor.xyz = mix(col, col * (1.0 - vNormal.z), distance(0.5, vPos.z));\n\t\tgl_FragColor.xyz *= (normalize(t.xyz).r * (col * 2.0));\n\t}\n}\n"},4740:e=>{e.exports="uniform float time;\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvoid main() {\n\tvec3 transformed = position;\n\tvNormal = normal;\n\tvUv = uv;\n\tvPos = transformed;\n\tvec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},3184:e=>{e.exports="uniform float from;\nuniform float len;\nuniform float time;\nuniform sampler2D tex;\nuniform sampler2D tex2;\nvarying float vIndex;\nvarying vec3 vPos;\nvarying vec2 vUv;\nvec3 rgb(int r, int g, int b) {\n\treturn vec3(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0);\n}\nfloat fresnel(float bias, float scale, float power, vec3 I, vec3 N) {\n\treturn bias + (scale * pow(1.0 + dot(I, N), power));\n}\nvec3 faceNormal(vec3 pos) {\n\tvec3 fdx = dFdx(pos);\n\tvec3 fdy = dFdy(pos);\n\treturn normalize(cross(fdx, fdy));\n}\nbool isBackSide(vec3 pos) {\n\treturn dot(normalize(pos), faceNormal(pos)) < 0.0;\n}\nvoid main() {\n\tvec3 normal = normalize(vPos);\n\tvec3 lig = normalize(normal);\n\tfloat diffuse = max(0.0, dot(lig, normal)) / 1.0;\n\tvec3 I = normalize(vPos - cameraPosition);\n\tfloat R = fresnel(0.05, 0.2, 3.0, I, normal);\n\tvec2 uv = vUv;\n\tuv.x *= 5.0;\n\tuv.x -= (time * 0.01);\n\tuv.y += (-time * 0.0025);\n\tvec3 r = texture2D(tex2, uv).xyz;\n\tr += (r + r);\n\tvec3 col = vec3(((diffuse * rgb(84, 118, 145)) * 1.5) + (r * 0.1));\n\tgl_FragColor.xyz = col;\n\tif ((vIndex > from) && (vIndex < (from + len))) {\n\t\tgl_FragColor.w = 0.5;\n\t}\n\telse {\n\t\tdiscard;\n\t\tgl_FragColor.w = 0.0;\n\t}\n}\n"},8615:e=>{e.exports="attribute float indexattr;\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying float vIndex;\nvoid main() {\n\tvec3 transformed = position;\n\tvIndex = indexattr;\n\tvNormal = normal;\n\tvUv = uv;\n\tvPos = transformed;\n\tvec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},5384:e=>{e.exports="uniform float time;\nuniform sampler2D tex;\nvarying vec3 vPos;\nvarying vec2 vUv;\nvec3 rgb(int r, int g, int b) {\n\treturn vec3(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0);\n}\nfloat fresnel(float bias, float scale, float power, vec3 I, vec3 N) {\n\treturn bias + (scale * pow(1.0 + dot(I, N), power));\n}\nvoid main() {\n\tvec3 normal = normalize(vPos);\n\tvec3 lig = normalize(normal);\n\tfloat diffuse = max(0.0, dot(lig, normal)) / 1.0;\n\tvec3 I = normalize(vPos - cameraPosition);\n\tfloat R = fresnel(0.05, 0.2, 3.0, I, normal);\n\tvec2 uv = vUv;\n\tuv.x -= (time * 0.01);\n\tuv.y += (-time * 0.0025);\n\tvec3 r = texture2D(tex, uv).xyz;\n\tr += (r + r);\n\tvec3 col = vec3((((diffuse * rgb(84, 118, 145)) * 1.5) + (r * 0.1)) + (R * 0.5));\n\tgl_FragColor.xyz = col;\n\tgl_FragColor.w = 1.0;\n}\n"},7125:e=>{e.exports="uniform float time;\nuniform sampler2D tex;\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvec3 displacement(vec3 p) {\n\tvec2 u = p.xy * 0.1;\n\tvec2 um = u * 0.1;\n\tum.x += (time * 0.01);\n\tum.y += (-time * 0.0025);\n\tum.x += (um.y * 2.0);\n\tvec3 hlg = texture2D(tex, um).xyz;\n\tvec3 hfn = texture2D(tex, u).xyz * 2.0;\n\tvec3 disp = (hlg * 0.5) + ((hfn * 0.1) * (1.0 - hlg));\n\treturn p + (disp / 1.3);\n}\nvoid main() {\n\tvec3 transformed = displacement(position);\n\tvNormal = normal;\n\tvUv = uv;\n\tvPos = transformed;\n\tvec4 mvPosition = modelViewMatrix * vec4(transformed, 1.0);\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},4781:e=>{e.exports="uniform float time;\nuniform sampler2D tex2;\nvarying vec3 vPos;\nvarying vec2 vUv;\nvec3 rgb(int r, int g, int b) {\n\treturn vec3(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0);\n}\nfloat fresnel(float bias, float scale, float power, vec3 I, vec3 N) {\n\treturn bias + (scale * pow(1.0 + dot(I, N), power));\n}\nvoid main() {\n\tvec3 normal = normalize(vPos);\n\tvec3 lig = normalize(normal);\n\tfloat diffuse = max(0.0, dot(lig, normal)) / 1.0;\n\tvec3 I = normalize(vPos - cameraPosition);\n\tfloat R = fresnel(0.05, 0.2, 3.0, I, normal);\n\tvec2 uv = vUv;\n\tuv.x -= (time * 0.01);\n\tuv.y += (-time * 0.0025);\n\tvec3 r = texture2D(tex2, uv).xyz;\n\tr += (r + r);\n\tvec3 col = vec3((((diffuse * rgb(84, 118 - 10, 145)) * 1.5) + (r * 0.1)) + (R * 0.25));\n\tgl_FragColor.xyz = col;\n\tgl_FragColor.w = 1.0;\n}\n"},5141:e=>{e.exports="uniform float time;\nuniform sampler2D tex;\nvarying vec3 vPos;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nvarying vec3 vTex;\nmat4 rotation3d(vec3 axis, float angle) {\n\taxis = normalize(axis);\n\tfloat s = sin(angle);\n\tfloat c = cos(angle);\n\tfloat oc = 1.0 - c;\n\treturn mat4(((oc * axis.x) * axis.x) + c, ((oc * axis.x) * axis.y) - (axis.z * s), ((oc * axis.z) * axis.x) + (axis.y * s), 0.0, ((oc * axis.x) * axis.y) + (axis.z * s), ((oc * axis.y) * axis.y) + c, ((oc * axis.y) * axis.z) - (axis.x * s), 0.0, ((oc * axis.z) * axis.x) - (axis.y * s), ((oc * axis.y) * axis.z) + (axis.x * s), ((oc * axis.z) * axis.z) + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\nvec3 rotate(vec3 v, vec3 axis, float angle) {\n\treturn (rotation3d(axis, angle) * vec4(v, 1.0)).xyz;\n}\nvoid main() {\n\tvec3 transformed = position;\n\tvNormal = normal;\n\tvUv = uv;\n\tvec4 t = texture2D(tex, uv + (time / 1000.0));\n\tvec4 t2 = texture2D(tex, uv - (time / 1000.0));\n\tvec4 t3 = mix(t, t2 * 1.0, 0.5);\n\ttransformed += t3.xyz;\n\tfloat rot = 3.14 * (((time / 5.0) + transformed.x) + transformed.y);\n\ttransformed = rotate(transformed, vec3(0.0, 1.0, 0.0), rot) / 3.0;\n\tfloat scale = 1.0;\n\ttransformed.x += 0.25;\n\ttransformed.z += 0.35;\n\ttransformed.y -= 0.35;\n\tvPos = transformed;\n\tvec4 mvPosition = modelViewMatrix * vec4(transformed * scale, 1.0);\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},6530:(e,t,n)=>{"use strict";var o=n(3379),a=n.n(o),r=n(7795),i=n.n(r),s=n(569),l=n.n(s),c=n(3565),v=n.n(c),m=n(9216),d=n.n(m),u=n(4589),f=n.n(u),p=n(4679),x={};x.styleTagTransform=f(),x.setAttributes=v(),x.insert=l().bind(null,"head"),x.domAPI=i(),x.insertStyleElement=d();var g=a()(p.default,x);if(!p.default.locals||e.hot.invalidate){var w=!p.default.locals,h=w?p:p.default.locals;e.hot.accept(4679,(t=>{p=n(4679),function(e,t,n){if(!e&&t||e&&!t)return!1;var o;for(o in e)if((!n||"default"!==o)&&e[o]!==t[o])return!1;for(o in t)if(!(n&&"default"===o||e[o]))return!1;return!0}(h,w?p:p.default.locals,w)?(h=w?p:p.default.locals,g(p.default)):e.hot.invalidate()}))}e.hot.dispose((function(){g()}));p.default&&p.default.locals&&p.default.locals},9606:(e,t,n)=>{"use strict";n(6530);var o=n(9274),a=n(1051),r=n(7365),i=n(3662),s=n(7411),l=n(5696),c=n(1507),v=n(9365),m=n(7054),d=n(7082);m.ZP.registerPlugin(d.i);class u{constructor(e){this.inviewport=!1,this.onUpdate=()=>{},this.setViewportListener=()=>{d.i.create({start:0,end:"max",onUpdate:this.isInViewPort.bind(this)})},this.setEnviroment=()=>{},this.domElem=e,this.renderer=new o.C({antialias:!0}),this.renderer.setSize(this.domElem.clientWidth,this.domElem.clientHeight),this.domElem.appendChild(this.renderer.domElement),this.camera=new a.c(75,1,.1,1e5),this.scene=new r.x,this.scene.background=new i.I("#ffffff"),this.pmremGenerator=new s.a(this.renderer),this.pmremGenerator.compileEquirectangularShader(),this.controls=new v.z(this.camera,this.renderer.domElement),this.isInViewPort(),this.setViewportListener(),this.sceneSetup(),this.onWindowResize(),window.addEventListener("resize",this.onWindowResize.bind(this),!1)}isInViewPort(){const e=d.i.isInViewport(this.domElem);this.inviewport!==e&&(this.inviewport=e,this.inviewport&&this.render())}onWindowResize(){this.camera.aspect=this.domElem.clientWidth/this.domElem.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.domElem.clientWidth,this.domElem.clientHeight)}sceneSetup(){const e=new l.c(new i.I("white"),15,100),t=new c.M("white");e.position.set(50,50,50),this.camera.lookAt(0,0,0),this.scene.add(e,t,this.camera),this.setEnviroment()}render(){this.onUpdate(),this.renderer.render(this.scene,this.camera),this.inviewport&&requestAnimationFrame((()=>this.render()))}animate(e){this.onUpdate=e,this.render()}}var f=n(8221),p=n(1661),x=n(1621),g=n(6454),w=n(2785),h=n(2434),y=n(2010),z=n(4740),P=n.n(z),b=n(1515),S=n.n(b);const I=(new f.d).load("/assets/low_noise.png");I.wrapT=I.wrapS=p.rpg;const U=(new f.d).load("/assets/wat1.jpg");U.wrapT=U.wrapS=p.rpg;const N=new i.I("#fed9c6"),D=new i.I("#cdc0d4"),_=e=>{const t=new x.j({vertexShader:P(),fragmentShader:S(),side:p.ehD,uniforms:{time:{value:0},tex:{value:I},tex2:{value:U},col:{value:e}},transparent:!0}),n=new g.K(new w.x(1,32,32),t);return n.rotation.x=Math.PI/2,n},F=()=>{const e=new g.K(new w.x(1,32,32),new h.E({color:"white",opacity:.1,metalness:.9,roughness:.05,envMapIntensity:.9,reflectivity:.2,refractionRatio:.985,ior:.9,side:p.ehD,transparent:!0}));return e.scale.multiplyScalar(1.01),e},k=_(N),C=F(),E=_(D),j=F();k.position.x+=1.25,C.position.x+=1.25,E.position.x-=1.25,j.position.x-=1.25;const M=new y.Z;M.add(k,C,E,j);const T={group:M,update:()=>{k.material.uniforms.time.value+=.05,E.material.uniforms.time.value+=.05}};var A=n(4596),R=n.n(A),V=n(5812),K=n.n(V);const W=(new f.d).load("/assets/low_noise.png");W.wrapT=W.wrapS=p.rpg;(new f.d).load("/assets/1.png").mapping=p.dSO;const q=e=>{const t=new x.j({vertexShader:R(),fragmentShader:K(),side:p.ehD,uniforms:{time:{value:0},tex:{value:W},lvl:{value:e}},transparent:!0}),n=new g.K(new w.x(1,32,32),t);return n.rotation.x=Math.PI/2,n},Z=()=>{const e=new g.K(new w.x(1,32,32),new h.E({color:"white",emissive:"silver",metalness:1,roughness:.2,opacity:.25,clearcoat:1,clearcoatRoughness:1,side:p.ehD,transparent:!0}));return e.scale.multiplyScalar(1.01),e.material.needsUpdate=!0,e},B=q(.75),$=Z();B.position.x+=3,$.position.x+=3;const H=q(-.5),L=Z();H.position.x-=3,L.position.x-=3;const G=q(0),O=Z(),Y=new y.Z;Y.add(B,$,H,L,G,O);const J={group:Y,update:()=>{B.material.uniforms.time.value+=.05,H.material.uniforms.time.value+=.05,G.material.uniforms.time.value+=.05}};var Q=n(6881),X=n(7546),ee=n(3868),te=n(140),ne=n(8615),oe=n.n(ne),ae=n(3184),re=n.n(ae),ie=n(7125),se=n.n(ie),le=n(5384),ce=n.n(le);const ve=new y.Z,me=(new f.d).load("/assets/wat1.jpg");me.wrapT=me.wrapS=p.rpg;const de=()=>{const e=new x.j({vertexShader:(t=se(),`${t}`.replace(/#include < (.+) >/g,"#include <$1>")),fragmentShader:ce(),side:p.ehD,uniforms:{time:{value:0},tex:{value:me}},transparent:!0});var t;e.needsUpdate=!0;const n=new w.x(1,132,132);return new g.K(n,e)},ue=de();ve.add(ue);const fe={group:ve,update:()=>{ue.material.uniforms.time.value+=.025}},pe=new y.Z,xe=(new f.d).load("/assets/low_noise.png");xe.wrapT=xe.wrapS=p.rpg;const ge=(new f.d).load("/assets/wat1.jpg");ge.wrapT=ge.wrapS=p.rpg;const we=[[0,-1,0],[0,0,0],[0,0,4],[4,0,4],[4,0,-2],[0,0,-2],[0,2,-2],[0,2,4],[4,2,4],[4,2,-2],[2,2,-2],[2,2,1],[2,-2,1],[2,-2,8],[2,4,8],[0,4,8],[0,5,8]].map((e=>new Q.P(...e)));var he=new X.Y(we);const ye=new ee.W(he,220,.5,8),ze=new g.K(ye,new h.E({color:"white",roughness:.5,metalness:1,clearcoat:1,clearcoatRoughness:1,side:p.ehD,transparent:!0,opacity:.15})),Pe=new ee.W(he,220,.5,8),be=Pe.attributes.position.array.length,Se=[...Array(be/3)].map(((e,t)=>t)),Ie=new Float32Array(Se);Pe.setAttribute("indexattr",new te.Tl(Ie,1));const Ue=new g.K(Pe,new x.j({vertexShader:oe(),fragmentShader:re(),side:p.ehD,uniforms:{time:{value:0},tex:{value:xe},tex2:{value:ge},from:{value:0},len:{value:200}}})),Ne=de();Ne.position.set(0,6,7.5);const De=de();De.position.set(0,-3,-.5),pe.add(Ue,ze,Ne,De);const _e={group:pe,update:()=>{Ue.material.uniforms.from.value>be/3+200&&(Ue.material.uniforms.from.value=0),Ue.material.uniforms.from.value+=8,Ue.material.uniforms.time.value+=.05,Ne.material.uniforms.time.value+=.05,De.material.uniforms.time.value+=.05}};var Fe=n(1043),ke=n(5141),Ce=n.n(ke),Ee=n(4781),je=n.n(Ee);const Me=new y.Z,Te=(new f.d).load("/assets/wat1.jpg");Te.wrapT=Te.wrapS=p.rpg;const Ae=(new f.d).load("/assets/wat2.png");Ae.wrapT=Ae.wrapS=p.rpg;const Re=new Fe.F(3,.3,1e3,16,2,2),Ve=(()=>{const e=new x.j({vertexShader:(t=Ce(),`${t}`.replace(/#include < (.+) >/g,"#include <$1>")),fragmentShader:je(),side:p.ehD,uniforms:{time:{value:0},tex:{value:Ae},tex2:{value:Te}},transparent:!0});var t;e.needsUpdate=!0;return new g.K(Re,e)})();Me.add(Ve);const Ke={group:Me,update:()=>{Ve.material.uniforms.time.value+=.05}},We=new u(document.querySelector("#scene1"));We.camera.position.set(0,0,-3),We.camera.lookAt(0,0,0),We.scene.add(fe.group),We.scene.add(Ke.group),We.animate((()=>{Ke.update(),fe.update()}));const qe=new u(document.querySelector("#scene2"));qe.camera.position.set(8,6,-3),qe.camera.lookAt(0,2,0),qe.scene.add(_e.group),qe.animate((()=>{_e.update()}));const Ze=new u(document.querySelector("#scene3"));Ze.camera.position.set(0,1,-4),Ze.camera.lookAt(T.group.position),Ze.scene.add(T.group),Ze.animate((()=>{T.update()}));const Be=new u(document.querySelector("#scene4"));Be.camera.position.set(0,1,-4),Be.camera.lookAt(J.group.position),Be.scene.add(J.group),Be.animate((()=>{J.update()}))}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[277],{5567:(e,n,i)=>{i.d(n,{W:()=>a});const a={alphamap_fragment:"#ifdef USE_ALPHAMAP\ndiffuseColor.a*=texture2D(alphaMap,vUv).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\nuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\nif(diffuseColor.a<alphaTest)discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\nuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\nfloat ambientOcclusion=(texture2D(aoMap,vUv2).r-1.0)*aoMapIntensity+1.0;reflectedLight.indirectDiffuse*=ambientOcclusion;\n#if defined(USE_ENVMAP)&&defined(STANDARD)\nfloat dotNV=saturate(dot(geometry.normal,geometry.viewDir));reflectedLight.indirectSpecular*=computeSpecularOcclusion(dotNV,ambientOcclusion,material.roughness);\n#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\nuniform sampler2D aoMap;uniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed=vec3(position);",beginnormal_vertex:"vec3 objectNormal=vec3(normal);\n#ifdef USE_TANGENT\nvec3 objectTangent=vec3(tangent.xyz);\n#endif",bsdfs:"vec3 BRDF_Lambert(const in vec3 diffuseColor){return RECIPROCAL_PI*diffuseColor;}vec3 F_Schlick(const in vec3 f0,const in float f90,const in float dotVH){float fresnel=exp2((-5.55473*dotVH-6.98316)*dotVH);return f0*(1.0-fresnel)+(f90*fresnel);}float V_GGX_SmithCorrelated(const in float alpha,const in float dotNL,const in float dotNV){float a2=pow2(alpha);float gv=dotNL*sqrt(a2+(1.0-a2)*pow2(dotNV));float gl=dotNV*sqrt(a2+(1.0-a2)*pow2(dotNL));return 0.5/max(gv+gl,EPSILON);}float D_GGX(const in float alpha,const in float dotNH){float a2=pow2(alpha);float denom=pow2(dotNH)*(a2-1.0)+1.0;return RECIPROCAL_PI*a2/pow2(denom);}vec3 BRDF_GGX(const in vec3 lightDir,const in vec3 viewDir,const in vec3 normal,const in vec3 f0,const in float f90,const in float roughness){float alpha=pow2(roughness);vec3 halfDir=normalize(lightDir+viewDir);float dotNL=saturate(dot(normal,lightDir));float dotNV=saturate(dot(normal,viewDir));float dotNH=saturate(dot(normal,halfDir));float dotVH=saturate(dot(viewDir,halfDir));vec3 F=F_Schlick(f0,f90,dotVH);float V=V_GGX_SmithCorrelated(alpha,dotNL,dotNV);float D=D_GGX(alpha,dotNH);return F*(V*D);}vec2 LTC_Uv(const in vec3 N,const in vec3 V,const in float roughness){const float LUT_SIZE=64.0;const float LUT_SCALE=(LUT_SIZE-1.0)/LUT_SIZE;const float LUT_BIAS=0.5/LUT_SIZE;float dotNV=saturate(dot(N,V));vec2 uv=vec2(roughness,sqrt(1.0-dotNV));uv=uv*LUT_SCALE+LUT_BIAS;return uv;}float LTC_ClippedSphereFormFactor(const in vec3 f){float l=length(f);return max((l*l+f.z)/(l+1.0),0.0);}vec3 LTC_EdgeVectorFormFactor(const in vec3 v1,const in vec3 v2){float x=dot(v1,v2);float y=abs(x);float a=0.8543985+(0.4965155+0.0145206*y)*y;float b=3.4175940+(4.1616724+y)*y;float v=a/b;float theta_sintheta=(x>0.0)?v:0.5*inversesqrt(max(1.0-x*x,1e-7))-v;return cross(v1,v2)*theta_sintheta;}vec3 LTC_Evaluate(const in vec3 N,const in vec3 V,const in vec3 P,const in mat3 mInv,const in vec3 rectCoords[4]){vec3 v1=rectCoords[1]-rectCoords[0];vec3 v2=rectCoords[3]-rectCoords[0];vec3 lightNormal=cross(v1,v2);if(dot(lightNormal,P-rectCoords[0])<0.0)return vec3(0.0);vec3 T1,T2;T1=normalize(V-N*dot(V,N));T2=-cross(N,T1);mat3 mat=mInv*transposeMat3(mat3(T1,T2,N));vec3 coords[4];coords[0]=mat*(rectCoords[0]-P);coords[1]=mat*(rectCoords[1]-P);coords[2]=mat*(rectCoords[2]-P);coords[3]=mat*(rectCoords[3]-P);coords[0]=normalize(coords[0]);coords[1]=normalize(coords[1]);coords[2]=normalize(coords[2]);coords[3]=normalize(coords[3]);vec3 vectorFormFactor=vec3(0.0);vectorFormFactor+=LTC_EdgeVectorFormFactor(coords[0],coords[1]);vectorFormFactor+=LTC_EdgeVectorFormFactor(coords[1],coords[2]);vectorFormFactor+=LTC_EdgeVectorFormFactor(coords[2],coords[3]);vectorFormFactor+=LTC_EdgeVectorFormFactor(coords[3],coords[0]);float result=LTC_ClippedSphereFormFactor(vectorFormFactor);return vec3(result);}float G_BlinnPhong_Implicit(){return 0.25;}float D_BlinnPhong(const in float shininess,const in float dotNH){return RECIPROCAL_PI*(shininess*0.5+1.0)*pow(dotNH,shininess);}vec3 BRDF_BlinnPhong(const in vec3 lightDir,const in vec3 viewDir,const in vec3 normal,const in vec3 specularColor,const in float shininess){vec3 halfDir=normalize(lightDir+viewDir);float dotNH=saturate(dot(normal,halfDir));float dotVH=saturate(dot(viewDir,halfDir));vec3 F=F_Schlick(specularColor,1.0,dotVH);float G=G_BlinnPhong_Implicit();float D=D_BlinnPhong(shininess,dotNH);return F*(G*D);}\n#if defined(USE_SHEEN)\nfloat D_Charlie(float roughness,float dotNH){float alpha=pow2(roughness);float invAlpha=1.0/alpha;float cos2h=dotNH*dotNH;float sin2h=max(1.0-cos2h,0.0078125);return(2.0+invAlpha)*pow(sin2h,invAlpha*0.5)/(2.0*PI);}float V_Neubelt(float dotNV,float dotNL){return saturate(1.0/(4.0*(dotNL+dotNV-dotNL*dotNV)));}vec3 BRDF_Sheen(const in vec3 lightDir,const in vec3 viewDir,const in vec3 normal,vec3 sheenColor,const in float sheenRoughness){vec3 halfDir=normalize(lightDir+viewDir);float dotNL=saturate(dot(normal,lightDir));float dotNV=saturate(dot(normal,viewDir));float dotNH=saturate(dot(normal,halfDir));float D=D_Charlie(sheenRoughness,dotNH);float V=V_Neubelt(dotNV,dotNL);return sheenColor*(D*V);}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;uniform float bumpScale;vec2 dHdxy_fwd(){vec2 dSTdx=dFdx(vUv);vec2 dSTdy=dFdy(vUv);float Hll=bumpScale*texture2D(bumpMap,vUv).x;float dBx=bumpScale*texture2D(bumpMap,vUv+dSTdx).x-Hll;float dBy=bumpScale*texture2D(bumpMap,vUv+dSTdy).x-Hll;return vec2(dBx,dBy);}vec3 perturbNormalArb(vec3 surf_pos,vec3 surf_norm,vec2 dHdxy,float faceDirection){vec3 vSigmaX=vec3(dFdx(surf_pos.x),dFdx(surf_pos.y),dFdx(surf_pos.z));vec3 vSigmaY=vec3(dFdy(surf_pos.x),dFdy(surf_pos.y),dFdy(surf_pos.z));vec3 vN=surf_norm;vec3 R1=cross(vSigmaY,vN);vec3 R2=cross(vN,vSigmaX);float fDet=dot(vSigmaX,R1)*faceDirection;vec3 vGrad=sign(fDet)*(dHdxy.x*R1+dHdxy.y*R2);return normalize(abs(fDet)*surf_norm-vGrad);}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES>0\nvec4 plane;\n#pragma unroll_loop_start\nfor(int i=0;i<UNION_CLIPPING_PLANES;i++){plane=clippingPlanes[i];if(dot(vClipPosition,plane.xyz)>plane.w)discard;}\n#pragma unroll_loop_end\n#if UNION_CLIPPING_PLANES<NUM_CLIPPING_PLANES\nbool clipped=true;\n#pragma unroll_loop_start\nfor(int i=UNION_CLIPPING_PLANES;i<NUM_CLIPPING_PLANES;i++){plane=clippingPlanes[i];clipped=(dot(vClipPosition,plane.xyz)>plane.w)&&clipped;}\n#pragma unroll_loop_end\nif(clipped)discard;\n#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES>0\nvarying vec3 vClipPosition;uniform vec4 clippingPlanes[NUM_CLIPPING_PLANES];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES>0\nvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES>0\nvClipPosition=-mvPosition.xyz;\n#endif",color_fragment:"#if defined(USE_COLOR_ALPHA)\ndiffuseColor*=vColor;\n#elif defined(USE_COLOR)\ndiffuseColor.rgb*=vColor;\n#endif",color_pars_fragment:"#if defined(USE_COLOR_ALPHA)\nvarying vec4 vColor;\n#elif defined(USE_COLOR)\nvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined(USE_COLOR_ALPHA)\nvarying vec4 vColor;\n#elif defined(USE_COLOR)||defined(USE_INSTANCING_COLOR)\nvarying vec3 vColor;\n#endif",color_vertex:"#if defined(USE_COLOR_ALPHA)\nvColor=vec4(1.0);\n#elif defined(USE_COLOR)||defined(USE_INSTANCING_COLOR)\nvColor=vec3(1.0);\n#endif\n#ifdef USE_COLOR\nvColor*=color;\n#endif\n#ifdef USE_INSTANCING_COLOR\nvColor.xyz*=instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a)clamp(a,0.0,1.0)\n#endif\n#define whiteComplement(a)(1.0-saturate(a))\nfloat pow2(const in float x){return x*x;}float pow3(const in float x){return x*x*x;}float pow4(const in float x){float x2=x*x;return x2*x2;}float max3(const in vec3 v){return max(max(v.x,v.y),v.z);}float average(const in vec3 color){return dot(color,vec3(0.3333));}highp float rand(const in vec2 uv){const highp float a=12.9898,b=78.233,c=43758.5453;highp float dt=dot(uv.xy,vec2(a,b)),sn=mod(dt,PI);return fract(sin(sn)*c);}\n#ifdef HIGH_PRECISION\nfloat precisionSafeLength(vec3 v){return length(v);}\n#else\nfloat precisionSafeLength(vec3 v){float maxComponent=max3(abs(v));return length(v/maxComponent)*maxComponent;}\n#endif\nstruct IncidentLight{vec3 color;vec3 direction;bool visible;};struct ReflectedLight{vec3 directDiffuse;vec3 directSpecular;vec3 indirectDiffuse;vec3 indirectSpecular;};struct GeometricContext{vec3 position;vec3 normal;vec3 viewDir;\n#ifdef USE_CLEARCOAT\nvec3 clearcoatNormal;\n#endif\n};vec3 transformDirection(in vec3 dir,in mat4 matrix){return normalize((matrix*vec4(dir,0.0)).xyz);}vec3 inverseTransformDirection(in vec3 dir,in mat4 matrix){return normalize((vec4(dir,0.0)*matrix).xyz);}mat3 transposeMat3(const in mat3 m){mat3 tmp;tmp[0]=vec3(m[0].x,m[1].x,m[2].x);tmp[1]=vec3(m[0].y,m[1].y,m[2].y);tmp[2]=vec3(m[0].z,m[1].z,m[2].z);return tmp;}float linearToRelativeLuminance(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}bool isPerspectiveMatrix(mat4 m){return m[2][3]==-1.0;}vec2 equirectUv(in vec3 dir){float u=atan(dir.z,dir.x)*RECIPROCAL_PI2+0.5;float v=asin(clamp(dir.y,-1.0,1.0))*RECIPROCAL_PI+0.5;return vec2(u,v);}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction){vec3 absDirection=abs(direction);float face=-1.0;if(absDirection.x>absDirection.z){if(absDirection.x>absDirection.y)face=direction.x>0.0?0.0:3.0;else face=direction.y>0.0?1.0:4.0;}else{if(absDirection.z>absDirection.y)face=direction.z>0.0?2.0:5.0;else face=direction.y>0.0?1.0:4.0;}return face;}vec2 getUV(vec3 direction,float face){vec2 uv;if(face==0.0){uv=vec2(direction.z,direction.y)/abs(direction.x);}else if(face==1.0){uv=vec2(-direction.x,-direction.z)/abs(direction.y);}else if(face==2.0){uv=vec2(-direction.x,direction.y)/abs(direction.z);}else if(face==3.0){uv=vec2(-direction.z,direction.y)/abs(direction.x);}else if(face==4.0){uv=vec2(-direction.x,direction.z)/abs(direction.y);}else{uv=vec2(direction.x,direction.y)/abs(direction.z);}return 0.5*(uv+1.0);}vec3 bilinearCubeUV(sampler2D envMap,vec3 direction,float mipInt){float face=getFace(direction);float filterInt=max(cubeUV_minMipLevel-mipInt,0.0);mipInt=max(mipInt,cubeUV_minMipLevel);float faceSize=exp2(mipInt);float texelSize=1.0/(3.0*cubeUV_maxTileSize);vec2 uv=getUV(direction,face)*(faceSize-1.0);vec2 f=fract(uv);uv+=0.5-f;if(face>2.0){uv.y+=faceSize;face-=3.0;}uv.x+=face*faceSize;if(mipInt<cubeUV_maxMipLevel){uv.y+=2.0*cubeUV_maxTileSize;}uv.y+=filterInt*2.0*cubeUV_minTileSize;uv.x+=3.0*max(0.0,cubeUV_maxTileSize-2.0*faceSize);uv*=texelSize;vec3 tl=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.x+=texelSize;vec3 tr=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.y+=texelSize;vec3 br=envMapTexelToLinear(texture2D(envMap,uv)).rgb;uv.x-=texelSize;vec3 bl=envMapTexelToLinear(texture2D(envMap,uv)).rgb;vec3 tm=mix(tl,tr,f.x);vec3 bm=mix(bl,br,f.x);return mix(tm,bm,f.y);}\n#define r0 1.0\n#define v0 0.339\n#define m0-2.0\n#define r1 0.8\n#define v1 0.276\n#define m1-1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness){float mip=0.0;if(roughness>=r1){mip=(r0-roughness)*(m1-m0)/(r0-r1)+m0;}else if(roughness>=r4){mip=(r1-roughness)*(m4-m1)/(r1-r4)+m1;}else if(roughness>=r5){mip=(r4-roughness)*(m5-m4)/(r4-r5)+m4;}else if(roughness>=r6){mip=(r5-roughness)*(m6-m5)/(r5-r6)+m5;}else{mip=-2.0*log2(1.16*roughness);}return mip;}vec4 textureCubeUV(sampler2D envMap,vec3 sampleDir,float roughness){float mip=clamp(roughnessToMip(roughness),m0,cubeUV_maxMipLevel);float mipF=fract(mip);float mipInt=floor(mip);vec3 color0=bilinearCubeUV(envMap,sampleDir,mipInt);if(mipF==0.0){return vec4(color0,1.0);}else{vec3 color1=bilinearCubeUV(envMap,sampleDir,mipInt+1.0);return vec4(mix(color0,color1,mipF),1.0);}}\n#endif",defaultnormal_vertex:"vec3 transformedNormal=objectNormal;\n#ifdef USE_INSTANCING\nmat3 m=mat3(instanceMatrix);transformedNormal/=vec3(dot(m[0],m[0]),dot(m[1],m[1]),dot(m[2],m[2]));transformedNormal=m*transformedNormal;\n#endif\ntransformedNormal=normalMatrix*transformedNormal;\n#ifdef FLIP_SIDED\ntransformedNormal=-transformedNormal;\n#endif\n#ifdef USE_TANGENT\nvec3 transformedTangent=(modelViewMatrix*vec4(objectTangent,0.0)).xyz;\n#ifdef FLIP_SIDED\ntransformedTangent=-transformedTangent;\n#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\nuniform sampler2D displacementMap;uniform float displacementScale;uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\ntransformed+=normalize(objectNormal)*(texture2D(displacementMap,vUv).x*displacementScale+displacementBias);\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\nvec4 emissiveColor=texture2D(emissiveMap,vUv);emissiveColor.rgb=emissiveMapTexelToLinear(emissiveColor).rgb;totalEmissiveRadiance*=emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\nuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor=linearToOutputTexel(gl_FragColor);",encodings_pars_fragment:"vec4 LinearToLinear(in vec4 value){return value;}vec4 GammaToLinear(in vec4 value,in float gammaFactor){return vec4(pow(value.rgb,vec3(gammaFactor)),value.a);}vec4 LinearToGamma(in vec4 value,in float gammaFactor){return vec4(pow(value.rgb,vec3(1.0/gammaFactor)),value.a);}vec4 sRGBToLinear(in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}vec4 LinearTosRGB(in vec4 value){return vec4(mix(pow(value.rgb,vec3(0.41666))*1.055-vec3(0.055),value.rgb*12.92,vec3(lessThanEqual(value.rgb,vec3(0.0031308)))),value.a);}vec4 RGBEToLinear(in vec4 value){return vec4(value.rgb*exp2(value.a*255.0-128.0),1.0);}vec4 LinearToRGBE(in vec4 value){float maxComponent=max(max(value.r,value.g),value.b);float fExp=clamp(ceil(log2(maxComponent)),-128.0,127.0);return vec4(value.rgb/exp2(fExp),(fExp+128.0)/255.0);}vec4 RGBMToLinear(in vec4 value,in float maxRange){return vec4(value.rgb*value.a*maxRange,1.0);}vec4 LinearToRGBM(in vec4 value,in float maxRange){float maxRGB=max(value.r,max(value.g,value.b));float M=clamp(maxRGB/maxRange,0.0,1.0);M=ceil(M*255.0)/255.0;return vec4(value.rgb/(M*maxRange),M);}vec4 RGBDToLinear(in vec4 value,in float maxRange){return vec4(value.rgb*((maxRange/255.0)/value.a),1.0);}vec4 LinearToRGBD(in vec4 value,in float maxRange){float maxRGB=max(value.r,max(value.g,value.b));float D=max(maxRange/maxRGB,1.0);D=clamp(floor(D)/255.0,0.0,1.0);return vec4(value.rgb*(D*(255.0/maxRange)),D);}",envmap_fragment:"#ifdef USE_ENVMAP\n#ifdef ENV_WORLDPOS\nvec3 cameraToFrag;if(isOrthographic){cameraToFrag=normalize(vec3(-viewMatrix[0][2],-viewMatrix[1][2],-viewMatrix[2][2]));}else{cameraToFrag=normalize(vWorldPosition-cameraPosition);}vec3 worldNormal=inverseTransformDirection(normal,viewMatrix);\n#ifdef ENVMAP_MODE_REFLECTION\nvec3 reflectVec=reflect(cameraToFrag,worldNormal);\n#else\nvec3 reflectVec=refract(cameraToFrag,worldNormal,refractionRatio);\n#endif\n#else\nvec3 reflectVec=vReflect;\n#endif\n#ifdef ENVMAP_TYPE_CUBE\nvec4 envColor=textureCube(envMap,vec3(flipEnvMap*reflectVec.x,reflectVec.yz));envColor=envMapTexelToLinear(envColor);\n#elif defined(ENVMAP_TYPE_CUBE_UV)\nvec4 envColor=textureCubeUV(envMap,reflectVec,0.0);\n#else\nvec4 envColor=vec4(0.0);\n#endif\n#ifdef ENVMAP_BLENDING_MULTIPLY\noutgoingLight=mix(outgoingLight,outgoingLight*envColor.xyz,specularStrength*reflectivity);\n#elif defined(ENVMAP_BLENDING_MIX)\noutgoingLight=mix(outgoingLight,envColor.xyz,specularStrength*reflectivity);\n#elif defined(ENVMAP_BLENDING_ADD)\noutgoingLight+=envColor.xyz*specularStrength*reflectivity;\n#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\nuniform float envMapIntensity;uniform float flipEnvMap;\n#ifdef ENVMAP_TYPE_CUBE\nuniform samplerCube envMap;\n#else\nuniform sampler2D envMap;\n#endif\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\nuniform float reflectivity;\n#if defined(USE_BUMPMAP)||defined(USE_NORMALMAP)||defined(PHONG)\n#define ENV_WORLDPOS\n#endif\n#ifdef ENV_WORLDPOS\nvarying vec3 vWorldPosition;uniform float refractionRatio;\n#else\nvarying vec3 vReflect;\n#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n#if defined(USE_BUMPMAP)||defined(USE_NORMALMAP)||defined(PHONG)\n#define ENV_WORLDPOS\n#endif\n#ifdef ENV_WORLDPOS\nvarying vec3 vWorldPosition;\n#else\nvarying vec3 vReflect;uniform float refractionRatio;\n#endif\n#endif",envmap_physical_pars_fragment:"#if defined(USE_ENVMAP)\n#ifdef ENVMAP_MODE_REFRACTION\nuniform float refractionRatio;\n#endif\nvec3 getIBLIrradiance(const in vec3 normal){\n#if defined(ENVMAP_TYPE_CUBE_UV)\nvec3 worldNormal=inverseTransformDirection(normal,viewMatrix);vec4 envMapColor=textureCubeUV(envMap,worldNormal,1.0);return PI*envMapColor.rgb*envMapIntensity;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness){\n#if defined(ENVMAP_TYPE_CUBE_UV)\nvec3 reflectVec;\n#ifdef ENVMAP_MODE_REFLECTION\nreflectVec=reflect(-viewDir,normal);reflectVec=normalize(mix(reflectVec,normal,roughness*roughness));\n#else\nreflectVec=refract(-viewDir,normal,refractionRatio);\n#endif\nreflectVec=inverseTransformDirection(reflectVec,viewMatrix);vec4 envMapColor=textureCubeUV(envMap,reflectVec,roughness);return envMapColor.rgb*envMapIntensity;\n#else\nreturn vec3(0.0);\n#endif\n}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n#ifdef ENV_WORLDPOS\nvWorldPosition=worldPosition.xyz;\n#else\nvec3 cameraToVertex;if(isOrthographic){cameraToVertex=normalize(vec3(-viewMatrix[0][2],-viewMatrix[1][2],-viewMatrix[2][2]));}else{cameraToVertex=normalize(worldPosition.xyz-cameraPosition);}vec3 worldNormal=inverseTransformDirection(transformedNormal,viewMatrix);\n#ifdef ENVMAP_MODE_REFLECTION\nvReflect=reflect(cameraToVertex,worldNormal);\n#else\nvReflect=refract(cameraToVertex,worldNormal,refractionRatio);\n#endif\n#endif\n#endif",fog_vertex:"#ifdef USE_FOG\nvFogDepth=-mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\nvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n#ifdef FOG_EXP2\nfloat fogFactor=1.0-exp(-fogDensity*fogDensity*vFogDepth*vFogDepth);\n#else\nfloat fogFactor=smoothstep(fogNear,fogFar,vFogDepth);\n#endif\ngl_FragColor.rgb=mix(gl_FragColor.rgb,fogColor,fogFactor);\n#endif",fog_pars_fragment:"#ifdef USE_FOG\nuniform vec3 fogColor;varying float vFogDepth;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;uniform float fogFar;\n#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\nuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance(vec3 normal,vec3 lightDirection){float dotNL=dot(normal,lightDirection);vec2 coord=vec2(dotNL*0.5+0.5,0.0);\n#ifdef USE_GRADIENTMAP\nreturn texture2D(gradientMap,coord).rgb;\n#else\nreturn(coord.x<0.7)?vec3(0.7):vec3(1.0);\n#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\nvec4 lightMapTexel=texture2D(lightMap,vUv2);vec3 lightMapIrradiance=lightMapTexelToLinear(lightMapTexel).rgb*lightMapIntensity;\n#ifndef PHYSICALLY_CORRECT_LIGHTS\nlightMapIrradiance*=PI;\n#endif\nreflectedLight.indirectDiffuse+=lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\nuniform sampler2D lightMap;uniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse=vec3(1.0);GeometricContext geometry;geometry.position=mvPosition.xyz;geometry.normal=normalize(transformedNormal);geometry.viewDir=(isOrthographic)?vec3(0,0,1):normalize(-mvPosition.xyz);GeometricContext backGeometry;backGeometry.position=geometry.position;backGeometry.normal=-geometry.normal;backGeometry.viewDir=geometry.viewDir;vLightFront=vec3(0.0);vIndirectFront=vec3(0.0);\n#ifdef DOUBLE_SIDED\nvLightBack=vec3(0.0);vIndirectBack=vec3(0.0);\n#endif\nIncidentLight directLight;float dotNL;vec3 directLightColor_Diffuse;vIndirectFront+=getAmbientLightIrradiance(ambientLightColor);vIndirectFront+=getLightProbeIrradiance(lightProbe,geometry.normal);\n#ifdef DOUBLE_SIDED\nvIndirectBack+=getAmbientLightIrradiance(ambientLightColor);vIndirectBack+=getLightProbeIrradiance(lightProbe,backGeometry.normal);\n#endif\n#if NUM_POINT_LIGHTS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_POINT_LIGHTS;i++){getPointLightInfo(pointLights[i],geometry,directLight);dotNL=dot(geometry.normal,directLight.direction);directLightColor_Diffuse=directLight.color;vLightFront+=saturate(dotNL)*directLightColor_Diffuse;\n#ifdef DOUBLE_SIDED\nvLightBack+=saturate(-dotNL)*directLightColor_Diffuse;\n#endif\n}\n#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_SPOT_LIGHTS;i++){getSpotLightInfo(spotLights[i],geometry,directLight);dotNL=dot(geometry.normal,directLight.direction);directLightColor_Diffuse=directLight.color;vLightFront+=saturate(dotNL)*directLightColor_Diffuse;\n#ifdef DOUBLE_SIDED\nvLightBack+=saturate(-dotNL)*directLightColor_Diffuse;\n#endif\n}\n#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_DIR_LIGHTS;i++){getDirectionalLightInfo(directionalLights[i],geometry,directLight);dotNL=dot(geometry.normal,directLight.direction);directLightColor_Diffuse=directLight.color;vLightFront+=saturate(dotNL)*directLightColor_Diffuse;\n#ifdef DOUBLE_SIDED\nvLightBack+=saturate(-dotNL)*directLightColor_Diffuse;\n#endif\n}\n#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_HEMI_LIGHTS;i++){vIndirectFront+=getHemisphereLightIrradiance(hemisphereLights[i],geometry.normal);\n#ifdef DOUBLE_SIDED\nvIndirectBack+=getHemisphereLightIrradiance(hemisphereLights[i],backGeometry.normal);\n#endif\n}\n#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;uniform vec3 ambientLightColor;uniform vec3 lightProbe[9];vec3 shGetIrradianceAt(in vec3 normal,in vec3 shCoefficients[9]){float x=normal.x,y=normal.y,z=normal.z;vec3 result=shCoefficients[0]*0.886227;result+=shCoefficients[1]*2.0*0.511664*y;result+=shCoefficients[2]*2.0*0.511664*z;result+=shCoefficients[3]*2.0*0.511664*x;result+=shCoefficients[4]*2.0*0.429043*x*y;result+=shCoefficients[5]*2.0*0.429043*y*z;result+=shCoefficients[6]*(0.743125*z*z-0.247708);result+=shCoefficients[7]*2.0*0.429043*x*z;result+=shCoefficients[8]*0.429043*(x*x-y*y);return result;}vec3 getLightProbeIrradiance(const in vec3 lightProbe[9],const in vec3 normal){vec3 worldNormal=inverseTransformDirection(normal,viewMatrix);vec3 irradiance=shGetIrradianceAt(worldNormal,lightProbe);return irradiance;}vec3 getAmbientLightIrradiance(const in vec3 ambientLightColor){vec3 irradiance=ambientLightColor;return irradiance;}float getDistanceAttenuation(const in float lightDistance,const in float cutoffDistance,const in float decayExponent){\n#if defined(PHYSICALLY_CORRECT_LIGHTS)\nfloat distanceFalloff=1.0/max(pow(lightDistance,decayExponent),0.01);if(cutoffDistance>0.0){distanceFalloff*=pow2(saturate(1.0-pow4(lightDistance/cutoffDistance)));}return distanceFalloff;\n#else\nif(cutoffDistance>0.0&&decayExponent>0.0){return pow(saturate(-lightDistance/cutoffDistance+1.0),decayExponent);}return 1.0;\n#endif\n}float getSpotAttenuation(const in float coneCosine,const in float penumbraCosine,const in float angleCosine){return smoothstep(coneCosine,penumbraCosine,angleCosine);}\n#if NUM_DIR_LIGHTS>0\nstruct DirectionalLight{vec3 direction;vec3 color;};uniform DirectionalLight directionalLights[NUM_DIR_LIGHTS];void getDirectionalLightInfo(const in DirectionalLight directionalLight,const in GeometricContext geometry,out IncidentLight light){light.color=directionalLight.color;light.direction=directionalLight.direction;light.visible=true;}\n#endif\n#if NUM_POINT_LIGHTS>0\nstruct PointLight{vec3 position;vec3 color;float distance;float decay;};uniform PointLight pointLights[NUM_POINT_LIGHTS];void getPointLightInfo(const in PointLight pointLight,const in GeometricContext geometry,out IncidentLight light){vec3 lVector=pointLight.position-geometry.position;light.direction=normalize(lVector);float lightDistance=length(lVector);light.color=pointLight.color;light.color*=getDistanceAttenuation(lightDistance,pointLight.distance,pointLight.decay);light.visible=(light.color!=vec3(0.0));}\n#endif\n#if NUM_SPOT_LIGHTS>0\nstruct SpotLight{vec3 position;vec3 direction;vec3 color;float distance;float decay;float coneCos;float penumbraCos;};uniform SpotLight spotLights[NUM_SPOT_LIGHTS];void getSpotLightInfo(const in SpotLight spotLight,const in GeometricContext geometry,out IncidentLight light){vec3 lVector=spotLight.position-geometry.position;light.direction=normalize(lVector);float angleCos=dot(light.direction,spotLight.direction);float spotAttenuation=getSpotAttenuation(spotLight.coneCos,spotLight.penumbraCos,angleCos);if(spotAttenuation>0.0){float lightDistance=length(lVector);light.color=spotLight.color*spotAttenuation;light.color*=getDistanceAttenuation(lightDistance,spotLight.distance,spotLight.decay);light.visible=(light.color!=vec3(0.0));}else{light.color=vec3(0.0);light.visible=false;}}\n#endif\n#if NUM_RECT_AREA_LIGHTS>0\nstruct RectAreaLight{vec3 color;vec3 position;vec3 halfWidth;vec3 halfHeight;};uniform sampler2D ltc_1;uniform sampler2D ltc_2;uniform RectAreaLight rectAreaLights[NUM_RECT_AREA_LIGHTS];\n#endif\n#if NUM_HEMI_LIGHTS>0\nstruct HemisphereLight{vec3 direction;vec3 skyColor;vec3 groundColor;};uniform HemisphereLight hemisphereLights[NUM_HEMI_LIGHTS];vec3 getHemisphereLightIrradiance(const in HemisphereLight hemiLight,const in vec3 normal){float dotNL=dot(normal,hemiLight.direction);float hemiDiffuseWeight=0.5*dotNL+0.5;vec3 irradiance=mix(hemiLight.groundColor,hemiLight.skyColor,hemiDiffuseWeight);return irradiance;}\n#endif",lights_toon_fragment:"ToonMaterial material;material.diffuseColor=diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;struct ToonMaterial{vec3 diffuseColor;};void RE_Direct_Toon(const in IncidentLight directLight,const in GeometricContext geometry,const in ToonMaterial material,inout ReflectedLight reflectedLight){vec3 irradiance=getGradientIrradiance(geometry.normal,directLight.direction)*directLight.color;reflectedLight.directDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}void RE_IndirectDiffuse_Toon(const in vec3 irradiance,const in GeometricContext geometry,const in ToonMaterial material,inout ReflectedLight reflectedLight){reflectedLight.indirectDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}\n#define RE_Direct RE_Direct_Toon\n#define RE_IndirectDiffuse RE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD(material)(0)",lights_phong_fragment:"BlinnPhongMaterial material;material.diffuseColor=diffuseColor.rgb;material.specularColor=specular;material.specularShininess=shininess;material.specularStrength=specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;struct BlinnPhongMaterial{vec3 diffuseColor;vec3 specularColor;float specularShininess;float specularStrength;};void RE_Direct_BlinnPhong(const in IncidentLight directLight,const in GeometricContext geometry,const in BlinnPhongMaterial material,inout ReflectedLight reflectedLight){float dotNL=saturate(dot(geometry.normal,directLight.direction));vec3 irradiance=dotNL*directLight.color;reflectedLight.directDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);reflectedLight.directSpecular+=irradiance*BRDF_BlinnPhong(directLight.direction,geometry.viewDir,geometry.normal,material.specularColor,material.specularShininess)*material.specularStrength;}void RE_IndirectDiffuse_BlinnPhong(const in vec3 irradiance,const in GeometricContext geometry,const in BlinnPhongMaterial material,inout ReflectedLight reflectedLight){reflectedLight.indirectDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}\n#define RE_Direct RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse RE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD(material)(0)",lights_physical_fragment:"PhysicalMaterial material;material.diffuseColor=diffuseColor.rgb*(1.0-metalnessFactor);vec3 dxy=max(abs(dFdx(geometryNormal)),abs(dFdy(geometryNormal)));float geometryRoughness=max(max(dxy.x,dxy.y),dxy.z);material.roughness=max(roughnessFactor,0.0525);material.roughness+=geometryRoughness;material.roughness=min(material.roughness,1.0);\n#ifdef IOR\n#ifdef SPECULAR\nfloat specularIntensityFactor=specularIntensity;vec3 specularColorFactor=specularColor;\n#ifdef USE_SPECULARINTENSITYMAP\nspecularIntensityFactor*=texture2D(specularIntensityMap,vUv).a;\n#endif\n#ifdef USE_SPECULARCOLORMAP\nspecularColorFactor*=specularColorMapTexelToLinear(texture2D(specularColorMap,vUv)).rgb;\n#endif\nmaterial.specularF90=mix(specularIntensityFactor,1.0,metalnessFactor);\n#else\nfloat specularIntensityFactor=1.0;vec3 specularColorFactor=vec3(1.0);material.specularF90=1.0;\n#endif\nmaterial.specularColor=mix(min(pow2((ior-1.0)/(ior+1.0))*specularColorFactor,vec3(1.0))*specularIntensityFactor,diffuseColor.rgb,metalnessFactor);\n#else\nmaterial.specularColor=mix(vec3(0.04),diffuseColor.rgb,metalnessFactor);material.specularF90=1.0;\n#endif\n#ifdef USE_CLEARCOAT\nmaterial.clearcoat=clearcoat;material.clearcoatRoughness=clearcoatRoughness;material.clearcoatF0=vec3(0.04);material.clearcoatF90=1.0;\n#ifdef USE_CLEARCOATMAP\nmaterial.clearcoat*=texture2D(clearcoatMap,vUv).x;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\nmaterial.clearcoatRoughness*=texture2D(clearcoatRoughnessMap,vUv).y;\n#endif\nmaterial.clearcoat=saturate(material.clearcoat);material.clearcoatRoughness=max(material.clearcoatRoughness,0.0525);material.clearcoatRoughness+=geometryRoughness;material.clearcoatRoughness=min(material.clearcoatRoughness,1.0);\n#endif\n#ifdef USE_SHEEN\nmaterial.sheenColor=sheenColor;\n#ifdef USE_SHEENCOLORMAP\nmaterial.sheenColor*=sheenColorMapTexelToLinear(texture2D(sheenColorMap,vUv)).rgb;\n#endif\nmaterial.sheenRoughness=clamp(sheenRoughness,0.07,1.0);\n#ifdef USE_SHEENROUGHNESSMAP\nmaterial.sheenRoughness*=texture2D(sheenRoughnessMap,vUv).a;\n#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial{vec3 diffuseColor;float roughness;vec3 specularColor;float specularF90;\n#ifdef USE_CLEARCOAT\nfloat clearcoat;float clearcoatRoughness;vec3 clearcoatF0;float clearcoatF90;\n#endif\n#ifdef USE_SHEEN\nvec3 sheenColor;float sheenRoughness;\n#endif\n};vec3 clearcoatSpecular=vec3(0.0);vec2 DFGApprox(const in vec3 normal,const in vec3 viewDir,const in float roughness){float dotNV=saturate(dot(normal,viewDir));const vec4 c0=vec4(-1,-0.0275,-0.572,0.022);const vec4 c1=vec4(1,0.0425,1.04,-0.04);vec4 r=roughness*c0+c1;float a004=min(r.x*r.x,exp2(-9.28*dotNV))*r.x+r.y;vec2 fab=vec2(-1.04,1.04)*a004+r.zw;return fab;}vec3 EnvironmentBRDF(const in vec3 normal,const in vec3 viewDir,const in vec3 specularColor,const in float specularF90,const in float roughness){vec2 fab=DFGApprox(normal,viewDir,roughness);return specularColor*fab.x+specularF90*fab.y;}void computeMultiscattering(const in vec3 normal,const in vec3 viewDir,const in vec3 specularColor,const in float specularF90,const in float roughness,inout vec3 singleScatter,inout vec3 multiScatter){vec2 fab=DFGApprox(normal,viewDir,roughness);vec3 FssEss=specularColor*fab.x+specularF90*fab.y;float Ess=fab.x+fab.y;float Ems=1.0-Ess;vec3 Favg=specularColor+(1.0-specularColor)*0.047619;vec3 Fms=FssEss*Favg/(1.0-Ems*Favg);singleScatter+=FssEss;multiScatter+=Fms*Ems;}\n#if NUM_RECT_AREA_LIGHTS>0\nvoid RE_Direct_RectArea_Physical(const in RectAreaLight rectAreaLight,const in GeometricContext geometry,const in PhysicalMaterial material,inout ReflectedLight reflectedLight){vec3 normal=geometry.normal;vec3 viewDir=geometry.viewDir;vec3 position=geometry.position;vec3 lightPos=rectAreaLight.position;vec3 halfWidth=rectAreaLight.halfWidth;vec3 halfHeight=rectAreaLight.halfHeight;vec3 lightColor=rectAreaLight.color;float roughness=material.roughness;vec3 rectCoords[4];rectCoords[0]=lightPos+halfWidth-halfHeight;rectCoords[1]=lightPos-halfWidth-halfHeight;rectCoords[2]=lightPos-halfWidth+halfHeight;rectCoords[3]=lightPos+halfWidth+halfHeight;vec2 uv=LTC_Uv(normal,viewDir,roughness);vec4 t1=texture2D(ltc_1,uv);vec4 t2=texture2D(ltc_2,uv);mat3 mInv=mat3(vec3(t1.x,0,t1.y),vec3(0,1,0),vec3(t1.z,0,t1.w));vec3 fresnel=(material.specularColor*t2.x+(vec3(1.0)-material.specularColor)*t2.y);reflectedLight.directSpecular+=lightColor*fresnel*LTC_Evaluate(normal,viewDir,position,mInv,rectCoords);reflectedLight.directDiffuse+=lightColor*material.diffuseColor*LTC_Evaluate(normal,viewDir,position,mat3(1.0),rectCoords);}\n#endif\nvoid RE_Direct_Physical(const in IncidentLight directLight,const in GeometricContext geometry,const in PhysicalMaterial material,inout ReflectedLight reflectedLight){float dotNL=saturate(dot(geometry.normal,directLight.direction));vec3 irradiance=dotNL*directLight.color;\n#ifdef USE_CLEARCOAT\nfloat dotNLcc=saturate(dot(geometry.clearcoatNormal,directLight.direction));vec3 ccIrradiance=dotNLcc*directLight.color;clearcoatSpecular+=ccIrradiance*BRDF_GGX(directLight.direction,geometry.viewDir,geometry.clearcoatNormal,material.clearcoatF0,material.clearcoatF90,material.clearcoatRoughness);\n#endif\n#ifdef USE_SHEEN\nreflectedLight.directSpecular+=irradiance*BRDF_Sheen(directLight.direction,geometry.viewDir,geometry.normal,material.sheenColor,material.sheenRoughness);\n#endif\nreflectedLight.directSpecular+=irradiance*BRDF_GGX(directLight.direction,geometry.viewDir,geometry.normal,material.specularColor,material.specularF90,material.roughness);reflectedLight.directDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}void RE_IndirectDiffuse_Physical(const in vec3 irradiance,const in GeometricContext geometry,const in PhysicalMaterial material,inout ReflectedLight reflectedLight){reflectedLight.indirectDiffuse+=irradiance*BRDF_Lambert(material.diffuseColor);}void RE_IndirectSpecular_Physical(const in vec3 radiance,const in vec3 irradiance,const in vec3 clearcoatRadiance,const in GeometricContext geometry,const in PhysicalMaterial material,inout ReflectedLight reflectedLight){\n#ifdef USE_CLEARCOAT\nclearcoatSpecular+=clearcoatRadiance*EnvironmentBRDF(geometry.clearcoatNormal,geometry.viewDir,material.clearcoatF0,material.clearcoatF90,material.clearcoatRoughness);\n#endif\nvec3 singleScattering=vec3(0.0);vec3 multiScattering=vec3(0.0);vec3 cosineWeightedIrradiance=irradiance*RECIPROCAL_PI;computeMultiscattering(geometry.normal,geometry.viewDir,material.specularColor,material.specularF90,material.roughness,singleScattering,multiScattering);vec3 diffuse=material.diffuseColor*(1.0-(singleScattering+multiScattering));reflectedLight.indirectSpecular+=radiance*singleScattering;reflectedLight.indirectSpecular+=multiScattering*cosineWeightedIrradiance;reflectedLight.indirectDiffuse+=diffuse*cosineWeightedIrradiance;}\n#define RE_Direct RE_Direct_Physical\n#define RE_Direct_RectArea RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion(const in float dotNV,const in float ambientOcclusion,const in float roughness){return saturate(pow(dotNV+ambientOcclusion,exp2(-16.0*roughness-1.0))-1.0+ambientOcclusion);}",lights_fragment_begin:"GeometricContext geometry;geometry.position=-vViewPosition;geometry.normal=normal;geometry.viewDir=(isOrthographic)?vec3(0,0,1):normalize(vViewPosition);\n#ifdef USE_CLEARCOAT\ngeometry.clearcoatNormal=clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if (NUM_POINT_LIGHTS>0)&&defined(RE_Direct)\nPointLight pointLight;\n#if defined(USE_SHADOWMAP)&&NUM_POINT_LIGHT_SHADOWS>0\nPointLightShadow pointLightShadow;\n#endif\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_POINT_LIGHTS;i++){pointLight=pointLights[i];getPointLightInfo(pointLight,geometry,directLight);\n#if defined(USE_SHADOWMAP)&&(UNROLLED_LOOP_INDEX<NUM_POINT_LIGHT_SHADOWS)\npointLightShadow=pointLightShadows[i];directLight.color*=all(bvec2(directLight.visible,receiveShadow))?getPointShadow(pointShadowMap[i],pointLightShadow.shadowMapSize,pointLightShadow.shadowBias,pointLightShadow.shadowRadius,vPointShadowCoord[i],pointLightShadow.shadowCameraNear,pointLightShadow.shadowCameraFar):1.0;\n#endif\nRE_Direct(directLight,geometry,material,reflectedLight);}\n#pragma unroll_loop_end\n#endif\n#if (NUM_SPOT_LIGHTS>0)&&defined(RE_Direct)\nSpotLight spotLight;\n#if defined(USE_SHADOWMAP)&&NUM_SPOT_LIGHT_SHADOWS>0\nSpotLightShadow spotLightShadow;\n#endif\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_SPOT_LIGHTS;i++){spotLight=spotLights[i];getSpotLightInfo(spotLight,geometry,directLight);\n#if defined(USE_SHADOWMAP)&&(UNROLLED_LOOP_INDEX<NUM_SPOT_LIGHT_SHADOWS)\nspotLightShadow=spotLightShadows[i];directLight.color*=all(bvec2(directLight.visible,receiveShadow))?getShadow(spotShadowMap[i],spotLightShadow.shadowMapSize,spotLightShadow.shadowBias,spotLightShadow.shadowRadius,vSpotShadowCoord[i]):1.0;\n#endif\nRE_Direct(directLight,geometry,material,reflectedLight);}\n#pragma unroll_loop_end\n#endif\n#if (NUM_DIR_LIGHTS>0)&&defined(RE_Direct)\nDirectionalLight directionalLight;\n#if defined(USE_SHADOWMAP)&&NUM_DIR_LIGHT_SHADOWS>0\nDirectionalLightShadow directionalLightShadow;\n#endif\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_DIR_LIGHTS;i++){directionalLight=directionalLights[i];getDirectionalLightInfo(directionalLight,geometry,directLight);\n#if defined(USE_SHADOWMAP)&&(UNROLLED_LOOP_INDEX<NUM_DIR_LIGHT_SHADOWS)\ndirectionalLightShadow=directionalLightShadows[i];directLight.color*=all(bvec2(directLight.visible,receiveShadow))?getShadow(directionalShadowMap[i],directionalLightShadow.shadowMapSize,directionalLightShadow.shadowBias,directionalLightShadow.shadowRadius,vDirectionalShadowCoord[i]):1.0;\n#endif\nRE_Direct(directLight,geometry,material,reflectedLight);}\n#pragma unroll_loop_end\n#endif\n#if (NUM_RECT_AREA_LIGHTS>0)&&defined(RE_Direct_RectArea)\nRectAreaLight rectAreaLight;\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_RECT_AREA_LIGHTS;i++){rectAreaLight=rectAreaLights[i];RE_Direct_RectArea(rectAreaLight,geometry,material,reflectedLight);}\n#pragma unroll_loop_end\n#endif\n#if defined(RE_IndirectDiffuse)\nvec3 iblIrradiance=vec3(0.0);vec3 irradiance=getAmbientLightIrradiance(ambientLightColor);irradiance+=getLightProbeIrradiance(lightProbe,geometry.normal);\n#if (NUM_HEMI_LIGHTS>0)\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_HEMI_LIGHTS;i++){irradiance+=getHemisphereLightIrradiance(hemisphereLights[i],geometry.normal);}\n#pragma unroll_loop_end\n#endif\n#endif\n#if defined(RE_IndirectSpecular)\nvec3 radiance=vec3(0.0);vec3 clearcoatRadiance=vec3(0.0);\n#endif",lights_fragment_maps:"#if defined(RE_IndirectDiffuse)\n#ifdef USE_LIGHTMAP\nvec4 lightMapTexel=texture2D(lightMap,vUv2);vec3 lightMapIrradiance=lightMapTexelToLinear(lightMapTexel).rgb*lightMapIntensity;\n#ifndef PHYSICALLY_CORRECT_LIGHTS\nlightMapIrradiance*=PI;\n#endif\nirradiance+=lightMapIrradiance;\n#endif\n#if defined(USE_ENVMAP)&&defined(STANDARD)&&defined(ENVMAP_TYPE_CUBE_UV)\niblIrradiance+=getIBLIrradiance(geometry.normal);\n#endif\n#endif\n#if defined(USE_ENVMAP)&&defined(RE_IndirectSpecular)\nradiance+=getIBLRadiance(geometry.viewDir,geometry.normal,material.roughness);\n#ifdef USE_CLEARCOAT\nclearcoatRadiance+=getIBLRadiance(geometry.viewDir,geometry.clearcoatNormal,material.clearcoatRoughness);\n#endif\n#endif",lights_fragment_end:"#if defined(RE_IndirectDiffuse)\nRE_IndirectDiffuse(irradiance,geometry,material,reflectedLight);\n#endif\n#if defined(RE_IndirectSpecular)\nRE_IndirectSpecular(radiance,iblIrradiance,clearcoatRadiance,geometry,material,reflectedLight);\n#endif",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF)&&defined(USE_LOGDEPTHBUF_EXT)\ngl_FragDepthEXT=vIsPerspective==0.0?gl_FragCoord.z:log2(vFragDepth)*logDepthBufFC*0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined(USE_LOGDEPTHBUF)&&defined(USE_LOGDEPTHBUF_EXT)\nuniform float logDepthBufFC;varying float vFragDepth;varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n#ifdef USE_LOGDEPTHBUF_EXT\nvarying float vFragDepth;varying float vIsPerspective;\n#else\nuniform float logDepthBufFC;\n#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n#ifdef USE_LOGDEPTHBUF_EXT\nvFragDepth=1.0+gl_Position.w;vIsPerspective=float(isPerspectiveMatrix(projectionMatrix));\n#else\nif(isPerspectiveMatrix(projectionMatrix)){gl_Position.z=log2(max(EPSILON,gl_Position.w+1.0))*logDepthBufFC-1.0;gl_Position.z*=gl_Position.w;}\n#endif\n#endif",map_fragment:"#ifdef USE_MAP\nvec4 texelColor=texture2D(map,vUv);texelColor=mapTexelToLinear(texelColor);diffuseColor*=texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\nuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined(USE_MAP)||defined(USE_ALPHAMAP)\nvec2 uv=(uvTransform*vec3(gl_PointCoord.x,1.0-gl_PointCoord.y,1)).xy;\n#endif\n#ifdef USE_MAP\nvec4 mapTexel=texture2D(map,uv);diffuseColor*=mapTexelToLinear(mapTexel);\n#endif\n#ifdef USE_ALPHAMAP\ndiffuseColor.a*=texture2D(alphaMap,uv).g;\n#endif",map_particle_pars_fragment:"#if defined(USE_MAP)||defined(USE_ALPHAMAP)\nuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\nuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor=metalness;\n#ifdef USE_METALNESSMAP\nvec4 texelMetalness=texture2D(metalnessMap,vUv);metalnessFactor*=texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\nuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\nobjectNormal*=morphTargetBaseInfluence;\n#ifdef MORPHTARGETS_TEXTURE\nfor(int i=0;i<MORPHTARGETS_COUNT;i++){if(morphTargetInfluences[i]>0.0)objectNormal+=getMorph(gl_VertexID,i,1,2)*morphTargetInfluences[i];}\n#else\nobjectNormal+=morphNormal0*morphTargetInfluences[0];objectNormal+=morphNormal1*morphTargetInfluences[1];objectNormal+=morphNormal2*morphTargetInfluences[2];objectNormal+=morphNormal3*morphTargetInfluences[3];\n#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\nuniform float morphTargetBaseInfluence;\n#ifdef MORPHTARGETS_TEXTURE\nuniform float morphTargetInfluences[MORPHTARGETS_COUNT];uniform sampler2DArray morphTargetsTexture;uniform vec2 morphTargetsTextureSize;vec3 getMorph(const in int vertexIndex,const in int morphTargetIndex,const in int offset,const in int stride){float texelIndex=float(vertexIndex*stride+offset);float y=floor(texelIndex/morphTargetsTextureSize.x);float x=texelIndex-y*morphTargetsTextureSize.x;vec3 morphUV=vec3((x+0.5)/morphTargetsTextureSize.x,y/morphTargetsTextureSize.y,morphTargetIndex);return texture(morphTargetsTexture,morphUV).xyz;}\n#else\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[8];\n#else\nuniform float morphTargetInfluences[4];\n#endif\n#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\ntransformed*=morphTargetBaseInfluence;\n#ifdef MORPHTARGETS_TEXTURE\nfor(int i=0;i<MORPHTARGETS_COUNT;i++){\n#ifndef USE_MORPHNORMALS\nif(morphTargetInfluences[i]>0.0)transformed+=getMorph(gl_VertexID,i,0,1)*morphTargetInfluences[i];\n#else\nif(morphTargetInfluences[i]>0.0)transformed+=getMorph(gl_VertexID,i,0,2)*morphTargetInfluences[i];\n#endif\n}\n#else\ntransformed+=morphTarget0*morphTargetInfluences[0];transformed+=morphTarget1*morphTargetInfluences[1];transformed+=morphTarget2*morphTargetInfluences[2];transformed+=morphTarget3*morphTargetInfluences[3];\n#ifndef USE_MORPHNORMALS\ntransformed+=morphTarget4*morphTargetInfluences[4];transformed+=morphTarget5*morphTargetInfluences[5];transformed+=morphTarget6*morphTargetInfluences[6];transformed+=morphTarget7*morphTargetInfluences[7];\n#endif\n#endif\n#endif",normal_fragment_begin:"float faceDirection=gl_FrontFacing?1.0:-1.0;\n#ifdef FLAT_SHADED\nvec3 fdx=vec3(dFdx(vViewPosition.x),dFdx(vViewPosition.y),dFdx(vViewPosition.z));vec3 fdy=vec3(dFdy(vViewPosition.x),dFdy(vViewPosition.y),dFdy(vViewPosition.z));vec3 normal=normalize(cross(fdx,fdy));\n#else\nvec3 normal=normalize(vNormal);\n#ifdef DOUBLE_SIDED\nnormal=normal*faceDirection;\n#endif\n#ifdef USE_TANGENT\nvec3 tangent=normalize(vTangent);vec3 bitangent=normalize(vBitangent);\n#ifdef DOUBLE_SIDED\ntangent=tangent*faceDirection;bitangent=bitangent*faceDirection;\n#endif\n#if defined(TANGENTSPACE_NORMALMAP)||defined(USE_CLEARCOAT_NORMALMAP)\nmat3 vTBN=mat3(tangent,bitangent,normal);\n#endif\n#endif\n#endif\nvec3 geometryNormal=normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\nnormal=texture2D(normalMap,vUv).xyz*2.0-1.0;\n#ifdef FLIP_SIDED\nnormal=-normal;\n#endif\n#ifdef DOUBLE_SIDED\nnormal=normal*faceDirection;\n#endif\nnormal=normalize(normalMatrix*normal);\n#elif defined(TANGENTSPACE_NORMALMAP)\nvec3 mapN=texture2D(normalMap,vUv).xyz*2.0-1.0;mapN.xy*=normalScale;\n#ifdef USE_TANGENT\nnormal=normalize(vTBN*mapN);\n#else\nnormal=perturbNormal2Arb(-vViewPosition,normal,mapN,faceDirection);\n#endif\n#elif defined(USE_BUMPMAP)\nnormal=perturbNormalArb(-vViewPosition,normal,dHdxy_fwd(),faceDirection);\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\nvNormal=normalize(transformedNormal);\n#ifdef USE_TANGENT\nvTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);\n#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;uniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\nuniform mat3 normalMatrix;\n#endif\n#if !defined(USE_TANGENT)&&(defined(TANGENTSPACE_NORMALMAP)||defined(USE_CLEARCOAT_NORMALMAP))\nvec3 perturbNormal2Arb(vec3 eye_pos,vec3 surf_norm,vec3 mapN,float faceDirection){vec3 q0=vec3(dFdx(eye_pos.x),dFdx(eye_pos.y),dFdx(eye_pos.z));vec3 q1=vec3(dFdy(eye_pos.x),dFdy(eye_pos.y),dFdy(eye_pos.z));vec2 st0=dFdx(vUv.st);vec2 st1=dFdy(vUv.st);vec3 N=surf_norm;vec3 q1perp=cross(q1,N);vec3 q0perp=cross(N,q0);vec3 T=q1perp*st0.x+q0perp*st1.x;vec3 B=q1perp*st0.y+q0perp*st1.y;float det=max(dot(T,T),dot(B,B));float scale=(det==0.0)?0.0:faceDirection*inversesqrt(det);return normalize(T*(mapN.x*scale)+B*(mapN.y*scale)+N*mapN.z);}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\nvec3 clearcoatNormal=geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\nvec3 clearcoatMapN=texture2D(clearcoatNormalMap,vUv).xyz*2.0-1.0;clearcoatMapN.xy*=clearcoatNormalScale;\n#ifdef USE_TANGENT\nclearcoatNormal=normalize(vTBN*clearcoatMapN);\n#else\nclearcoatNormal=perturbNormal2Arb(-vViewPosition,clearcoatNormal,clearcoatMapN,faceDirection);\n#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\nuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\nuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\nuniform sampler2D clearcoatNormalMap;uniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a=1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a*=transmissionAlpha+0.1;\n#endif\ngl_FragColor=vec4(outgoingLight,diffuseColor.a);",packing:"vec3 packNormalToRGB(const in vec3 normal){return normalize(normal)*0.5+0.5;}vec3 unpackRGBToNormal(const in vec3 rgb){return 2.0*rgb.xyz-1.0;}const float PackUpscale=256./255.;const float UnpackDownscale=255./256.;const vec3 PackFactors=vec3(256.*256.*256.,256.*256.,256.);const vec4 UnpackFactors=UnpackDownscale/vec4(PackFactors,1.);const float ShiftRight8=1./256.;vec4 packDepthToRGBA(const in float v){vec4 r=vec4(fract(v*PackFactors),v);r.yzw-=r.xyz*ShiftRight8;return r*PackUpscale;}float unpackRGBAToDepth(const in vec4 v){return dot(v,UnpackFactors);}vec4 pack2HalfToRGBA(vec2 v){vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}vec2 unpackRGBATo2Half(vec4 v){return vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));}float viewZToOrthographicDepth(const in float viewZ,const in float near,const in float far){return(viewZ+near)/(near-far);}float orthographicDepthToViewZ(const in float linearClipZ,const in float near,const in float far){return linearClipZ*(near-far)-near;}float viewZToPerspectiveDepth(const in float viewZ,const in float near,const in float far){return((near+viewZ)*far)/((far-near)*viewZ);}float perspectiveDepthToViewZ(const in float invClipZ,const in float near,const in float far){return(near*far)/((far-near)*invClipZ-far);}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\ngl_FragColor.rgb*=gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition=vec4(transformed,1.0);\n#ifdef USE_INSTANCING\nmvPosition=instanceMatrix*mvPosition;\n#endif\nmvPosition=modelViewMatrix*mvPosition;gl_Position=projectionMatrix*mvPosition;",dithering_fragment:"#ifdef DITHERING\ngl_FragColor.rgb=dithering(gl_FragColor.rgb);\n#endif",dithering_pars_fragment:"#ifdef DITHERING\nvec3 dithering(vec3 color){float grid_position=rand(gl_FragCoord.xy);vec3 dither_shift_RGB=vec3(0.25/255.0,-0.25/255.0,0.25/255.0);dither_shift_RGB=mix(2.0*dither_shift_RGB,-2.0*dither_shift_RGB,grid_position);return color+dither_shift_RGB;}\n#endif",roughnessmap_fragment:"float roughnessFactor=roughness;\n#ifdef USE_ROUGHNESSMAP\nvec4 texelRoughness=texture2D(roughnessMap,vUv);roughnessFactor*=texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\nuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n#if NUM_DIR_LIGHT_SHADOWS>0\nuniform sampler2D directionalShadowMap[NUM_DIR_LIGHT_SHADOWS];varying vec4 vDirectionalShadowCoord[NUM_DIR_LIGHT_SHADOWS];struct DirectionalLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;};uniform DirectionalLightShadow directionalLightShadows[NUM_DIR_LIGHT_SHADOWS];\n#endif\n#if NUM_SPOT_LIGHT_SHADOWS>0\nuniform sampler2D spotShadowMap[NUM_SPOT_LIGHT_SHADOWS];varying vec4 vSpotShadowCoord[NUM_SPOT_LIGHT_SHADOWS];struct SpotLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;};uniform SpotLightShadow spotLightShadows[NUM_SPOT_LIGHT_SHADOWS];\n#endif\n#if NUM_POINT_LIGHT_SHADOWS>0\nuniform sampler2D pointShadowMap[NUM_POINT_LIGHT_SHADOWS];varying vec4 vPointShadowCoord[NUM_POINT_LIGHT_SHADOWS];struct PointLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;float shadowCameraNear;float shadowCameraFar;};uniform PointLightShadow pointLightShadows[NUM_POINT_LIGHT_SHADOWS];\n#endif\nfloat texture2DCompare(sampler2D depths,vec2 uv,float compare){return step(compare,unpackRGBAToDepth(texture2D(depths,uv)));}vec2 texture2DDistribution(sampler2D shadow,vec2 uv){return unpackRGBATo2Half(texture2D(shadow,uv));}float VSMShadow(sampler2D shadow,vec2 uv,float compare){float occlusion=1.0;vec2 distribution=texture2DDistribution(shadow,uv);float hard_shadow=step(compare,distribution.x);if(hard_shadow!=1.0){float distance=compare-distribution.x;float variance=max(0.00000,distribution.y*distribution.y);float softness_probability=variance/(variance+distance*distance);softness_probability=clamp((softness_probability-0.3)/(0.95-0.3),0.0,1.0);occlusion=clamp(max(hard_shadow,softness_probability),0.0,1.0);}return occlusion;}float getShadow(sampler2D shadowMap,vec2 shadowMapSize,float shadowBias,float shadowRadius,vec4 shadowCoord){float shadow=1.0;shadowCoord.xyz/=shadowCoord.w;shadowCoord.z+=shadowBias;bvec4 inFrustumVec=bvec4(shadowCoord.x>=0.0,shadowCoord.x<=1.0,shadowCoord.y>=0.0,shadowCoord.y<=1.0);bool inFrustum=all(inFrustumVec);bvec2 frustumTestVec=bvec2(inFrustum,shadowCoord.z<=1.0);bool frustumTest=all(frustumTestVec);if(frustumTest){\n#if defined(SHADOWMAP_TYPE_PCF)\nvec2 texelSize=vec2(1.0)/shadowMapSize;float dx0=-texelSize.x*shadowRadius;float dy0=-texelSize.y*shadowRadius;float dx1=+texelSize.x*shadowRadius;float dy1=+texelSize.y*shadowRadius;float dx2=dx0/2.0;float dy2=dy0/2.0;float dx3=dx1/2.0;float dy3=dy1/2.0;shadow=(texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx0,dy0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx1,dy0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx2,dy2),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy2),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx3,dy2),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx0,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx2,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy,shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx3,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx1,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx2,dy3),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy3),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx3,dy3),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx0,dy1),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy1),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx1,dy1),shadowCoord.z))*(1.0/17.0);\n#elif defined(SHADOWMAP_TYPE_PCF_SOFT)\nvec2 texelSize=vec2(1.0)/shadowMapSize;float dx=texelSize.x;float dy=texelSize.y;vec2 uv=shadowCoord.xy;vec2 f=fract(uv*shadowMapSize+0.5);uv-=f*texelSize;shadow=(texture2DCompare(shadowMap,uv,shadowCoord.z)+texture2DCompare(shadowMap,uv+vec2(dx,0.0),shadowCoord.z)+texture2DCompare(shadowMap,uv+vec2(0.0,dy),shadowCoord.z)+texture2DCompare(shadowMap,uv+texelSize,shadowCoord.z)+mix(texture2DCompare(shadowMap,uv+vec2(-dx,0.0),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,0.0),shadowCoord.z),f.x)+mix(texture2DCompare(shadowMap,uv+vec2(-dx,dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,dy),shadowCoord.z),f.x)+mix(texture2DCompare(shadowMap,uv+vec2(0.0,-dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(0.0,2.0*dy),shadowCoord.z),f.y)+mix(texture2DCompare(shadowMap,uv+vec2(dx,-dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(dx,2.0*dy),shadowCoord.z),f.y)+mix(mix(texture2DCompare(shadowMap,uv+vec2(-dx,-dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,-dy),shadowCoord.z),f.x),mix(texture2DCompare(shadowMap,uv+vec2(-dx,2.0*dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,2.0*dy),shadowCoord.z),f.x),f.y))*(1.0/9.0);\n#elif defined(SHADOWMAP_TYPE_VSM)\nshadow=VSMShadow(shadowMap,shadowCoord.xy,shadowCoord.z);\n#else\nshadow=texture2DCompare(shadowMap,shadowCoord.xy,shadowCoord.z);\n#endif\n}return shadow;}vec2 cubeToUV(vec3 v,float texelSizeY){vec3 absV=abs(v);float scaleToCube=1.0/max(absV.x,max(absV.y,absV.z));absV*=scaleToCube;v*=scaleToCube*(1.0-2.0*texelSizeY);vec2 planar=v.xy;float almostATexel=1.5*texelSizeY;float almostOne=1.0-almostATexel;if(absV.z>=almostOne){if(v.z>0.0)planar.x=4.0-v.x;}else if(absV.x>=almostOne){float signX=sign(v.x);planar.x=v.z*signX+2.0*signX;}else if(absV.y>=almostOne){float signY=sign(v.y);planar.x=v.x+2.0*signY+2.0;planar.y=v.z*signY-2.0;}return vec2(0.125,0.25)*planar+vec2(0.375,0.75);}float getPointShadow(sampler2D shadowMap,vec2 shadowMapSize,float shadowBias,float shadowRadius,vec4 shadowCoord,float shadowCameraNear,float shadowCameraFar){vec2 texelSize=vec2(1.0)/(shadowMapSize*vec2(4.0,2.0));vec3 lightToPosition=shadowCoord.xyz;float dp=(length(lightToPosition)-shadowCameraNear)/(shadowCameraFar-shadowCameraNear);dp+=shadowBias;vec3 bd3D=normalize(lightToPosition);\n#if defined(SHADOWMAP_TYPE_PCF)||defined(SHADOWMAP_TYPE_PCF_SOFT)||defined(SHADOWMAP_TYPE_VSM)\nvec2 offset=vec2(-1,1)*shadowRadius*texelSize.y;return(texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xyy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yyy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xyx,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yyx,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xxy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yxy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xxx,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yxx,texelSize.y),dp))*(1.0/9.0);\n#else\nreturn texture2DCompare(shadowMap,cubeToUV(bd3D,texelSize.y),dp);\n#endif\n}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n#if NUM_DIR_LIGHT_SHADOWS>0\nuniform mat4 directionalShadowMatrix[NUM_DIR_LIGHT_SHADOWS];varying vec4 vDirectionalShadowCoord[NUM_DIR_LIGHT_SHADOWS];struct DirectionalLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;};uniform DirectionalLightShadow directionalLightShadows[NUM_DIR_LIGHT_SHADOWS];\n#endif\n#if NUM_SPOT_LIGHT_SHADOWS>0\nuniform mat4 spotShadowMatrix[NUM_SPOT_LIGHT_SHADOWS];varying vec4 vSpotShadowCoord[NUM_SPOT_LIGHT_SHADOWS];struct SpotLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;};uniform SpotLightShadow spotLightShadows[NUM_SPOT_LIGHT_SHADOWS];\n#endif\n#if NUM_POINT_LIGHT_SHADOWS>0\nuniform mat4 pointShadowMatrix[NUM_POINT_LIGHT_SHADOWS];varying vec4 vPointShadowCoord[NUM_POINT_LIGHT_SHADOWS];struct PointLightShadow{float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;float shadowCameraNear;float shadowCameraFar;};uniform PointLightShadow pointLightShadows[NUM_POINT_LIGHT_SHADOWS];\n#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n#if NUM_DIR_LIGHT_SHADOWS>0||NUM_SPOT_LIGHT_SHADOWS>0||NUM_POINT_LIGHT_SHADOWS>0\nvec3 shadowWorldNormal=inverseTransformDirection(transformedNormal,viewMatrix);vec4 shadowWorldPosition;\n#endif\n#if NUM_DIR_LIGHT_SHADOWS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_DIR_LIGHT_SHADOWS;i++){shadowWorldPosition=worldPosition+vec4(shadowWorldNormal*directionalLightShadows[i].shadowNormalBias,0);vDirectionalShadowCoord[i]=directionalShadowMatrix[i]*shadowWorldPosition;}\n#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHT_SHADOWS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_SPOT_LIGHT_SHADOWS;i++){shadowWorldPosition=worldPosition+vec4(shadowWorldNormal*spotLightShadows[i].shadowNormalBias,0);vSpotShadowCoord[i]=spotShadowMatrix[i]*shadowWorldPosition;}\n#pragma unroll_loop_end\n#endif\n#if NUM_POINT_LIGHT_SHADOWS>0\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_POINT_LIGHT_SHADOWS;i++){shadowWorldPosition=worldPosition+vec4(shadowWorldNormal*pointLightShadows[i].shadowNormalBias,0);vPointShadowCoord[i]=pointShadowMatrix[i]*shadowWorldPosition;}\n#pragma unroll_loop_end\n#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask(){float shadow=1.0;\n#ifdef USE_SHADOWMAP\n#if NUM_DIR_LIGHT_SHADOWS>0\nDirectionalLightShadow directionalLight;\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_DIR_LIGHT_SHADOWS;i++){directionalLight=directionalLightShadows[i];shadow*=receiveShadow?getShadow(directionalShadowMap[i],directionalLight.shadowMapSize,directionalLight.shadowBias,directionalLight.shadowRadius,vDirectionalShadowCoord[i]):1.0;}\n#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHT_SHADOWS>0\nSpotLightShadow spotLight;\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_SPOT_LIGHT_SHADOWS;i++){spotLight=spotLightShadows[i];shadow*=receiveShadow?getShadow(spotShadowMap[i],spotLight.shadowMapSize,spotLight.shadowBias,spotLight.shadowRadius,vSpotShadowCoord[i]):1.0;}\n#pragma unroll_loop_end\n#endif\n#if NUM_POINT_LIGHT_SHADOWS>0\nPointLightShadow pointLight;\n#pragma unroll_loop_start\nfor(int i=0;i<NUM_POINT_LIGHT_SHADOWS;i++){pointLight=pointLightShadows[i];shadow*=receiveShadow?getPointShadow(pointShadowMap[i],pointLight.shadowMapSize,pointLight.shadowBias,pointLight.shadowRadius,vPointShadowCoord[i],pointLight.shadowCameraNear,pointLight.shadowCameraFar):1.0;}\n#pragma unroll_loop_end\n#endif\n#endif\nreturn shadow;}",skinbase_vertex:"#ifdef USE_SKINNING\nmat4 boneMatX=getBoneMatrix(skinIndex.x);mat4 boneMatY=getBoneMatrix(skinIndex.y);mat4 boneMatZ=getBoneMatrix(skinIndex.z);mat4 boneMatW=getBoneMatrix(skinIndex.w);\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\nuniform mat4 bindMatrix;uniform mat4 bindMatrixInverse;\n#ifdef BONE_TEXTURE\nuniform highp sampler2D boneTexture;uniform int boneTextureSize;mat4 getBoneMatrix(const in float i){float j=i*4.0;float x=mod(j,float(boneTextureSize));float y=floor(j/float(boneTextureSize));float dx=1.0/float(boneTextureSize);float dy=1.0/float(boneTextureSize);y=dy*(y+0.5);vec4 v1=texture2D(boneTexture,vec2(dx*(x+0.5),y));vec4 v2=texture2D(boneTexture,vec2(dx*(x+1.5),y));vec4 v3=texture2D(boneTexture,vec2(dx*(x+2.5),y));vec4 v4=texture2D(boneTexture,vec2(dx*(x+3.5),y));mat4 bone=mat4(v1,v2,v3,v4);return bone;}\n#else\nuniform mat4 boneMatrices[MAX_BONES];mat4 getBoneMatrix(const in float i){mat4 bone=boneMatrices[int(i)];return bone;}\n#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\nvec4 skinVertex=bindMatrix*vec4(transformed,1.0);vec4 skinned=vec4(0.0);skinned+=boneMatX*skinVertex*skinWeight.x;skinned+=boneMatY*skinVertex*skinWeight.y;skinned+=boneMatZ*skinVertex*skinWeight.z;skinned+=boneMatW*skinVertex*skinWeight.w;transformed=(bindMatrixInverse*skinned).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\nmat4 skinMatrix=mat4(0.0);skinMatrix+=skinWeight.x*boneMatX;skinMatrix+=skinWeight.y*boneMatY;skinMatrix+=skinWeight.z*boneMatZ;skinMatrix+=skinWeight.w*boneMatW;skinMatrix=bindMatrixInverse*skinMatrix*bindMatrix;objectNormal=vec4(skinMatrix*vec4(objectNormal,0.0)).xyz;\n#ifdef USE_TANGENT\nobjectTangent=vec4(skinMatrix*vec4(objectTangent,0.0)).xyz;\n#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular=texture2D(specularMap,vUv);specularStrength=texelSpecular.r;\n#else\nspecularStrength=1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined(TONE_MAPPING)\ngl_FragColor.rgb=toneMapping(gl_FragColor.rgb);\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a)clamp(a,0.0,1.0)\n#endif\nuniform float toneMappingExposure;vec3 LinearToneMapping(vec3 color){return toneMappingExposure*color;}vec3 ReinhardToneMapping(vec3 color){color*=toneMappingExposure;return saturate(color/(vec3(1.0)+color));}vec3 OptimizedCineonToneMapping(vec3 color){color*=toneMappingExposure;color=max(vec3(0.0),color-0.004);return pow((color*(6.2*color+0.5))/(color*(6.2*color+1.7)+0.06),vec3(2.2));}vec3 RRTAndODTFit(vec3 v){vec3 a=v*(v+0.0245786)-0.000090537;vec3 b=v*(0.983729*v+0.4329510)+0.238081;return a/b;}vec3 ACESFilmicToneMapping(vec3 color){const mat3 ACESInputMat=mat3(vec3(0.59719,0.07600,0.02840),vec3(0.35458,0.90834,0.13383),vec3(0.04823,0.01566,0.83777));const mat3 ACESOutputMat=mat3(vec3(1.60475,-0.10208,-0.00327),vec3(-0.53108,1.10813,-0.07276),vec3(-0.07367,-0.00605,1.07602));color*=toneMappingExposure/0.6;color=ACESInputMat*color;color=RRTAndODTFit(color);color=ACESOutputMat*color;return saturate(color);}vec3 CustomToneMapping(vec3 color){return color;}",transmission_fragment:"#ifdef USE_TRANSMISSION\nfloat transmissionAlpha=1.0;float transmissionFactor=transmission;float thicknessFactor=thickness;\n#ifdef USE_TRANSMISSIONMAP\ntransmissionFactor*=texture2D(transmissionMap,vUv).r;\n#endif\n#ifdef USE_THICKNESSMAP\nthicknessFactor*=texture2D(thicknessMap,vUv).g;\n#endif\nvec3 pos=vWorldPosition;vec3 v=normalize(cameraPosition-pos);vec3 n=inverseTransformDirection(normal,viewMatrix);vec4 transmission=getIBLVolumeRefraction(n,v,roughnessFactor,material.diffuseColor,material.specularColor,material.specularF90,pos,modelMatrix,viewMatrix,projectionMatrix,ior,thicknessFactor,attenuationColor,attenuationDistance);totalDiffuse=mix(totalDiffuse,transmission.rgb,transmissionFactor);transmissionAlpha=mix(transmissionAlpha,transmission.a,transmissionFactor);\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\nuniform float transmission;uniform float thickness;uniform float attenuationDistance;uniform vec3 attenuationColor;\n#ifdef USE_TRANSMISSIONMAP\nuniform sampler2D transmissionMap;\n#endif\n#ifdef USE_THICKNESSMAP\nuniform sampler2D thicknessMap;\n#endif\nuniform vec2 transmissionSamplerSize;uniform sampler2D transmissionSamplerMap;uniform mat4 modelMatrix;uniform mat4 projectionMatrix;varying vec3 vWorldPosition;vec3 getVolumeTransmissionRay(vec3 n,vec3 v,float thickness,float ior,mat4 modelMatrix){vec3 refractionVector=refract(-v,normalize(n),1.0/ior);vec3 modelScale;modelScale.x=length(vec3(modelMatrix[0].xyz));modelScale.y=length(vec3(modelMatrix[1].xyz));modelScale.z=length(vec3(modelMatrix[2].xyz));return normalize(refractionVector)*thickness*modelScale;}float applyIorToRoughness(float roughness,float ior){return roughness*clamp(ior*2.0-2.0,0.0,1.0);}vec4 getTransmissionSample(vec2 fragCoord,float roughness,float ior){float framebufferLod=log2(transmissionSamplerSize.x)*applyIorToRoughness(roughness,ior);\n#ifdef TEXTURE_LOD_EXT\nreturn texture2DLodEXT(transmissionSamplerMap,fragCoord.xy,framebufferLod);\n#else\nreturn texture2D(transmissionSamplerMap,fragCoord.xy,framebufferLod);\n#endif\n}vec3 applyVolumeAttenuation(vec3 radiance,float transmissionDistance,vec3 attenuationColor,float attenuationDistance){if(attenuationDistance==0.0){return radiance;}else{vec3 attenuationCoefficient=-log(attenuationColor)/attenuationDistance;vec3 transmittance=exp(-attenuationCoefficient*transmissionDistance);return transmittance*radiance;}}vec4 getIBLVolumeRefraction(vec3 n,vec3 v,float roughness,vec3 diffuseColor,vec3 specularColor,float specularF90,vec3 position,mat4 modelMatrix,mat4 viewMatrix,mat4 projMatrix,float ior,float thickness,vec3 attenuationColor,float attenuationDistance){vec3 transmissionRay=getVolumeTransmissionRay(n,v,thickness,ior,modelMatrix);vec3 refractedRayExit=position+transmissionRay;vec4 ndcPos=projMatrix*viewMatrix*vec4(refractedRayExit,1.0);vec2 refractionCoords=ndcPos.xy/ndcPos.w;refractionCoords+=1.0;refractionCoords/=2.0;vec4 transmittedLight=getTransmissionSample(refractionCoords,roughness,ior);vec3 attenuatedColor=applyVolumeAttenuation(transmittedLight.rgb,length(transmissionRay),attenuationColor,attenuationDistance);vec3 F=EnvironmentBRDF(n,v,specularColor,specularF90,roughness);return vec4((1.0-F)*attenuatedColor*diffuseColor,transmittedLight.a);}\n#endif",uv_pars_fragment:"#if (defined(USE_UV)&&!defined(UVS_VERTEX_ONLY))\nvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n#ifdef UVS_VERTEX_ONLY\nvec2 vUv;\n#else\nvarying vec2 vUv;\n#endif\nuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\nvUv=(uvTransform*vec3(uv,1)).xy;\n#endif",uv2_pars_fragment:"#if defined(USE_LIGHTMAP)||defined(USE_AOMAP)\nvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined(USE_LIGHTMAP)||defined(USE_AOMAP)\nattribute vec2 uv2;varying vec2 vUv2;uniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined(USE_LIGHTMAP)||defined(USE_AOMAP)\nvUv2=(uv2Transform*vec3(uv2,1)).xy;\n#endif",worldpos_vertex:"#if defined(USE_ENVMAP)||defined(DISTANCE)||defined(USE_SHADOWMAP)||defined(USE_TRANSMISSION)\nvec4 worldPosition=vec4(transformed,1.0);\n#ifdef USE_INSTANCING\nworldPosition=instanceMatrix*worldPosition;\n#endif\nworldPosition=modelMatrix*worldPosition;\n#endif",background_vert:"varying vec2 vUv;uniform mat3 uvTransform;void main(){vUv=(uvTransform*vec3(uv,1)).xy;gl_Position=vec4(position.xy,1.0,1.0);}",background_frag:"uniform sampler2D t2D;varying vec2 vUv;void main(){vec4 texColor=texture2D(t2D,vUv);gl_FragColor=mapTexelToLinear(texColor);\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main(){vWorldDirection=transformDirection(position,modelMatrix);\n#include <begin_vertex>\n#include <project_vertex>\ngl_Position.z=gl_Position.w;}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;varying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main(){vec3 vReflect=vWorldDirection;\n#include <envmap_fragment>\ngl_FragColor=envColor;gl_FragColor.a*=opacity;\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;void main(){\n#include <uv_vertex>\n#include <skinbase_vertex>\n#ifdef USE_DISPLACEMENTMAP\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinnormal_vertex>\n#endif\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\nvHighPrecisionZW=gl_Position.zw;}",depth_frag:"#if DEPTH_PACKING==3200\nuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;void main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(1.0);\n#if DEPTH_PACKING==3200\ndiffuseColor.a=opacity;\n#endif\n#include <map_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <logdepthbuf_fragment>\nfloat fragCoordZ=0.5*vHighPrecisionZW[0]/vHighPrecisionZW[1]+0.5;\n#if DEPTH_PACKING==3200\ngl_FragColor=vec4(vec3(1.0-fragCoordZ),opacity);\n#elif DEPTH_PACKING==3201\ngl_FragColor=packDepthToRGBA(fragCoordZ);\n#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <skinbase_vertex>\n#ifdef USE_DISPLACEMENTMAP\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinnormal_vertex>\n#endif\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <worldpos_vertex>\n#include <clipping_planes_vertex>\nvWorldPosition=worldPosition.xyz;}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;uniform float nearDistance;uniform float farDistance;varying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(1.0);\n#include <map_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\nfloat dist=length(vWorldPosition-referencePosition);dist=(dist-nearDistance)/(farDistance-nearDistance);dist=saturate(dist);gl_FragColor=packDepthToRGBA(dist);}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main(){vWorldDirection=transformDirection(position,modelMatrix);\n#include <begin_vertex>\n#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;varying vec3 vWorldDirection;\n#include <common>\nvoid main(){vec3 direction=normalize(vWorldDirection);vec2 sampleUV=equirectUv(direction);vec4 texColor=texture2D(tEquirect,sampleUV);gl_FragColor=mapTexelToLinear(texColor);\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;attribute float lineDistance;varying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){vLineDistance=scale*lineDistance;\n#include <color_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;uniform float opacity;uniform float dashSize;uniform float totalSize;varying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nif(mod(vLineDistance,totalSize)>dashSize){discard;}vec3 outgoingLight=vec3(0.0);vec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <color_fragment>\noutgoingLight=diffuseColor.rgb;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#if defined(USE_ENVMAP)||defined(USE_SKINNING)\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#endif\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <worldpos_vertex>\n#include <envmap_vertex>\n#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;uniform float opacity;\n#ifndef FLAT_SHADED\nvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <specularmap_fragment>\nReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));\n#ifdef USE_LIGHTMAP\nvec4 lightMapTexel=texture2D(lightMap,vUv2);reflectedLight.indirectDiffuse+=lightMapTexelToLinear(lightMapTexel).rgb*lightMapIntensity;\n#else\nreflectedLight.indirectDiffuse+=vec3(1.0);\n#endif\n#include <aomap_fragment>\nreflectedLight.indirectDiffuse*=diffuseColor.rgb;vec3 outgoingLight=reflectedLight.indirectDiffuse;\n#include <envmap_fragment>\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;varying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <worldpos_vertex>\n#include <envmap_vertex>\n#include <lights_lambert_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;uniform vec3 emissive;uniform float opacity;varying vec3 vLightFront;varying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <specularmap_fragment>\n#include <emissivemap_fragment>\n#ifdef DOUBLE_SIDED\nreflectedLight.indirectDiffuse+=(gl_FrontFacing)?vIndirectFront:vIndirectBack;\n#else\nreflectedLight.indirectDiffuse+=vIndirectFront;\n#endif\n#include <lightmap_fragment>\nreflectedLight.indirectDiffuse*=BRDF_Lambert(diffuseColor.rgb);\n#ifdef DOUBLE_SIDED\nreflectedLight.directDiffuse=(gl_FrontFacing)?vLightFront:vLightBack;\n#else\nreflectedLight.directDiffuse=vLightFront;\n#endif\nreflectedLight.directDiffuse*=BRDF_Lambert(diffuseColor.rgb)*getShadowMask();\n#include <aomap_fragment>\nvec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+totalEmissiveRadiance;\n#include <envmap_fragment>\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <color_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <fog_vertex>\nvViewPosition=-mvPosition.xyz;}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;uniform float opacity;uniform sampler2D matcap;varying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\nvec3 viewDir=normalize(vViewPosition);vec3 x=normalize(vec3(viewDir.z,0.0,-viewDir.x));vec3 y=cross(viewDir,x);vec2 uv=vec2(dot(x,normal),dot(y,normal))*0.495+0.5;\n#ifdef USE_MATCAP\nvec4 matcapColor=texture2D(matcap,uv);matcapColor=matcapTexelToLinear(matcapColor);\n#else\nvec4 matcapColor=vec4(1.0);\n#endif\nvec3 outgoingLight=diffuseColor.rgb*matcapColor.rgb;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined(FLAT_SHADED)||defined(USE_BUMPMAP)||defined(TANGENTSPACE_NORMALMAP)\nvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#if defined(FLAT_SHADED)||defined(USE_BUMPMAP)||defined(TANGENTSPACE_NORMALMAP)\nvViewPosition=-mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined(FLAT_SHADED)||defined(USE_BUMPMAP)||defined(TANGENTSPACE_NORMALMAP)\nvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\n#include <logdepthbuf_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\ngl_FragColor=vec4(packNormalToRGB(normal),opacity);}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <worldpos_vertex>\n#include <envmap_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;uniform vec3 emissive;uniform vec3 specular;uniform float shininess;uniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <specularmap_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_phong_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular+totalEmissiveRadiance;\n#include <envmap_fragment>\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\nvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <worldpos_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n#ifdef USE_TRANSMISSION\nvWorldPosition=worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n#define IOR\n#define SPECULAR\n#endif\nuniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;\n#ifdef IOR\nuniform float ior;\n#endif\n#ifdef SPECULAR\nuniform float specularIntensity;uniform vec3 specularColor;\n#ifdef USE_SPECULARINTENSITYMAP\nuniform sampler2D specularIntensityMap;\n#endif\n#ifdef USE_SPECULARCOLORMAP\nuniform sampler2D specularColorMap;\n#endif\n#endif\n#ifdef USE_CLEARCOAT\nuniform float clearcoat;uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\nuniform vec3 sheenColor;uniform float sheenRoughness;\n#ifdef USE_SHEENCOLORMAP\nuniform sampler2D sheenColorMap;\n#endif\n#ifdef USE_SHEENROUGHNESSMAP\nuniform sampler2D sheenRoughnessMap;\n#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <roughnessmap_fragment>\n#include <metalnessmap_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <clearcoat_normal_fragment_begin>\n#include <clearcoat_normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_physical_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 totalDiffuse=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse;vec3 totalSpecular=reflectedLight.directSpecular+reflectedLight.indirectSpecular;\n#include <transmission_fragment>\nvec3 outgoingLight=totalDiffuse+totalSpecular+totalEmissiveRadiance;\n#ifdef USE_CLEARCOAT\nfloat dotNVcc=saturate(dot(geometry.clearcoatNormal,geometry.viewDir));vec3 Fcc=F_Schlick(material.clearcoatF0,material.clearcoatF90,dotNVcc);outgoingLight=outgoingLight*(1.0-material.clearcoat*Fcc)+clearcoatSpecular*material.clearcoat;\n#endif\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\n#include <uv2_vertex>\n#include <color_vertex>\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <normal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <displacementmap_vertex>\n#include <project_vertex>\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <worldpos_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;uniform vec3 emissive;uniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(diffuse,opacity);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_toon_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+totalEmissiveRadiance;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",points_vert:"uniform float size;uniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <color_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <project_vertex>\ngl_PointSize=size;\n#ifdef USE_SIZEATTENUATION\nbool isPerspective=isPerspectiveMatrix(projectionMatrix);if(isPerspective)gl_PointSize*=(scale/-mvPosition.z);\n#endif\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <worldpos_vertex>\n#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;uniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec3 outgoingLight=vec3(0.0);vec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <map_particle_fragment>\n#include <color_fragment>\n#include <alphatest_fragment>\noutgoingLight=diffuseColor.rgb;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main(){\n#include <beginnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <defaultnormal_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\n#include <worldpos_vertex>\n#include <shadowmap_vertex>\n#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;uniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main(){gl_FragColor=vec4(color,opacity*(1.0-getShadowMask()));\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;uniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main(){\n#include <uv_vertex>\nvec4 mvPosition=modelViewMatrix*vec4(0.0,0.0,0.0,1.0);vec2 scale;scale.x=length(vec3(modelMatrix[0].x,modelMatrix[0].y,modelMatrix[0].z));scale.y=length(vec3(modelMatrix[1].x,modelMatrix[1].y,modelMatrix[1].z));\n#ifndef USE_SIZEATTENUATION\nbool isPerspective=isPerspectiveMatrix(projectionMatrix);if(isPerspective)scale*=-mvPosition.z;\n#endif\nvec2 alignedPosition=(position.xy-(center-vec2(0.5)))*scale;vec2 rotatedPosition;rotatedPosition.x=cos(rotation)*alignedPosition.x-sin(rotation)*alignedPosition.y;rotatedPosition.y=sin(rotation)*alignedPosition.x+cos(rotation)*alignedPosition.y;mvPosition.xy+=rotatedPosition;gl_Position=projectionMatrix*mvPosition;\n#include <logdepthbuf_vertex>\n#include <clipping_planes_vertex>\n#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;uniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main(){\n#include <clipping_planes_fragment>\nvec3 outgoingLight=vec3(0.0);vec4 diffuseColor=vec4(diffuse,opacity);\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\noutgoingLight=diffuseColor.rgb;\n#include <output_fragment>\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n}"}},1306:(e,n,i)=>{i.d(n,{Z:()=>a});const a="void main(){gl_FragColor=vec4(1.0,0.0,0.0,1.0);}"},5880:(e,n,i)=>{i.d(n,{Z:()=>a});const a="void main(){gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}"},5967:(e,n,i)=>{i.d(n,{V:()=>s});var a=i(5567),r=i(6682),t=i(1138),o=i(6881),l=i(3935),c=i(3662),d=i(1273);const s={basic:{uniforms:(0,r.Rh)([l.r.common,l.r.specularmap,l.r.envmap,l.r.aomap,l.r.lightmap,l.r.fog]),vertexShader:a.W.meshbasic_vert,fragmentShader:a.W.meshbasic_frag},lambert:{uniforms:(0,r.Rh)([l.r.common,l.r.specularmap,l.r.envmap,l.r.aomap,l.r.lightmap,l.r.emissivemap,l.r.fog,l.r.lights,{emissive:{value:new c.I(0)}}]),vertexShader:a.W.meshlambert_vert,fragmentShader:a.W.meshlambert_frag},phong:{uniforms:(0,r.Rh)([l.r.common,l.r.specularmap,l.r.envmap,l.r.aomap,l.r.lightmap,l.r.emissivemap,l.r.bumpmap,l.r.normalmap,l.r.displacementmap,l.r.fog,l.r.lights,{emissive:{value:new c.I(0)},specular:{value:new c.I(1118481)},shininess:{value:30}}]),vertexShader:a.W.meshphong_vert,fragmentShader:a.W.meshphong_frag},standard:{uniforms:(0,r.Rh)([l.r.common,l.r.envmap,l.r.aomap,l.r.lightmap,l.r.emissivemap,l.r.bumpmap,l.r.normalmap,l.r.displacementmap,l.r.roughnessmap,l.r.metalnessmap,l.r.fog,l.r.lights,{emissive:{value:new c.I(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:a.W.meshphysical_vert,fragmentShader:a.W.meshphysical_frag},toon:{uniforms:(0,r.Rh)([l.r.common,l.r.aomap,l.r.lightmap,l.r.emissivemap,l.r.bumpmap,l.r.normalmap,l.r.displacementmap,l.r.gradientmap,l.r.fog,l.r.lights,{emissive:{value:new c.I(0)}}]),vertexShader:a.W.meshtoon_vert,fragmentShader:a.W.meshtoon_frag},matcap:{uniforms:(0,r.Rh)([l.r.common,l.r.bumpmap,l.r.normalmap,l.r.displacementmap,l.r.fog,{matcap:{value:null}}]),vertexShader:a.W.meshmatcap_vert,fragmentShader:a.W.meshmatcap_frag},points:{uniforms:(0,r.Rh)([l.r.points,l.r.fog]),vertexShader:a.W.points_vert,fragmentShader:a.W.points_frag},dashed:{uniforms:(0,r.Rh)([l.r.common,l.r.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:a.W.linedashed_vert,fragmentShader:a.W.linedashed_frag},depth:{uniforms:(0,r.Rh)([l.r.common,l.r.displacementmap]),vertexShader:a.W.depth_vert,fragmentShader:a.W.depth_frag},normal:{uniforms:(0,r.Rh)([l.r.common,l.r.bumpmap,l.r.normalmap,l.r.displacementmap,{opacity:{value:1}}]),vertexShader:a.W.meshnormal_vert,fragmentShader:a.W.meshnormal_frag},sprite:{uniforms:(0,r.Rh)([l.r.sprite,l.r.fog]),vertexShader:a.W.sprite_vert,fragmentShader:a.W.sprite_frag},background:{uniforms:{uvTransform:{value:new d.V},t2D:{value:null}},vertexShader:a.W.background_vert,fragmentShader:a.W.background_frag},cube:{uniforms:(0,r.Rh)([l.r.envmap,{opacity:{value:1}}]),vertexShader:a.W.cube_vert,fragmentShader:a.W.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:a.W.equirect_vert,fragmentShader:a.W.equirect_frag},distanceRGBA:{uniforms:(0,r.Rh)([l.r.common,l.r.displacementmap,{referencePosition:{value:new o.P},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:a.W.distanceRGBA_vert,fragmentShader:a.W.distanceRGBA_frag},shadow:{uniforms:(0,r.Rh)([l.r.lights,l.r.fog,{color:{value:new c.I(0)},opacity:{value:1}}]),vertexShader:a.W.shadow_vert,fragmentShader:a.W.shadow_frag}};s.physical={uniforms:(0,r.Rh)([s.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new t.F(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new c.I(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new t.F},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new c.I(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new c.I(1,1,1)},specularColorMap:{value:null}}]),vertexShader:a.W.meshphysical_vert,fragmentShader:a.W.meshphysical_frag}},8557:(e,n,i)=>{i.d(n,{u:()=>a,D:()=>r});const a="void main(){gl_Position=vec4(position,1.0);}",r="uniform sampler2D shadow_pass;uniform vec2 resolution;uniform float radius;\n#include <packing>\nvoid main(){const float samples=float(VSM_SAMPLES);float mean=0.0;float squared_mean=0.0;float uvStride=samples<=1.0?0.0:2.0/(samples-1.0);float uvStart=samples<=1.0?0.0:-1.0;for(float i=0.0;i<samples;i++){float uvOffset=uvStart+i*uvStride;\n#ifdef HORIZONTAL_PASS\nvec2 distribution=unpackRGBATo2Half(texture2D(shadow_pass,(gl_FragCoord.xy+vec2(uvOffset,0.0)*radius)/resolution));mean+=distribution.x;squared_mean+=distribution.y*distribution.y+distribution.x*distribution.x;\n#else\nfloat depth=unpackRGBAToDepth(texture2D(shadow_pass,(gl_FragCoord.xy+vec2(0.0,uvOffset)*radius)/resolution));mean+=depth;squared_mean+=depth*depth;\n#endif\n}mean=mean/samples;squared_mean=squared_mean/samples;float std_dev=sqrt(squared_mean-mean*mean);gl_FragColor=pack2HalfToRGBA(vec2(mean,std_dev));}"},3935:(e,n,i)=>{i.d(n,{r:()=>o});var a=i(3662),r=i(1138),t=i(1273);const o={common:{diffuse:{value:new a.I(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new t.V},uv2Transform:{value:new t.V},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new r.F(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new a.I(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new a.I(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new t.V}},sprite:{diffuse:{value:new a.I(16777215)},opacity:{value:1},center:{value:new r.F(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new t.V}}}},6682:(e,n,i)=>{function a(e){const n={};for(const i in e){n[i]={};for(const a in e[i]){const r=e[i][a];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?n[i][a]=r.clone():Array.isArray(r)?n[i][a]=r.slice():n[i][a]=r}}return n}function r(e){const n={};for(let i=0;i<e.length;i++){const r=a(e[i]);for(const e in r)n[e]=r[e]}return n}i.d(n,{dw:()=>a,Rh:()=>r,rD:()=>t});const t={clone:a,merge:r}}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[483],{8575:(t,s,h)=>{var e=h(2511),a=h(2502);function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}s.parse=O,s.resolve=function(t,s){return O(t,!1,!0).resolve(s)},s.resolveObject=function(t,s){return t?O(t,!1,!0).resolveObject(s):s},s.format=function(t){a.isString(t)&&(t=O(t));return t instanceof r?t.format():r.prototype.format.call(t)},s.Url=r;var o=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),p=["'"].concat(l),c=["%","/","?",";","#"].concat(p),u=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=h(6254);function O(t,s,h){if(t&&a.isObject(t)&&t instanceof r)return t;var e=new r;return e.parse(t,s,h),e}r.prototype.parse=function(t,s,h){if(!a.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),n=-1!==r&&r<t.indexOf("#")?"?":"#",l=t.split(n);l[0]=l[0].replace(/\\/g,"/");var O=t=l.join(n);if(O=O.trim(),!h&&1===t.split("#").length){var j=i.exec(O);if(j)return this.path=O,this.href=O,this.pathname=j[1],j[2]?(this.search=j[2],this.query=s?b.parse(this.search.substr(1)):this.search.substr(1)):s&&(this.search="",this.query={}),this}var d=o.exec(O);if(d){var q=(d=d[0]).toLowerCase();this.protocol=q,O=O.substr(d.length)}if(h||d||O.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===O.substr(0,2);!x||d&&g[d]||(O=O.substr(2),this.slashes=!0)}if(!g[d]&&(x||d&&!y[d])){for(var A,k,w=-1,C=0;C<u.length;C++){-1!==(I=O.indexOf(u[C]))&&(-1===w||I<w)&&(w=I)}-1!==(k=-1===w?O.lastIndexOf("@"):O.lastIndexOf("@",w))&&(A=O.slice(0,k),O=O.slice(k+1),this.auth=decodeURIComponent(A)),w=-1;for(C=0;C<c.length;C++){var I;-1!==(I=O.indexOf(c[C]))&&(-1===w||I<w)&&(w=I)}-1===w&&(w=O.length),this.host=O.slice(0,w),O=O.slice(w),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var U=this.hostname.split(/\./),S=(C=0,U.length);C<S;C++){var R=U[C];if(R&&!R.match(f)){for(var $="",_=0,z=R.length;_<z;_++)R.charCodeAt(_)>127?$+="x":$+=R[_];if(!$.match(f)){var H=U.slice(0,C),L=U.slice(C+1),Z=R.match(m);Z&&(H.push(Z[1]),L.unshift(Z[2])),L.length&&(O="/"+L.join(".")+O),this.hostname=H.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=e.toASCII(this.hostname));var E=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+E,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==O[0]&&(O="/"+O))}if(!v[q])for(C=0,S=p.length;C<S;C++){var T=p[C];if(-1!==O.indexOf(T)){var B=encodeURIComponent(T);B===T&&(B=escape(T)),O=O.split(T).join(B)}}var D=O.indexOf("#");-1!==D&&(this.hash=O.substr(D),O=O.slice(0,D));var F=O.indexOf("?");if(-1!==F?(this.search=O.substr(F),this.query=O.substr(F+1),s&&(this.query=b.parse(this.query)),O=O.slice(0,F)):s&&(this.search="",this.query={}),O&&(this.pathname=O),y[q]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){E=this.pathname||"";var G=this.search||"";this.path=E+G}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var s=this.protocol||"",h=this.pathname||"",e=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&a.isObject(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var n=this.search||o&&"?"+o||"";return s&&":"!==s.substr(-1)&&(s+=":"),this.slashes||(!s||y[s])&&!1!==r?(r="//"+(r||""),h&&"/"!==h.charAt(0)&&(h="/"+h)):r||(r=""),e&&"#"!==e.charAt(0)&&(e="#"+e),n&&"?"!==n.charAt(0)&&(n="?"+n),s+r+(h=h.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(n=n.replace("#","%23"))+e},r.prototype.resolve=function(t){return this.resolveObject(O(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(a.isString(t)){var s=new r;s.parse(t,!1,!0),t=s}for(var h=new r,e=Object.keys(this),o=0;o<e.length;o++){var n=e[o];h[n]=this[n]}if(h.hash=t.hash,""===t.href)return h.href=h.format(),h;if(t.slashes&&!t.protocol){for(var i=Object.keys(t),l=0;l<i.length;l++){var p=i[l];"protocol"!==p&&(h[p]=t[p])}return y[h.protocol]&&h.hostname&&!h.pathname&&(h.path=h.pathname="/"),h.href=h.format(),h}if(t.protocol&&t.protocol!==h.protocol){if(!y[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var f=c[u];h[f]=t[f]}return h.href=h.format(),h}if(h.protocol=t.protocol,t.host||g[t.protocol])h.pathname=t.pathname;else{for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),h.pathname=m.join("/")}if(h.search=t.search,h.query=t.query,h.host=t.host||"",h.auth=t.auth,h.hostname=t.hostname||t.host,h.port=t.port,h.pathname||h.search){var v=h.pathname||"",b=h.search||"";h.path=v+b}return h.slashes=h.slashes||t.slashes,h.href=h.format(),h}var O=h.pathname&&"/"===h.pathname.charAt(0),j=t.host||t.pathname&&"/"===t.pathname.charAt(0),d=j||O||h.host&&t.pathname,q=d,x=h.pathname&&h.pathname.split("/")||[],A=(m=t.pathname&&t.pathname.split("/")||[],h.protocol&&!y[h.protocol]);if(A&&(h.hostname="",h.port=null,h.host&&(""===x[0]?x[0]=h.host:x.unshift(h.host)),h.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===m[0]?m[0]=t.host:m.unshift(t.host)),t.host=null),d=d&&(""===m[0]||""===x[0])),j)h.host=t.host||""===t.host?t.host:h.host,h.hostname=t.hostname||""===t.hostname?t.hostname:h.hostname,h.search=t.search,h.query=t.query,x=m;else if(m.length)x||(x=[]),x.pop(),x=x.concat(m),h.search=t.search,h.query=t.query;else if(!a.isNullOrUndefined(t.search)){if(A)h.hostname=h.host=x.shift(),(N=!!(h.host&&h.host.indexOf("@")>0)&&h.host.split("@"))&&(h.auth=N.shift(),h.host=h.hostname=N.shift());return h.search=t.search,h.query=t.query,a.isNull(h.pathname)&&a.isNull(h.search)||(h.path=(h.pathname?h.pathname:"")+(h.search?h.search:"")),h.href=h.format(),h}if(!x.length)return h.pathname=null,h.search?h.path="/"+h.search:h.path=null,h.href=h.format(),h;for(var k=x.slice(-1)[0],w=(h.host||t.host||x.length>1)&&("."===k||".."===k)||""===k,C=0,I=x.length;I>=0;I--)"."===(k=x[I])?x.splice(I,1):".."===k?(x.splice(I,1),C++):C&&(x.splice(I,1),C--);if(!d&&!q)for(;C--;C)x.unshift("..");!d||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),w&&"/"!==x.join("/").substr(-1)&&x.push("");var N,U=""===x[0]||x[0]&&"/"===x[0].charAt(0);A&&(h.hostname=h.host=U?"":x.length?x.shift():"",(N=!!(h.host&&h.host.indexOf("@")>0)&&h.host.split("@"))&&(h.auth=N.shift(),h.host=h.hostname=N.shift()));return(d=d||h.host&&x.length)&&!U&&x.unshift(""),x.length?h.pathname=x.join("/"):(h.pathname=null,h.path=null),a.isNull(h.pathname)&&a.isNull(h.search)||(h.path=(h.pathname?h.pathname:"")+(h.search?h.search:"")),h.auth=t.auth||h.auth,h.slashes=h.slashes||t.slashes,h.href=h.format(),h},r.prototype.parseHost=function(){var t=this.host,s=n.exec(t);s&&(":"!==(s=s[0])&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)}},2502:t=>{t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[551],{2304:(e,t,a)=>{function r(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,a,r){switch(t.calls++,a){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a)}}}}a.d(t,{I:()=>r})},2504:(e,t,a)=>{a.d(t,{J:()=>n});var r=a(1661);function n(e){function t(t,a){t.opacity.value=a.opacity,a.color&&t.diffuse.value.copy(a.color),a.emissive&&t.emissive.value.copy(a.emissive).multiplyScalar(a.emissiveIntensity),a.map&&(t.map.value=a.map),a.alphaMap&&(t.alphaMap.value=a.alphaMap),a.specularMap&&(t.specularMap.value=a.specularMap),a.alphaTest>0&&(t.alphaTest.value=a.alphaTest);const r=e.get(a).envMap;let n,i;r&&(t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,t.reflectivity.value=a.reflectivity,t.ior.value=a.ior,t.refractionRatio.value=a.refractionRatio),a.lightMap&&(t.lightMap.value=a.lightMap,t.lightMapIntensity.value=a.lightMapIntensity),a.aoMap&&(t.aoMap.value=a.aoMap,t.aoMapIntensity.value=a.aoMapIntensity),a.map?n=a.map:a.specularMap?n=a.specularMap:a.displacementMap?n=a.displacementMap:a.normalMap?n=a.normalMap:a.bumpMap?n=a.bumpMap:a.roughnessMap?n=a.roughnessMap:a.metalnessMap?n=a.metalnessMap:a.alphaMap?n=a.alphaMap:a.emissiveMap?n=a.emissiveMap:a.clearcoatMap?n=a.clearcoatMap:a.clearcoatNormalMap?n=a.clearcoatNormalMap:a.clearcoatRoughnessMap?n=a.clearcoatRoughnessMap:a.specularIntensityMap?n=a.specularIntensityMap:a.specularColorMap?n=a.specularColorMap:a.transmissionMap?n=a.transmissionMap:a.thicknessMap?n=a.thicknessMap:a.sheenColorMap?n=a.sheenColorMap:a.sheenRoughnessMap&&(n=a.sheenRoughnessMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix)),a.aoMap?i=a.aoMap:a.lightMap&&(i=a.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function a(t,a){t.roughness.value=a.roughness,t.metalness.value=a.metalness,a.roughnessMap&&(t.roughnessMap.value=a.roughnessMap),a.metalnessMap&&(t.metalnessMap.value=a.metalnessMap),a.emissiveMap&&(t.emissiveMap.value=a.emissiveMap),a.bumpMap&&(t.bumpMap.value=a.bumpMap,t.bumpScale.value=a.bumpScale,a.side===r._Li&&(t.bumpScale.value*=-1)),a.normalMap&&(t.normalMap.value=a.normalMap,t.normalScale.value.copy(a.normalScale),a.side===r._Li&&t.normalScale.value.negate()),a.displacementMap&&(t.displacementMap.value=a.displacementMap,t.displacementScale.value=a.displacementScale,t.displacementBias.value=a.displacementBias);e.get(a).envMap&&(t.envMapIntensity.value=a.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,n,i,o,s){n.isMeshBasicMaterial?t(e,n):n.isMeshLambertMaterial?(t(e,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,n)):n.isMeshToonMaterial?(t(e,n),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===r._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===r._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshPhongMaterial?(t(e,n),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===r._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===r._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshStandardMaterial?(t(e,n),n.isMeshPhysicalMaterial?function(e,t,n){a(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===r._Li&&e.clearcoatNormalScale.value.negate()));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,n,s):a(e,n)):n.isMeshMatcapMaterial?(t(e,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===r._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===r._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDepthMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isMeshDistanceMaterial?(t(e,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,n)):n.isMeshNormalMaterial?(t(e,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===r._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===r._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,n)):n.isPointsMaterial?function(e,t,a,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*a,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,n,i,o):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let a;t.map?a=t.map:t.alphaMap&&(a=t.alphaMap);void 0!==a&&(!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uvTransform.value.copy(a.matrix))}(e,n):n.isShadowMaterial?(e.color.value.copy(n.color),e.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}},6738:(e,t,a)=>{a.d(t,{i:()=>c});var r=a(1661),n=a(5491),i=a(6881),o=a(1138);function s(e,t){return e[0]-t[0]}function l(e,t){return Math.abs(t[1])-Math.abs(e[1])}function u(e,t){let a=1;const r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?a=127:r instanceof Int16Array?a=32767:r instanceof Int32Array?a=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(a)}function c(e,t,a){const c={},p=new Float32Array(8),d=new WeakMap,f=new i.P,h=[];for(let e=0;e<8;e++)h[e]=[e,0];return{update:function(i,m,g,M){const b=i.morphTargetInfluences;if(!0===t.isWebGL2){const i=m.morphAttributes.position.length;let s=d.get(m);if(void 0===s||s.count!==i){void 0!==s&&s.texture.dispose();const e=void 0!==m.morphAttributes.normal,a=m.morphAttributes.position,l=m.morphAttributes.normal||[],c=!0===e?2:1;let p=m.attributes.position.count*c,h=1;p>t.maxTextureSize&&(h=Math.ceil(p/t.maxTextureSize),p=t.maxTextureSize);const g=new Float32Array(p*h*4*i),M=new n.C(g,p,h,i);M.format=r.wk1,M.type=r.VzW;const b=4*c;for(let t=0;t<i;t++){const r=a[t],n=l[t],i=p*h*4*t;for(let t=0;t<r.count;t++){f.fromBufferAttribute(r,t),!0===r.normalized&&u(f,r);const a=t*b;g[i+a+0]=f.x,g[i+a+1]=f.y,g[i+a+2]=f.z,g[i+a+3]=0,!0===e&&(f.fromBufferAttribute(n,t),!0===n.normalized&&u(f,n),g[i+a+4]=f.x,g[i+a+5]=f.y,g[i+a+6]=f.z,g[i+a+7]=0)}}s={count:i,texture:M,size:new o.F(p,h)},d.set(m,s)}let l=0;for(let e=0;e<b.length;e++)l+=b[e];const c=m.morphTargetsRelative?1:1-l;M.getUniforms().setValue(e,"morphTargetBaseInfluence",c),M.getUniforms().setValue(e,"morphTargetInfluences",b),M.getUniforms().setValue(e,"morphTargetsTexture",s.texture,a),M.getUniforms().setValue(e,"morphTargetsTextureSize",s.size)}else{const t=void 0===b?0:b.length;let a=c[m.id];if(void 0===a||a.length!==t){a=[];for(let e=0;e<t;e++)a[e]=[e,0];c[m.id]=a}for(let e=0;e<t;e++){const t=a[e];t[0]=e,t[1]=b[e]}a.sort(l);for(let e=0;e<8;e++)e<t&&a[e][1]?(h[e][0]=a[e][0],h[e][1]=a[e][1]):(h[e][0]=Number.MAX_SAFE_INTEGER,h[e][1]=0);h.sort(s);const r=m.morphAttributes.position,n=m.morphAttributes.normal;let i=0;for(let e=0;e<8;e++){const t=h[e],a=t[0],o=t[1];a!==Number.MAX_SAFE_INTEGER&&o?(r&&m.getAttribute("morphTarget"+e)!==r[a]&&m.setAttribute("morphTarget"+e,r[a]),n&&m.getAttribute("morphNormal"+e)!==n[a]&&m.setAttribute("morphNormal"+e,n[a]),p[e]=o,i+=o):(r&&!0===m.hasAttribute("morphTarget"+e)&&m.deleteAttribute("morphTarget"+e),n&&!0===m.hasAttribute("morphNormal"+e)&&m.deleteAttribute("morphNormal"+e),p[e]=0)}const o=m.morphTargetsRelative?1:1-i;M.getUniforms().setValue(e,"morphTargetBaseInfluence",o),M.getUniforms().setValue(e,"morphTargetInfluences",p)}}}}},4469:(e,t,a)=>{function r(e,t,a,r){let n=new WeakMap;function i(e){const t=e.target;t.removeEventListener("dispose",i),a.remove(t.instanceMatrix),null!==t.instanceColor&&a.remove(t.instanceColor)}return{update:function(e){const o=r.render.frame,s=e.geometry,l=t.get(e,s);return n.get(l)!==o&&(t.update(l),n.set(l,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",i)&&e.addEventListener("dispose",i),a.update(e.instanceMatrix,34962),null!==e.instanceColor&&a.update(e.instanceColor,34962)),l},dispose:function(){n=new WeakMap}}}a.d(t,{E:()=>r})},5502:(e,t,a)=>{a.d(t,{Z:()=>R});var r=a(1661),n=a(1895);function i(e,t,a){const r=e.createShader(t);return e.shaderSource(r,a),e.compileShader(r),r}var o=a(5567);let s=0;function l(e){switch(e){case r.rnI:return["Linear","( value )"];case r.knz:return["sRGB","( value )"];case r.KC9:return["RGBE","( value )"];case r.LgE:return["RGBM","( value, 7.0 )"];case r.Inb:return["RGBM","( value, 16.0 )"];case r.gMp:return["RGBD","( value, 256.0 )"];case r.pMV:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function u(e,t,a){const r=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();return r&&""===n?"":a.toUpperCase()+"\n\n"+n+"\n\n"+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function c(e,t){const a=l(t);return"vec4 "+e+"( vec4 value ) { return "+a[0]+"ToLinear"+a[1]+"; }"}function p(e,t){const a=l(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function d(e,t){let a;switch(t){case r.EoG:a="Linear";break;case r.CdI:a="Reinhard";break;case r.YGz:a="OptimizedCineon";break;case r.LY2:a="ACESFilmic";break;case r.dZ3:a="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),a="Linear"}return"vec3 "+e+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function f(e){return""!==e}function h(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function m(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const g=/^[ \t]*#include +<([\w\d./]+)>/gm;function M(e){return e.replace(g,b)}function b(e,t){const a=o.W[t];if(void 0===a)throw new Error("Can not resolve #include <"+t+">");return M(a)}const S=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,T=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function x(e){return e.replace(T,_).replace(S,v)}function v(e,t,a,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),_(e,t,a,r)}function _(e,t,a,r){let n="";for(let e=parseInt(t);e<parseInt(a);e++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return n}function E(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function w(e,t,a,l){const g=e.getContext(),b=a.defines;let S=a.vertexShader,T=a.fragmentShader;const v=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===r._iA?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===r.ntZ?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===r.dwk&&(t="SHADOWMAP_TYPE_VSM"),t}(a),_=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case r.fY$:case r.vxC:t="ENVMAP_TYPE_CUBE";break;case r.g8_:case r.SVc:t="ENVMAP_TYPE_CUBE_UV"}return t}(a),w=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case r.vxC:case r.SVc:t="ENVMAP_MODE_REFRACTION"}return t}(a),L=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case r.Ns1:t="ENVMAP_BLENDING_MULTIPLY";break;case r.qhX:t="ENVMAP_BLENDING_MIX";break;case r.NDo:t="ENVMAP_BLENDING_ADD"}return t}(a),A=e.gammaFactor>0?e.gammaFactor:1,y=a.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(f).join("\n")}(a),R=function(e){const t=[];for(const a in e){const r=e[a];!1!==r&&t.push("#define "+a+" "+r)}return t.join("\n")}(b),P=g.createProgram();let C,D,F=a.glslVersion?"#version "+a.glslVersion+"\n":"";a.isRawShaderMaterial?(C=[R].filter(f).join("\n"),C.length>0&&(C+="\n"),D=[y,R].filter(f).join("\n"),D.length>0&&(D+="\n")):(C=[E(a),"#define SHADER_NAME "+a.shaderName,R,a.instancing?"#define USE_INSTANCING":"",a.instancingColor?"#define USE_INSTANCING_COLOR":"",a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+A,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+w:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.morphTargets&&a.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",a.morphTargets&&a.isWebGL2?"#define MORPHTARGETS_COUNT "+a.morphTargetsCount:"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+v:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(f).join("\n"),D=[y,E(a),"#define SHADER_NAME "+a.shaderName,R,"#define GAMMA_FACTOR "+A,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+_:"",a.envMap?"#define "+w:"",a.envMap?"#define "+L:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoat?"#define USE_CLEARCOAT":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.alphaTest?"#define USE_ALPHATEST":"",a.sheen?"#define USE_SHEEN":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors||a.instancingColor?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+v:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(a.extensionShaderTextureLOD||a.envMap)&&a.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",a.toneMapping!==r.uL9?"#define TONE_MAPPING":"",a.toneMapping!==r.uL9?o.W.tonemapping_pars_fragment:"",a.toneMapping!==r.uL9?d("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.format===r.UCm?"#define OPAQUE":"",o.W.encodings_pars_fragment,a.map?c("mapTexelToLinear",a.mapEncoding):"",a.matcap?c("matcapTexelToLinear",a.matcapEncoding):"",a.envMap?c("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMap?c("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.specularColorMap?c("specularColorMapTexelToLinear",a.specularColorMapEncoding):"",a.sheenColorMap?c("sheenColorMapTexelToLinear",a.sheenColorMapEncoding):"",a.lightMap?c("lightMapTexelToLinear",a.lightMapEncoding):"",p("linearToOutputTexel",a.outputEncoding),a.depthPacking?"#define DEPTH_PACKING "+a.depthPacking:"","\n"].filter(f).join("\n")),S=M(S),S=h(S,a),S=m(S,a),T=M(T),T=h(T,a),T=m(T,a),S=x(S),T=x(T),a.isWebGL2&&!0!==a.isRawShaderMaterial&&(F="#version 300 es\n",C=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+C,D=["#define varying in",a.glslVersion===r.LSk?"":"out highp vec4 pc_fragColor;",a.glslVersion===r.LSk?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+D);const I=F+D+T,U=i(g,35633,F+C+S),N=i(g,35632,I);if(g.attachShader(P,U),g.attachShader(P,N),void 0!==a.index0AttributeName?g.bindAttribLocation(P,0,a.index0AttributeName):!0===a.morphTargets&&g.bindAttribLocation(P,0,"position"),g.linkProgram(P),e.debug.checkShaderErrors){const e=g.getProgramInfoLog(P).trim(),t=g.getShaderInfoLog(U).trim(),a=g.getShaderInfoLog(N).trim();let r=!0,n=!0;if(!1===g.getProgramParameter(P,35714)){r=!1;const t=u(g,U,"vertex"),a=u(g,N,"fragment");console.error("THREE.WebGLProgram: Shader Error "+g.getError()+" - VALIDATE_STATUS "+g.getProgramParameter(P,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+a)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==a||(n=!1);n&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:C},fragmentShader:{log:a,prefix:D}})}let O,G;return g.deleteShader(U),g.deleteShader(N),this.getUniforms=function(){return void 0===O&&(O=new n.y(g,P)),O},this.getAttributes=function(){return void 0===G&&(G=function(e,t){const a={},r=e.getProgramParameter(t,35721);for(let n=0;n<r;n++){const r=e.getActiveAttrib(t,n),i=r.name;let o=1;35674===r.type&&(o=2),35675===r.type&&(o=3),35676===r.type&&(o=4),a[i]={type:r.type,location:e.getAttribLocation(t,i),locationSize:o}}return a}(g,P)),G},this.destroy=function(){l.releaseStatesOfProgram(this),g.deleteProgram(P),this.program=void 0},this.name=a.shaderName,this.id=s++,this.cacheKey=t,this.usedTimes=1,this.program=P,this.vertexShader=U,this.fragmentShader=N,this}var L=a(5967),A=a(6682),y=a(392);function R(e,t,a,n,i,o,s){const l=[],u=i.isWebGL2,c=i.logarithmicDepthBuffer,p=i.floatVertexTextures,d=i.maxVertexUniforms,f=i.vertexTextures;let h=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},g=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function M(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=r.rnI,t}return{getParameters:function(o,l,g,b,S){const T=b.fog,x=o.isMeshStandardMaterial?b.environment:null,v=(o.isMeshStandardMaterial?a:t).get(o.envMap||x),_=m[o.type],E=S.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(p)return 1024;{const e=d,a=Math.floor((e-20)/4),r=Math.min(a,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(S):0;let w,A;if(null!==o.precision&&(h=i.getMaxPrecision(o.precision),h!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",h,"instead.")),_){const e=L.V[_];w=e.vertexShader,A=e.fragmentShader}else w=o.vertexShader,A=o.fragmentShader;const y=e.getRenderTarget(),R=o.alphaTest>0,P=o.clearcoat>0;return{isWebGL2:u,shaderID:_,shaderName:o.type,vertexShader:w,fragmentShader:A,defines:o.defines,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:h,instancing:!0===S.isInstancedMesh,instancingColor:!0===S.isInstancedMesh&&null!==S.instanceColor,supportsVertexTextures:f,outputEncoding:null!==y?M(y.texture):e.outputEncoding,map:!!o.map,mapEncoding:M(o.map),matcap:!!o.matcap,matcapEncoding:M(o.matcap),envMap:!!v,envMapMode:v&&v.mapping,envMapEncoding:M(v),envMapCubeUV:!!v&&(v.mapping===r.g8_||v.mapping===r.SVc),lightMap:!!o.lightMap,lightMapEncoding:M(o.lightMap),aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:M(o.emissiveMap),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===r.PA7,tangentSpaceNormalMap:o.normalMapType===r.IOt,clearcoat:P,clearcoatMap:P&&!!o.clearcoatMap,clearcoatRoughnessMap:P&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:P&&!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,specularColorMapEncoding:M(o.specularColorMap),alphaMap:!!o.alphaMap,alphaTest:R,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenColorMapEncoding:M(o.sheenColorMap),sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!S.geometry&&!!S.geometry.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!S.geometry&&!!S.geometry.attributes.color&&4===S.geometry.attributes.color.itemSize,vertexUvs:!!o.map||!!o.bumpMap||!!o.normalMap||!!o.specularMap||!!o.alphaMap||!!o.emissiveMap||!!o.roughnessMap||!!o.metalnessMap||!!o.clearcoatMap||!!o.clearcoatRoughnessMap||!!o.clearcoatNormalMap||!!o.displacementMap||!!o.transmissionMap||!!o.thicknessMap||!!o.specularIntensityMap||!!o.specularColorMap||!!o.sheenColorMap||o.sheenRoughnessMap,uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap||!o.displacementMap),fog:!!T,useFog:o.fog,fogExp2:T&&T.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:c,skinning:!0===S.isSkinnedMesh&&E>0,maxBones:E,useVertexTexture:p,morphTargets:!!S.geometry&&!!S.geometry.morphAttributes.position,morphNormals:!!S.geometry&&!!S.geometry.morphAttributes.normal,morphTargetsCount:S.geometry&&S.geometry.morphAttributes.position?S.geometry.morphAttributes.position.length:0,numDirLights:l.directional.length,numPointLights:l.point.length,numSpotLights:l.spot.length,numRectAreaLights:l.rectArea.length,numHemiLights:l.hemi.length,numDirLightShadows:l.directionalShadowMap.length,numPointLightShadows:l.pointShadowMap.length,numSpotLightShadows:l.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,format:o.format,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&g.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:r.uL9,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===r.ehD,flipSided:o.side===r._Li,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||n.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){const a=[];if(t.shaderID?a.push(t.shaderID):(a.push((0,y.Wu)(t.fragmentShader)),a.push((0,y.Wu)(t.vertexShader))),void 0!==t.defines)for(const e in t.defines)a.push(e),a.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<g.length;e++)a.push(t[g[e]]);a.push(e.outputEncoding),a.push(e.gammaFactor)}return a.push(t.customProgramCacheKey),a.join()},getUniforms:function(e){const t=m[e.type];let a;if(t){const e=L.V[t];a=A.rD.clone(e.uniforms)}else a=e.uniforms;return a},acquireProgram:function(t,a){let r;for(let e=0,t=l.length;e<t;e++){const t=l[e];if(t.cacheKey===a){r=t,++r.usedTimes;break}}return void 0===r&&(r=new w(e,a,t,o),l.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=l.indexOf(e);l[t]=l[l.length-1],l.pop(),e.destroy()}},programs:l}}},7905:(e,t,a)=>{function r(){let e=new WeakMap;return{get:function(t){let a=e.get(t);return void 0===a&&(a={},e.set(t,a)),a},remove:function(t){e.delete(t)},update:function(t,a,r){e.get(t)[a]=r},dispose:function(){e=new WeakMap}}}a.d(t,{Z:()=>r})},6423:(e,t,a)=>{function r(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function n(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function i(e){const t=[];let a=0;const i=[],o=[],s=[],l={id:-1};function u(r,n,i,o,s,u){let c=t[a];const p=e.get(i);return void 0===c?(c={id:r.id,object:r,geometry:n,material:i,program:p.program||l,groupOrder:o,renderOrder:r.renderOrder,z:s,group:u},t[a]=c):(c.id=r.id,c.object=r,c.geometry=n,c.material=i,c.program=p.program||l,c.groupOrder=o,c.renderOrder=r.renderOrder,c.z=s,c.group=u),a++,c}return{opaque:i,transmissive:o,transparent:s,init:function(){a=0,i.length=0,o.length=0,s.length=0},push:function(e,t,a,r,n,l){const c=u(e,t,a,r,n,l);a.transmission>0?o.push(c):!0===a.transparent?s.push(c):i.push(c)},unshift:function(e,t,a,r,n,l){const c=u(e,t,a,r,n,l);a.transmission>0?o.unshift(c):!0===a.transparent?s.unshift(c):i.unshift(c)},finish:function(){for(let e=a,r=t.length;e<r;e++){const a=t[e];if(null===a.id)break;a.id=null,a.object=null,a.geometry=null,a.material=null,a.program=null,a.group=null}},sort:function(e,t){i.length>1&&i.sort(e||r),o.length>1&&o.sort(t||n),s.length>1&&s.sort(t||n)}}}function o(e){let t=new WeakMap;return{get:function(a,r){let n;return!1===t.has(a)?(n=new i(e),t.set(a,[n])):r>=t.get(a).length?(n=new i(e),t.get(a).push(n)):n=t.get(a)[r],n},dispose:function(){t=new WeakMap}}}a.d(t,{M:()=>o})},9801:(e,t,a)=>{a.d(t,{Q:()=>f});var r=a(3662),n=a(9203),i=a(1138),o=a(6881),s=a(3935);function l(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let a;switch(t.type){case"DirectionalLight":a={direction:new o.P,color:new r.I};break;case"SpotLight":a={position:new o.P,direction:new o.P,color:new r.I,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":a={position:new o.P,color:new r.I,distance:0,decay:0};break;case"HemisphereLight":a={direction:new o.P,skyColor:new r.I,groundColor:new r.I};break;case"RectAreaLight":a={color:new r.I,position:new o.P,halfWidth:new o.P,halfHeight:new o.P}}return e[t.id]=a,a}}}let u=0;function c(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function p(e,t){const a=new l,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let a;switch(t.type){case"DirectionalLight":case"SpotLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new i.F};break;case"PointLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new i.F,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=a,a}}}(),p={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)p.probe.push(new o.P);const d=new o.P,f=new n.y,h=new n.y;return{setup:function(n,i){let o=0,l=0,d=0;for(let e=0;e<9;e++)p.probe[e].set(0,0,0);let f=0,h=0,m=0,g=0,M=0,b=0,S=0,T=0;n.sort(c);const x=!0!==i?Math.PI:1;for(let e=0,t=n.length;e<t;e++){const t=n[e],i=t.color,s=t.intensity,u=t.distance,c=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=i.r*s*x,l+=i.g*s*x,d+=i.b*s*x;else if(t.isLightProbe)for(let e=0;e<9;e++)p.probe[e].addScaledVector(t.sh.coefficients[e],s);else if(t.isDirectionalLight){const e=a.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){const e=t.shadow,a=r.get(t);a.shadowBias=e.bias,a.shadowNormalBias=e.normalBias,a.shadowRadius=e.radius,a.shadowMapSize=e.mapSize,p.directionalShadow[f]=a,p.directionalShadowMap[f]=c,p.directionalShadowMatrix[f]=t.shadow.matrix,b++}p.directional[f]=e,f++}else if(t.isSpotLight){const e=a.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(i).multiplyScalar(s*x),e.distance=u,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,a=r.get(t);a.shadowBias=e.bias,a.shadowNormalBias=e.normalBias,a.shadowRadius=e.radius,a.shadowMapSize=e.mapSize,p.spotShadow[m]=a,p.spotShadowMap[m]=c,p.spotShadowMatrix[m]=t.shadow.matrix,T++}p.spot[m]=e,m++}else if(t.isRectAreaLight){const e=a.get(t);e.color.copy(i).multiplyScalar(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),p.rectArea[g]=e,g++}else if(t.isPointLight){const e=a.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,a=r.get(t);a.shadowBias=e.bias,a.shadowNormalBias=e.normalBias,a.shadowRadius=e.radius,a.shadowMapSize=e.mapSize,a.shadowCameraNear=e.camera.near,a.shadowCameraFar=e.camera.far,p.pointShadow[h]=a,p.pointShadowMap[h]=c,p.pointShadowMatrix[h]=t.shadow.matrix,S++}p.point[h]=e,h++}else if(t.isHemisphereLight){const e=a.get(t);e.skyColor.copy(t.color).multiplyScalar(s*x),e.groundColor.copy(t.groundColor).multiplyScalar(s*x),p.hemi[M]=e,M++}}g>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(p.rectAreaLTC1=s.r.LTC_FLOAT_1,p.rectAreaLTC2=s.r.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(p.rectAreaLTC1=s.r.LTC_HALF_1,p.rectAreaLTC2=s.r.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),p.ambient[0]=o,p.ambient[1]=l,p.ambient[2]=d;const v=p.hash;v.directionalLength===f&&v.pointLength===h&&v.spotLength===m&&v.rectAreaLength===g&&v.hemiLength===M&&v.numDirectionalShadows===b&&v.numPointShadows===S&&v.numSpotShadows===T||(p.directional.length=f,p.spot.length=m,p.rectArea.length=g,p.point.length=h,p.hemi.length=M,p.directionalShadow.length=b,p.directionalShadowMap.length=b,p.pointShadow.length=S,p.pointShadowMap.length=S,p.spotShadow.length=T,p.spotShadowMap.length=T,p.directionalShadowMatrix.length=b,p.pointShadowMatrix.length=S,p.spotShadowMatrix.length=T,v.directionalLength=f,v.pointLength=h,v.spotLength=m,v.rectAreaLength=g,v.hemiLength=M,v.numDirectionalShadows=b,v.numPointShadows=S,v.numSpotShadows=T,p.version=u++)},setupView:function(e,t){let a=0,r=0,n=0,i=0,o=0;const s=t.matrixWorldInverse;for(let t=0,l=e.length;t<l;t++){const l=e[t];if(l.isDirectionalLight){const e=p.directional[a];e.direction.setFromMatrixPosition(l.matrixWorld),d.setFromMatrixPosition(l.target.matrixWorld),e.direction.sub(d),e.direction.transformDirection(s),a++}else if(l.isSpotLight){const e=p.spot[n];e.position.setFromMatrixPosition(l.matrixWorld),e.position.applyMatrix4(s),e.direction.setFromMatrixPosition(l.matrixWorld),d.setFromMatrixPosition(l.target.matrixWorld),e.direction.sub(d),e.direction.transformDirection(s),n++}else if(l.isRectAreaLight){const e=p.rectArea[i];e.position.setFromMatrixPosition(l.matrixWorld),e.position.applyMatrix4(s),h.identity(),f.copy(l.matrixWorld),f.premultiply(s),h.extractRotation(f),e.halfWidth.set(.5*l.width,0,0),e.halfHeight.set(0,.5*l.height,0),e.halfWidth.applyMatrix4(h),e.halfHeight.applyMatrix4(h),i++}else if(l.isPointLight){const e=p.point[r];e.position.setFromMatrixPosition(l.matrixWorld),e.position.applyMatrix4(s),r++}else if(l.isHemisphereLight){const e=p.hemi[o];e.direction.setFromMatrixPosition(l.matrixWorld),e.direction.transformDirection(s),e.direction.normalize(),o++}}},state:p}}function d(e,t){const a=new p(e,t),r=[],n=[];return{init:function(){r.length=0,n.length=0},state:{lightsArray:r,shadowsArray:n,lights:a},setupLights:function(e){a.setup(r,e)},setupLightsView:function(e){a.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){n.push(e)}}}function f(e,t){let a=new WeakMap;return{get:function(r,n=0){let i;return!1===a.has(r)?(i=new d(e,t),a.set(r,[i])):n>=a.get(r).length?(i=new d(e,t),a.get(r).push(i)):i=a.get(r)[n],i},dispose:function(){a=new WeakMap}}}},5116:(e,t,a)=>{a.d(t,{c:()=>m});var r=a(1661),n=a(4302),i=a(2114),o=a(7683),s=a(1621),l=a(140),u=a(9046),c=a(6454),p=a(223),d=a(1138),f=a(4698),h=a(8557);function m(e,t,a){let m=new f.i;const g=new d.F,M=new d.F,b=new p.L,S=new i.l({depthPacking:r.mSO}),T=new o.L,x={},v=a.maxTextureSize,_={0:r._Li,1:r.Wl3,2:r.ehD},E=new s.j({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new d.F},radius:{value:4}},vertexShader:h.u,fragmentShader:h.D}),w=E.clone();w.defines.HORIZONTAL_PASS=1;const L=new u.u;L.setAttribute("position",new l.Tl(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new c.K(L,E),y=this;function R(a,r){const n=t.update(A);E.defines.VSM_SAMPLES!==a.blurSamples&&(E.defines.VSM_SAMPLES=a.blurSamples,w.defines.VSM_SAMPLES=a.blurSamples,E.needsUpdate=!0,w.needsUpdate=!0),E.uniforms.shadow_pass.value=a.map.texture,E.uniforms.resolution.value=a.mapSize,E.uniforms.radius.value=a.radius,e.setRenderTarget(a.mapPass),e.clear(),e.renderBufferDirect(r,null,n,E,A,null),w.uniforms.shadow_pass.value=a.mapPass.texture,w.uniforms.resolution.value=a.mapSize,w.uniforms.radius.value=a.radius,e.setRenderTarget(a.map),e.clear(),e.renderBufferDirect(r,null,n,w,A,null)}function P(t,a,n,i,o,s,l){let u=null;const c=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(u=void 0!==c?c:!0===i.isPointLight?T:S,e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){const e=u.uuid,t=n.uuid;let a=x[e];void 0===a&&(a={},x[e]=a);let r=a[t];void 0===r&&(r=u.clone(),a[t]=r),u=r}return u.visible=n.visible,u.wireframe=n.wireframe,l===r.dwk?u.side=null!==n.shadowSide?n.shadowSide:n.side:u.side=null!==n.shadowSide?n.shadowSide:_[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=o,u.farDistance=s),u}function C(a,n,i,o,s){if(!1===a.visible)return;if(a.layers.test(n.layers)&&(a.isMesh||a.isLine||a.isPoints)&&(a.castShadow||a.receiveShadow&&s===r.dwk)&&(!a.frustumCulled||m.intersectsObject(a))){a.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,a.matrixWorld);const r=t.update(a),n=a.material;if(Array.isArray(n)){const t=r.groups;for(let l=0,u=t.length;l<u;l++){const u=t[l],c=n[u.materialIndex];if(c&&c.visible){const t=P(a,0,c,o,i.near,i.far,s);e.renderBufferDirect(i,null,r,t,a,u)}}}else if(n.visible){const t=P(a,0,n,o,i.near,i.far,s);e.renderBufferDirect(i,null,r,t,a,null)}}const l=a.children;for(let e=0,t=l.length;e<t;e++)C(l[e],n,i,o,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=r._iA,this.render=function(t,a,i){if(!1===y.enabled)return;if(!1===y.autoUpdate&&!1===y.needsUpdate)return;if(0===t.length)return;const o=e.getRenderTarget(),s=e.getActiveCubeFace(),l=e.getActiveMipmapLevel(),u=e.state;u.setBlending(r.jFi),u.buffers.color.setClear(1,1,1,1),u.buffers.depth.setTest(!0),u.setScissorTest(!1);for(let o=0,s=t.length;o<s;o++){const s=t[o],l=s.shadow;if(void 0===l){console.warn("THREE.WebGLShadowMap:",s,"has no shadow.");continue}if(!1===l.autoUpdate&&!1===l.needsUpdate)continue;g.copy(l.mapSize);const c=l.getFrameExtents();if(g.multiply(c),M.copy(l.mapSize),(g.x>v||g.y>v)&&(g.x>v&&(M.x=Math.floor(v/c.x),g.x=M.x*c.x,l.mapSize.x=M.x),g.y>v&&(M.y=Math.floor(v/c.y),g.y=M.y*c.y,l.mapSize.y=M.y)),null===l.map&&!l.isPointLightShadow&&this.type===r.dwk){const e={minFilter:r.wem,magFilter:r.wem,format:r.wk1};l.map=new n.d(g.x,g.y,e),l.map.texture.name=s.name+".shadowMap",l.mapPass=new n.d(g.x,g.y,e),l.camera.updateProjectionMatrix()}if(null===l.map){const e={minFilter:r.TyD,magFilter:r.TyD,format:r.wk1};l.map=new n.d(g.x,g.y,e),l.map.texture.name=s.name+".shadowMap",l.camera.updateProjectionMatrix()}e.setRenderTarget(l.map),e.clear();const p=l.getViewportCount();for(let e=0;e<p;e++){const t=l.getViewport(e);b.set(M.x*t.x,M.y*t.y,M.x*t.z,M.y*t.w),u.viewport(b),l.updateMatrices(s,e),m=l.getFrustum(),C(a,i,l.camera,s,this.type)}l.isPointLightShadow||this.type!==r.dwk||R(l,i),l.needsUpdate=!1}y.needsUpdate=!1,e.setRenderTarget(o,s,l)}}},181:(e,t,a)=>{a.d(t,{m:()=>i});var r=a(1661),n=a(223);function i(e,t,a){const i=a.isWebGL2;const o=new function(){let t=!1;const a=new n.L;let r=null;const i=new n.L(0,0,0,0);return{setMask:function(a){r===a||t||(e.colorMask(a,a,a,a),r=a)},setLocked:function(e){t=e},setClear:function(t,r,n,o,s){!0===s&&(t*=o,r*=o,n*=o),a.set(t,r,n,o),!1===i.equals(a)&&(e.clearColor(t,r,n,o),i.copy(a))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){let t=!1,a=null,n=null,i=null;return{setTest:function(e){e?G(2929):W(2929)},setMask:function(r){a===r||t||(e.depthMask(r),a=r)},setFunc:function(t){if(n!==t){if(t)switch(t){case r.BVF:e.depthFunc(512);break;case r.Se2:e.depthFunc(519);break;case r.Zr5:e.depthFunc(513);break;case r.vCF:e.depthFunc(515);break;case r.eD:e.depthFunc(514);break;case r.ksN:e.depthFunc(518);break;case r.w$m:e.depthFunc(516);break;case r.M6v:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);n=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,a=null,n=null,i=null}}},l=new function(){let t=!1,a=null,r=null,n=null,i=null,o=null,s=null,l=null,u=null;return{setTest:function(e){t||(e?G(2960):W(2960))},setMask:function(r){a===r||t||(e.stencilMask(r),a=r)},setFunc:function(t,a,o){r===t&&n===a&&i===o||(e.stencilFunc(t,a,o),r=t,n=a,i=o)},setOp:function(t,a,r){o===t&&s===a&&l===r||(e.stencilOp(t,a,r),o=t,s=a,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,a=null,r=null,n=null,i=null,o=null,s=null,l=null,u=null}}};let u={},c={},p=null,d=!1,f=null,h=null,m=null,g=null,M=null,b=null,S=null,T=!1,x=null,v=null,_=null,E=null,w=null;const L=e.getParameter(35661);let A=!1,y=0;const R=e.getParameter(7938);-1!==R.indexOf("WebGL")?(y=parseFloat(/^WebGL (\d)/.exec(R)[1]),A=y>=1):-1!==R.indexOf("OpenGL ES")&&(y=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),A=y>=2);let P=null,C={};const D=e.getParameter(3088),F=e.getParameter(2978),I=(new n.L).fromArray(D),U=(new n.L).fromArray(F);function N(t,a,r){const n=new Uint8Array(4),i=e.createTexture();e.bindTexture(t,i),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(a+t,0,6408,1,1,0,6408,5121,n);return i}const O={};function G(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function W(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}O[3553]=N(3553,3553,1),O[34067]=N(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),l.setClear(0),G(2929),s.setFunc(r.vCF),V(!1),z(r.tm_),G(2884),H(r.jFi);const B={[r.bGH]:32774,[r.Wbm]:32778,[r.rOj]:32779};if(i)B[r.r_]=32775,B[r.Sm8]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(B[r.r_]=e.MIN_EXT,B[r.Sm8]=e.MAX_EXT)}const k={[r.c8b]:0,[r.ghN]:1,[r.KhW]:768,[r.k74]:770,[r.RlZ]:776,[r.Vdb]:774,[r.fSK]:772,[r.iWC]:769,[r.LgZ]:771,[r.Wpd]:775,[r.Hy8]:773};function H(t,a,n,i,o,s,l,u){if(t!==r.jFi){if(!1===d&&(G(3042),d=!0),t===r.Xaj)o=o||a,s=s||n,l=l||i,a===h&&o===M||(e.blendEquationSeparate(B[a],B[o]),h=a,M=o),n===m&&i===g&&s===b&&l===S||(e.blendFuncSeparate(k[n],k[i],k[s],k[l]),m=n,g=i,b=s,S=l),f=t,T=null;else if(t!==f||u!==T){if(h===r.bGH&&M===r.bGH||(e.blendEquation(32774),h=r.bGH,M=r.bGH),u)switch(t){case r.bdR:e.blendFuncSeparate(1,771,1,771);break;case r.WMw:e.blendFunc(1,1);break;case r.N4l:e.blendFuncSeparate(0,0,769,771);break;case r.M5h:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case r.bdR:e.blendFuncSeparate(770,771,1,771);break;case r.WMw:e.blendFunc(770,1);break;case r.N4l:e.blendFunc(0,769);break;case r.M5h:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,b=null,S=null,f=t,T=u}}else!0===d&&(W(3042),d=!1)}function V(t){x!==t&&(t?e.frontFace(2304):e.frontFace(2305),x=t)}function z(t){t!==r.PeU?(G(2884),t!==v&&(t===r.tm_?e.cullFace(1029):t===r.S2y?e.cullFace(1028):e.cullFace(1032))):W(2884),v=t}function X(t,a,r){t?(G(32823),E===a&&w===r||(e.polygonOffset(a,r),E=a,w=r)):W(32823)}function j(t){void 0===t&&(t=33984+L-1),P!==t&&(e.activeTexture(t),P=t)}return{buffers:{color:o,depth:s,stencil:l},enable:G,disable:W,bindFramebuffer:function(t,a){return c[t]!==a&&(e.bindFramebuffer(t,a),c[t]=a,i&&(36009===t&&(c[36160]=a),36160===t&&(c[36009]=a)),!0)},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:H,setMaterial:function(e,t){e.side===r.ehD?W(2884):G(2884);let a=e.side===r._Li;t&&(a=!a),V(a),e.blending===r.bdR&&!1===e.transparent?H(r.jFi):H(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);const n=e.stencilWrite;l.setTest(n),n&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),X(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?G(32926):W(32926)},setFlipSided:V,setCullFace:z,setLineWidth:function(t){t!==_&&(A&&e.lineWidth(t),_=t)},setPolygonOffset:X,setScissorTest:function(e){e?G(3089):W(3089)},activeTexture:j,bindTexture:function(t,a){null===P&&j();let r=C[P];void 0===r&&(r={type:void 0,texture:void 0},C[P]=r),r.type===t&&r.texture===a||(e.bindTexture(t,a||O[t]),r.type=t,r.texture=a)},unbindTexture:function(){const t=C[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===U.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),U.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===i&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},P=null,C={},c={},p=null,d=!1,f=null,h=null,m=null,g=null,M=null,b=null,S=null,T=!1,x=null,v=null,_=null,E=null,w=null,I.set(0,0,e.canvas.width,e.canvas.height),U.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),l.reset()}}}},1643:(e,t,a)=>{a.d(t,{w:()=>o});var r=a(1661),n=a(2043),i=a(392);function o(e,t,a,o,s,l,u){const c=s.isWebGL2,p=s.maxTextures,d=s.maxCubemapSize,f=s.maxTextureSize,h=s.maxSamples,m=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):void 0,g=new WeakMap;let M,b=!1;try{b="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function S(e,t){return b?new OffscreenCanvas(e,t):(0,i.c)("canvas")}function T(e,t,a,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?n.gy:Math.floor,o=r(i*e.width),s=r(i*e.height);void 0===M&&(M=S(o,s));const l=a?S(o,s):M;l.width=o,l.height=s;return l.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function x(e){return n.wt(e.width)&&n.wt(e.height)}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==r.TyD&&e.minFilter!==r.wem}function _(t){e.generateMipmap(t)}function E(a,r,n){if(!1===c)return r;if(null!==a){if(void 0!==e[a])return e[a];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+a+"'")}let i=r;return 6403===r&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===r&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===r&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325!==i&&33326!==i&&34842!==i&&34836!==i||t.get("EXT_color_buffer_float"),i}function w(e){return e===r.TyD||e===r.YLQ||e===r.aH4?9728:9729}function L(t){const a=t.target;a.removeEventListener("dispose",L),function(t){const a=o.get(t);if(void 0===a.__webglInit)return;e.deleteTexture(a.__webglTexture),o.remove(t)}(a),a.isVideoTexture&&g.delete(a),u.memory.textures--}function A(t){const a=t.target;a.removeEventListener("dispose",A),function(t){const a=t.texture,r=o.get(t),n=o.get(a);if(!t)return;void 0!==n.__webglTexture&&(e.deleteTexture(n.__webglTexture),u.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&e.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let t=0,r=a.length;t<r;t++){const r=o.get(a[t]);r.__webglTexture&&(e.deleteTexture(r.__webglTexture),u.memory.textures--),o.remove(a[t])}o.remove(a),o.remove(t)}(a)}let y=0;function R(e,t){const r=o.get(e);if(e.isVideoTexture&&function(e){const t=u.render.frame;g.get(e)!==t&&(g.set(e,t),e.update())}(e),e.version>0&&r.__version!==e.version){const a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void U(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}a.activeTexture(33984+t),a.bindTexture(3553,r.__webglTexture)}function P(t,n){const i=o.get(t);t.version>0&&i.__version!==t.version?function(t,n,i){if(6!==n.image.length)return;I(t,n),a.activeTexture(33984+i),a.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment),e.pixelStorei(37443,0);const o=n&&(n.isCompressedTexture||n.image[0].isCompressedTexture),s=n.image[0]&&n.image[0].isDataTexture,u=[];for(let e=0;e<6;e++)u[e]=o||s?s?n.image[e].image:n.image[e]:T(n.image[e],!1,!0,d);const p=x(u[0])||c,f=l.convert(n.format),h=l.convert(n.type),m=E(n.internalFormat,f,h,n.encoding);let g;if(F(34067,n,p),o)for(let e=0;e<6;e++){g=u[e].mipmaps;for(let t=0;t<g.length;t++){const i=g[t];n.format!==r.wk1&&n.format!==r.UCm?null!==f?a.compressedTexImage2D(34069+e,t,m,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):a.texImage2D(34069+e,t,m,i.width,i.height,0,f,h,i.data)}}else{g=n.mipmaps;for(let e=0;e<6;e++)if(s){a.texImage2D(34069+e,0,m,u[e].width,u[e].height,0,f,h,u[e].data);for(let t=0;t<g.length;t++){const r=g[t].image[e].image;a.texImage2D(34069+e,t+1,m,r.width,r.height,0,f,h,r.data)}}else{a.texImage2D(34069+e,0,m,f,h,u[e]);for(let t=0;t<g.length;t++){const r=g[t];a.texImage2D(34069+e,t+1,m,f,h,r.image[e])}}}v(n,p)&&_(34067);t.__version=n.version,n.onUpdate&&n.onUpdate(n)}(i,t,n):(a.activeTexture(33984+n),a.bindTexture(34067,i.__webglTexture))}const C={[r.rpg]:10497,[r.uWy]:33071,[r.OoA]:33648},D={[r.TyD]:9728,[r.YLQ]:9984,[r.aH4]:9986,[r.wem]:9729,[r.qyh]:9985,[r.D1R]:9987};function F(a,n,i){if(i?(e.texParameteri(a,10242,C[n.wrapS]),e.texParameteri(a,10243,C[n.wrapT]),32879!==a&&35866!==a||e.texParameteri(a,32882,C[n.wrapR]),e.texParameteri(a,10240,D[n.magFilter]),e.texParameteri(a,10241,D[n.minFilter])):(e.texParameteri(a,10242,33071),e.texParameteri(a,10243,33071),32879!==a&&35866!==a||e.texParameteri(a,32882,33071),n.wrapS===r.uWy&&n.wrapT===r.uWy||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(a,10240,w(n.magFilter)),e.texParameteri(a,10241,w(n.minFilter)),n.minFilter!==r.TyD&&n.minFilter!==r.wem&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const i=t.get("EXT_texture_filter_anisotropic");if(n.type===r.VzW&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&n.type===r.cLu&&!1===t.has("OES_texture_half_float_linear"))return;(n.anisotropy>1||o.get(n).__currentAnisotropy)&&(e.texParameterf(a,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(n.anisotropy,s.getMaxAnisotropy())),o.get(n).__currentAnisotropy=n.anisotropy)}}function I(t,a){void 0===t.__webglInit&&(t.__webglInit=!0,a.addEventListener("dispose",L),t.__webglTexture=e.createTexture(),u.memory.textures++)}function U(t,n,i){let o=3553;n.isDataTexture2DArray&&(o=35866),n.isDataTexture3D&&(o=32879),I(t,n),a.activeTexture(33984+i),a.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment),e.pixelStorei(37443,0);const s=function(e){return!c&&(e.wrapS!==r.uWy||e.wrapT!==r.uWy||e.minFilter!==r.TyD&&e.minFilter!==r.wem)}(n)&&!1===x(n.image),u=T(n.image,s,!1,f),p=x(u)||c,d=l.convert(n.format);let h,m=l.convert(n.type),g=E(n.internalFormat,d,m,n.encoding);F(o,n,p);const M=n.mipmaps;if(n.isDepthTexture)g=6402,c?g=n.type===r.VzW?36012:n.type===r.JQ4?33190:n.type===r.wJv?35056:33189:n.type===r.VzW&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),n.format===r.qkB&&6402===g&&n.type!==r.LsT&&n.type!==r.JQ4&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=r.LsT,m=l.convert(n.type)),n.format===r.brP&&6402===g&&(g=34041,n.type!==r.wJv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=r.wJv,m=l.convert(n.type))),a.texImage2D(3553,0,g,u.width,u.height,0,d,m,null);else if(n.isDataTexture)if(M.length>0&&p){for(let e=0,t=M.length;e<t;e++)h=M[e],a.texImage2D(3553,e,g,h.width,h.height,0,d,m,h.data);n.generateMipmaps=!1}else a.texImage2D(3553,0,g,u.width,u.height,0,d,m,u.data);else if(n.isCompressedTexture)for(let e=0,t=M.length;e<t;e++)h=M[e],n.format!==r.wk1&&n.format!==r.UCm?null!==d?a.compressedTexImage2D(3553,e,g,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):a.texImage2D(3553,e,g,h.width,h.height,0,d,m,h.data);else if(n.isDataTexture2DArray)a.texImage3D(35866,0,g,u.width,u.height,u.depth,0,d,m,u.data);else if(n.isDataTexture3D)a.texImage3D(32879,0,g,u.width,u.height,u.depth,0,d,m,u.data);else{const e=function(e,t,a){return!0===v(e,a)?Math.log2(Math.max(t.width,t.height))+1:e.mipmaps.length>0?e.mipmaps.length:1}(n,u,p),r=c&&!0!==n.isVideoTexture,i=void 0===t.__version;if(M.length>0&&p){r&&i&&a.texStorage2D(3553,e,g,M[0].width,M[0].height);for(let e=0,t=M.length;e<t;e++)h=M[e],r?a.texSubImage2D(3553,e,0,0,d,m,h):a.texImage2D(3553,e,g,d,m,h);n.generateMipmaps=!1}else r?(i&&a.texStorage2D(3553,e,g,u.width,u.height),a.texSubImage2D(3553,0,0,0,d,m,u)):a.texImage2D(3553,0,g,d,m,u)}v(n,p)&&_(o),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function N(t,r,n,i,s){const u=l.convert(n.format),c=l.convert(n.type),p=E(n.internalFormat,u,c,n.encoding);o.get(r).__hasExternalTextures||(32879===s||35866===s?a.texImage3D(s,0,p,r.width,r.height,r.depth,0,u,c,null):a.texImage2D(s,0,p,r.width,r.height,0,u,c,null)),a.bindFramebuffer(36160,t),r.useRenderToTexture?m.framebufferTexture2DMultisampleEXT(36160,i,s,o.get(n).__webglTexture,0,W(r)):e.framebufferTexture2D(36160,i,s,o.get(n).__webglTexture,0),a.bindFramebuffer(36160,null)}function O(t,a,n){if(e.bindRenderbuffer(36161,t),a.depthBuffer&&!a.stencilBuffer){let i=33189;if(n||a.useRenderToTexture){const t=a.depthTexture;t&&t.isDepthTexture&&(t.type===r.VzW?i=36012:t.type===r.JQ4&&(i=33190));const n=W(a);a.useRenderToTexture?m.renderbufferStorageMultisampleEXT(36161,n,i,a.width,a.height):e.renderbufferStorageMultisample(36161,n,i,a.width,a.height)}else e.renderbufferStorage(36161,i,a.width,a.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(a.depthBuffer&&a.stencilBuffer){const r=W(a);n&&a.useRenderbuffer?e.renderbufferStorageMultisample(36161,r,35056,a.width,a.height):a.useRenderToTexture?m.renderbufferStorageMultisampleEXT(36161,r,35056,a.width,a.height):e.renderbufferStorage(36161,34041,a.width,a.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===a.isWebGLMultipleRenderTargets?a.texture[0]:a.texture,r=l.convert(t.format),i=l.convert(t.type),o=E(t.internalFormat,r,i,t.encoding),s=W(a);n&&a.useRenderbuffer?e.renderbufferStorageMultisample(36161,s,o,a.width,a.height):a.useRenderToTexture?m.renderbufferStorageMultisampleEXT(36161,s,o,a.width,a.height):e.renderbufferStorage(36161,o,a.width,a.height)}e.bindRenderbuffer(36161,null)}function G(t){const n=o.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!n.__autoAllocateDepthBuffer){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(a.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");o.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),R(n.depthTexture,0);const i=o.get(n.depthTexture).__webglTexture,s=W(n);if(n.depthTexture.format===r.qkB)n.useRenderToTexture?m.framebufferTexture2DMultisampleEXT(36160,36096,3553,i,0,s):e.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==r.brP)throw new Error("Unknown depthTexture format");n.useRenderToTexture?m.framebufferTexture2DMultisampleEXT(36160,33306,3553,i,0,s):e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(let r=0;r<6;r++)a.bindFramebuffer(36160,n.__webglFramebuffer[r]),n.__webglDepthbuffer[r]=e.createRenderbuffer(),O(n.__webglDepthbuffer[r],t,!1)}else a.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),O(n.__webglDepthbuffer,t,!1);a.bindFramebuffer(36160,null)}function W(e){return c&&(e.useRenderbuffer||e.useRenderToTexture)?Math.min(h,e.samples):0}let B=!1,k=!1;this.allocateTextureUnit=function(){const e=y;return e>=p&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+p),y+=1,e},this.resetTextureUnits=function(){y=0},this.setTexture2D=R,this.setTexture2DArray=function(e,t){const r=o.get(e);e.version>0&&r.__version!==e.version?U(r,e,t):(a.activeTexture(33984+t),a.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){const r=o.get(e);e.version>0&&r.__version!==e.version?U(r,e,t):(a.activeTexture(33984+t),a.bindTexture(32879,r.__webglTexture))},this.setTextureCube=P,this.rebindTextures=function(e,t,a){const r=o.get(e);void 0!==t&&N(r.__webglFramebuffer,e,e.texture,36064,3553),void 0!==a&&G(e)},this.setupRenderTarget=function(t){const n=t.texture,i=o.get(t),p=o.get(n);t.addEventListener("dispose",A),!0!==t.isWebGLMultipleRenderTargets&&(void 0===p.__webglTexture&&(p.__webglTexture=e.createTexture()),p.__version=n.version,u.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,h=n.isDataTexture3D||n.isDataTexture2DArray,m=x(t)||c;if(!c||n.format!==r.UCm||n.type!==r.VzW&&n.type!==r.cLu||(n.format=r.wk1,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),d){i.__webglFramebuffer=[];for(let t=0;t<6;t++)i.__webglFramebuffer[t]=e.createFramebuffer()}else if(i.__webglFramebuffer=e.createFramebuffer(),f)if(s.drawBuffers){const a=t.texture;for(let t=0,r=a.length;t<r;t++){const r=o.get(a[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),u.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(t.useRenderbuffer)if(c){i.__webglMultisampledFramebuffer=e.createFramebuffer(),i.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,i.__webglColorRenderbuffer);const r=l.convert(n.format),o=l.convert(n.type),s=E(n.internalFormat,r,o,n.encoding),u=W(t);e.renderbufferStorageMultisample(36161,u,s,t.width,t.height),a.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(i.__webglDepthRenderbuffer=e.createRenderbuffer(),O(i.__webglDepthRenderbuffer,t,!0)),a.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(d){a.bindTexture(34067,p.__webglTexture),F(34067,n,m);for(let e=0;e<6;e++)N(i.__webglFramebuffer[e],t,n,36064,34069+e);v(n,m)&&_(34067),a.unbindTexture()}else if(f){const e=t.texture;for(let r=0,n=e.length;r<n;r++){const n=e[r],s=o.get(n);a.bindTexture(3553,s.__webglTexture),F(3553,n,m),N(i.__webglFramebuffer,t,n,36064+r,3553),v(n,m)&&_(3553)}a.unbindTexture()}else{let e=3553;if(h)if(c){e=n.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");a.bindTexture(e,p.__webglTexture),F(e,n,m),N(i.__webglFramebuffer,t,n,36064,e),v(n,m)&&_(e),a.unbindTexture()}t.depthBuffer&&G(t)},this.updateRenderTargetMipmap=function(e){const t=x(e)||c,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let n=0,i=r.length;n<i;n++){const i=r[n];if(v(i,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,r=o.get(i).__webglTexture;a.bindTexture(t,r),_(t),a.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.useRenderbuffer)if(c){const r=t.width,n=t.height;let i=16384;const s=[36064],l=t.stencilBuffer?33306:36096;t.depthBuffer&&s.push(l),t.ignoreDepthForMultisampleCopy||(t.depthBuffer&&(i|=256),t.stencilBuffer&&(i|=1024));const u=o.get(t);a.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),a.bindFramebuffer(36009,u.__webglFramebuffer),t.ignoreDepthForMultisampleCopy&&(e.invalidateFramebuffer(36008,[l]),e.invalidateFramebuffer(36009,[l])),e.blitFramebuffer(0,0,r,n,0,0,r,n,i,9728),e.invalidateFramebuffer(36008,s),a.bindFramebuffer(36008,null),a.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=G,this.setupFrameBufferTexture=N,this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===B&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),R(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===k&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),k=!0),e=e.texture),P(e,t)}}},1895:(e,t,a)=>{a.d(t,{y:()=>ce});var r=a(3882),n=a(4467),i=a(5491),o=a(7962);const s=new n.x,l=new i.C,u=new o.z,c=new r.B,p=[],d=[],f=new Float32Array(16),h=new Float32Array(9),m=new Float32Array(4);function g(e,t,a){const r=e[0];if(r<=0||r>0)return e;const n=t*a;let i=p[n];if(void 0===i&&(i=new Float32Array(n),p[n]=i),0!==t){r.toArray(i,0);for(let r=1,n=0;r!==t;++r)n+=a,e[r].toArray(i,n)}return i}function M(e,t){if(e.length!==t.length)return!1;for(let a=0,r=e.length;a<r;a++)if(e[a]!==t[a])return!1;return!0}function b(e,t){for(let a=0,r=t.length;a<r;a++)e[a]=t[a]}function S(e,t){let a=d[t];void 0===a&&(a=new Int32Array(t),d[t]=a);for(let r=0;r!==t;++r)a[r]=e.allocateTextureUnit();return a}function T(e,t){const a=this.cache;a[0]!==t&&(e.uniform1f(this.addr,t),a[0]=t)}function x(e,t){const a=this.cache;if(void 0!==t.x)a[0]===t.x&&a[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),a[0]=t.x,a[1]=t.y);else{if(M(a,t))return;e.uniform2fv(this.addr,t),b(a,t)}}function v(e,t){const a=this.cache;if(void 0!==t.x)a[0]===t.x&&a[1]===t.y&&a[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),a[0]=t.x,a[1]=t.y,a[2]=t.z);else if(void 0!==t.r)a[0]===t.r&&a[1]===t.g&&a[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),a[0]=t.r,a[1]=t.g,a[2]=t.b);else{if(M(a,t))return;e.uniform3fv(this.addr,t),b(a,t)}}function _(e,t){const a=this.cache;if(void 0!==t.x)a[0]===t.x&&a[1]===t.y&&a[2]===t.z&&a[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=t.w);else{if(M(a,t))return;e.uniform4fv(this.addr,t),b(a,t)}}function E(e,t){const a=this.cache,r=t.elements;if(void 0===r){if(M(a,t))return;e.uniformMatrix2fv(this.addr,!1,t),b(a,t)}else{if(M(a,r))return;m.set(r),e.uniformMatrix2fv(this.addr,!1,m),b(a,r)}}function w(e,t){const a=this.cache,r=t.elements;if(void 0===r){if(M(a,t))return;e.uniformMatrix3fv(this.addr,!1,t),b(a,t)}else{if(M(a,r))return;h.set(r),e.uniformMatrix3fv(this.addr,!1,h),b(a,r)}}function L(e,t){const a=this.cache,r=t.elements;if(void 0===r){if(M(a,t))return;e.uniformMatrix4fv(this.addr,!1,t),b(a,t)}else{if(M(a,r))return;f.set(r),e.uniformMatrix4fv(this.addr,!1,f),b(a,r)}}function A(e,t){const a=this.cache;a[0]!==t&&(e.uniform1i(this.addr,t),a[0]=t)}function y(e,t){const a=this.cache;M(a,t)||(e.uniform2iv(this.addr,t),b(a,t))}function R(e,t){const a=this.cache;M(a,t)||(e.uniform3iv(this.addr,t),b(a,t))}function P(e,t){const a=this.cache;M(a,t)||(e.uniform4iv(this.addr,t),b(a,t))}function C(e,t){const a=this.cache;a[0]!==t&&(e.uniform1ui(this.addr,t),a[0]=t)}function D(e,t){const a=this.cache;M(a,t)||(e.uniform2uiv(this.addr,t),b(a,t))}function F(e,t){const a=this.cache;M(a,t)||(e.uniform3uiv(this.addr,t),b(a,t))}function I(e,t){const a=this.cache;M(a,t)||(e.uniform4uiv(this.addr,t),b(a,t))}function U(e,t,a){const r=this.cache,n=a.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),a.safeSetTexture2D(t||s,n)}function N(e,t,a){const r=this.cache,n=a.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),a.setTexture3D(t||u,n)}function O(e,t,a){const r=this.cache,n=a.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),a.safeSetTextureCube(t||c,n)}function G(e,t,a){const r=this.cache,n=a.allocateTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),a.setTexture2DArray(t||l,n)}function W(e,t){e.uniform1fv(this.addr,t)}function B(e,t){const a=g(t,this.size,2);e.uniform2fv(this.addr,a)}function k(e,t){const a=g(t,this.size,3);e.uniform3fv(this.addr,a)}function H(e,t){const a=g(t,this.size,4);e.uniform4fv(this.addr,a)}function V(e,t){const a=g(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,a)}function z(e,t){const a=g(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,a)}function X(e,t){const a=g(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,a)}function j(e,t){e.uniform1iv(this.addr,t)}function Y(e,t){e.uniform2iv(this.addr,t)}function q(e,t){e.uniform3iv(this.addr,t)}function K(e,t){e.uniform4iv(this.addr,t)}function J(e,t){e.uniform1uiv(this.addr,t)}function Q(e,t){e.uniform2uiv(this.addr,t)}function Z(e,t){e.uniform3uiv(this.addr,t)}function $(e,t){e.uniform4uiv(this.addr,t)}function ee(e,t,a){const r=t.length,n=S(a,r);e.uniform1iv(this.addr,n);for(let e=0;e!==r;++e)a.safeSetTexture2D(t[e]||s,n[e])}function te(e,t,a){const r=t.length,n=S(a,r);e.uniform1iv(this.addr,n);for(let e=0;e!==r;++e)a.setTexture3D(t[e]||u,n[e])}function ae(e,t,a){const r=t.length,n=S(a,r);e.uniform1iv(this.addr,n);for(let e=0;e!==r;++e)a.safeSetTextureCube(t[e]||c,n[e])}function re(e,t,a){const r=t.length,n=S(a,r);e.uniform1iv(this.addr,n);for(let e=0;e!==r;++e)a.setTexture2DArray(t[e]||l,n[e])}function ne(e,t,a){this.id=e,this.addr=a,this.cache=[],this.setValue=function(e){switch(e){case 5126:return T;case 35664:return x;case 35665:return v;case 35666:return _;case 35674:return E;case 35675:return w;case 35676:return L;case 5124:case 35670:return A;case 35667:case 35671:return y;case 35668:case 35672:return R;case 35669:case 35673:return P;case 5125:return C;case 36294:return D;case 36295:return F;case 36296:return I;case 35678:case 36198:case 36298:case 36306:case 35682:return U;case 35679:case 36299:case 36307:return N;case 35680:case 36300:case 36308:case 36293:return O;case 36289:case 36303:case 36311:case 36292:return G}}(t.type)}function ie(e,t,a){this.id=e,this.addr=a,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return W;case 35664:return B;case 35665:return k;case 35666:return H;case 35674:return V;case 35675:return z;case 35676:return X;case 5124:case 35670:return j;case 35667:case 35671:return Y;case 35668:case 35672:return q;case 35669:case 35673:return K;case 5125:return J;case 36294:return Q;case 36295:return Z;case 36296:return $;case 35678:case 36198:case 36298:case 36306:case 35682:return ee;case 35679:case 36299:case 36307:return te;case 35680:case 36300:case 36308:case 36293:return ae;case 36289:case 36303:case 36311:case 36292:return re}}(t.type)}function oe(e){this.id=e,this.seq=[],this.map={}}ie.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),b(t,e)},oe.prototype.setValue=function(e,t,a){const r=this.seq;for(let n=0,i=r.length;n!==i;++n){const i=r[n];i.setValue(e,t[i.id],a)}};const se=/(\w+)(\])?(\[|\.)?/g;function le(e,t){e.seq.push(t),e.map[t.id]=t}function ue(e,t,a){const r=e.name,n=r.length;for(se.lastIndex=0;;){const i=se.exec(r),o=se.lastIndex;let s=i[1];const l="]"===i[2],u=i[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===n){le(a,void 0===u?new ne(s,e,t):new ie(s,e,t));break}{let e=a.map[s];void 0===e&&(e=new oe(s),le(a,e)),a=e}}}function ce(e,t){this.seq=[],this.map={};const a=e.getProgramParameter(t,35718);for(let r=0;r<a;++r){const a=e.getActiveUniform(t,r);ue(a,e.getUniformLocation(t,a.name),this)}}ce.prototype.setValue=function(e,t,a,r){const n=this.map[t];void 0!==n&&n.setValue(e,a,r)},ce.prototype.setOptional=function(e,t,a){const r=t[a];void 0!==r&&this.setValue(e,a,r)},ce.upload=function(e,t,a,r){for(let n=0,i=t.length;n!==i;++n){const i=t[n],o=a[i.id];!1!==o.needsUpdate&&i.setValue(e,o.value,r)}},ce.seqWithValue=function(e,t){const a=[];for(let r=0,n=e.length;r!==n;++r){const n=e[r];n.id in t&&a.push(n)}return a}},9627:(e,t,a)=>{a.d(t,{f:()=>n});var r=a(1661);function n(e,t,a){const n=a.isWebGL2;return{convert:function(e){let a;if(e===r.ywz)return 5121;if(e===r.k0A)return 32819;if(e===r.irR)return 32820;if(e===r.XNv)return 33635;if(e===r.T95)return 5120;if(e===r.iAb)return 5122;if(e===r.LsT)return 5123;if(e===r.Kz5)return 5124;if(e===r.JQ4)return 5125;if(e===r.VzW)return 5126;if(e===r.cLu)return n?5131:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(e===r.OTo)return 6406;if(e===r.UCm)return 6407;if(e===r.wk1)return 6408;if(e===r.Y8D)return 6409;if(e===r.cRx)return 6410;if(e===r.qkB)return 6402;if(e===r.brP)return 34041;if(e===r.hEm)return 6403;if(e===r.D9w)return 36244;if(e===r.av9)return 33319;if(e===r.CtA)return 33320;if(e===r.F5G)return 36248;if(e===r.E2K)return 36249;if(e===r.wuA||e===r.BFQ||e===r.v3W||e===r.ILR){if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(e===r.wuA)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===r.BFQ)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===r.v3W)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===r.ILR)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===r._AM||e===r.vCx||e===r.eaV||e===r.CaW){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(e===r._AM)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===r.vCx)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===r.eaV)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===r.CaW)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===r.fto)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===r.l0P||e===r.ekQ)&&(a=t.get("WEBGL_compressed_texture_etc"),null!==a)){if(e===r.l0P)return a.COMPRESSED_RGB8_ETC2;if(e===r.ekQ)return a.COMPRESSED_RGBA8_ETC2_EAC}return e===r.ptH||e===r.jZA||e===r.y2t||e===r.gi4||e===r.Djp||e===r.BG$||e===r.NYV||e===r.xJs||e===r.pKu||e===r.GG6||e===r.Gih||e===r.FUD||e===r.iiP||e===r.SvJ||e===r.APR||e===r.Abz||e===r.v6B||e===r.pnl||e===r.OS$||e===r._wO||e===r.bcs||e===r.Y5S||e===r.Wso||e===r.p1$||e===r.I0h||e===r.Yjz||e===r.ePn||e===r.HBG?(a=t.get("WEBGL_compressed_texture_astc"),null!==a?e:null):e===r.bsb?(a=t.get("EXT_texture_compression_bptc"),null!==a?e:null):e===r.wJv?n?34042:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}}}]);
"use strict";(self.webpackChunkouterspace_webpack=self.webpackChunkouterspace_webpack||[]).push([[218],{9975:(t,e,r)=>{r.d(e,{_Z:()=>yt});var n,i,s,a,o,p,f,c=r(5317),l={},h=180/Math.PI,u=Math.PI/180,g=Math.atan2,d=/([A-Z])/g,x=/(?:left|right|width|margin|padding|x)/i,m=/[\s,\(]\S/,y={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},v=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},b=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},w=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},O=function(t,e){var r=e.s+e.c*t;e.set(e.t,e.p,~~(r+(r<0?-.5:.5))+e.u,e)},_=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},P=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},M=function(t,e,r){return t.style[e]=r},F=function(t,e,r){return t.style.setProperty(e,r)},C=function(t,e,r){return t._gsap[e]=r},A=function(t,e,r){return t._gsap.scaleX=t._gsap.scaleY=r},S=function(t,e,r,n,i){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(i,s)},Y=function(t,e,r,n,i){var s=t._gsap;s[e]=r,s.renderTransform(i,s)},B="transform",k=B+"Origin",X=function(t,e){var r=i.createElementNS?i.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):i.createElement(t);return r.style?r:i.createElement(t)},T=function t(e,r,n){var i=getComputedStyle(e);return i[r]||i.getPropertyValue(r.replace(d,"-$1").toLowerCase())||i.getPropertyValue(r)||!n&&t(e,W(r)||r,1)||""},z="O,Moz,ms,Ms,Webkit".split(","),W=function(t,e,r){var n=(e||o).style,i=5;if(t in n&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(z[i]+t in n););return i<0?null:(3===i?"ms":i>=0?z[i]:"")+t},I=function(){"undefined"!=typeof window&&window.document&&(n=window,i=n.document,s=i.documentElement,o=X("div")||{style:{}},X("div"),B=W(B),k=B+"Origin",o.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",f=!!W("perspective"),a=1)},E=function t(e){var r,n=X("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,a=this.nextSibling,o=this.style.cssText;if(s.appendChild(n),n.appendChild(this),this.style.display="block",e)try{r=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(r=this._gsapBBox());return i&&(a?i.insertBefore(this,a):i.appendChild(this)),s.removeChild(n),this.style.cssText=o,r},N=function(t,e){for(var r=e.length;r--;)if(t.hasAttribute(e[r]))return t.getAttribute(e[r])},D=function(t){var e;try{e=t.getBBox()}catch(r){e=E.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===E||(e=E.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+N(t,["x","cx","x1"])||0,y:+N(t,["y","cy","y1"])||0,width:0,height:0}},V=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!D(t))},q=function(t,e){if(e){var r=t.style;e in l&&e!==k&&(e=B),r.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),r.removeProperty(e.replace(d,"-$1").toLowerCase())):r.removeAttribute(e)}},G=function(t,e,r,n,i,s){var a=new c.Fo(t._pt,e,r,0,1,s?P:_);return t._pt=a,a.b=n,a.e=i,t._props.push(r),a},Z={deg:1,rad:1,turn:1},L=function t(e,r,n,s){var a,p,f,h,u=parseFloat(n)||0,g=(n+"").trim().substr((u+"").length)||"px",d=o.style,m=x.test(r),y="svg"===e.tagName.toLowerCase(),v=(y?"client":"offset")+(m?"Width":"Height"),b=100,w="px"===s,O="%"===s;return s===g||!u||Z[s]||Z[g]?u:("px"!==g&&!w&&(u=t(e,r,n,"px")),h=e.getCTM&&V(e),!O&&"%"!==g||!l[r]&&!~r.indexOf("adius")?(d[m?"width":"height"]=b+(w?g:s),p=~r.indexOf("adius")||"em"===s&&e.appendChild&&!y?e:e.parentNode,h&&(p=(e.ownerSVGElement||{}).parentNode),p&&p!==i&&p.appendChild||(p=i.body),(f=p._gsap)&&O&&f.width&&m&&f.time===c.xr.time?(0,c.Pr)(u/f.width*b):((O||"%"===g)&&(d.position=T(e,"position")),p===e&&(d.position="static"),p.appendChild(o),a=o[v],p.removeChild(o),d.position="absolute",m&&O&&((f=(0,c.DY)(p)).time=c.xr.time,f.width=p[v]),(0,c.Pr)(w?a*u/b:a&&u?b/a*u:0))):(a=h?e.getBBox()[m?"width":"height"]:e[v],(0,c.Pr)(O?u/a*b:u/100*a)))},R=function(t,e,r,n){var i;return a||I(),e in y&&"transform"!==e&&~(e=y[e]).indexOf(",")&&(e=e.split(",")[0]),l[e]&&"transform"!==e?(i=nt(t,n),i="transformOrigin"!==e?i[e]:i.svg?i.origin:it(T(t,k))+" "+i.zOrigin+"px"):(!(i=t.style[e])||"auto"===i||n||~(i+"").indexOf("calc("))&&(i=$[e]&&$[e](t,e,r)||T(t,e)||(0,c.Ok)(t,e)||("opacity"===e?1:0)),r&&!~(i+"").trim().indexOf(" ")?L(t,e,i,r)+r:i},j=function(t,e,r,n){if(!r||"none"===r){var i=W(e,t,1),s=i&&T(t,i,1);s&&s!==r?(e=i,r=s):"borderColor"===e&&(r=T(t,"borderTopColor"))}var a,o,p,f,l,h,u,g,d,x,m,y,v=new c.Fo(this._pt,t.style,e,0,1,c.Ks),b=0,w=0;if(v.b=r,v.e=n,r+="","auto"===(n+="")&&(t.style[e]=n,n=T(t,e)||n,t.style[e]=r),a=[r,n],(0,c.kr)(a),n=a[1],p=(r=a[0]).match(c.d4)||[],(n.match(c.d4)||[]).length){for(;o=c.d4.exec(n);)u=o[0],d=n.substring(b,o.index),l?l=(l+1)%5:"rgba("!==d.substr(-5)&&"hsla("!==d.substr(-5)||(l=1),u!==(h=p[w++]||"")&&(f=parseFloat(h)||0,m=h.substr((f+"").length),(y="="===u.charAt(1)?+(u.charAt(0)+"1"):0)&&(u=u.substr(2)),g=parseFloat(u),x=u.substr((g+"").length),b=c.d4.lastIndex-x.length,x||(x=x||c.Fc.units[e]||m,b===n.length&&(n+=x,v.e+=x)),m!==x&&(f=L(t,e,h,x)||0),v._pt={_next:v._pt,p:d||1===w?d:",",s:f,c:y?y*g:g-f,m:l&&l<4||"zIndex"===e?Math.round:0});v.c=b<n.length?n.substring(b,n.length):""}else v.r="display"===e&&"none"===n?P:_;return c.bQ.test(n)&&(v.e=0),this._pt=v,v},H={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},U=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var r,n,i,s=e.t,a=s.style,o=e.u,p=s._gsap;if("all"===o||!0===o)a.cssText="",n=1;else for(i=(o=o.split(",")).length;--i>-1;)r=o[i],l[r]&&(n=1,r="transformOrigin"===r?k:B),q(s,r);n&&(q(s,B),p&&(p.svg&&s.removeAttribute("transform"),nt(s,1),p.uncache=1))}},$={clearProps:function(t,e,r,n,i){if("isFromStart"!==i.data){var s=t._pt=new c.Fo(t._pt,e,r,0,0,U);return s.u=n,s.pr=-10,s.tween=i,t._props.push(r),1}}},J=[1,0,0,1,0,0],K={},Q=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},tt=function(t){var e=T(t,B);return Q(e)?J:e.substr(7).match(c.SI).map(c.Pr)},et=function(t,e){var r,n,i,a,o=t._gsap||(0,c.DY)(t),p=t.style,f=tt(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(f=[(i=t.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?J:f:(f!==J||t.offsetParent||t===s||o.svg||(i=p.display,p.display="block",(r=t.parentNode)&&t.offsetParent||(a=1,n=t.nextSibling,s.appendChild(t)),f=tt(t),i?p.display=i:q(t,"display"),a&&(n?r.insertBefore(t,n):r?r.appendChild(t):s.removeChild(t))),e&&f.length>6?[f[0],f[1],f[4],f[5],f[12],f[13]]:f)},rt=function(t,e,r,n,i,s){var a,o,p,f=t._gsap,c=i||et(t,!0),l=f.xOrigin||0,h=f.yOrigin||0,u=f.xOffset||0,g=f.yOffset||0,d=c[0],x=c[1],m=c[2],y=c[3],v=c[4],b=c[5],w=e.split(" "),O=parseFloat(w[0])||0,_=parseFloat(w[1])||0;r?c!==J&&(o=d*y-x*m)&&(p=O*(-x/o)+_*(d/o)-(d*b-x*v)/o,O=O*(y/o)+_*(-m/o)+(m*b-y*v)/o,_=p):(O=(a=D(t)).x+(~w[0].indexOf("%")?O/100*a.width:O),_=a.y+(~(w[1]||w[0]).indexOf("%")?_/100*a.height:_)),n||!1!==n&&f.smooth?(v=O-l,b=_-h,f.xOffset=u+(v*d+b*m)-v,f.yOffset=g+(v*x+b*y)-b):f.xOffset=f.yOffset=0,f.xOrigin=O,f.yOrigin=_,f.smooth=!!n,f.origin=e,f.originIsAbsolute=!!r,t.style[k]="0px 0px",s&&(G(s,f,"xOrigin",l,O),G(s,f,"yOrigin",h,_),G(s,f,"xOffset",u,f.xOffset),G(s,f,"yOffset",g,f.yOffset)),t.setAttribute("data-svg-origin",O+" "+_)},nt=function(t,e){var r=t._gsap||new c.l1(t);if("x"in r&&!e&&!r.uncache)return r;var n,i,s,a,o,p,l,d,x,m,y,v,b,w,O,_,P,M,F,C,A,S,Y,X,z,W,I,E,N,D,q,G,Z=t.style,L=r.scaleX<0,R="px",j="deg",H=T(t,k)||"0";return n=i=s=p=l=d=x=m=y=0,a=o=1,r.svg=!(!t.getCTM||!V(t)),w=et(t,r.svg),r.svg&&(X=(!r.uncache||"0px 0px"===H)&&!e&&t.getAttribute("data-svg-origin"),rt(t,X||H,!!X||r.originIsAbsolute,!1!==r.smooth,w)),v=r.xOrigin||0,b=r.yOrigin||0,w!==J&&(M=w[0],F=w[1],C=w[2],A=w[3],n=S=w[4],i=Y=w[5],6===w.length?(a=Math.sqrt(M*M+F*F),o=Math.sqrt(A*A+C*C),p=M||F?g(F,M)*h:0,(x=C||A?g(C,A)*h+p:0)&&(o*=Math.abs(Math.cos(x*u))),r.svg&&(n-=v-(v*M+b*C),i-=b-(v*F+b*A))):(G=w[6],D=w[7],I=w[8],E=w[9],N=w[10],q=w[11],n=w[12],i=w[13],s=w[14],l=(O=g(G,N))*h,O&&(X=S*(_=Math.cos(-O))+I*(P=Math.sin(-O)),z=Y*_+E*P,W=G*_+N*P,I=S*-P+I*_,E=Y*-P+E*_,N=G*-P+N*_,q=D*-P+q*_,S=X,Y=z,G=W),d=(O=g(-C,N))*h,O&&(_=Math.cos(-O),q=A*(P=Math.sin(-O))+q*_,M=X=M*_-I*P,F=z=F*_-E*P,C=W=C*_-N*P),p=(O=g(F,M))*h,O&&(X=M*(_=Math.cos(O))+F*(P=Math.sin(O)),z=S*_+Y*P,F=F*_-M*P,Y=Y*_-S*P,M=X,S=z),l&&Math.abs(l)+Math.abs(p)>359.9&&(l=p=0,d=180-d),a=(0,c.Pr)(Math.sqrt(M*M+F*F+C*C)),o=(0,c.Pr)(Math.sqrt(Y*Y+G*G)),O=g(S,Y),x=Math.abs(O)>2e-4?O*h:0,y=q?1/(q<0?-q:q):0),r.svg&&(X=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!Q(T(t,B)),X&&t.setAttribute("transform",X))),Math.abs(x)>90&&Math.abs(x)<270&&(L?(a*=-1,x+=p<=0?180:-180,p+=p<=0?180:-180):(o*=-1,x+=x<=0?180:-180)),r.x=n-((r.xPercent=n&&(r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-n)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+R,r.y=i-((r.yPercent=i&&(r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+R,r.z=s+R,r.scaleX=(0,c.Pr)(a),r.scaleY=(0,c.Pr)(o),r.rotation=(0,c.Pr)(p)+j,r.rotationX=(0,c.Pr)(l)+j,r.rotationY=(0,c.Pr)(d)+j,r.skewX=x+j,r.skewY=m+j,r.transformPerspective=y+R,(r.zOrigin=parseFloat(H.split(" ")[2])||0)&&(Z[k]=it(H)),r.xOffset=r.yOffset=0,r.force3D=c.Fc.force3D,r.renderTransform=r.svg?lt:f?ct:at,r.uncache=0,r},it=function(t){return(t=t.split(" "))[0]+" "+t[1]},st=function(t,e,r){var n=(0,c.Wy)(e);return(0,c.Pr)(parseFloat(e)+parseFloat(L(t,"x",r+"px",n)))+n},at=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,ct(t,e)},ot="0deg",pt="0px",ft=") ",ct=function(t,e){var r=e||this,n=r.xPercent,i=r.yPercent,s=r.x,a=r.y,o=r.z,p=r.rotation,f=r.rotationY,c=r.rotationX,l=r.skewX,h=r.skewY,g=r.scaleX,d=r.scaleY,x=r.transformPerspective,m=r.force3D,y=r.target,v=r.zOrigin,b="",w="auto"===m&&t&&1!==t||!0===m;if(v&&(c!==ot||f!==ot)){var O,_=parseFloat(f)*u,P=Math.sin(_),M=Math.cos(_);_=parseFloat(c)*u,O=Math.cos(_),s=st(y,s,P*O*-v),a=st(y,a,-Math.sin(_)*-v),o=st(y,o,M*O*-v+v)}x!==pt&&(b+="perspective("+x+ft),(n||i)&&(b+="translate("+n+"%, "+i+"%) "),(w||s!==pt||a!==pt||o!==pt)&&(b+=o!==pt||w?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+ft),p!==ot&&(b+="rotate("+p+ft),f!==ot&&(b+="rotateY("+f+ft),c!==ot&&(b+="rotateX("+c+ft),l===ot&&h===ot||(b+="skew("+l+", "+h+ft),1===g&&1===d||(b+="scale("+g+", "+d+ft),y.style[B]=b||"translate(0, 0)"},lt=function(t,e){var r,n,i,s,a,o=e||this,p=o.xPercent,f=o.yPercent,l=o.x,h=o.y,g=o.rotation,d=o.skewX,x=o.skewY,m=o.scaleX,y=o.scaleY,v=o.target,b=o.xOrigin,w=o.yOrigin,O=o.xOffset,_=o.yOffset,P=o.forceCSS,M=parseFloat(l),F=parseFloat(h);g=parseFloat(g),d=parseFloat(d),(x=parseFloat(x))&&(d+=x=parseFloat(x),g+=x),g||d?(g*=u,d*=u,r=Math.cos(g)*m,n=Math.sin(g)*m,i=Math.sin(g-d)*-y,s=Math.cos(g-d)*y,d&&(x*=u,a=Math.tan(d-x),i*=a=Math.sqrt(1+a*a),s*=a,x&&(a=Math.tan(x),r*=a=Math.sqrt(1+a*a),n*=a)),r=(0,c.Pr)(r),n=(0,c.Pr)(n),i=(0,c.Pr)(i),s=(0,c.Pr)(s)):(r=m,s=y,n=i=0),(M&&!~(l+"").indexOf("px")||F&&!~(h+"").indexOf("px"))&&(M=L(v,"x",l,"px"),F=L(v,"y",h,"px")),(b||w||O||_)&&(M=(0,c.Pr)(M+b-(b*r+w*i)+O),F=(0,c.Pr)(F+w-(b*n+w*s)+_)),(p||f)&&(a=v.getBBox(),M=(0,c.Pr)(M+p/100*a.width),F=(0,c.Pr)(F+f/100*a.height)),a="matrix("+r+","+n+","+i+","+s+","+M+","+F+")",v.setAttribute("transform",a),P&&(v.style[B]=a)},ht=function(t,e,r,n,i,s){var a,o,p=360,f=(0,c.r9)(i),l=parseFloat(i)*(f&&~i.indexOf("rad")?h:1),u=s?l*s:l-n,g=n+u+"deg";return f&&("short"===(a=i.split("_")[1])&&(u%=p)!==u%180&&(u+=u<0?p:-360),"cw"===a&&u<0?u=(u+36e9)%p-~~(u/p)*p:"ccw"===a&&u>0&&(u=(u-36e9)%p-~~(u/p)*p)),t._pt=o=new c.Fo(t._pt,e,r,n,u,b),o.e=g,o.u="deg",t._props.push(r),o},ut=function(t,e){for(var r in e)t[r]=e[r];return t},gt=function(t,e,r){var n,i,s,a,o,p,f,h=ut({},r._gsap),u=r.style;for(i in h.svg?(s=r.getAttribute("transform"),r.setAttribute("transform",""),u[B]=e,n=nt(r,1),q(r,B),r.setAttribute("transform",s)):(s=getComputedStyle(r)[B],u[B]=e,n=nt(r,1),u[B]=s),l)(s=h[i])!==(a=n[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(o=(0,c.Wy)(s)!==(f=(0,c.Wy)(a))?L(r,i,s,f):parseFloat(s),p=parseFloat(a),t._pt=new c.Fo(t._pt,n,i,o,p-o,v),t._pt.u=f||0,t._props.push(i));ut(n,h)};(0,c.fS)("padding,margin,Width,Radius",(function(t,e){var r="Top",n="Right",i="Bottom",s="Left",a=(e<3?[r,n,i,s]:[r+s,r+n,i+n,i+s]).map((function(r){return e<2?t+r:"border"+r+t}));$[e>1?"border"+t:t]=function(t,e,r,n,i){var s,o;if(arguments.length<4)return s=a.map((function(e){return R(t,e,r)})),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(n+"").split(" "),o={},a.forEach((function(t,e){return o[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,o,i)}}));var dt,xt,mt,yt={name:"css",register:I,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,r,n,i){var s,o,p,f,h,u,g,d,x,b,_,P,M,F,C,A,S,Y,k,X=this._props,T=t.style,z=r.vars.startAt;for(g in a||I(),e)if("autoRound"!==g&&(o=e[g],!c.$i[g]||!(0,c.if)(g,e,r,n,t,i)))if(h=typeof o,u=$[g],"function"===h&&(h=typeof(o=o.call(r,n,t,i))),"string"===h&&~o.indexOf("random(")&&(o=(0,c.UI)(o)),u)u(this,t,g,o,r)&&(C=1);else if("--"===g.substr(0,2))s=(getComputedStyle(t).getPropertyValue(g)+"").trim(),o+="",c.GN.lastIndex=0,c.GN.test(s)||(d=(0,c.Wy)(s),x=(0,c.Wy)(o)),x?d!==x&&(s=L(t,g,s,x)+x):d&&(o+=d),this.add(T,"setProperty",s,o,n,i,0,0,g),X.push(g);else if("undefined"!==h){if(z&&g in z?(s="function"==typeof z[g]?z[g].call(r,n,t,i):z[g],g in c.Fc.units&&!(0,c.Wy)(s)&&(s+=c.Fc.units[g]),(0,c.r9)(s)&&~s.indexOf("random(")&&(s=(0,c.UI)(s)),"="===(s+"").charAt(1)&&(s=R(t,g))):s=R(t,g),f=parseFloat(s),(b="string"===h&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0)&&(o=o.substr(2)),p=parseFloat(o),g in y&&("autoAlpha"===g&&(1===f&&"hidden"===R(t,"visibility")&&p&&(f=0),G(this,T,"visibility",f?"inherit":"hidden",p?"inherit":"hidden",!p)),"scale"!==g&&"transform"!==g&&~(g=y[g]).indexOf(",")&&(g=g.split(",")[0])),_=g in l)if(P||((M=t._gsap).renderTransform&&!e.parseTransform||nt(t,e.parseTransform),F=!1!==e.smoothOrigin&&M.smooth,(P=this._pt=new c.Fo(this._pt,T,B,0,1,M.renderTransform,M,0,-1)).dep=1),"scale"===g)this._pt=new c.Fo(this._pt,M,"scaleY",M.scaleY,(b?b*p:p-M.scaleY)||0),X.push("scaleY",g),g+="X";else{if("transformOrigin"===g){S=void 0,Y=void 0,k=void 0,S=(A=o).split(" "),Y=S[0],k=S[1]||"50%","top"!==Y&&"bottom"!==Y&&"left"!==k&&"right"!==k||(A=Y,Y=k,k=A),S[0]=H[Y]||Y,S[1]=H[k]||k,o=S.join(" "),M.svg?rt(t,o,0,F,0,this):((x=parseFloat(o.split(" ")[2])||0)!==M.zOrigin&&G(this,M,"zOrigin",M.zOrigin,x),G(this,T,g,it(s),it(o)));continue}if("svgOrigin"===g){rt(t,o,1,F,0,this);continue}if(g in K){ht(this,M,g,f,o,b);continue}if("smoothOrigin"===g){G(this,M,"smooth",M.smooth,o);continue}if("force3D"===g){M[g]=o;continue}if("transform"===g){gt(this,o,t);continue}}else g in T||(g=W(g)||g);if(_||(p||0===p)&&(f||0===f)&&!m.test(o)&&g in T)p||(p=0),(d=(s+"").substr((f+"").length))!==(x=(0,c.Wy)(o)||(g in c.Fc.units?c.Fc.units[g]:d))&&(f=L(t,g,s,x)),this._pt=new c.Fo(this._pt,_?M:T,g,f,b?b*p:p-f,_||"px"!==x&&"zIndex"!==g||!1===e.autoRound?v:O),this._pt.u=x||0,d!==x&&"%"!==x&&(this._pt.b=s,this._pt.r=w);else if(g in T)j.call(this,t,g,s,o);else{if(!(g in t)){(0,c.lC)(g,o);continue}this.add(t,g,s||t[g],o,n,i)}X.push(g)}C&&(0,c.JV)(this)},get:R,aliases:y,getSetter:function(t,e,r){var n=y[e];return n&&n.indexOf(",")<0&&(e=n),e in l&&e!==k&&(t._gsap.x||R(t,"x"))?r&&p===r?"scale"===e?A:C:(p=r||{})&&("scale"===e?S:Y):t.style&&!(0,c.m2)(t.style[e])?M:~e.indexOf("-")?F:(0,c.S5)(t,e)},core:{_removeProperty:q,_getMatrix:et}};c.p8.utils.checkPrefix=W,dt="x,y,z,scale,scaleX,scaleY,xPercent,yPercent",xt="rotation,rotationX,rotationY,skewX,skewY",mt=(0,c.fS)(dt+","+xt+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){l[t]=1})),(0,c.fS)(xt,(function(t){c.Fc.units[t]="deg",K[t]=1})),y[mt[13]]=dt+","+xt,(0,c.fS)("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");y[e[1]]=mt[e[0]]})),(0,c.fS)("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){c.Fc.units[t]="px"})),c.p8.registerPlugin(yt)}}]);

